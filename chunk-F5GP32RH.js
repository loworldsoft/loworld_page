import{b as vt,c as Ct}from"./chunk-IMG4NYIR.js";import{b as ft}from"./chunk-7WHTN2YU.js";import{a as _t,b as gt}from"./chunk-MQEEND4T.js";import{b as pt}from"./chunk-63ILED6C.js";import{d as bt}from"./chunk-SJJ4OJOD.js";import{a as ht,b as ut}from"./chunk-UFNXZ2RB.js";import{a as at,b as nt,d as it,e as ot,h as rt,k as st,l as lt,m as ct,p as dt,q as I,r as mt}from"./chunk-VMMX27LC.js";import{g as J}from"./chunk-4GOVHTBW.js";import{Z as F,da as w,fa as tt,ia as et}from"./chunk-32NNWNAI.js";import{$ as v,A as j,C as L,E as Q,F as G,I as W,M as q,N as $,V as Y,W as U,X as K,Z,_ as X,ba as k,e as M,m as z}from"./chunk-4DTSJNKC.js";import{Eb as E,Jb as l,Kb as n,Lb as i,Mb as b,Qb as A,Ub as g,Vb as f,Z as T,Za as s,_ as p,ba as S,cb as d,g as H,ha as O,ia as R,ic as r,jb as y,jc as u,kb as _,pb as m}from"./chunk-F2JKNDFL.js";var yt=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=_({type:t});static \u0275inj=p({imports:[F,F]})}return t})();var h=class t{STORAGE_KEY="chat_talk_auth";CREDENTIALS={username:"admin",password:"9920"};isAuthenticatedSubject=new H(this.checkAuthStatus());isAuthenticated$=this.isAuthenticatedSubject.asObservable();constructor(){this.initAuth()}initAuth(){this.isAuthenticatedSubject.next(this.checkAuthStatus())}login(a,e){if(a===this.CREDENTIALS.username&&e===this.CREDENTIALS.password){let o=this.generateToken(a);return this.saveToken(o),this.isAuthenticatedSubject.next(!0),!0}return!1}logout(){localStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.STORAGE_KEY),this.isAuthenticatedSubject.next(!1)}isAuthenticated(){return this.checkAuthStatus()}getCurrentUser(){let a=this.getToken();if(!a)return null;try{let e=JSON.parse(a);return new Date().getTime()-e.timestamp>24*60*60*1e3?(this.logout(),null):{username:e.username}}catch{return this.logout(),null}}checkAuthStatus(){let a=this.getToken();if(!a)return!1;try{let e=JSON.parse(a);return new Date().getTime()-e.timestamp>24*60*60*1e3?(this.logout(),!1):!0}catch{return!1}}generateToken(a){let e={username:a,timestamp:new Date().getTime()};return JSON.stringify(e)}saveToken(a){localStorage.setItem(this.STORAGE_KEY,a),sessionStorage.setItem(this.STORAGE_KEY,a)}getToken(){return localStorage.getItem(this.STORAGE_KEY)||sessionStorage.getItem(this.STORAGE_KEY)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};function Pt(t,a){if(t&1){let e=A();n(0,"div",6)(1,"div",7)(2,"mat-icon"),r(3,"account_circle"),i(),n(4,"span"),r(5),i()(),n(6,"button",8),g("click",function(){O(e);let c=f();return R(c.onLogout())}),n(7,"mat-icon"),r(8,"logout"),i()()()}if(t&2){let e=f();s(5),u(e.currentUser.username)}}var P=class t{constructor(a,e){this.authService=a;this.router=e}currentUser=null;ngOnInit(){this.currentUser=this.authService.getCurrentUser()}onLogout(){this.authService.logout(),this.router.navigate(["/chat-talk/login"])}static \u0275fac=function(e){return new(e||t)(d(h),d(v))};static \u0275cmp=y({type:t,selectors:[["app-chat-talk"]],standalone:!1,decls:10,vars:1,consts:[[1,"chat-talk-container"],[1,"chat-talk-header"],[1,"header-left"],[1,"logo-icon"],["class","header-right",4,"ngIf"],[1,"chat-talk-content"],[1,"header-right"],[1,"user-info"],["mat-icon-button","","matTooltip","\uB85C\uADF8\uC544\uC6C3",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),r(4,"chat"),i(),n(5,"h1"),r(6,"\uCC44\uD305\uC0C1\uB2F4 \uC2DC\uC2A4\uD15C"),i()(),m(7,Pt,9,1,"div",4),i(),n(8,"div",5),b(9,"router-outlet"),i()()),e&2&&(s(7),l("ngIf",o.currentUser))},dependencies:[M,X,w,I,_t],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}.chat-talk-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;background:#f5f7fa}.chat-talk-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 2px 8px #0000001a;z-index:10}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#fff3;border-radius:20px;font-size:14px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.chat-talk-content[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column}@media (max-width: 768px){.chat-talk-header[_ngcontent-%COMP%]{padding:12px 16px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}.chat-talk-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{gap:8px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.chat-talk-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]})};function Dt(t,a){if(t&1&&(n(0,"div",22)(1,"mat-icon"),r(2,"error_outline"),i(),n(3,"span"),r(4),i()()),t&2){let e=f();s(4),u(e.errorMessage)}}function Bt(t,a){t&1&&(n(0,"mat-error"),r(1," \uC544\uC774\uB514\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function St(t,a){t&1&&(n(0,"mat-error"),r(1," \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 "),i())}function Ot(t,a){t&1&&(n(0,"mat-icon"),r(1,"login"),i())}function Rt(t,a){t&1&&b(0,"mat-spinner",23)}var D=class t{constructor(a,e,o,c){this.fb=a;this.authService=e;this.router=o;this.route=c;this.loginForm=this.fb.group({username:["",[L.required]],password:["",[L.required]]})}loginForm;errorMessage="";isLoading=!1;returnUrl="/chat-talk/client/home";hidePassword=!0;ngOnInit(){if(this.authService.isAuthenticated()){this.router.navigate([this.returnUrl]);return}this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/chat-talk/client/home"}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{username:a,password:e}=this.loginForm.value;this.authService.login(a,e)?setTimeout(()=>{this.isLoading=!1,this.router.navigateByUrl(this.returnUrl).then(()=>{console.log("Navigation successful to:",this.returnUrl)}).catch(c=>{console.error("Navigation error:",c),this.router.navigate(["/chat-talk/client/home"])})},300):(this.errorMessage="\uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.isLoading=!1)}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static \u0275fac=function(e){return new(e||t)(d(Y),d(h),d(v),d(Z))};static \u0275cmp=y({type:t,selectors:[["app-chat-talk-login"]],standalone:!1,decls:43,vars:11,consts:[[1,"chat-talk-login-container"],[1,"login-card"],[1,"login-header"],[1,"logo"],[1,"logo-icon"],[1,"subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],["class","error-message",4,"ngIf"],["appearance","outline",1,"full-width"],["matInput","","type","text","formControlName","username","placeholder","\uC544\uC774\uB514\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","username"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20",4,"ngIf"],[1,"login-footer"],[1,"help-text"],[1,"background-decoration"],[1,"bubble","bubble-1"],[1,"bubble","bubble-2"],[1,"bubble","bubble-3"],[1,"error-message"],["diameter","20"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),r(5,"chat"),i()(),n(6,"h1"),r(7,"\uCC44\uD305\uC0C1\uB2F4 \uC2DC\uC2A4\uD15C"),i(),n(8,"p",5),r(9,"\uAD00\uB9AC\uC790 \uB85C\uADF8\uC778"),i()(),n(10,"form",6),g("ngSubmit",function(){return o.onSubmit()}),m(11,Dt,5,1,"div",7),n(12,"mat-form-field",8)(13,"mat-label"),r(14,"\uC544\uC774\uB514"),i(),b(15,"input",9),n(16,"mat-icon",10),r(17,"person"),i(),m(18,Bt,2,0,"mat-error",11),i(),n(19,"mat-form-field",8)(20,"mat-label"),r(21,"\uBE44\uBC00\uBC88\uD638"),i(),b(22,"input",12),n(23,"mat-icon",10),r(24,"lock"),i(),n(25,"button",13),g("click",function(){return o.togglePasswordVisibility()}),n(26,"mat-icon"),r(27),i()(),m(28,St,2,0,"mat-error",11),i(),n(29,"button",14),m(30,Ot,2,0,"mat-icon",11)(31,Rt,1,0,"mat-spinner",15),n(32,"span"),r(33),i()()(),n(34,"div",16)(35,"p",17)(36,"mat-icon"),r(37,"info"),i(),r(38," \uAD00\uB9AC\uC790 \uACC4\uC815\uC73C\uB85C\uB9CC \uC811\uC18D \uAC00\uB2A5\uD569\uB2C8\uB2E4 "),i()()(),n(39,"div",18),b(40,"div",19)(41,"div",20)(42,"div",21),i()()),e&2){let c,V;s(10),l("formGroup",o.loginForm),s(),l("ngIf",o.errorMessage),s(7),l("ngIf",(c=o.loginForm.get("username"))==null?null:c.hasError("required")),s(4),l("type",o.hidePassword?"password":"text"),s(3),E("aria-label","\uBE44\uBC00\uBC88\uD638 "+(o.hidePassword?"\uBCF4\uAE30":"\uC228\uAE30\uAE30")),s(2),u(o.hidePassword?"visibility_off":"visibility"),s(),l("ngIf",(V=o.loginForm.get("password"))==null?null:V.hasError("required")),s(),l("disabled",o.loginForm.invalid||o.isLoading),s(),l("ngIf",!o.isLoading),s(),l("ngIf",o.isLoading),s(2),u(o.isLoading?"\uB85C\uADF8\uC778 \uC911...":"\uB85C\uADF8\uC778")}},dependencies:[M,W,j,Q,G,q,$,rt,at,nt,it,ot,lt,tt,w,I,ht],styles:[".chat-talk-login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden;padding:20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;padding:40px;width:100%;max-width:420px;position:relative;z-index:1;animation:_ngcontent-%COMP%_slideUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:80px;height:80px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;margin-bottom:20px;box-shadow:0 10px 25px #667eea66}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#fff}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0 0 8px;color:#2d3748}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:16px;color:#718096;margin:0}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fee;border:1px solid #fcc;border-radius:8px;color:#c33;font-size:14px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background:#f7fafc}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-focus-overlay{background:transparent}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{height:50px;font-size:16px;font-weight:600;border-radius:10px;margin-top:10px;display:flex;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,#667eea,#764ba2);transition:all .3s ease}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 10px 25px #667eea66;transform:translateY(-2px)}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:disabled{background:#cbd5e0}.chat-talk-login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}.chat-talk-login-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.chat-talk-login-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;font-size:14px;color:#718096;margin:0}.chat-talk-login-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none;overflow:hidden}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{position:absolute;background:#ffffff1a;border-radius:50%;animation:_ngcontent-%COMP%_float 6s infinite ease-in-out}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble.bubble-1[_ngcontent-%COMP%]{width:80px;height:80px;top:10%;left:10%;animation-delay:0s}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble.bubble-2[_ngcontent-%COMP%]{width:120px;height:120px;top:60%;right:10%;animation-delay:2s}.chat-talk-login-container[_ngcontent-%COMP%]   .background-decoration[_ngcontent-%COMP%]   .bubble.bubble-3[_ngcontent-%COMP%]{width:60px;height:60px;bottom:20%;left:20%;animation-delay:4s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}@media (max-width: 480px){.chat-talk-login-container[_ngcontent-%COMP%]{padding:10px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:30px 20px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:60px;height:60px}.chat-talk-login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}}"]})};var x=class t{constructor(a,e){this.authService=a;this.router=e}canActivate(a,e){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/chat-talk/login"],{queryParams:{returnUrl:e.url}}),!1)}static \u0275fac=function(e){return new(e||t)(S(h),S(v))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var Et=[{path:"login",component:D},{path:"",component:P,children:[{path:"client",loadChildren:()=>import("./chunk-HSJPN7LI.js").then(t=>t.ChatTalkClientModule),canActivate:[x]},{path:"agent",loadChildren:()=>import("./chunk-JFHX3EC5.js").then(t=>t.ChatTalkAgentModule),canActivate:[x]},{path:"",redirectTo:"agent",pathMatch:"full"}]},{path:"**",redirectTo:"login"}],B=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=_({type:t});static \u0275inj=p({imports:[k.forChild(Et),k]})};var xt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=_({type:t});static \u0275inj=p({imports:[z,k,B,K,U,st,ct,et,mt,yt,Ct,dt,gt,bt,vt,ft,ut,J,pt]})};export{xt as a};
