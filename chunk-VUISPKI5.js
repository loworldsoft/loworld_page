import{$a as k,B as U,Oa as Y,Pa as G,Qa as J,Ra as K,Ya as D,_a as g}from"./chunk-3HC7CDKU.js";import{Cb as l,Da as T,Ib as W,Jb as V,Ka as u,Kb as A,Lb as y,Mb as v,Nb as o,Ob as r,Pb as f,Sb as Q,Wb as j,Yb as C,a as s,b as m,bc as x,cc as _,dc as M,fb as a,gb as F,h as O,hc as w,ic as b,id as B,kd as N,ld as q,ma as p,mb as I,nb as E,qa as h,qc as H,sb as P,sc as $,tc as S,uc as z,vc as L,xb as R}from"./chunk-6NI24FLG.js";var ne=["container"];function ie(t,c){if(t&1&&f(0,"app-icon-button",3),t&2){let n=C();l("config",n.buttonConfig)}}var Z=(()=>{class t extends Y{constructor(){super(...arguments),this.calendarVM=p(g),this.dialog=p(U),this.renderer=p(I),this.schedules=new O,this.isOver=!1,this.buttonConfig={data:{icon:"add"},style:{height:"100%"},event:()=>{this.dialog.open(k,{data:{schedule:{},eventType:"create"},height:"auto"})}},this.headerButton={width:"20px",height:"20px",padding:"0"},this.headerIcon={fontSize:"20px"},this.dateBox={width:"25px",height:"25px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},this.cellContainer={width:"100%",height:"100%",margin:"0"}}ngOnInit(){let n=D.fromISO(this.data.date),e=D.now();this.dateBox=n.hasSame(e,"day")?m(s({},this.dateBox),{color:"white",backgroundColor:"red",borderRadius:"20%"}):s({},this.dateBox),this.cellContainer=this.calendarVM.isSameMonth(n)?s({},this.cellContainer):m(s({},this.cellContainer),{color:"lightgray"}),this.cellContainer=n.isWeekend?m(s({},this.cellContainer),{backgroundColor:"#F0F1F4"}):s({},this.cellContainer),this.initData()}initData(){this.calendarVM.getSchedule(this.data.date).subscribe(n=>{this.container.clear(),n.forEach(e=>{let i=this.container.createComponent(G),d={data:{text:e.scheduleName},style:{width:"100%",height:"15%",borderRadius:"3%",fontSize:"15px",backgroundColor:e.color,overflow:"clip"},event:()=>{console.log("\uBC84\uD2BC \uC774\uBCA4\uD2B8"),this.dialog.open(k,{data:{schedule:e,eventType:"update"}})}};i.setInput("config",d)})})}showButton(){this.isOver=!0}hideButton(){this.isOver=!1}openDialog(){this.dialog.open(k)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=T(t)))(i||t)}})()}static{this.\u0275cmp=h({type:t,selectors:[["app-calendar-cell"]],viewQuery:function(e,i){if(e&1&&x(ne,7,E),e&2){let d;_(d=M())&&(i.container=d.first)}},hostBindings:function(e,i){e&1&&j("mouseover",function(){return i.showButton()})("mouseleave",function(){return i.hideButton()})},features:[P],decls:10,vars:7,consts:[["container",""],[1,"cell-container",3,"ngStyle"],[1,"calendar-header"],[3,"config"],[1,"header-date",3,"ngStyle"],[1,"calendar-body"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"div",2)(2,"div"),R(3,ie,1,1,"app-icon-button",3),r(),o(4,"div",4),w(5),S(6,"date"),r()(),o(7,"div",5),Q(8,null,0),r()()),e&2&&(l("ngStyle",i.cellContainer),a(3),W(i.isOver?3:-1),a(),l("ngStyle",i.dateBox),a(),b(L(6,4,i.data.date,"d")))},dependencies:[B,J,q],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:5px;padding-left:5px;padding-top:5px;margin-bottom:5px}.calendar-body[_ngcontent-%COMP%]{flex:1}"]})}}return t})();var oe=["WeekContainer"],re=()=>({}),le=(t,c)=>({date:t,data:c});function de(t,c){if(t&1&&(o(0,"div",4),w(1),r()),t&2){let n=c.$implicit,e=C();l("ngStyle",e.dateTitle),a(),b(n)}}function se(t,c){if(t&1&&(o(0,"div",4),f(1,"app-calendar-cell",7),r()),t&2){let n=c.$implicit,e=C(2);l("ngStyle",e.dateCell),a(),l("data",$(3,le,n,H(2,re)))}}function ce(t,c){if(t&1&&(o(0,"div",6,1),y(2,se,2,6,"div",4,A),r()),t&2){let n=c.$implicit;a(2),v(n)}}var ee=(()=>{class t{constructor(n){this.elementRef=n,this.calendarVM=p(g),this.daysOfWeek=["\uC77C","\uC6D4","\uD654","\uC218","\uBAA9","\uAE08","\uD1A0"],this.dateCell={},this.dateTitle={height:"30px"},this.dates=this.calendarVM.getDates(),this.weekDates=this.calendarVM.getWeekDates()}ngOnInit(){console.log(this.calendarVM.datesByWeek$.getValue())}ngAfterViewInit(){let n=this.elementRef.nativeElement.getBoundingClientRect(),e=this.WeekContainer.nativeElement.getBoundingClientRect();console.log(n.width),this.dateTitle=m(s({},this.dateTitle),{textAlign:"center",border:"1px solid rgba(0, 0, 0, 0.1)",padding:"5px",flex:"1"}),console.log("\uB192\uC774",n.height/this.calendarVM.getWeekInMonth(this.calendarVM.baseDate$.getValue())+"px"),this.dateCell={width:"100%",textAlign:"center",border:"1px solid rgba(0, 0, 0, 0.1)"}}static{this.\u0275fac=function(e){return new(e||t)(F(u))}}static{this.\u0275cmp=h({type:t,selectors:[["app-calendar"]],viewQuery:function(e,i){if(e&1&&x(oe,5,u),e&2){let d;_(d=M())&&(i.WeekContainer=d.first)}},decls:9,vars:2,consts:[["container",""],["WeekContainer",""],[1,"container"],[1,"date-title"],[3,"ngStyle"],[1,"calendar-grid"],[1,"week"],[3,"data"]],template:function(e,i){e&1&&(o(0,"div",2,0)(2,"div",3),y(3,de,2,2,"div",4,V),r(),o(5,"div",5),y(6,ce,4,0,"div",6,V),S(8,"async"),r()()),e&2&&(a(3),v(i.daysOfWeek),a(3),v(z(8,0,i.weekDates)))},dependencies:[B,Z,N],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;display:flex;flex-direction:column}.date-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.calendar-grid[_ngcontent-%COMP%]{flex:1;display:grid;grid-template-rows:repeat(auto-fill,1fr);grid-auto-rows:1fr;align-items:stretch}.week[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr)}.calendar-header[_ngcontent-%COMP%]{display:flex}']})}}return t})();var Ee=(()=>{class t{constructor(){this.calendarVM=p(g),this.toolbarData={data:this.calendarVM.getYearMonth(),buttonConfigs:[{data:{text:"\uC9C0\uB09C\uB2EC"},event:()=>this.calendarVM.previousMonth()},{data:{text:"\uC624\uB298"},style:{color:"red",fontWeight:"bold"},event:()=>this.calendarVM.moveToday()},{data:{text:"\uB2E4\uC74C\uB2EC"},event:()=>this.calendarVM.nextMonth()}]}}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-calendar-layout"]],decls:3,vars:1,consts:[[1,"container"],[3,"data"],[1,"container-content"]],template:function(e,i){e&1&&(o(0,"div",0),f(1,"app-toolbar",1)(2,"app-calendar",2),r()),e&2&&(a(),l("data",i.toolbarData))},dependencies:[ee,K],styles:["[_nghost-%COMP%]{flex:1}.container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;display:flex;flex-direction:column}.container-content[_ngcontent-%COMP%]{flex:1;background-color:#fff}"]})}}return t})();export{Ee as a};
