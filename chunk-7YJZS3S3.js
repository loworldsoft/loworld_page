import{c as sn}from"./chunk-CWA3ILTN.js";import{a as _n}from"./chunk-W7N4YSBT.js";import{d as an}from"./chunk-IWQBX2MY.js";import"./chunk-63ILED6C.js";import{d as gn}from"./chunk-SJJ4OJOD.js";import"./chunk-OHCGPQQI.js";import{b as pn}from"./chunk-UFNXZ2RB.js";import{k as rn,m as cn,p as ln,q as dn,r as Tt}from"./chunk-VMMX27LC.js";import{c as on}from"./chunk-RCTOHDVS.js";import"./chunk-QGOB64YG.js";import{a as Ze,b as Qe,c as Je,g as It}from"./chunk-4GOVHTBW.js";import{A as Ye,D as We,E as Xe,Z as Ke,da as tn,ea as en,f as je,fa as nn,g as qe,h as Et,ia as Bt,j as lt,m as Ue,n as K,q as He}from"./chunk-32NNWNAI.js";import{$ as rt,A as wt,E as St,H as Dt,O as Ge,P as ze,Q as Ve,U as Le,Z as $e,ba as ne,c as Ne,d as Fe,e as yt,m as kt,s as tt,u as Re}from"./chunk-4DTSJNKC.js";import{$b as te,Aa as Kt,B as Q,Eb as z,F as Me,Jb as p,Kb as r,Lb as a,Mb as I,Mc as vt,Nb as De,Ob as Ee,Q as Oe,Qb as x,R as xe,Rc as ee,S as Pt,Sc as Ae,U as ve,Ub as C,Vb as g,Z as F,Za as s,Zb as Qt,_ as W,_b as Jt,a as et,aa as ct,ab as Zt,ba as st,c as Ht,ca as E,cb as N,eb as we,ec as V,f as T,fc as w,g as ft,h as Pe,ha as h,hc as q,ia as f,ic as c,ja as j,jb as Y,jc as u,ka as bt,kb as X,kc as b,l as L,la as ye,lb as Mt,lc as B,ma as Wt,mc as Ie,oc as nt,p as H,pb as P,pc as ot,qc as it,rb as J,sa as Xt,sb as Ot,tb as Se,tc as xt,uc as Be,wc as Te,x as be,xa as ke,y as Yt}from"./chunk-F2JKNDFL.js";import{a as ht,b as fe,e as v}from"./chunk-JKOY2XUY.js";var mn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=X({type:i});static \u0275inj=W({imports:[Ke,en]})}return i})();function Sn(i){let e=i.cloneNode(!0),t=e.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();e.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return n==="canvas"?hn(i,e):(n==="input"||n==="select"||n==="textarea")&&un(i,e),Cn("canvas",i,e,hn),Cn("input, textarea, select",i,e,un),e}function Cn(i,e,t,n){let o=e.querySelectorAll(i);if(o.length){let l=t.querySelectorAll(i);for(let d=0;d<o.length;d++)n(o[d],l[d])}}var $n=0;function un(i,e){e.type!=="file"&&(e.value=i.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${$n++}`)}function hn(i,e){let t=e.getContext("2d");if(t)try{t.drawImage(i,0,0)}catch{}}function ge(i){let e=i.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function re(i,e,t){let{top:n,bottom:o,left:l,right:d}=i;return t>=n&&t<=o&&e>=l&&e<=d}function jn(i,e){let t=e.left<i.left,n=e.left+e.width>i.right,o=e.top<i.top,l=e.top+e.height>i.bottom;return t||n||o||l}function pt(i,e,t){i.top+=e,i.bottom=i.top+i.height,i.left+=t,i.right=i.left+i.width}function fn(i,e,t,n){let{top:o,right:l,bottom:d,left:_,width:m,height:M}=i,O=m*e,y=M*e;return n>o-y&&n<d+y&&t>_-O&&t<l+O}var At=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ge(t)})})}handleScroll(e){let t=lt(e),n=this.positions.get(t);if(!n)return null;let o=n.scrollPosition,l,d;if(t===this._document){let M=this.getViewportScrollPosition();l=M.top,d=M.left}else l=t.scrollTop,d=t.scrollLeft;let _=o.top-l,m=o.left-d;return this.positions.forEach((M,O)=>{M.clientRect&&t!==O&&t.contains(O)&&pt(M.clientRect,_,m)}),o.top=l,o.left=d,{top:_,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Dn(i,e){let t=i.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let n=e.createElement("div");return t.forEach(o=>n.appendChild(o)),n}function pe(i,e,t){for(let n in e)if(e.hasOwnProperty(n)){let o=e[n];o?i.setProperty(n,o,t?.has(n)?"important":""):i.removeProperty(n)}return i}function at(i,e){let t=e?"":"none";pe(i.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Pn(i,e,t){pe(i.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Nt(i,e){return e&&e!="none"?i+" "+e:i}function bn(i,e){i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.transform=_t(e.left,e.top)}function _t(i,e){return`translate3d(${Math.round(i)}px, ${Math.round(e)}px, 0)`}function Mn(i){let e=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*e}function qn(i){let e=getComputedStyle(i),t=oe(e,"transition-property"),n=t.find(_=>_==="transform"||_==="all");if(!n)return 0;let o=t.indexOf(n),l=oe(e,"transition-duration"),d=oe(e,"transition-delay");return Mn(l[o])+Mn(d[o])}function oe(i,e){return i.getPropertyValue(e).split(",").map(n=>n.trim())}var Un=new Set(["position"]),ae=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,n,o,l,d,_,m,M,O){this._document=e,this._rootElement=t,this._direction=n,this._initialDomRect=o,this._previewTemplate=l,this._previewClass=d,this._pickupPositionOnPage=_,this._initialTransform=m,this._zIndex=M,this._renderer=O}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),On(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return qn(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,n=e?e.template:null,o;if(n&&e){let l=e.matchSize?this._initialDomRect:null,d=e.viewContainer.createEmbeddedView(n,e.context);d.detectChanges(),o=Dn(d,this._document),this._previewEmbeddedView=d,e.matchSize?bn(o,l):o.style.transform=_t(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=Sn(this._rootElement),bn(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return pe(o.style,{"pointer-events":"none",margin:On(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Un),at(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(l=>o.classList.add(l)):o.classList.add(t)),o}};function On(i){return"showPopover"in i}var Hn={passive:!0},xn={passive:!1},Yn={passive:!1,capture:!0},Wn=800,vn=new Set(["position"]),ce=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Xt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new T;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=et.EMPTY;_pointerUpSubscription=et.EMPTY;_scrollSubscription=et.EMPTY;_resizeSubscription=et.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>at(t,e)))}_disabled=!1;beforeStarted=new T;started=new T;released=new T;ended=new T;entered=new T;exited=new T;dropped=new T;moved=this._moveEvents;data;constrainPosition;constructor(e,t,n,o,l,d,_){this._config=t,this._document=n,this._ngZone=o,this._viewportRuler=l,this._dragDropRegistry=d,this._renderer=_,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new At(n),d.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(n=>K(n)),this._handles.forEach(n=>at(n,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=K(e);if(t!==this._rootElement){this._removeRootElementListeners();let n=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[n.listen(t,"mousedown",this._pointerDown,xn),n.listen(t,"touchstart",this._pointerDown,Hn),n.listen(t,"dragstart",this._nativeDragStart,xn)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?K(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&jn(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),n=0,o=0;t.left<e.left?n=e.left-t.left:t.right>e.right&&(n=e.right-t.right),t.top<e.top?o=e.top-t.top:t.bottom>e.bottom&&(o=e.bottom-t.bottom);let l=this._activeTransform.x,d=this._activeTransform.y,_=l+n,m=d+o;this._rootElement.style.transform=_t(_,m),this._activeTransform={x:_,y:m},this._passiveTransform={x:_,y:m}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),at(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),at(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let o=Math.abs(t.x-this._pickupPositionOnPage.x),l=Math.abs(t.y-this._pickupPositionOnPage.y);if(o+l>=this._config.dragStartThreshold){let _=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),m=this._dropContainer;if(!_){this._endDragSequence(e);return}(!m||!m.isDragging()&&!m.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,t);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,l=this._activeTransform;l.x=n.x-o.x+this._passiveTransform.x,l.y=n.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(l.x,l.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){dt(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),n=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",Xn,Yn)}),n){let o=this._rootElement,l=o.parentNode,d=this._placeholder=this._createPlaceholderElement(),_=this._anchor=this._anchor||this._document.createComment("");l.insertBefore(_,o),this._initialTransform=o.style.transform||"",this._preview=new ae(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(l,t)),Pn(o,!1,vn),this._document.body.appendChild(l.replaceChild(d,o)),this.started.next({source:this,event:e}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let n=this.isDragging(),o=dt(t),l=!o&&t.button!==0,d=this._rootElement,_=lt(t),m=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+Wn>Date.now(),M=o?qe(t):je(t);if(_&&_.draggable&&t.type==="mousedown"&&t.preventDefault(),n||l||m||M)return;if(this._handles.length){let D=d.style;this._rootElementTapHighlight=D.webkitTapHighlightColor||"",D.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>this._updateOnScroll(D)),this._boundaryElement&&(this._boundaryRect=ge(this._boundaryElement));let O=this._previewTemplate;this._pickupPositionInElement=O&&O.template&&!O.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let y=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:y.x,y:y.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Pn(this._rootElement,!0,vn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,n=t.getItemIndex(this),o=this._getPointerPositionOnPage(e),l=this._getDragDistance(o),d=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:l,dropPoint:o,event:e}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:d,distance:l,dropPoint:o,event:e}),t.drop(this,n,this._initialIndex,this._initialContainer,d,l,o,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:o}){let l=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!l&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(l=this._initialContainer),l&&l!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=l,this._dropContainer.enter(this,e,t,l===this._initialContainer&&l.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:l,currentIndex:l.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{let o=_=>{(!_||this._preview&&lt(_)===this._preview.element&&_.propertyName==="transform")&&(d(),n(),clearTimeout(l))},l=setTimeout(o,t*1.5),d=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=Dn(this._placeholderRef,this._document)):n=Sn(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t,n){let o=t===this._rootElement?null:t,l=o?o.getBoundingClientRect():e,d=dt(n)?n.targetTouches[0]:n,_=this._getViewportScrollPosition(),m=d.pageX-l.left-_.left,M=d.pageY-l.top-_.top;return{x:l.left-e.left+m,y:l.top-e.top+M}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),n=dt(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,o=n.pageX-t.left,l=n.pageY-t.top;if(this._ownerSVGElement){let d=this._ownerSVGElement.getScreenCTM();if(d){let _=this._ownerSVGElement.createSVGPoint();return _.x=o,_.y=l,_.matrixTransform(d.inverse())}}return{x:o,y:l}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:n,y:o}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:l,y:d}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,_=this._boundaryRect,{width:m,height:M}=this._getPreviewRect(),O=_.top+d,y=_.bottom-(M-d),D=_.left+l,S=_.right-(m-l);n=yn(n,D,S),o=yn(o,O,y)}return{x:n,y:o}}_updatePointerDirectionDelta(e){let{x:t,y:n}=e,o=this._pointerDirectionDelta,l=this._pointerPositionAtLastDirectionChange,d=Math.abs(t-l.x),_=Math.abs(n-l.y);return d>this._config.pointerDirectionChangeThreshold&&(o.x=t>l.x?1:-1,l.x=t),_>this._config.pointerDirectionChangeThreshold&&(o.y=n>l.y?1:-1,l.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,at(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let n=1/this.scale,o=_t(e*n,t*n),l=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=l.transform&&l.transform!="none"?l.transform:""),l.transform=Nt(o,this._initialTransform)}_applyPreviewTransform(e,t){let n=this._previewTemplate?.template?void 0:this._initialTransform,o=_t(e,t);this._preview.setTransform(Nt(o,n))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||n.width===0&&n.height===0)return;let l=o.left-n.left,d=n.right-o.right,_=o.top-n.top,m=n.bottom-o.bottom;o.width>n.width?(l>0&&(e+=l),d>0&&(e-=d)):e=0,o.height>n.height?(_>0&&(t+=_),m>0&&(t-=m)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:dt(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let n=lt(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&pt(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Et(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let n=this._previewContainer||"global";if(n==="parent")return e;if(n==="global"){let o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return K(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function yn(i,e,t){return Math.max(e,Math.min(t,i))}function dt(i){return i.type[0]==="t"}function Xn(i){i.preventDefault()}function En(i,e,t){let n=kn(e,i.length-1),o=kn(t,i.length-1);if(n===o)return;let l=i[n],d=o<n?-1:1;for(let _=n;_!==o;_+=d)i[_]=i[_+d];i[o]=l}function kn(i,e){return Math.max(0,Math.min(e,i))}var Ft=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,n,o){let l=this._itemPositions,d=this._getItemIndexFromPointerPosition(e,t,n,o);if(d===-1&&l.length>0)return null;let _=this.orientation==="horizontal",m=l.findIndex(R=>R.drag===e),M=l[d],O=l[m].clientRect,y=M.clientRect,D=m>d?1:-1,S=this._getItemOffsetPx(O,y,D),A=this._getSiblingOffsetPx(m,l,D),ut=l.slice();return En(l,m,d),l.forEach((R,k)=>{if(ut[k]===R)return;let Ce=R.drag===e,Ut=Ce?S:A,ue=Ce?e.getPlaceholderElement():R.drag.getRootElement();R.offset+=Ut;let he=Math.round(R.offset*(1/R.drag.scale));_?(ue.style.transform=Nt(`translate3d(${he}px, 0, 0)`,R.initialTransform),pt(R.clientRect,0,Ut)):(ue.style.transform=Nt(`translate3d(0, ${he}px, 0)`,R.initialTransform),pt(R.clientRect,Ut,0))}),this._previousSwap.overlaps=re(y,t,n),this._previousSwap.drag=M.drag,this._previousSwap.delta=_?o.x:o.y,{previousIndex:m,currentIndex:d}}enter(e,t,n,o){let l=o==null||o<0?this._getItemIndexFromPointerPosition(e,t,n):o,d=this._activeDraggables,_=d.indexOf(e),m=e.getPlaceholderElement(),M=d[l];if(M===e&&(M=d[l+1]),!M&&(l==null||l===-1||l<d.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(M=d[0]),_>-1&&d.splice(_,1),M&&!this._dragDropRegistry.isDragging(M)){let O=M.getRootElement();O.parentElement.insertBefore(m,O),d.splice(l,0,e)}else this._element.appendChild(m),d.push(e);m.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let n=this._itemPositions.find(o=>o.drag===e)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:n})=>{pt(n,e,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:ge(n)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(e,t,n){let o=this.orientation==="horizontal",l=o?t.left-e.left:t.top-e.top;return n===-1&&(l+=o?t.width-e.width:t.height-e.height),l}_getSiblingOffsetPx(e,t,n){let o=this.orientation==="horizontal",l=t[e].clientRect,d=t[e+n*-1],_=l[o?"width":"height"]*n;if(d){let m=o?"left":"top",M=o?"right":"bottom";n===-1?_-=d.clientRect[m]-l[M]:_+=l[m]-d.clientRect[M]}return _}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let n=this._itemPositions,o=this.orientation==="horizontal";if(n[0].drag!==this._activeDraggables[0]){let d=n[n.length-1].clientRect;return o?e>=d.right:t>=d.bottom}else{let d=n[0].clientRect;return o?e<=d.left:t<=d.top}}_getItemIndexFromPointerPosition(e,t,n,o){let l=this.orientation==="horizontal",d=this._itemPositions.findIndex(({drag:_,clientRect:m})=>{if(_===e)return!1;if(o){let M=l?o.x:o.y;if(_===this._previousSwap.drag&&this._previousSwap.overlaps&&M===this._previousSwap.delta)return!1}return l?t>=Math.floor(m.left)&&t<Math.floor(m.right):n>=Math.floor(m.top)&&n<Math.floor(m.bottom)});return d===-1||!this._sortPredicate(d,e)?-1:d}},se=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let n=0;n<t.length;n++){let o=t[n];this._relatedNodes.push([o,o.nextSibling])}this.withItems(e)}sort(e,t,n,o){let l=this._getItemIndexFromPointerPosition(e,t,n),d=this._previousSwap;if(l===-1||this._activeItems[l]===e)return null;let _=this._activeItems[l];if(d.drag===_&&d.overlaps&&d.deltaX===o.x&&d.deltaY===o.y)return null;let m=this.getItemIndex(e),M=e.getPlaceholderElement(),O=_.getRootElement();l>m?O.after(M):O.before(M),En(this._activeItems,m,l);let y=this._getRootNode().elementFromPoint(t,n);return d.deltaX=o.x,d.deltaY=o.y,d.drag=_,d.overlaps=O===y||O.contains(y),{previousIndex:m,currentIndex:l}}enter(e,t,n,o){let l=o==null||o<0?this._getItemIndexFromPointerPosition(e,t,n):o;l===-1&&(l=this._getClosestItemIndexToPointer(e,t,n));let d=this._activeItems[l],_=this._activeItems.indexOf(e);_>-1&&this._activeItems.splice(_,1),d&&!this._dragDropRegistry.isDragging(d)?(this._activeItems.splice(l,0,e),d.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let n=this._relatedNodes.length-1;n>-1;n--){let[o,l]=this._relatedNodes[n];o.parentNode===e&&o.nextSibling!==l&&(l===null?e.appendChild(o):l.parentNode===e&&e.insertBefore(o,l))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,n){let o=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(n)),l=o?this._activeItems.findIndex(d=>{let _=d.getRootElement();return o===_||_.contains(o)}):-1;return l===-1||!this._sortPredicate(l,e)?-1:l}_getRootNode(){return this._rootNode||(this._rootNode=Et(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,n){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,l=-1;for(let d=0;d<this._activeItems.length;d++){let _=this._activeItems[d];if(_!==e){let{x:m,y:M}=_.getRootElement().getBoundingClientRect(),O=Math.hypot(t-m,n-M);O<o&&(o=O,l=d)}}return l}},wn=.05,In=.05,U=function(i){return i[i.NONE=0]="NONE",i[i.UP=1]="UP",i[i.DOWN=2]="DOWN",i}(U||{}),G=function(i){return i[i.NONE=0]="NONE",i[i.LEFT=1]="LEFT",i[i.RIGHT=2]="RIGHT",i}(G||{}),le=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new T;entered=new T;exited=new T;dropped=new T;sorted=new T;receivingStarted=new T;receivingStopped=new T;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=et.EMPTY;_verticalScrollDirection=U.NONE;_horizontalScrollDirection=G.NONE;_scrollNode;_stopScrollTimers=new T;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,n,o,l){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=l;let d=this.element=K(e);this._document=n,this.withOrientation("vertical").withElementContainer(d),t.registerDropContainer(this),this._parentPositions=new At(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,o,l,d,_,m={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:l,distance:d,dropPoint:_,event:m})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>e.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Ft&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new se(this._document,this._dragDropRegistry);else{let t=new Ft(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,n)=>this.sortPredicate(t,n,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=K(this.element),n=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(e);return n>-1&&this._scrollableElements.splice(n,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,o){if(this.sortingDisabled||!this._domRect||!fn(this._domRect,wn,t,n))return;let l=this._sortStrategy.sort(e,t,n,o);l&&this.sorted.next({previousIndex:l.previousIndex,currentIndex:l.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,o=U.NONE,l=G.NONE;if(this._parentPositions.positions.forEach((d,_)=>{_===this._document||!d.clientRect||n||fn(d.clientRect,wn,e,t)&&([o,l]=Kn(_,d.clientRect,this._direction,e,t),(o||l)&&(n=_))}),!o&&!l){let{width:d,height:_}=this._viewportRuler.getViewportSize(),m={width:d,height:_,top:0,right:d,bottom:_,left:0};o=Bn(m,t),l=Tn(m,e),n=window}n&&(o!==this._verticalScrollDirection||l!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=l,this._scrollNode=n,(o||l)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),be(0,Pe).pipe(Pt(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===U.UP?e.scrollBy(0,-t):this._verticalScrollDirection===U.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===G.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===G.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&re(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(o=>o._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._domRect||!re(this._domRect,t,n)||!this.enterPredicate(e,this))return!1;let o=this._getShadowRoot().elementFromPoint(t,n);return o?o===this._container||this._container.contains(o):!1}_startReceiving(e,t){let n=this._activeSiblings;!n.has(e)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Et(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function Bn(i,e){let{top:t,bottom:n,height:o}=i,l=o*In;return e>=t-l&&e<=t+l?U.UP:e>=n-l&&e<=n+l?U.DOWN:U.NONE}function Tn(i,e){let{left:t,right:n,width:o}=i,l=o*In;return e>=t-l&&e<=t+l?G.LEFT:e>=n-l&&e<=n+l?G.RIGHT:G.NONE}function Kn(i,e,t,n,o){let l=Bn(e,o),d=Tn(e,n),_=U.NONE,m=G.NONE;if(l){let M=i.scrollTop;l===U.UP?M>0&&(_=U.UP):i.scrollHeight-M>i.clientHeight&&(_=U.DOWN)}if(d){let M=i.scrollLeft;t==="rtl"?d===G.RIGHT?M<0&&(m=G.RIGHT):i.scrollWidth+M>i.clientWidth&&(m=G.LEFT):d===G.LEFT?M>0&&(m=G.LEFT):i.scrollWidth-M>i.clientWidth&&(m=G.RIGHT)}return[_,m]}var gt={capture:!0},ie={passive:!1,capture:!0},Zn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Y({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(n,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return i})(),_e=(()=>{class i{_ngZone=E(Ot);_document=E(Wt);_styleLoader=E(He);_renderer=E(Zt).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new T;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Xt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new T;pointerUp=new T;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,ie)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,n){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(Zn),this._activeDragInstances.update(o=>[...o,t]),this._activeDragInstances().length===1)){let o=n.type.startsWith("touch"),l=_=>this.pointerUp.next(_),d=[["scroll",_=>this._scroll.next(_),gt],["selectstart",this._preventDefaultWhileDragging,ie]];o?d.push(["touchend",l,gt],["touchcancel",l,gt]):d.push(["mouseup",l,gt]),o||d.push(["mousemove",_=>this.pointerMove.next(_),ie]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=d.map(([_,m,M])=>this._renderer.listen(this._document,_,m,M))})}}stopDragging(t){this._activeDragInstances.update(n=>{let o=n.indexOf(t);return o>-1?(n.splice(o,1),[...n]):n}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let n=[this._scroll];return t&&t!==this._document&&n.push(new Ht(o=>this._ngZone.runOutsideAngular(()=>{let l=this._renderer.listen(t,"scroll",d=>{this._activeDragInstances().length&&o.next(d)},gt);return()=>{l()}}))),Yt(...n)}registerDirectiveNode(t,n){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,n)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(n){return new(n||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},An=(()=>{class i{_document=E(Wt);_ngZone=E(Ot);_viewportRuler=E(We);_dragDropRegistry=E(_e);_renderer=E(Zt).createRenderer(null,null);constructor(){}createDrag(t,n=Qn){return new ce(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new le(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),de=new ct("CDK_DRAG_PARENT");var Nn=new ct("CdkDragHandle"),Fn=(()=>{class i{element=E(Kt);_parentDrag=E(de,{optional:!0,skipSelf:!0});_dragDropRegistry=E(_e);_stateChanges=new T;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let n=this._dragDropRegistry.getDragDirectiveForNode(t);if(n){this._parentDrag=n,n._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(n){return new(n||i)};static \u0275dir=Mt({type:i,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",ee]},features:[xt([{provide:Nn,useExisting:i}])]})}return i})(),Jn=new ct("CDK_DRAG_CONFIG"),to=new ct("CdkDropList"),Rn=(()=>{class i{element=E(Kt);dropContainer=E(to,{optional:!0,skipSelf:!0});_ngZone=E(Ot);_viewContainerRef=E(we);_dir=E(Ye,{optional:!0});_changeDetectorRef=E(vt);_selfHandle=E(Nn,{optional:!0,self:!0});_parentDrag=E(de,{optional:!0,skipSelf:!0});_dragDropRegistry=E(_e);_destroyed=new T;_handles=new ft([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new J;released=new J;ended=new J;entered=new J;exited=new J;dropped=new J;moved=new Ht(t=>{let n=this._dragRef.moved.pipe(H(o=>({source:this,pointerPosition:o.pointerPosition,event:o.event,delta:o.delta,distance:o.distance}))).subscribe(t);return()=>{n.unsubscribe()}});_injector=E(ye);constructor(){let t=this.dropContainer,n=E(Jn,{optional:!0}),o=E(An);this._dragRef=o.createDrag(this.element,{dragStartThreshold:n&&n.dragStartThreshold!=null?n.dragStartThreshold:5,pointerDirectionChangeThreshold:n&&n.pointerDirectionChangeThreshold!=null?n.pointerDirectionChangeThreshold:5,zIndex:n?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),n&&this._assignDefaults(n),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this),t._dropListRef.beforeStarted.pipe(Pt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Se(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let n=t.rootElementSelector,o=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let n=this._handles.getValue();n.push(t),this._handles.next(n)}_removeHandle(t){let n=this._handles.getValue(),o=n.indexOf(t);o>-1&&(n.splice(o,1),this._handles.next(n))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,n=t;this.rootElementSelector&&(n=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):K(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let n=this._dir,o=this.dragStartDelay,l=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,d=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof o=="object"&&o?o:Ue(o),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(d).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe(Me(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let n=this.element.nativeElement.parentElement;for(;n;){let o=this._dragDropRegistry.getDragDirectiveForNode(n);if(o){t.withParent(o._dragRef);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){let{lockAxis:n,dragStartDelay:o,constrainPosition:l,previewClass:d,boundaryElement:_,draggingDisabled:m,rootElementSelector:M,previewContainer:O}=t;this.disabled=m??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),l&&(this.constrainPosition=l),d&&(this.previewClass=d),_&&(this.boundaryElement=_),M&&(this.rootElementSelector=M),O&&(this.previewContainer=O)}_setupHandlesListener(){this._handles.pipe(ve(t=>{let n=t.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),xe(t=>Yt(...t.map(n=>n._stateChanges.pipe(Oe(n))))),Pt(this._destroyed)).subscribe(t=>{let n=this._dragRef,o=t.element.nativeElement;t.disabled?n.disableHandle(o):n.enableHandle(o)})}static \u0275fac=function(n){return new(n||i)};static \u0275dir=Mt({type:i,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(n,o){n&2&&w("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",ee],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Ae]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[xt([{provide:de,useExisting:i}]),ke]})}return i})();var Gn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=X({type:i});static \u0275inj=W({providers:[An],imports:[Xe]})}return i})();var Rt=class i{constructor(e,t){this.dialogRef=e;this.data=t}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(t){return new(t||i)(N(Ze),N(Qe))};static \u0275cmp=Y({type:i,selectors:[["app-confirm-dialog"]],decls:18,vars:1,consts:[[1,"confirm-dialog"],[1,"dialog-header"],[1,"icon-wrapper"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-content"],[1,"dialog-actions"],["mat-button","",1,"cancel-btn",3,"click"],["mat-raised-button","",1,"confirm-btn",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon"),c(4,"help_outline"),a()(),r(5,"button",3),C("click",function(){return n.onCancel()}),r(6,"mat-icon"),c(7,"close"),a()()(),r(8,"div",4)(9,"h2"),c(10,"\uD655\uC778"),a(),r(11,"p"),c(12),a()(),r(13,"div",5)(14,"button",6),C("click",function(){return n.onCancel()}),c(15," \uCDE8\uC18C "),a(),r(16,"button",7),C("click",function(){return n.onConfirm()}),c(17," \uD655\uC778 "),a()()()),t&2&&(s(12),u(n.data.message))},dependencies:[kt,It,Bt,nn,tn,Tt,dn],styles:['@charset "UTF-8";.confirm-dialog[_ngcontent-%COMP%]{padding:0;background:var(--bg-primary, #ffffff);border-radius:16px;min-width:400px;max-width:500px;overflow:hidden}.dialog-header[_ngcontent-%COMP%]{position:relative;padding:24px 24px 0;display:flex;justify-content:space-between;align-items:flex-start}.icon-wrapper[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #667eea4d}.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.close-btn[_ngcontent-%COMP%]{color:var(--text-secondary, #666);width:32px;height:32px}.close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #f5f5f5)}.dialog-content[_ngcontent-%COMP%]{padding:20px 24px 24px}.dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:24px;font-weight:700;color:var(--text-primary, #212529);line-height:1.3}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:var(--text-secondary, #666)}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px 24px;display:flex;gap:12px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%]{min-width:100px;height:44px;border-radius:8px;font-weight:600;font-size:15px;color:var(--text-secondary, #666);background:transparent;border:1px solid var(--border-color, #e0e0e0);transition:all .2s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #f5f5f5);border-color:var(--text-secondary, #666)}.confirm-btn[_ngcontent-%COMP%]{min-width:100px;height:44px;border-radius:8px;font-weight:600;font-size:15px;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 4px 12px #667eea4d;transition:all .2s ease}.confirm-btn[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #667eea66;transform:translateY(-1px)}.confirm-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}body.dark-theme[_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%]{background:#1a1a2e!important}body.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{color:#8e8e93!important;border-color:#2d2d44!important}body.dark-theme[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#2d2d44!important;border-color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#2d2d44!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.confirm-dialog[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease-out}']})};var Gt=class i{constructor(e){this.http=e;this.initApiKey()}apiKey="AIzaSyCSnZMkpalf4--NxFAAac19pY16V9qcQjM";apiUrl="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent";initApiKey(){let e=localStorage.getItem("gemini_api_key");e&&(this.apiKey=e)}setApiKey(e){this.apiKey=e,localStorage.setItem("gemini_api_key",e)}getApiKey(){return this.apiKey}hasApiKey(){return!!this.apiKey&&this.apiKey.length>0}generateScenario(e){if(!this.hasApiKey())return L(()=>new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."));let n={contents:[{parts:[{text:this.buildScenarioPrompt(e)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:2048}},o=new tt({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,n,{headers:o}).pipe(H(l=>{if(l?.candidates?.[0]?.content?.parts?.[0]?.text){let d=l.candidates[0].content.parts[0].text;return this.parseScenarioResponse(d)}throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),Q(l=>{console.error("Gemini API \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:l.status,statusText:l.statusText,message:l.message,error:l.error,fullError:l});let d="AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return l.status===400?d="API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":l.status===429?d="API \uD638\uCD9C \uD55C\uB3C4\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.":l.error?.error?.message&&(d=l.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",d),L(()=>new Error(d))}))}generateCharacter(e){if(!this.hasApiKey())return L(()=>new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let n={contents:[{parts:[{text:this.buildCharacterPrompt(e)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:1024}},o=new tt({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,n,{headers:o}).pipe(H(l=>{if(l?.candidates?.[0]?.content?.parts?.[0]?.text){let d=l.candidates[0].content.parts[0].text;return this.parseCharacterResponse(d)}throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),Q(l=>{console.error("Gemini API \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:l.status,statusText:l.statusText,message:l.message,error:l.error,fullError:l});let d="AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return l.error?.error?.message&&(d+=" - "+l.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",d),L(()=>new Error(d))}))}buildScenarioPrompt(e){let t=e.genre||"\uBB34\uD611",n=e.style||"\uC804\uD1B5\uC801\uC778",o=e.mood||"\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294",l=e.additionalContext||"",_=e.isAdult||!1?`
- \u{1F51E} \uC131\uC778 \uCF58\uD150\uCE20: \uC608 (19+) - \uD3ED\uB825\uC801\uC774\uACE0 \uC120\uC815\uC801\uC778 \uC694\uC18C \uD3EC\uD568 \uAC00\uB2A5`:`
- \uC131\uC778 \uCF58\uD150\uCE20: \uC544\uB2C8\uC624 (\uC804\uC5F0\uB839)`;return`\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB34\uD611 \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uC870\uAC74\uC5D0 \uB9DE\uB294 \uBB34\uD611 \uC18C\uC124 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.

**\uC870\uAC74:**
- \uC7A5\uB974: ${t}
- \uC2A4\uD0C0\uC77C: ${n}
- \uBD84\uC704\uAE30: ${o}
${l?`- \uCD94\uAC00 \uC694\uAD6C\uC0AC\uD56D: ${l}`:""}${_}

**\uC0DD\uC131 \uD615\uC2DD (\uC815\uD655\uD788 \uC774 \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5):**

\uC81C\uBAA9: [\uD765\uBBF8\uC9C4\uC9C4\uD55C \uC2DC\uB098\uB9AC\uC624 \uC81C\uBAA9]

\uC124\uBA85: [\uC2DC\uB098\uB9AC\uC624\uC5D0 \uB300\uD55C 2-3\uBB38\uC7A5\uC758 \uAC04\uB7B5\uD55C \uC124\uBA85]

\uB4F1\uC7A5\uC778\uBB3C:
- [\uC778\uBB3C1 \uC774\uB984/\uC5ED\uD560]
- [\uC778\uBB3C2 \uC774\uB984/\uC5ED\uD560]
- [\uC778\uBB3C3 \uC774\uB984/\uC5ED\uD560]
- [\uC778\uBB3C4 \uC774\uB984/\uC5ED\uD560]

\uBC30\uACBD: [\uC2DC\uAC04\uACFC \uC7A5\uC18C\uB97C \uD3EC\uD568\uD55C \uC0C1\uC138\uD55C \uBC30\uACBD \uC124\uBA85]

\uAC08\uB4F1: [\uC774\uC57C\uAE30\uC758 \uD575\uC2EC \uAC08\uB4F1\uC774\uB098 \uBB38\uC81C \uC0C1\uD669]

\uBAA9\uD45C: [\uC8FC\uC778\uACF5\uC774 \uB2EC\uC131\uD558\uACE0\uC790 \uD558\uB294 \uBAA9\uD45C]

\uBD84\uC704\uAE30: [\uC774\uC57C\uAE30\uC758 \uC804\uBC18\uC801\uC778 \uBD84\uC704\uAE30\uB098 \uD1A4]

\uD0DC\uADF8: [\uD0DC\uADF81, \uD0DC\uADF82, \uD0DC\uADF83, \uD0DC\uADF84, \uD0DC\uADF85]

**\uC911\uC694: \uC704 \uD615\uC2DD\uC744 \uC815\uD655\uD788 \uC9C0\uCF1C\uC11C \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uAC01 \uC139\uC158\uC740 \uC815\uD655\uD55C \uB808\uC774\uBE14\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4.**`}buildCharacterPrompt(e){return`\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB34\uD611 \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. ${e||"\uC8FC\uC778\uACF5"} \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.

**\uC0DD\uC131 \uD615\uC2DD:**

\uC774\uB984: [\uBB34\uD611\uD48D\uC758 \uC774\uB984]
\uB098\uC774: [\uC22B\uC790\uB9CC]
\uC131\uBCC4: [\uB0A8\uC131/\uC5EC\uC131]
\uC5ED\uD560: [\uC8FC\uC778\uACF5/\uC801\uB300\uC790/\uC870\uC5F0/\uB2E8\uC5ED]
\uC678\uBAA8: [\uC0C1\uC138\uD55C \uC678\uBAA8 \uBB18\uC0AC]
\uC131\uACA9: [\uC131\uACA9 \uD2B9\uC9D5]
\uBC30\uACBD: [\uCE90\uB9AD\uD130\uC758 \uBC30\uACBD \uC2A4\uD1A0\uB9AC]
\uB2A5\uB825: [\uBB34\uACF5/\uB2A5\uB8251, \uBB34\uACF5/\uB2A5\uB8252, \uBB34\uACF5/\uB2A5\uB8253]
\uBAA9\uD45C: [\uCE90\uB9AD\uD130\uC758 \uBAA9\uD45C\uB098 \uB3D9\uAE30]
\uD2B9\uC131: [\uD2B9\uC1311, \uD2B9\uC1312, \uD2B9\uC1313]

**\uC911\uC694: \uC704 \uD615\uC2DD\uC744 \uC815\uD655\uD788 \uC9C0\uCF1C\uC11C \uC751\uB2F5\uD574\uC8FC\uC138\uC694.**`}parseScenarioResponse(e){try{let t={},n=e.match(/제목:\s*(.+)/);n&&(t.title=n[1].trim());let o=e.match(/설명:\s*(.+?)(?=\n\n|등장인물:|$)/s);o&&(t.description=o[1].trim());let l=e.match(/등장인물:\s*([\s\S]+?)(?=\n\n|배경:|$)/);l&&(t.characters=l[1].split(`
`).filter(y=>y.trim().startsWith("-")).map(y=>y.replace(/^-\s*/,"").trim()));let d=e.match(/배경:\s*(.+?)(?=\n\n|갈등:|$)/s);d&&(t.setting=d[1].trim());let _=e.match(/갈등:\s*(.+?)(?=\n\n|목표:|$)/s);_&&(t.conflict=_[1].trim());let m=e.match(/목표:\s*(.+?)(?=\n\n|분위기:|$)/s);m&&(t.goal=m[1].trim());let M=e.match(/분위기:\s*(.+?)(?=\n\n|태그:|$)/s);M&&(t.mood=M[1].trim());let O=e.match(/태그:\s*(.+?)$/s);return O&&(t.tags=O[1].split(",").map(y=>y.trim()).filter(y=>y.length>0)),console.log("\uD30C\uC2F1\uB41C \uC2DC\uB098\uB9AC\uC624:",t),t}catch(t){throw console.error("\uC2DC\uB098\uB9AC\uC624 \uD30C\uC2F1 \uC624\uB958:",t),new Error("AI \uC751\uB2F5\uC744 \uD30C\uC2F1\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}parseCharacterResponse(e){try{let t={},n=e.match(/이름:\s*(.+)/);n&&(t.name=n[1].trim());let o=e.match(/나이:\s*(\d+)/);o&&(t.age=parseInt(o[1]));let l=e.match(/성별:\s*(.+?)(?=\n|$)/);if(l){let S=l[1].trim();S.includes("\uB0A8")?t.gender="male":S.includes("\uC5EC")?t.gender="female":t.gender="other"}let d=e.match(/역할:\s*(.+?)(?=\n|$)/);if(d){let S=d[1].trim();S.includes("\uC8FC\uC778\uACF5")?t.role="protagonist":S.includes("\uC801\uB300")||S.includes("\uC545\uC5ED")?t.role="antagonist":S.includes("\uC870\uC5F0")?t.role="supporting":t.role="minor"}let _=e.match(/외모:\s*(.+?)(?=\n\n|성격:|$)/s);_&&(t.appearance=_[1].trim());let m=e.match(/성격:\s*(.+?)(?=\n\n|배경:|$)/s);m&&(t.personality=m[1].trim());let M=e.match(/배경:\s*(.+?)(?=\n\n|능력:|$)/s);M&&(t.background=M[1].trim());let O=e.match(/능력:\s*(.+?)(?=\n\n|목표:|$)/s);O&&(t.abilities=O[1].split(",").map(S=>S.trim()).filter(S=>S.length>0));let y=e.match(/목표:\s*(.+?)(?=\n\n|특성:|$)/s);y&&(t.goals=y[1].trim());let D=e.match(/특성:\s*(.+?)$/s);return D&&(t.traits=D[1].split(",").map(S=>S.trim()).filter(S=>S.length>0)),console.log("\uD30C\uC2F1\uB41C \uCE90\uB9AD\uD130:",t),t}catch(t){throw console.error("\uCE90\uB9AD\uD130 \uD30C\uC2F1 \uC624\uB958:",t),new Error("AI \uC751\uB2F5\uC744 \uD30C\uC2F1\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}generateItem(e="\uBB34\uAE30",t="\uACE0\uAE09"){if(!this.hasApiKey())return L(()=>new Error("API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let o={contents:[{parts:[{text:this.buildItemPrompt(e,t)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:1024}},l=new tt({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,o,{headers:l}).pipe(H(d=>{let _=d?.candidates?.[0]?.content?.parts?.[0]?.text;if(!_)throw new Error("AI \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.");return console.log("AI \uC544\uC774\uD15C \uC751\uB2F5:",_),this.parseItemResponse(_)}),Q(d=>{console.error("Gemini API \uC544\uC774\uD15C \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:d.status,statusText:d.statusText,message:d.message,error:d.error,fullError:d});let _="AI \uC544\uC774\uD15C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return d.status===400?_="API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":d.status===429?_="API \uD638\uCD9C \uD55C\uB3C4\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.":d.error?.error?.message&&(_=d.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",_),L(()=>new Error(_))}))}buildItemPrompt(e,t){return`\uB2F9\uC2E0\uC740 \uBB34\uD611 \uC18C\uC124\uC758 \uC544\uC774\uD15C \uB514\uC790\uC774\uB108\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uC870\uAC74\uC5D0 \uB9DE\uB294 ${e}\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694.

\uB4F1\uAE09: ${t}
\uD0C0\uC785: ${e}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC751\uB2F5\uD574\uC8FC\uC138\uC694:
{
  "name": "\uC544\uC774\uD15C \uC774\uB984 (\uD55C\uC790 \uD3EC\uD568 \uAC00\uB2A5, \uC608: \uCC9C\uB9C8\uAC80(\u5929\u9B54\u528D))",
  "description": "\uC544\uC774\uD15C\uC5D0 \uB300\uD55C \uC0C1\uC138\uD55C \uC124\uBA85 (2-3\uBB38\uC7A5)",
  "type": "${e}",
  "grade": "${t}",
  "effects": ["\uD6A8\uACFC1", "\uD6A8\uACFC2", "\uD6A8\uACFC3"],
  "stats": {
    "attack": \uACF5\uACA9\uB825 \uC218\uCE58 (\uBB34\uAE30\uC758 \uACBD\uC6B0),
    "defense": \uBC29\uC5B4\uB825 \uC218\uCE58 (\uBC29\uC5B4\uAD6C\uC758 \uACBD\uC6B0),
    "hp": HP \uBCF4\uB108\uC2A4,
    "mp": MP \uBCF4\uB108\uC2A4
  },
  "requirements": "\uC0AC\uC6A9 \uC870\uAC74 (\uC608: \uB0B4\uACF5 500 \uC774\uC0C1, \uAC80\uBC95 \uC219\uB828\uB3C4 \uC0C1\uAE09)",
  "lore": "\uC544\uC774\uD15C\uC758 \uC804\uC124\uC774\uB098 \uC720\uB798 (1-2\uBB38\uC7A5)",
  "tags": ["\uD0DC\uADF81", "\uD0DC\uADF82", "\uD0DC\uADF83"]
}

\uADDC\uCE59:
1. \uC544\uC774\uD15C\uBA85\uC740 \uBB34\uD611 \uC138\uACC4\uAD00\uC5D0 \uC5B4\uC6B8\uB9AC\uAC8C \uBA4B\uC9C0\uACE0 \uC6C5\uC7A5\uD558\uAC8C
2. \uB4F1\uAE09\uC5D0 \uB9DE\uB294 \uB2A5\uB825\uCE58 \uC124\uC815 (\uC77C\uBC18: 10-30, \uACE0\uAE09: 40-70, \uD76C\uADC0: 80-120, \uC804\uC124: 130-200, \uC2E0\uD654: 250+)
3. \uD6A8\uACFC\uB294 \uAD6C\uCCB4\uC801\uC774\uACE0 \uAC8C\uC784\uC5D0\uC11C \uC0AC\uC6A9 \uAC00\uB2A5\uD558\uB3C4\uB85D
4. \uC804\uC124\uC774\uB098 \uC720\uB798\uB294 \uC2E0\uBE44\uB86D\uACE0 \uD765\uBBF8\uB86D\uAC8C
5. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5
6. JSON \uC678\uC758 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9D0 \uAC83`}parseItemResponse(e){try{let t=e.match(/\{[\s\S]*\}/);if(!t)throw new Error("JSON \uD615\uC2DD\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let n=JSON.parse(t[0]);if(!n.name||!n.description||!n.type)throw new Error("\uD544\uC218 \uD544\uB4DC\uAC00 \uB204\uB77D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");return n.effects&&!Array.isArray(n.effects)&&(n.effects=[n.effects]),n.tags&&!Array.isArray(n.tags)&&(n.tags=[n.tags]),n}catch(t){throw console.error("\uC544\uC774\uD15C \uD30C\uC2F1 \uC624\uB958:",t),console.error("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:",e),new Error("\uC544\uC774\uD15C \uC815\uBCF4\uB97C \uD30C\uC2F1\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}generateNovel(e){if(!this.hasApiKey())return L(()=>new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let n={contents:[{parts:[{text:this.buildNovelPrompt(e)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:8192}},o=new tt({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,n,{headers:o}).pipe(H(l=>{if(l?.candidates?.[0]?.content?.parts?.[0]?.text)return{content:l.candidates[0].content.parts[0].text};throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),Q(l=>{console.error("Gemini API \uC18C\uC124 \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:l.status,statusText:l.statusText,message:l.message,error:l.error,fullError:l});let d="AI \uC18C\uC124 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return l.status===400?d="API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":l.status===429?d="API \uD638\uCD9C \uD55C\uB3C4\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.":l.error?.error?.message&&(d+=" - "+l.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",d),L(()=>new Error(d))}))}buildNovelPrompt(e){let{characters:t,scenarios:n,items:o,settings:l}=e,d="";t&&t.length>0&&(d=`

**\uB4F1\uC7A5\uC778\uBB3C:**
`,t.slice(0,5).forEach(k=>{d+=`- ${k.name}`,k.age&&(d+=` (${k.age}\uC138)`),k.role&&(d+=` - ${k.role==="protagonist"?"\uC8FC\uC778\uACF5":k.role==="antagonist"?"\uC801\uB300\uC790":"\uC870\uC5F0"}`),k.personality&&(d+=`
  \uC131\uACA9: ${k.personality}`),k.abilities&&k.abilities.length>0&&(d+=`
  \uBB34\uACF5/\uB2A5\uB825: ${k.abilities.join(", ")}`),d+=`
`}));let _="";if(n&&n.length>0){let k=n[0];_=`

**\uC0C1\uD669 \uC124\uC815:**
`,k.title&&(_+=`\uC81C\uBAA9: ${k.title}
`),k.description&&(_+=`\uC124\uBA85: ${k.description}
`),k.setting&&(_+=`\uBC30\uACBD: ${k.setting}
`),k.conflict&&(_+=`\uAC08\uB4F1: ${k.conflict}
`),k.goal&&(_+=`\uBAA9\uD45C: ${k.goal}
`),k.mood&&(_+=`\uBD84\uC704\uAE30: ${k.mood}
`)}let m="";o&&o.length>0&&(m=`

**\uC911\uC694 \uC544\uC774\uD15C:**
`,o.slice(0,3).forEach(k=>{m+=`- ${k.name}`,k.type&&(m+=` (${k.type})`),k.description&&(m+=`: ${k.description}`),m+=`
`}));let M=l.genre||"traditional",O=l.protagonist||"\uAC80\uC131",y=l.theme||"revenge",D=l.violence||"moderate",S=l.romance||"none",A=l.adult||!1;return`\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB34\uD611 \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uC815\uBCF4\uB97C \uBC14\uD0D5\uC73C\uB85C \uD765\uBBF8\uC9C4\uC9C4\uD55C \uBB34\uD611\uC9C0 3\uD398\uC774\uC9C0 \uBD84\uB7C9(\uC57D 3000-4000\uC790)\uC744 \uC791\uC131\uD574\uC8FC\uC138\uC694.

**\uC18C\uC124 \uC124\uC815:**
- \uC7A5\uB974: ${M}
- \uC8FC\uC778\uACF5: ${O}
- \uC8FC\uC81C: ${y}
- \uD3ED\uB825 \uC218\uC704: ${D}
- \uB85C\uB9E8\uC2A4 \uC218\uC704: ${S}
- \uC131\uC778 \uCF58\uD150\uCE20: ${A?"\u{1F51E} \uC608 (19+)":"\uC544\uB2C8\uC624 (\uC804\uC5F0\uB839)"}
${A?`

**\u{1F51E} \uC131\uC778 \uCF58\uD150\uCE20 \uBC18\uC601 (19+):**
- \uC131\uC778 \uB3C5\uC790\uB97C \uB300\uC0C1\uC73C\uB85C \uD55C \uC218\uC704 \uB192\uC740 \uD45C\uD604 \uC0AC\uC6A9 \uAC00\uB2A5
- \uD3ED\uB825: \uB354 \uC9C1\uC811\uC801\uC774\uACE0 \uC0AC\uC2E4\uC801\uC778 \uC804\uD22C \uBC0F \uD3ED\uB825 \uBB18\uC0AC
- \uB85C\uB9E8\uC2A4/\uAD00\uB2A5: \uC740\uC720\uC801\uC774\uC9C0 \uC54A\uC740 \uC9C1\uC811\uC801\uC774\uACE0 \uB178\uACE8\uC801\uC778 \uD45C\uD604 \uD5C8\uC6A9
- \uC5B8\uC5B4: \uAC70\uCE5C \uC5B8\uC5B4, \uC695\uC124, \uC131\uC778\uC6A9 \uD45C\uD604 \uC0AC\uC6A9 \uAC00\uB2A5
- \uC8FC\uC81C: \uBCF5\uC218, \uBC30\uC2E0, \uC695\uB9DD \uB4F1 \uC5B4\uB450\uC6B4 \uC8FC\uC81C\uB97C \uB354\uC6B1 \uAE4A\uC774 \uC788\uAC8C \uB2E4\uB8F8
- \uC2EC\uB9AC: \uC778\uAC04\uC758 \uC5B4\uB450\uC6B4 \uBA74\uACFC \uC695\uB9DD\uC744 \uC194\uC9C1\uD558\uAC8C \uD45C\uD604`:`

**\uC77C\uBC18 \uB3C5\uC790\uC6A9 \uCF58\uD150\uCE20:**
- \uC804\uC5F0\uB839 \uB610\uB294 \uCCAD\uC18C\uB144 \uC774\uC0C1 \uB3C5\uC790 \uB300\uC0C1
- \uD3ED\uB825\uACFC \uB85C\uB9E8\uC2A4 \uD45C\uD604\uC744 \uC801\uC808\uD788 \uC808\uC81C
- \uAC74\uC804\uD55C \uC5B8\uC5B4 \uC0AC\uC6A9`}
${d}
${_}
${m}

**\uC791\uC131 \uC694\uAD6C\uC0AC\uD56D:**
1. \uC804\uD1B5 \uBB34\uD611\uC9C0 \uC2A4\uD0C0\uC77C\uB85C \uC791\uC131
2. 3\uD398\uC774\uC9C0 \uBD84\uB7C9 (\uC57D 3000-4000\uC790)
3. \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130, \uC0C1\uD669, \uC544\uC774\uD15C\uC744 \uC790\uC5F0\uC2A4\uB7FD\uAC8C \uD65C\uC6A9
4. \uC2DC\uC791-\uC804\uAC1C-\uC808\uC815\uC758 \uAD6C\uC870\uB97C \uAC16\uCD98 \uC644\uACB0\uB41C \uC774\uC57C\uAE30
5. \uC0DD\uB3D9\uAC10 \uB118\uCE58\uB294 \uC804\uD22C \uC7A5\uBA74\uACFC \uCE90\uB9AD\uD130\uC758 \uAC10\uC815 \uBB18\uC0AC
6. \uC801\uC808\uD55C \uB2E8\uB77D \uAD6C\uBD84\uACFC \uC7A5\uBA74 \uC804\uD658
${A?"7. \u{1F51E} \uC131\uC778 \uCF58\uD150\uCE20 \uC124\uC815\uC774 \uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC73C\uBBC0\uB85C, \uC218\uC704 \uB192\uC740 \uD45C\uD604\uACFC \uB178\uACE8\uC801\uC778 \uBB18\uC0AC\uB97C \uC801\uADF9 \uD65C\uC6A9\uD558\uC5EC \uC131\uC778 \uB3C5\uC790\uC758 \uAE30\uB300\uC5D0 \uBD80\uC751":"7. \uC804\uC5F0\uB839 \uB610\uB294 \uCCAD\uC18C\uB144 \uC774\uC0C1 \uB3C5\uC790\uB97C \uC704\uD55C \uC801\uC808\uD55C \uD45C\uD604 \uC218\uC704 \uC720\uC9C0"}

**\uD615\uC2DD:**
- \uC81C\uBAA9\uC744 \uD3EC\uD568\uD558\uC5EC \uC791\uC131
- \uC7A5(\u7AE0)\uC73C\uB85C \uAD6C\uBD84 (\uC81C1\uC7A5, \uC81C2\uC7A5, \uC81C3\uC7A5)
- \uAC01 \uC7A5\uC740 \uC57D 1000\uC790 \uB0B4\uC678
- \uBB34\uD611 \uC18C\uC124 \uD2B9\uC720\uC758 \uBB38\uCCB4\uC640 \uC6A9\uC5B4 \uC0AC\uC6A9

\uC9C0\uAE08 \uBC14\uB85C \uC18C\uC124\uC744 \uC791\uC131\uD574\uC8FC\uC138\uC694:`}testConnection(){if(!this.hasApiKey())return L(()=>new Error("API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let e={contents:[{parts:[{text:"\uC548\uB155\uD558\uC138\uC694"}]}]},t=new tt({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,e,{headers:t}).pipe(H(()=>!0),Q(()=>L(()=>new Error("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328"))))}generateContent(e){if(!this.hasApiKey())return L(()=>new Error("API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let t={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:4096}},n=new tt({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,t,{headers:n}).pipe(H(o=>{if(o?.candidates?.[0]?.content?.parts?.[0]?.text)return o.candidates[0].content.parts[0].text;throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),Q(o=>(console.error("Gemini API \uCEE8\uD150\uCE20 \uC0DD\uC131 \uC624\uB958:",o),L(()=>new Error("\uCEE8\uD150\uCE20 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")))))}static \u0275fac=function(t){return new(t||i)(st(Re))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var zt=class i{dbName="NovelScenarioDB";dbVersion=1;storeName="scenarios";db=null;constructor(){this.initDB()}initDB(){return v(this,null,function*(){return new Promise((e,t)=>{let n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{console.error("IndexedDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("\u2705 IndexedDB \uCD08\uAE30\uD654 \uC644\uB8CC"),e()},n.onupgradeneeded=o=>{let l=o.target.result;if(!l.objectStoreNames.contains(this.storeName)){let d=l.createObjectStore(this.storeName,{keyPath:"id"});d.createIndex("title","title",{unique:!1}),d.createIndex("genre","genre",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),console.log("\u{1F4E6} IndexedDB \uC2A4\uD1A0\uC5B4 \uC0DD\uC131 \uC644\uB8CC")}}})})}ensureDB(){return v(this,null,function*(){return this.db||(yield this.initDB()),this.db})}saveScenario(e){return v(this,null,function*(){let t=yield this.ensureDB();return new Promise((n,o)=>{let _=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e);_.onsuccess=()=>{console.log("\u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC644\uB8CC:",e.title),n()},_.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC2E4\uD328:",_.error),o(_.error)}})})}getAllScenarios(){return v(this,null,function*(){let e=yield this.ensureDB();return new Promise((t,n)=>{let d=e.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();d.onsuccess=()=>{let _=d.result;_.sort((m,M)=>new Date(M.createdAt).getTime()-new Date(m.createdAt).getTime()),console.log("\u{1F4DA} \uC2DC\uB098\uB9AC\uC624 \uBAA9\uB85D \uB85C\uB4DC:",_.length,"\uAC1C"),t(_)},d.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328:",d.error),n(d.error)}})})}getScenario(e){return v(this,null,function*(){let t=yield this.ensureDB();return new Promise((n,o)=>{let _=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);_.onsuccess=()=>{n(_.result||null)},_.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uB85C\uB4DC \uC2E4\uD328:",_.error),o(_.error)}})})}deleteScenario(e){return v(this,null,function*(){let t=yield this.ensureDB();return new Promise((n,o)=>{let _=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);_.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC644\uB8CC:",e),n()},_.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC2E4\uD328:",_.error),o(_.error)}})})}getScenariosByGenre(e){return v(this,null,function*(){let t=yield this.ensureDB();return new Promise((n,o)=>{let m=t.transaction([this.storeName],"readonly").objectStore(this.storeName).index("genre").getAll(e);m.onsuccess=()=>{let M=m.result;M.sort((O,y)=>new Date(y.createdAt).getTime()-new Date(O.createdAt).getTime()),n(M)},m.onerror=()=>{console.error("\u274C \uC7A5\uB974\uBCC4 \uC2DC\uB098\uB9AC\uC624 \uB85C\uB4DC \uC2E4\uD328:",m.error),o(m.error)}})})}clearAllScenarios(){return v(this,null,function*(){let e=yield this.ensureDB();return new Promise((t,n)=>{let d=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();d.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uBAA8\uB4E0 \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC644\uB8CC"),t()},d.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC804\uCCB4 \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var Vt=class i{dbName="NovelItemDB";storeName="items";db=null;constructor(){this.initDB()}initDB(){return v(this,null,function*(){return new Promise((e,t)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{console.error("ItemDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("ItemDB \uC5F4\uAE30 \uC131\uACF5"),e()},n.onupgradeneeded=o=>{let l=o.target.result;if(!l.objectStoreNames.contains(this.storeName)){let d=l.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});d.createIndex("name","name",{unique:!1}),d.createIndex("type","type",{unique:!1}),d.createIndex("grade","grade",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),console.log("ItemDB object store \uC0DD\uC131 \uC644\uB8CC")}}})})}saveItem(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(e);d.onsuccess=()=>{console.log("\uC544\uC774\uD15C \uC800\uC7A5 \uC131\uACF5:",d.result),t(d.result)},d.onerror=()=>{console.error("\uC544\uC774\uD15C \uC800\uC7A5 \uC2E4\uD328:",d.error),n(d.error)}})})}getAllItems(){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,t)=>{let l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();l.onsuccess=()=>{let d=l.result;d.sort((_,m)=>new Date(m.createdAt).getTime()-new Date(_.createdAt).getTime()),e(d)},l.onerror=()=>{console.error("\uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",l.error),t(l.error)}})})}getItem(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);d.onsuccess=()=>{t(d.result)},d.onerror=()=>{console.error("\uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",d.error),n(d.error)}})})}deleteItem(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);d.onsuccess=()=>{console.log("\uC544\uC774\uD15C \uC0AD\uC81C \uC131\uACF5"),t()},d.onerror=()=>{console.error("\uC544\uC774\uD15C \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}getItemsByType(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let _=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("type").getAll(e);_.onsuccess=()=>{t(_.result)},_.onerror=()=>{console.error("\uD0C0\uC785\uBCC4 \uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",_.error),n(_.error)}})})}getItemsByGrade(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let _=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("grade").getAll(e);_.onsuccess=()=>{t(_.result)},_.onerror=()=>{console.error("\uB4F1\uAE09\uBCC4 \uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",_.error),n(_.error)}})})}clearAllItems(){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,t)=>{let l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();l.onsuccess=()=>{console.log("\uBAA8\uB4E0 \uC544\uC774\uD15C \uC0AD\uC81C \uC131\uACF5"),e()},l.onerror=()=>{console.error("\uBAA8\uB4E0 \uC544\uC774\uD15C \uC0AD\uC81C \uC2E4\uD328:",l.error),t(l.error)}})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var Lt=class i{dbName="NovelCharacterDB";storeName="characters";db=null;constructor(){this.initDB()}initDB(){return v(this,null,function*(){return new Promise((e,t)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{console.error("CharacterDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("CharacterDB \uC5F4\uAE30 \uC131\uACF5"),e()},n.onupgradeneeded=o=>{let l=o.target.result;if(!l.objectStoreNames.contains(this.storeName)){let d=l.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});d.createIndex("name","name",{unique:!1}),d.createIndex("occupation","occupation",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),console.log("CharacterDB object store \uC0DD\uC131 \uC644\uB8CC")}}})})}saveCharacter(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(e);d.onsuccess=()=>{console.log("\uCE90\uB9AD\uD130 \uC800\uC7A5 \uC131\uACF5:",d.result),t(d.result)},d.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC800\uC7A5 \uC2E4\uD328:",d.error),n(d.error)}})})}getAllCharacters(){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,t)=>{let l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();l.onsuccess=()=>{let d=l.result;d.sort((_,m)=>new Date(m.createdAt).getTime()-new Date(_.createdAt).getTime()),e(d)},l.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC870\uD68C \uC2E4\uD328:",l.error),t(l.error)}})})}getCharacter(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);d.onsuccess=()=>{t(d.result)},d.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC870\uD68C \uC2E4\uD328:",d.error),n(d.error)}})})}deleteCharacter(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);d.onsuccess=()=>{console.log("\uCE90\uB9AD\uD130 \uC0AD\uC81C \uC131\uACF5"),t()},d.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}clearAllCharacters(){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,t)=>{let l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();l.onsuccess=()=>{console.log("\uBAA8\uB4E0 \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC131\uACF5"),e()},l.onerror=()=>{console.error("\uBAA8\uB4E0 \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC2E4\uD328:",l.error),t(l.error)}})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var Z=class i{STORAGE_KEY="novel_auth_user";ADMIN_USERNAME="admin";ADMIN_PASSWORD="9920";currentUserSubject;currentUser$;constructor(){let e=this.loadUserFromStorage();this.currentUserSubject=new ft(e),this.currentUser$=this.currentUserSubject.asObservable()}loadUserFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(e){let t=JSON.parse(e);return t.loginTime=new Date(t.loginTime),t}}catch(e){console.error("Failed to load user from storage:",e)}return null}saveUserToStorage(e){try{e?localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)):localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Failed to save user to storage:",t)}}login(e,t){if(e===this.ADMIN_USERNAME&&t===this.ADMIN_PASSWORD){let n={username:this.ADMIN_USERNAME,loginTime:new Date};return this.currentUserSubject.next(n),this.saveUserToStorage(n),!0}return!1}logout(){this.currentUserSubject.next(null),this.saveUserToStorage(null)}isLoggedIn(){return this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}getCurrentUsername(){let e=this.getCurrentUser();return e?e.username:null}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var $t=class i{dbName="NovelStoryDB";storeName="stories";db=null;constructor(){this.initDB()}initDB(){return v(this,null,function*(){return new Promise((e,t)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{console.error("StoryDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("\u2705 StoryDB \uC5F4\uAE30 \uC131\uACF5"),e()},n.onupgradeneeded=o=>{let l=o.target.result;if(!l.objectStoreNames.contains(this.storeName)){let d=l.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!1});d.createIndex("title","title",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),d.createIndex("genre","genre",{unique:!1}),console.log("\u2705 StoryDB \uC624\uBE0C\uC81D\uD2B8 \uC2A4\uD1A0\uC5B4 \uC0DD\uC131 \uC644\uB8CC")}}})})}saveStory(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e);d.onsuccess=()=>{console.log("\u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC131\uACF5:",e.title),t()},d.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC2E4\uD328:",d.error),n(d.error)}})})}getAllStories(){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,t)=>{let l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();l.onsuccess=()=>{let d=l.result;d.sort((_,m)=>new Date(m.createdAt).getTime()-new Date(_.createdAt).getTime()),console.log("\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D:",d.length),e(d)},l.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328:",l.error),t(l.error)}})})}getStory(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);d.onsuccess=()=>{t(d.result||null)},d.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC \uC2E4\uD328:",d.error),n(d.error)}})})}deleteStory(e){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);d.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC131\uACF5:",e),t()},d.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}clearAllStories(){return v(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,t)=>{let l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();l.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC644\uB8CC"),e()},l.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uC804\uCCB4 \uC0AD\uC81C \uC2E4\uD328:",l.error),t(l.error)}})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var go=["battleLogContainer"],po=(i,e,t,n)=>({"node-start":i,"node-story":e,"node-choice":t,"node-current":n}),_o=()=>[];function mo(i,e){if(i&1&&(r(0,"div",47)(1,"span",48),c(2),a()()),i&2){let t=g(2);s(2),b("\u{1F464} ",t.getCurrentUsername())}}function Co(i,e){if(i&1&&(r(0,"div",72),c(1),a()),i&2){let t=g(3);s(),b(" ",t.storyGenerationError," ")}}function uo(i,e){if(i&1){let t=x();r(0,"div",73),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.selectCharacterForStory(o))}),r(1,"div",74),c(2),a(),r(3,"div",75),c(4),a()()}if(i&2){let t=e.$implicit,n=g(3);w("selected",n.isCharacterSelected(t)),s(2),u(t.name),s(2),u(t.occupation)}}function ho(i,e){i&1&&(r(0,"p",76),c(1," \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),a())}function fo(i,e){if(i&1){let t=x();r(0,"div",73),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.selectItemForStory(o))}),r(1,"div",74),c(2),a(),r(3,"div",75),c(4),a()()}if(i&2){let t=e.$implicit,n=g(3);w("selected",n.isItemSelected(t)),s(2),u(t.name),s(2),B("",t.type," \xB7 ",t.grade)}}function Po(i,e){i&1&&(r(0,"p",76),c(1," \uC800\uC7A5\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC544\uC774\uD15C \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),a())}function bo(i,e){if(i&1){let t=x();r(0,"div",73),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.selectScenarioForStory(o))}),r(1,"div",74),c(2),a(),r(3,"div",75),c(4),a()()}if(i&2){let t=e.$implicit,n=g(3);w("selected",n.isScenarioSelected(t)),s(2),u(t.title),s(2),u(t.genre)}}function Mo(i,e){i&1&&(r(0,"p",76),c(1," \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),a())}function Oo(i,e){i&1&&(r(0,"span"),c(1,"\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131"),a())}function xo(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function vo(i,e){if(i&1&&(r(0,"p"),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function yo(i,e){if(i&1){let t=x();r(0,"div",77)(1,"h4"),c(2,"\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",78)(4,"div",79)(5,"span",80),c(6),a(),r(7,"h3"),c(8),a()(),r(9,"p",81),c(10),a(),r(11,"div",82)(12,"span",83),c(13),a(),r(14,"span",83),c(15),a(),r(16,"span",83),c(17),a()(),r(18,"div",84)(19,"h5"),c(20,"\uCCAB \uBC88\uC9F8 \uC7A5\uBA74"),a(),P(21,vo,2,1,"p",85),a()(),r(22,"div",86)(23,"button",87),C("click",function(){h(t);let o=g(3);return f(o.saveGeneratedStory())}),c(24," \u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 "),a(),r(25,"button",88),C("click",function(){h(t);let o=g(3);return f(o.addGeneratedStoryToList())}),c(26," \u{1F3AE} \uAC8C\uC784 \uC2DC\uC791 "),a(),r(27,"button",89),C("click",function(){h(t);let o=g(3);return f(o.clearGeneratedStory())}),c(28," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131 "),a()()()}if(i&2){let t=g(3);s(6),u(t.generatedStory.icon),s(2),u(t.generatedStory.title),s(2),u(t.generatedStory.description),s(3),b("\u{1F4DA} ",t.generatedStory.genre),s(2),b("\u2694\uFE0F ",t.generatedStory.difficulty==="easy"?"\uC26C\uC6C0":t.generatedStory.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"),s(2),b("\u{1F4B0} ",t.generatedStory.startingGold,"G"),s(4),p("ngForOf",t.generatedStory.firstStory)}}function ko(i,e){if(i&1){let t=x();r(0,"div",49)(1,"div",50)(2,"div",51)(3,"h3"),c(4,"\u2728 \uC2A4\uD1A0\uB9AC \uC0DD\uC131\uAE30"),a(),r(5,"button",52),C("click",function(){h(t);let o=g(2);return f(o.toggleStoryCreatorPanel())}),c(6,"\u2715"),a()(),r(7,"div",53)(8,"h4"),c(9,"\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694"),a(),r(10,"p"),c(11,"\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uBA74 Loworld AI\uAC00 \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4."),a()(),P(12,Co,2,1,"div",54),r(13,"div",55)(14,"label",56)(15,"span",57),c(16,"\u{1F4D6}"),a(),r(17,"span",58),c(18,"\uC2A4\uD1A0\uB9AC \uC81C\uBAA9"),a(),r(19,"span",59),c(20,"*"),a()(),r(21,"input",60),it("ngModelChange",function(o){h(t);let l=g(2);return ot(l.storyTitle,o)||(l.storyTitle=o),f(o)}),a(),r(22,"div",61),c(23),a()(),r(24,"div",62)(25,"div",63)(26,"h5"),c(27,"\u{1F3AD} \uC8FC\uC778\uACF5 \uC120\uD0DD "),r(28,"span",64),c(29),a()(),r(30,"div",65),P(31,uo,5,4,"div",66),a(),P(32,ho,2,0,"p",67),a(),r(33,"div",63)(34,"h5"),c(35,"\u{1F48E} \uD575\uC2EC \uC544\uC774\uD15C \uC120\uD0DD "),r(36,"span",64),c(37),a()(),r(38,"div",65),P(39,fo,5,5,"div",66),a(),P(40,Po,2,0,"p",67),a(),r(41,"div",63)(42,"h5"),c(43,"\u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC120\uD0DD "),r(44,"span",64),c(45),a()(),r(46,"div",65),P(47,bo,5,4,"div",66),a(),P(48,Mo,2,0,"p",67),a()(),r(49,"div",68)(50,"button",69),C("click",function(){h(t);let o=g(2);return f(o.generateStoryFromSavedContent())}),P(51,Oo,2,0,"span",70)(52,xo,2,0,"span",70),a()(),P(53,yo,29,7,"div",71),a()()}if(i&2){let t=g(2);s(12),p("ngIf",t.storyGenerationError),s(9),nt("ngModel",t.storyTitle),s(2),b("",t.storyTitle.length,"/50"),s(6),b("(",t.selectedCharactersForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),s(2),p("ngForOf",t.savedCharacters),s(),p("ngIf",t.savedCharacters.length===0),s(5),b("(",t.selectedItemsForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),s(2),p("ngForOf",t.savedItems),s(),p("ngIf",t.savedItems.length===0),s(5),b("(",t.selectedScenariosForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),s(2),p("ngForOf",t.savedScenarios),s(),p("ngIf",t.savedScenarios.length===0),s(2),p("disabled",t.isGeneratingStory||!t.storyTitle||t.storyTitle.trim()===""||t.selectedCharactersForStory.length===0||t.selectedItemsForStory.length===0||t.selectedScenariosForStory.length===0),s(),p("ngIf",!t.isGeneratingStory),s(),p("ngIf",t.isGeneratingStory),s(),p("ngIf",t.generatedStory)}}function wo(i,e){if(i&1){let t=x();r(0,"div",93),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.loadSavedStoryForGame(o))}),r(1,"div",94)(2,"div",95)(3,"span",80),c(4),a(),r(5,"h4"),c(6),a()(),r(7,"button",96),C("click",function(o){let l=h(t).$implicit,d=g(3);return f(d.deleteSavedStory(l.id,o))}),c(8," \u{1F5D1}\uFE0F "),a()(),r(9,"div",82)(10,"span",83),c(11),a(),r(12,"span",83),c(13),a(),r(14,"span",83),c(15),a()(),r(16,"p",97),c(17),a(),r(18,"div",98)(19,"span",99),c(20),a(),r(21,"span",100),c(22,"\u{1F916} AI \uC0DD\uC131"),a()()()}if(i&2){let t=e.$implicit,n=g(3);s(4),u(t.icon),s(2),u(t.title),s(5),b("\u{1F4DA} ",t.genre),s(2),b("\u2694\uFE0F ",t.difficulty==="easy"?"\uC26C\uC6C0":t.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"),s(2),b("\u{1F4B0} ",t.startingGold,"G"),s(2),u(t.description),s(3),u(n.formatSaveDate(t.createdAt))}}function So(i,e){if(i&1&&(r(0,"div",90)(1,"div",43)(2,"h3"),c(3,"\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC"),a(),r(4,"p",44),c(5,"AI\uAC00 \uC0DD\uC131\uD55C \uB098\uB9CC\uC758 \uC774\uC57C\uAE30\uB4E4"),a()(),r(6,"div",91),P(7,wo,23,7,"div",92),a()()),i&2){let t=g(2);s(7),p("ngForOf",t.savedStories)}}function Do(i,e){if(i&1&&(r(0,"span",112),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Eo(i,e){if(i&1&&(r(0,"div",110),P(1,Do,2,1,"span",111),a()),i&2){let t=g().$implicit;s(),p("ngForOf",t.personality.slice(0,3))}}function Io(i,e){if(i&1&&(r(0,"div",110)(1,"span",112),c(2),a()()),i&2){let t=g().$implicit;s(2),u(t.personality)}}function Bo(i,e){if(i&1){let t=x();r(0,"div",104),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.loadCharacter(o))}),r(1,"div",105)(2,"h4"),c(3),a(),r(4,"button",96),C("click",function(o){let l=h(t).$implicit,d=g(3);return f(l.id&&d.deleteCharacter(l.id,o))}),c(5," \u{1F5D1}\uFE0F "),a()(),r(6,"div",106)(7,"span",83),c(8),a(),r(9,"span",83),c(10),a(),r(11,"span",83),c(12),a()(),r(13,"p",107),c(14),a(),P(15,Eo,2,1,"div",108)(16,Io,3,1,"div",108),r(17,"div",109)(18,"span",99),c(19),a()()()}if(i&2){let t=e.$implicit,n=g(3);s(3),u(t.name),s(5),b("\u{1F464} ",t.gender),s(2),b("\u{1F4C5} ",t.age,"\uC138"),s(2),b("\u{1F4BC} ",t.occupation),s(2),u(t.backstory),s(),p("ngIf",n.isArray(t.personality)),s(),p("ngIf",!n.isArray(t.personality)&&t.personality),s(3),u(n.formatSaveDate(t.createdAt))}}function To(i,e){if(i&1&&(r(0,"div",101)(1,"div",43)(2,"h3"),c(3,"\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130"),a(),r(4,"p",44),c(5,"AI\uAC00 \uC0DD\uC131\uD55C \uCE90\uB9AD\uD130\uB4E4"),a()(),r(6,"div",102),P(7,Bo,20,8,"div",103),a()()),i&2){let t=g(2);s(7),p("ngForOf",t.savedCharacters)}}function Ao(i,e){if(i&1&&(r(0,"span",123),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function No(i,e){if(i&1){let t=x();r(0,"div",116),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.loadScenario(o))}),r(1,"div",117)(2,"h4"),c(3),a(),r(4,"button",96),C("click",function(o){let l=h(t).$implicit;return g(3).deleteScenario(l.id),f(o.stopPropagation())}),c(5," \u{1F5D1}\uFE0F "),a()(),r(6,"p",118),c(7),a(),r(8,"div",119),P(9,Ao,2,1,"span",120),a(),r(10,"div",121)(11,"span",122),c(12),a(),r(13,"span",99),c(14),a()()()}if(i&2){let t=e.$implicit,n=g(3);s(3),u(t.title),s(4),u(t.description),s(2),p("ngForOf",t.tags.slice(0,3)),s(3),u(t.genre),s(2),u(n.formatSaveDate(t.createdAt))}}function Fo(i,e){if(i&1&&(r(0,"div",113)(1,"div",43)(2,"h3"),c(3,"\u{1F3AC} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624"),a(),r(4,"p",44),c(5,"AI\uAC00 \uC0DD\uC131\uD55C \uC2DC\uB098\uB9AC\uC624\uB4E4"),a()(),r(6,"div",114),P(7,No,15,5,"div",115),a()()),i&2){let t=g(2);s(7),p("ngForOf",t.savedScenarios)}}function Ro(i,e){if(i&1&&(r(0,"span",136),c(1),a()),i&2){let t=g(2).$implicit;s(),b("\u2694\uFE0F ",t.stats.attack)}}function Go(i,e){if(i&1&&(r(0,"span",136),c(1),a()),i&2){let t=g(2).$implicit;s(),b("\u{1F6E1}\uFE0F ",t.stats.defense)}}function zo(i,e){if(i&1&&(r(0,"span",136),c(1),a()),i&2){let t=g(2).$implicit;s(),b("\u2764\uFE0F ",t.stats.hp)}}function Vo(i,e){if(i&1&&(r(0,"span",136),c(1),a()),i&2){let t=g(2).$implicit;s(),b("\u{1F499} ",t.stats.mp)}}function Lo(i,e){if(i&1&&(r(0,"div",134),P(1,Ro,2,1,"span",135)(2,Go,2,1,"span",135)(3,zo,2,1,"span",135)(4,Vo,2,1,"span",135),a()),i&2){let t=g().$implicit;s(),p("ngIf",t.stats.attack),s(),p("ngIf",t.stats.defense),s(),p("ngIf",t.stats.hp),s(),p("ngIf",t.stats.mp)}}function $o(i,e){if(i&1&&(r(0,"span",123),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function jo(i,e){if(i&1){let t=x();r(0,"div",127),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.loadItem(o))}),r(1,"div",128)(2,"h4"),c(3),a(),r(4,"button",96),C("click",function(o){let l=h(t).$implicit,d=g(3);return f(l.id&&d.deleteItem(l.id,o))}),c(5," \u{1F5D1}\uFE0F "),a()(),r(6,"p",75),c(7),a(),P(8,Lo,5,4,"div",129),r(9,"div",130)(10,"span",131),c(11),a(),r(12,"span",132),c(13),a(),P(14,$o,2,1,"span",120),a(),r(15,"div",133)(16,"span",99),c(17),a()()()}if(i&2){let t=e.$implicit,n=g(3);w("grade-legendary",t.grade==="\uC2E0\uD654"||t.grade==="\uC804\uC124")("grade-rare",t.grade==="\uD76C\uADC0")("grade-uncommon",t.grade==="\uACE0\uAE09"),s(3),u(t.name),s(4),u(t.description),s(),p("ngIf",t.stats),s(3),u(t.type),s(2),u(t.grade),s(),p("ngForOf",t.tags.slice(0,2)),s(3),u(n.formatSaveDate(t.createdAt))}}function qo(i,e){if(i&1&&(r(0,"div",124)(1,"div",43)(2,"h3"),c(3,"\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C"),a(),r(4,"p",44),c(5,"AI\uAC00 \uC0DD\uC131\uD55C \uBB34\uAE30\uC640 \uC544\uC774\uD15C\uB4E4"),a()(),r(6,"div",125),P(7,jo,18,13,"div",126),a()()),i&2){let t=g(2);s(7),p("ngForOf",t.savedItems)}}function Uo(i,e){if(i&1){let t=x();r(0,"div",137),C("click",function(){let o=h(t).$implicit,l=g(2);return f(l.selectNovel(o))}),r(1,"div",138)(2,"div",139),c(3),a(),r(4,"div",140),c(5),a()(),r(6,"div",141)(7,"h4"),c(8),a(),r(9,"div",142),c(10),a(),r(11,"p",143),c(12),a(),r(13,"div",144)(14,"div",145)(15,"span",146),c(16,"\u{1F4B0}"),a(),r(17,"span",147),c(18),a()(),r(19,"div",145)(20,"span",146),c(21,"\u{1F392}"),a(),r(22,"span",147),c(23),a()()()()()}if(i&2){let t=e.$implicit;s(3),u(t.icon),s(),q("difficulty-"+t.difficulty),s(),b(" ",t.difficulty==="easy"?"\uC26C\uC6C0":t.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"," "),s(3),u(t.title),s(2),u(t.genre),s(2),u(t.description),s(6),b("",t.startingGold,"G"),s(5),b("",t.startingItems.length,"\uAC1C")}}function Ho(i,e){if(i&1){let t=x();r(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"h2"),c(6,"\u{1F4D6} \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uB77C\uC774\uBE0C\uB7EC\uB9AC"),a(),r(7,"p",24),c(8,"\uB2F9\uC2E0\uC758 \uC120\uD0DD\uC774 \uB9CC\uB4E4\uC5B4\uAC00\uB294 \uC774\uC57C\uAE30"),a()(),r(9,"div",25),P(10,mo,3,1,"div",26),r(11,"button",27),C("click",function(){h(t);let o=g();return f(o.logout())}),c(12," \u{1F6AA} \uB85C\uADF8\uC544\uC6C3 "),a(),r(13,"button",28),C("click",function(){h(t);let o=g();return f(o.toggleTheme())}),c(14),a()()(),r(15,"div",29)(16,"div",30),C("click",function(){h(t);let o=g();return f(o.scrollToNovels())}),r(17,"div",31),c(18,"\u{1F3AE}"),a(),r(19,"h3"),c(20,"\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8"),a(),r(21,"p"),c(22,"\uB2E4\uC591\uD55C \uC7A5\uB974\uC758 \uC18C\uC124 \uC120\uD0DD"),a(),r(23,"div",32),c(24),a()(),r(25,"div",33),C("click",function(){h(t);let o=g();return f(o.openCharacterCreator())}),r(26,"div",31),c(27,"\u{1F3AD}"),a(),r(28,"h3"),c(29,"AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),a(),r(30,"p"),c(31,"Loworld AI\uB85C \uCE90\uB9AD\uD130 \uB9CC\uB4E4\uAE30"),a(),r(32,"div",34),c(33,"AI"),a()(),r(34,"div",33),C("click",function(){h(t);let o=g();return f(o.openScenarioCreator())}),r(35,"div",31),c(36,"\u{1F3AC}"),a(),r(37,"h3"),c(38,"AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131"),a(),r(39,"p"),c(40,"Loworld AI\uB85C \uC0C1\uD669 \uB9CC\uB4E4\uAE30"),a(),r(41,"div",34),c(42,"AI"),a()(),r(43,"div",33),C("click",function(){h(t);let o=g();return f(o.openItemCreator())}),r(44,"div",31),c(45,"\u{1F48E}"),a(),r(46,"h3"),c(47,"AI \uC544\uC774\uD15C \uC0DD\uC131"),a(),r(48,"p"),c(49,"Loworld AI\uB85C \uBB34\uAE30/\uC544\uC774\uD15C \uB9CC\uB4E4\uAE30"),a(),r(50,"div",34),c(51,"AI"),a()(),r(52,"div",35),C("click",function(){h(t);let o=g();return f(o.toggleStoryCreatorPanel())}),r(53,"div",31),c(54,"\u2728"),a(),r(55,"h3"),c(56,"\uC2A4\uD1A0\uB9AC \uC0DD\uC131"),a(),r(57,"p"),c(58,"\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8 \uC774\uC57C\uAE30 \uB9CC\uB4E4\uAE30"),a(),r(59,"div",36),c(60,"NEW"),a()()(),P(61,ko,54,16,"div",37)(62,So,8,1,"div",38)(63,To,8,1,"div",39)(64,Fo,8,1,"div",40)(65,qo,8,1,"div",41),a(),r(66,"div",42)(67,"div",43)(68,"h3"),c(69,"\u{1F4DA} \uC18C\uC124 \uC120\uD0DD"),a(),r(70,"p",44),c(71,"\uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uC2DC\uC791\uD558\uC138\uC694"),a()(),r(72,"div",45),P(73,Uo,24,9,"div",46),a()()()()}if(i&2){let t=g();s(10),p("ngIf",t.getCurrentUsername()),s(3),p("title",t.isDarkTheme?"\uB77C\uC774\uD2B8 \uBAA8\uB4DC\uB85C \uC804\uD658":"\uB2E4\uD06C \uBAA8\uB4DC\uB85C \uC804\uD658"),s(),b(" ",t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"," "),s(10),b("",t.novelTemplates.length,"\uAC1C"),s(37),p("ngIf",t.showStoryCreatorPanel),s(),p("ngIf",t.savedStories.length>0),s(),p("ngIf",t.savedCharacters.length>0),s(),p("ngIf",t.savedScenarios.length>0),s(),p("ngIf",t.savedItems.length>0),s(8),p("ngForOf",t.novelTemplates)}}function Yo(i,e){if(i&1){let t=x();r(0,"div",148)(1,"div",149)(2,"div",150),c(3),a(),r(4,"h1",151),c(5),a(),r(6,"div",152),c(7),a(),r(8,"p",153),c(9),a(),r(10,"div",154)(11,"div",155)(12,"span",156),c(13,"\uC2DC\uC791 \uACE8\uB4DC:"),a(),r(14,"span",157),c(15),a()(),r(16,"div",155)(17,"span",156),c(18,"\uC2DC\uC791 \uC544\uC774\uD15C:"),a(),r(19,"span",157),c(20),a()(),r(21,"div",155)(22,"span",156),c(23,"\uB09C\uC774\uB3C4:"),a(),r(24,"span",157),c(25),a()()(),r(26,"div",158)(27,"button",159),C("click",function(){h(t);let o=g();return f(o.backToNovelSelection())}),c(28,"\u2190 \uB2E4\uB978 \uC18C\uC124 \uC120\uD0DD"),a(),r(29,"button",160),C("click",function(){h(t);let o=g();return f(o.startStory())}),c(30,"\u{1F4DA} \uBAA8\uD5D8 \uC2DC\uC791"),a()()()()}if(i&2){let t=g();s(3),u(t.selectedNovel==null?null:t.selectedNovel.icon),s(2),u(t.selectedNovel==null?null:t.selectedNovel.title),s(2),u(t.selectedNovel==null?null:t.selectedNovel.genre),s(2),u(t.selectedNovel==null?null:t.selectedNovel.description),s(6),b("\u{1F4B0} ",t.selectedNovel==null?null:t.selectedNovel.startingGold,"G"),s(5),b("\u{1F392} ",(t.selectedNovel==null||t.selectedNovel.startingItems==null?null:t.selectedNovel.startingItems.length)||0,"\uAC1C"),s(4),q("difficulty-badge-"+(t.selectedNovel==null?null:t.selectedNovel.difficulty)),s(),b(" ",(t.selectedNovel==null?null:t.selectedNovel.difficulty)==="easy"?"\u2B50 \uC26C\uC6C0":(t.selectedNovel==null?null:t.selectedNovel.difficulty)==="normal"?"\u2B50\u2B50 \uBCF4\uD1B5":"\u2B50\u2B50\u2B50 \uC5B4\uB824\uC6C0"," ")}}function Wo(i,e){if(i&1){let t=x();r(0,"div",190),C("click",function(){h(t);let o=g(2);return f(o.expandLeftPanel())}),r(1,"div",191),c(2,"\u{1F4DA}"),a(),r(3,"div",192),c(4,"\uBA54\uB274"),a()()}}function Xo(i,e){if(i&1){let t=x();r(0,"div",193)(1,"div",194)(2,"h3"),c(3,"\u{1F3AE} \uAC8C\uC784 \uBA54\uB274"),a(),r(4,"button",52),C("click",function(){h(t);let o=g(2);return f(o.closeLeftPanel())}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"button",196),C("click",function(){h(t);let o=g(2);return f(o.saveGame())}),c(8,"\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5"),a(),r(9,"button",196),C("click",function(){h(t);let o=g(2);return f(o.loadGame())}),c(10,"\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30"),a(),r(11,"button",196),C("click",function(){h(t);let o=g(2);return f(o.toggleCharacterPanel())}),c(12,"\u{1F464} \uCE90\uB9AD\uD130 \uC815\uBCF4"),a(),r(13,"button",196),C("click",function(){h(t);let o=g(2);return f(o.openCharacterCreator())}),c(14,"\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),a(),r(15,"button",196),C("click",function(){h(t);let o=g(2);return f(o.toggleInventoryPanel())}),c(16),a(),r(17,"button",196),C("click",function(){h(t);let o=g(2);return f(o.toggleShopPanel())}),c(18,"\u{1F6D2} \uC0C1\uC810"),a(),r(19,"button",196),C("click",function(){h(t);let o=g(2);return f(o.startBattle())}),c(20,"\u2694\uFE0F \uC804\uD22C\uD558\uAE30"),a()()()}if(i&2){let t=g(2);s(16),b("\u{1F392} \uC778\uBCA4\uD1A0\uB9AC (",t.inventory.length,")")}}function Ko(i,e){if(i&1&&(r(0,"div",197),c(1),a()),i&2){let t=g(2);s(),B(" \u{1F525} ",t.playerInternalPower.current,"/",t.playerInternalPower.max," ")}}function Zo(i,e){if(i&1&&(r(0,"div",198),c(1),a()),i&2){let t=g(2);s(),b(" \u2B50 ",t.playerInternalPower.realm," ")}}function Qo(i,e){if(i&1&&(r(0,"div",199),c(1),a()),i&2){let t=g(2);p("title",t.playerFaction.name),s(),b(" \u{1F3DB}\uFE0F ",t.playerFaction.name," ")}}function Jo(i,e){if(i&1&&(r(0,"p"),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function ti(i,e){if(i&1&&(r(0,"div"),P(1,Jo,2,1,"p",85),a()),i&2){let t=g().$implicit;s(),p("ngForOf",t.lines)}}function ei(i,e){if(i&1&&(r(0,"div"),c(1),a()),i&2){let t=g().$implicit;s(),b("\u2B50 ",t.choiceText)}}function ni(i,e){if(i&1&&(r(0,"div",200),P(1,ti,2,1,"div",70)(2,ei,2,1,"div",70),a()),i&2){let t=e.$implicit;s(),p("ngIf",t.type==="story"),s(),p("ngIf",t.type==="choice")}}function oi(i,e){if(i&1&&(r(0,"p",226),c(1),a()),i&2){let t=g(3);s(),b(" ",t.battleTurn==="player"?"\uB2F9\uC2E0\uC758 \uCC28\uB840\uC785\uB2C8\uB2E4.":"\uC801\uC774 \uD589\uB3D9\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."," ")}}function ii(i,e){if(i&1&&(r(0,"div",210)(1,"span",211),c(2,"\uB0B4\uB825"),a(),r(3,"div",212)(4,"div",213),I(5,"div",227),a(),r(6,"span",147),c(7),a()()()),i&2){let t=g(3);s(5),V("width",t.playerInternalPower.current/t.playerInternalPower.max*100,"%"),s(2),B("",t.playerInternalPower.current,"/",t.playerInternalPower.max)}}function ri(i,e){if(i&1&&(r(0,"div",228),c(1),a()),i&2){let t=e.$implicit,n=e.index;V("animation-delay",n*50,"ms"),w("damage",t.includes("\uD53C\uD574"))("heal",t.includes("\uD68C\uBCF5"))("critical",t.includes("\uCE58\uBA85\uD0C0")||t.includes("\uD68C\uC2EC"))("combo",t.includes("\uC5F0\uACC4")),s(),b(" ",t," ")}}function ai(i,e){if(i&1&&(r(0,"div",201)(1,"div",202)(2,"div",203)(3,"h3"),c(4,"\u2014 \uC804\uD22C \u2014"),a(),P(5,oi,2,1,"p",204),a(),r(6,"div",205)(7,"div",206)(8,"div",207)(9,"h4"),c(10),a(),r(11,"span",208),c(12),a()(),r(13,"div",209)(14,"div",210)(15,"span",211),c(16,"\uCCB4\uB825"),a(),r(17,"div",212)(18,"div",213),I(19,"div",214),a(),r(20,"span",147),c(21),a()()(),r(22,"div",210)(23,"span",211),c(24,"\uB9C8\uB825"),a(),r(25,"div",212)(26,"div",213),I(27,"div",215),a(),r(28,"span",147),c(29),a()()(),P(30,ii,8,4,"div",216),r(31,"div",217)(32,"span",211),c(33,"\uACF5\uACA9"),a(),r(34,"span",218),c(35),a(),r(36,"span",219),c(37,"|"),a(),r(38,"span",211),c(39,"\uBC29\uC5B4"),a(),r(40,"span",218),c(41),a()()()(),r(42,"div",220),c(43,"VS"),a(),r(44,"div",221)(45,"div",207)(46,"h4"),c(47),a()(),r(48,"div",209)(49,"div",210)(50,"span",211),c(51,"\uCCB4\uB825"),a(),r(52,"div",212)(53,"div",213),I(54,"div",222),a(),r(55,"span",147),c(56),a()()(),r(57,"div",217)(58,"span",211),c(59,"\uACF5\uACA9"),a(),r(60,"span",218),c(61),a(),r(62,"span",219),c(63,"|"),a(),r(64,"span",211),c(65,"\uBC29\uC5B4"),a(),r(66,"span",218),c(67),a()()()()()(),r(68,"div",223,0)(70,"div",224),P(71,ri,2,11,"div",225),a()()()),i&2){let t=g(2);s(5),p("ngIf",!t.battleEnded),s(2),w("active-turn",t.battleTurn==="player"),s(3),u(t.playerCharacter.name),s(2),b("Lv.",t.playerCharacter.level),s(7),V("width",t.playerCharacter.hp/t.playerCharacter.maxHp*100,"%"),w("low",t.playerCharacter.hp/t.playerCharacter.maxHp<.3),s(2),B("",t.playerCharacter.hp,"/",t.playerCharacter.maxHp),s(6),V("width",t.playerCharacter.mp/t.playerCharacter.maxMp*100,"%"),s(2),B("",t.playerCharacter.mp,"/",t.playerCharacter.maxMp),s(),p("ngIf",t.learnedMartialSkills.length>0),s(5),u(t.playerCharacter.attack),s(6),u(t.playerCharacter.defense),s(3),w("active-turn",t.battleTurn==="enemy"),s(3),u(t.battleEnemy.name),s(7),V("width",t.battleEnemy.hp/t.battleEnemy.maxHp*100,"%"),w("low",t.battleEnemy.hp/t.battleEnemy.maxHp<.3),s(2),B("",t.battleEnemy.hp,"/",t.battleEnemy.maxHp),s(5),u(t.battleEnemy.attack),s(6),u(t.battleEnemy.defense),s(4),p("ngForOf",t.battleLog.slice(-8))}}function ci(i,e){if(i&1){let t=x();r(0,"div",231)(1,"button",232),C("click",function(){let o=h(t).index,l=g(3);return f(l.selectChoice(o))}),r(2,"span",233),c(3),a(),r(4,"span",234),c(5),a()(),r(6,"button",235),C("click",function(){let o=h(t).index,l=g(3);return f(l.openScenarioLinkPanel(o))}),c(7," \u{1F517} "),a()()}if(i&2){let t=e.$implicit,n=e.index;s(3),u(n+1),s(2),u(t)}}function si(i,e){if(i&1&&(r(0,"div")(1,"h3"),c(2,"\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"),a(),r(3,"div",229),P(4,ci,8,2,"div",230),a()()),i&2){let t=g(2);s(4),p("ngForOf",t.choices)}}function li(i,e){if(i&1){let t=x();r(0,"div",240)(1,"button",237),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.useMartialSkillInBattle(o))}),r(2,"span",233),c(3),a(),r(4,"span",234),c(5),r(6,"span",238),c(7),a(),r(8,"span",241),c(9),a()()()()}if(i&2){let t=e.$implicit,n=e.index,o=g(3);s(),p("disabled",o.playerInternalPower.current<t.internalPowerCost),s(2),u(n+5),s(2),B(" ",t.name," (",t.chineseName,") "),s(2),b("\uB0B4\uACF5 ",t.internalPowerCost),s(),w("grade-\uC808\uD559",t.grade==="\uC808\uD559"),s(),u(t.grade)}}function di(i,e){if(i&1){let t=x();r(0,"div")(1,"h3"),c(2,"\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"),a(),r(3,"div",236)(4,"div",231)(5,"button",232),C("click",function(){h(t);let o=g(2);return f(o.playerAttack())}),r(6,"span",233),c(7,"1"),a(),r(8,"span",234),c(9,"\uAE30\uBCF8 \uACF5\uACA9"),a()()(),r(10,"div",231)(11,"button",237),C("click",function(){h(t);let o=g(2);return f(o.playerSkill())}),r(12,"span",233),c(13,"2"),a(),r(14,"span",234),c(15,"\uB9C8\uBC95 \uACF5\uACA9 "),r(16,"span",238),c(17,"(MP 10)"),a()()()(),r(18,"div",231)(19,"button",232),C("click",function(){h(t);let o=g(2);return f(o.playerDefend())}),r(20,"span",233),c(21,"3"),a(),r(22,"span",234),c(23,"\uBC29\uC5B4 \uC790\uC138"),a()()(),r(24,"div",231)(25,"button",237),C("click",function(){h(t);let o=g(2);return f(o.usePotion())}),r(26,"span",233),c(27,"4"),a(),r(28,"span",234),c(29,"\uD68C\uBCF5 \uD3EC\uC158 \uC0AC\uC6A9"),a()()(),P(30,li,10,8,"div",239),a()()}if(i&2){let t=g(2);s(11),p("disabled",t.playerCharacter.mp<10),s(14),p("disabled",!t.hasPotion()),s(5),p("ngForOf",t.learnedMartialSkills)}}function gi(i,e){if(i&1){let t=x();r(0,"div",190),C("click",function(){h(t);let o=g(2);return f(o.expandRightPanel())}),r(1,"div",191),c(2,"\u{1F4CA}"),a(),r(3,"div",192),c(4,"\uC815\uBCF4"),a()()}}function pi(i,e){if(i&1){let t=x();r(0,"div",193)(1,"div",194)(2,"h3"),c(3,"\u{1F4CA} \uAC8C\uC784 \uC815\uBCF4"),a(),r(4,"button",52),C("click",function(){h(t);let o=g(2);return f(o.closeRightPanel())}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"div"),c(8),a(),r(9,"div"),c(10),a(),r(11,"div"),c(12),a()()()}if(i&2){let t=g(2);s(8),b("\uC120\uD0DD \uD69F\uC218: ",t.currentPath.length),s(2),b("\uC2A4\uD1A0\uB9AC \uBE14\uB85D: ",t.storyBlocks.length),s(2),B("\uACBD\uD5D8\uCE58: ",t.playerCharacter.exp,"/",t.playerCharacter.maxExp)}}function _i(i,e){if(i&1){let t=x();r(0,"div",161)(1,"div",162)(2,"div",163),P(3,Wo,5,0,"div",164)(4,Xo,21,1,"div",165),a()(),r(5,"div",166)(6,"div",167)(7,"button",168),C("click",function(){h(t);let o=g();return f(o.toggleLeftPanel())}),c(8,"\u2630"),a(),r(9,"button",169),C("click",function(){h(t);let o=g();return f(o.backToNovelSelection())}),c(10,"\u{1F3E0} \uD648"),a(),r(11,"div",170)(12,"div",171),c(13),a(),r(14,"div",172),c(15),a(),r(16,"div",173),c(17),a(),r(18,"div",174),c(19),a(),P(20,Ko,2,2,"div",175)(21,Zo,2,1,"div",176)(22,Qo,2,2,"div",177),a(),r(23,"div",178)(24,"button",179),C("click",function(){h(t);let o=g();return f(o.toggleWuxiaPanel())}),c(25," \u2694\uFE0F \uBB34\uD611 "),a(),r(26,"button",180),C("click",function(){h(t);let o=g();return f(o.toggleAdvancedFlowPanel())}),c(27," \u{1F5FA}\uFE0F \uD50C\uB85C\uC6B0 "),a(),r(28,"button",181),C("click",function(){h(t);let o=g();return f(o.logout())}),c(29," \u{1F6AA} "),a(),r(30,"button",168),C("click",function(){h(t);let o=g();return f(o.toggleRightPanel())}),c(31,"\u{1F4CA}"),a(),r(32,"button",182),C("click",function(){h(t);let o=g();return f(o.toggleTheme())}),c(33),a()()(),r(34,"div",183)(35,"div",184)(36,"h2"),c(37,"\uC81C1\uC7A5 - \uC6B4\uBA85\uC758 \uC2DC\uC791"),a()(),r(38,"div",185),P(39,ni,3,2,"div",186),a(),P(40,ai,72,30,"div",187)(41,si,5,1,"div",70)(42,di,31,3,"div",70),a()(),r(43,"div",188)(44,"div",189),P(45,gi,5,0,"div",164)(46,pi,13,4,"div",165),a()()()}if(i&2){let t=g();s(),w("collapsed",t.isLeftPanelCollapsed),s(2),p("ngIf",t.isLeftPanelCollapsed),s(),p("ngIf",!t.isLeftPanelCollapsed),s(9),B("",t.playerCharacter.name," Lv.",t.playerCharacter.level),s(2),B("HP: ",t.playerCharacter.hp,"/",t.playerCharacter.maxHp),s(2),B("MP: ",t.playerCharacter.mp,"/",t.playerCharacter.maxMp),s(2),b("\u{1F4B0} ",t.gold,"G"),s(),p("ngIf",t.playerInternalPower),s(),p("ngIf",t.playerInternalPower),s(),p("ngIf",t.playerFaction),s(10),p("title",t.isDarkTheme?"\uB77C\uC774\uD2B8 \uBAA8\uB4DC\uB85C \uC804\uD658":"\uB2E4\uD06C \uBAA8\uB4DC\uB85C \uC804\uD658"),s(),b(" ",t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"," "),s(6),p("ngForOf",t.storyBlocks),s(),p("ngIf",t.inBattle),s(),p("ngIf",t.choices.length>0&&!t.inBattle),s(),p("ngIf",t.inBattle&&!t.battleEnded&&t.battleTurn==="player"),s(),w("collapsed",t.isRightPanelCollapsed),s(2),p("ngIf",t.isRightPanelCollapsed),s(),p("ngIf",!t.isRightPanelCollapsed)}}function mi(i,e){if(i&1){let t=x();r(0,"div",242),C("click",function(){h(t);let o=g();return f(o.closeAllPanels())}),a()}}function Ci(i,e){if(i&1){let t=x();r(0,"div",243)(1,"div",194)(2,"h3"),c(3,"\u{1F4CA} \uCE90\uB9AD\uD130 \uC815\uBCF4"),a(),r(4,"button",52),C("click",function(){h(t);let o=g();return f(o.showCharacterPanel=!1)}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"div"),c(8),a(),r(9,"div"),c(10),a(),r(11,"div"),c(12),a(),r(13,"div"),c(14),a()()()}if(i&2){let t=g();s(8),b("\uC774\uB984: ",t.playerCharacter.name),s(2),b("\uB808\uBCA8: ",t.playerCharacter.level),s(2),b("\uACF5\uACA9\uB825: ",t.playerCharacter.attack),s(2),b("\uBC29\uC5B4\uB825: ",t.playerCharacter.defense)}}function ui(i,e){if(i&1){let t=x();r(0,"button",246),C("click",function(){h(t);let o=g().$implicit,l=g(2);return f(l.useItem(o))}),c(1,"\uC0AC\uC6A9"),a()}}function hi(i,e){if(i&1){let t=x();r(0,"button",246),C("click",function(){h(t);let o=g().$implicit,l=g(2);return f(l.equipItem(o))}),c(1),a()}if(i&2){let t=g().$implicit;s(),b(" ",t.isEquipped?"\uD574\uC81C":"\uCC29\uC6A9"," ")}}function fi(i,e){if(i&1){let t=x();r(0,"div"),c(1),P(2,ui,2,0,"button",245)(3,hi,2,1,"button",245),r(4,"button",246),C("click",function(){let o=h(t).$implicit,l=g(2);return f(l.sellItem(o))}),c(5),a()()}if(i&2){let t=e.$implicit;s(),B(" ",t.name," - ",t.description," "),s(),p("ngIf",t.type==="consumable"),s(),p("ngIf",t.type==="weapon"||t.type==="armor"),s(2),b("\uD310\uB9E4 (",t.sellPrice,"G)")}}function Pi(i,e){if(i&1){let t=x();r(0,"div",244)(1,"div",194)(2,"h3"),c(3,"\u{1F392} \uC778\uBCA4\uD1A0\uB9AC"),a(),r(4,"button",52),C("click",function(){h(t);let o=g();return f(o.showInventoryPanel=!1)}),c(5,"\xD7"),a()(),r(6,"div",195),P(7,fi,6,5,"div",85),a()()}if(i&2){let t=g();s(7),p("ngForOf",t.inventory)}}function bi(i,e){if(i&1){let t=x();r(0,"div"),c(1),r(2,"button",248),C("click",function(){let o=h(t).$implicit,l=g(2);return f(l.buyItem(o))}),c(3,"\uAD6C\uB9E4"),a()()}if(i&2){let t=e.$implicit,n=g(2);s(),Ie(" ",t.name," - ",t.price,"G (\uC7AC\uACE0: ",t.stock,") "),s(),p("disabled",n.gold<t.price||t.stock<=0)}}function Mi(i,e){if(i&1){let t=x();r(0,"div",247)(1,"div",194)(2,"h3"),c(3,"\u{1F6D2} \uC0C1\uC810"),a(),r(4,"button",52),C("click",function(){h(t);let o=g();return f(o.showShopPanel=!1)}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"div"),c(8),a(),P(9,bi,4,4,"div",85),a()()}if(i&2){let t=g();s(8),b("\uBCF4\uC720 \uACE8\uB4DC: ",t.gold,"G"),s(),p("ngForOf",t.shopItems)}}function Oi(i,e){i&1&&(r(0,"span"),c(1,"\u{1F9B8} \uC8FC\uC778\uACF5 \uC0DD\uC131"),a())}function xi(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function vi(i,e){i&1&&(r(0,"span"),c(1,"\u2694\uFE0F \uBB34\uB9BC \uACE0\uC218 \uC0DD\uC131"),a())}function yi(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ki(i,e){i&1&&(r(0,"span"),c(1,"\u{1F525} \uC801\uB300\uC790 \uC0DD\uC131"),a())}function wi(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Si(i,e){i&1&&(r(0,"span"),c(1,"\u{1F465} \uC870\uC5F0 \uC0DD\uC131"),a())}function Di(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Ei(i,e){if(i&1&&(r(0,"div",72),c(1),a()),i&2){let t=g(2);s(),b(" \u26A0\uFE0F ",t.characterGenerationError," ")}}function Ii(i,e){if(i&1&&(r(0,"span",266),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Bi(i,e){if(i&1&&(r(0,"div",263)(1,"h5"),c(2,"\u2694\uFE0F \uB2A5\uB825"),a(),r(3,"div",264),P(4,Ii,2,1,"span",265),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.generatedCharacter.abilities)}}function Ti(i,e){if(i&1&&(r(0,"span",269),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Ai(i,e){if(i&1&&(r(0,"div",110)(1,"h5"),c(2,"\u2B50 \uD2B9\uC131"),a(),r(3,"div",267),P(4,Ti,2,1,"span",268),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.generatedCharacter.traits)}}function Ni(i,e){if(i&1){let t=x();r(0,"div",255)(1,"h4"),c(2,"\u{1F389} \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",256)(4,"div",257)(5,"span",258),c(6,"\uC774\uB984:"),a(),r(7,"span",259),c(8),a()(),r(9,"div",257)(10,"span",258),c(11,"\uB098\uC774:"),a(),r(12,"span",259),c(13),a()(),r(14,"div",257)(15,"span",258),c(16,"\uC131\uBCC4:"),a(),r(17,"span",259),c(18),a()(),r(19,"div",257)(20,"span",258),c(21,"\uC5ED\uD560:"),a(),r(22,"span",259),c(23),a()()(),r(24,"div",260)(25,"h5"),c(26,"\u{1F4D6} \uC678\uBAA8"),a(),r(27,"p"),c(28),a()(),r(29,"div",260)(30,"h5"),c(31,"\u{1F4AD} \uC131\uACA9"),a(),r(32,"p"),c(33),a()(),r(34,"div",260)(35,"h5"),c(36,"\u{1F4DC} \uBC30\uACBD"),a(),r(37,"p"),c(38),a()(),P(39,Bi,5,1,"div",261),r(40,"div",260)(41,"h5"),c(42,"\u{1F3AF} \uBAA9\uD45C"),a(),r(43,"p"),c(44),a()(),P(45,Ai,5,1,"div",108),r(46,"div",158)(47,"button",87),C("click",function(){h(t);let o=g(2);return f(o.saveGeneratedCharacter())}),c(48," \u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5\uD558\uAE30 "),a(),r(49,"button",262),C("click",function(){h(t);let o=g(2);return f(o.applyGeneratedCharacter())}),c(50," \u2705 \uC774 \uCE90\uB9AD\uD130\uB85C \uD50C\uB808\uC774\uD558\uAE30 "),a(),r(51,"button",89),C("click",function(){h(t);let o=g(2);return f(o.generateAiCharacter())}),c(52," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),a()()()}if(i&2){let t=g(2);s(8),u(t.generatedCharacter.name),s(5),b("",t.generatedCharacter.age,"\uC138"),s(5),u(t.generatedCharacter.gender==="male"?"\uB0A8\uC131":"\uC5EC\uC131"),s(5),u(t.generatedCharacter.role),s(5),u(t.generatedCharacter.appearance),s(5),u(t.generatedCharacter.personality),s(5),u(t.generatedCharacter.background),s(),p("ngIf",t.generatedCharacter.abilities),s(5),u(t.generatedCharacter.goals),s(),p("ngIf",t.generatedCharacter.traits)}}function Fi(i,e){if(i&1){let t=x();r(0,"div",249)(1,"div",194)(2,"h3"),c(3,"\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),a(),r(4,"button",52),C("click",function(){h(t);let o=g();return f(o.showCharacterCreatorPanel=!1)}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"div",250)(8,"div",53)(9,"h4"),c(10,"\u2728 Loworld AI\uB85C \uCE90\uB9AD\uD130 \uC0DD\uC131\uD558\uAE30"),a(),r(11,"p"),c(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),a()(),r(13,"div",251)(14,"button",252),C("click",function(){h(t);let o=g();return f(o.generateAiCharacter("\uC8FC\uC778\uACF5"))}),P(15,Oi,2,0,"span",70)(16,xi,2,0,"span",70),a(),r(17,"button",253),C("click",function(){h(t);let o=g();return f(o.generateAiCharacter("\uBB34\uB9BC \uACE0\uC218"))}),P(18,vi,2,0,"span",70)(19,yi,2,0,"span",70),a(),r(20,"button",253),C("click",function(){h(t);let o=g();return f(o.generateAiCharacter("\uC801\uB300\uC790"))}),P(21,ki,2,0,"span",70)(22,wi,2,0,"span",70),a(),r(23,"button",253),C("click",function(){h(t);let o=g();return f(o.generateAiCharacter("\uC870\uC5F0"))}),P(24,Si,2,0,"span",70)(25,Di,2,0,"span",70),a()(),P(26,Ei,2,1,"div",54)(27,Ni,53,10,"div",254),a()()()}if(i&2){let t=g();s(14),p("disabled",t.isGeneratingCharacter),s(),p("ngIf",!t.isGeneratingCharacter),s(),p("ngIf",t.isGeneratingCharacter),s(),p("disabled",t.isGeneratingCharacter),s(),p("ngIf",!t.isGeneratingCharacter),s(),p("ngIf",t.isGeneratingCharacter),s(),p("disabled",t.isGeneratingCharacter),s(),p("ngIf",!t.isGeneratingCharacter),s(),p("ngIf",t.isGeneratingCharacter),s(),p("disabled",t.isGeneratingCharacter),s(),p("ngIf",!t.isGeneratingCharacter),s(),p("ngIf",t.isGeneratingCharacter),s(),p("ngIf",t.characterGenerationError),s(),p("ngIf",t.generatedCharacter)}}function Ri(i,e){i&1&&(r(0,"span"),c(1,"\u2694\uFE0F \uC804\uD1B5 \uBB34\uD611"),a())}function Gi(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function zi(i,e){i&1&&(r(0,"span"),c(1,"\u{1F31F} \uD604\uB300 \uD310\uD0C0\uC9C0"),a())}function Vi(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Li(i,e){i&1&&(r(0,"span"),c(1,"\u{1F311} \uC554\uD751 \uBB34\uD611"),a())}function $i(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ji(i,e){i&1&&(r(0,"span"),c(1,"\u{1F49D} \uB85C\uB9E8\uC2A4"),a())}function qi(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Ui(i,e){if(i&1&&(r(0,"div",72),c(1),a()),i&2){let t=g(2);s(),b(" \u26A0\uFE0F ",t.scenarioGenerationError," ")}}function Hi(i,e){if(i&1&&(r(0,"li"),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Yi(i,e){if(i&1&&(r(0,"div",279)(1,"h5"),c(2,"\u{1F465} \uB4F1\uC7A5\uC778\uBB3C"),a(),r(3,"ul"),P(4,Hi,2,1,"li",85),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.generatedScenario.characters)}}function Wi(i,e){if(i&1&&(r(0,"span",282),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Xi(i,e){if(i&1&&(r(0,"div",119)(1,"h5"),c(2,"\u{1F3F7}\uFE0F \uD0DC\uADF8"),a(),r(3,"div",280),P(4,Wi,2,1,"span",281),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.generatedScenario.tags)}}function Ki(i,e){if(i&1){let t=x();r(0,"div",274)(1,"h4"),c(2,"\u{1F389} \uC2DC\uB098\uB9AC\uC624\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",275)(4,"h2"),c(5),a()(),r(6,"div",276)(7,"h5"),c(8,"\u{1F4D6} \uC124\uBA85"),a(),r(9,"p"),c(10),a()(),r(11,"div",276)(12,"h5"),c(13,"\u{1F4CD} \uBC30\uACBD"),a(),r(14,"p"),c(15),a()(),P(16,Yi,5,1,"div",277),r(17,"div",276)(18,"h5"),c(19,"\u2694\uFE0F \uAC08\uB4F1"),a(),r(20,"p"),c(21),a()(),r(22,"div",276)(23,"h5"),c(24,"\u{1F3AF} \uBAA9\uD45C"),a(),r(25,"p"),c(26),a()(),r(27,"div",276)(28,"h5"),c(29,"\u{1F4AD} \uBD84\uC704\uAE30"),a(),r(30,"p"),c(31),a()(),P(32,Xi,5,1,"div",278),r(33,"div",158)(34,"button",262),C("click",function(){h(t);let o=g(2);return f(o.saveGeneratedScenario())}),c(35," \u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uD558\uAE30 "),a(),r(36,"button",88),C("click",function(){h(t);let o=g(2);return f(o.startGameWithScenario())}),c(37," \u{1F3AE} \uC774 \uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791 "),a(),r(38,"button",89),C("click",function(){h(t);let o=g(2);return f(o.generateAiScenario())}),c(39," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),a()()()}if(i&2){let t=g(2);s(5),u(t.generatedScenario.title),s(5),u(t.generatedScenario.description),s(5),u(t.generatedScenario.setting),s(),p("ngIf",t.generatedScenario.characters),s(5),u(t.generatedScenario.conflict),s(5),u(t.generatedScenario.goal),s(5),u(t.generatedScenario.mood),s(),p("ngIf",t.generatedScenario.tags)}}function Zi(i,e){if(i&1){let t=x();r(0,"div",270)(1,"div",194)(2,"h3"),c(3,"\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131"),a(),r(4,"button",52),C("click",function(){h(t);let o=g();return f(o.showScenarioCreatorPanel=!1)}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"div",271)(8,"div",53)(9,"h4"),c(10,"\u2728 Loworld AI\uB85C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30"),a(),r(11,"p"),c(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),a()(),r(13,"div",272)(14,"button",252),C("click",function(){h(t);let o=g();return f(o.generateAiScenario("\uBB34\uD611","\uC804\uD1B5\uC801\uC778","\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294"))}),P(15,Ri,2,0,"span",70)(16,Gi,2,0,"span",70),a(),r(17,"button",253),C("click",function(){h(t);let o=g();return f(o.generateAiScenario("\uD310\uD0C0\uC9C0","\uD604\uB300\uC801\uC778","\uC2E0\uBE44\uB85C\uC6B4"))}),P(18,zi,2,0,"span",70)(19,Vi,2,0,"span",70),a(),r(20,"button",253),C("click",function(){h(t);let o=g();return f(o.generateAiScenario("\uBB34\uD611","\uC554\uD751","\uC5B4\uB450\uC6B4"))}),P(21,Li,2,0,"span",70)(22,$i,2,0,"span",70),a(),r(23,"button",253),C("click",function(){h(t);let o=g();return f(o.generateAiScenario("\uB85C\uB9E8\uC2A4","\uAC10\uC131\uC801\uC778","\uB2EC\uCF64\uD55C"))}),P(24,ji,2,0,"span",70)(25,qi,2,0,"span",70),a()(),P(26,Ui,2,1,"div",54)(27,Ki,40,8,"div",273),a()()()}if(i&2){let t=g();s(14),p("disabled",t.isGeneratingScenario),s(),p("ngIf",!t.isGeneratingScenario),s(),p("ngIf",t.isGeneratingScenario),s(),p("disabled",t.isGeneratingScenario),s(),p("ngIf",!t.isGeneratingScenario),s(),p("ngIf",t.isGeneratingScenario),s(),p("disabled",t.isGeneratingScenario),s(),p("ngIf",!t.isGeneratingScenario),s(),p("ngIf",t.isGeneratingScenario),s(),p("disabled",t.isGeneratingScenario),s(),p("ngIf",!t.isGeneratingScenario),s(),p("ngIf",t.isGeneratingScenario),s(),p("ngIf",t.scenarioGenerationError),s(),p("ngIf",t.generatedScenario)}}function Qi(i,e){i&1&&(r(0,"span"),c(1,"\u2694\uFE0F \uACE0\uAE09 \uBB34\uAE30"),a())}function Ji(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function tr(i,e){i&1&&(r(0,"span"),c(1,"\u{1F6E1}\uFE0F \uACE0\uAE09 \uBC29\uC5B4\uAD6C"),a())}function er(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function nr(i,e){i&1&&(r(0,"span"),c(1,"\u2B50 \uD76C\uADC0 \uBB34\uAE30"),a())}function or(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ir(i,e){i&1&&(r(0,"span"),c(1,"\u{1F31F} \uC804\uC124 \uBB34\uAE30"),a())}function rr(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ar(i,e){i&1&&(r(0,"span"),c(1,"\u{1F9EA} \uACE0\uAE09 \uC18C\uBE44\uD488"),a())}function cr(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function sr(i,e){i&1&&(r(0,"span"),c(1,"\u{1F4AB} \uD2B9\uC218 \uC544\uC774\uD15C"),a())}function lr(i,e){i&1&&(r(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function dr(i,e){if(i&1&&(r(0,"div",72),c(1),a()),i&2){let t=g(2);s(),b(" \u26A0\uFE0F ",t.itemGenerationError," ")}}function gr(i,e){if(i&1&&(r(0,"div",145)(1,"span",211),c(2,"\u2694\uFE0F \uACF5\uACA9\uB825"),a(),r(3,"span",147),c(4),a()()),i&2){let t=g(4);s(4),b("+",t.generatedItem.stats.attack)}}function pr(i,e){if(i&1&&(r(0,"div",145)(1,"span",211),c(2,"\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825"),a(),r(3,"span",147),c(4),a()()),i&2){let t=g(4);s(4),b("+",t.generatedItem.stats.defense)}}function _r(i,e){if(i&1&&(r(0,"div",145)(1,"span",211),c(2,"\u2764\uFE0F HP"),a(),r(3,"span",147),c(4),a()()),i&2){let t=g(4);s(4),b("+",t.generatedItem.stats.hp)}}function mr(i,e){if(i&1&&(r(0,"div",145)(1,"span",211),c(2,"\u{1F499} MP"),a(),r(3,"span",147),c(4),a()()),i&2){let t=g(4);s(4),b("+",t.generatedItem.stats.mp)}}function Cr(i,e){if(i&1&&(r(0,"div",134)(1,"h5"),c(2,"\u{1F4CA} \uB2A5\uB825\uCE58"),a(),r(3,"div",304),P(4,gr,5,1,"div",305)(5,pr,5,1,"div",305)(6,_r,5,1,"div",305)(7,mr,5,1,"div",305),a()()),i&2){let t=g(3);s(4),p("ngIf",t.generatedItem.stats.attack),s(),p("ngIf",t.generatedItem.stats.defense),s(),p("ngIf",t.generatedItem.stats.hp),s(),p("ngIf",t.generatedItem.stats.mp)}}function ur(i,e){if(i&1&&(r(0,"li"),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function hr(i,e){if(i&1&&(r(0,"div",306)(1,"h5"),c(2,"\u2728 \uD6A8\uACFC"),a(),r(3,"ul"),P(4,ur,2,1,"li",85),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.generatedItem.effects)}}function fr(i,e){if(i&1&&(r(0,"div",307)(1,"h5"),c(2,"\u26A0\uFE0F \uC0AC\uC6A9 \uC870\uAC74"),a(),r(3,"p"),c(4),a()()),i&2){let t=g(3);s(4),u(t.generatedItem.requirements)}}function Pr(i,e){if(i&1&&(r(0,"div",308)(1,"h5"),c(2,"\u{1F4DC} \uC804\uC124"),a(),r(3,"p",309),c(4),a()()),i&2){let t=g(3);s(4),u(t.generatedItem.lore)}}function br(i,e){if(i&1&&(r(0,"span",282),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Mr(i,e){if(i&1&&(r(0,"div",130)(1,"h5"),c(2,"\u{1F3F7}\uFE0F \uD0DC\uADF8"),a(),r(3,"div",280),P(4,br,2,1,"span",281),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.generatedItem.tags)}}function Or(i,e){if(i&1){let t=x();r(0,"div",293)(1,"h4"),c(2,"\u{1F389} \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",294)(4,"h2"),c(5),a(),r(6,"div",295),c(7),a()(),r(8,"div",296)(9,"span",297),c(10),a()(),r(11,"div",298)(12,"h5"),c(13,"\u{1F4D6} \uC124\uBA85"),a(),r(14,"p"),c(15),a()(),P(16,Cr,8,4,"div",129)(17,hr,5,1,"div",299)(18,fr,5,1,"div",300)(19,Pr,5,1,"div",301)(20,Mr,5,1,"div",302),r(21,"div",158)(22,"button",87),C("click",function(){h(t);let o=g(2);return f(o.saveGeneratedItem())}),c(23," \u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5\uD558\uAE30 "),a(),r(24,"button",303),C("click",function(){h(t);let o=g(2);return f(o.addGeneratedItemToInventory())}),c(25," \u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 "),a(),r(26,"button",89),C("click",function(){h(t);let o=g(2);return f(o.generateAiItem())}),c(27," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),a()()()}if(i&2){let t=g(2);s(3),w("grade-legendary",t.generatedItem.grade==="\uC2E0\uD654"||t.generatedItem.grade==="\uC804\uC124"),s(2),u(t.generatedItem.name),s(),q("grade-"+t.generatedItem.grade),s(),b(" ",t.generatedItem.grade," "),s(3),b("\u{1F4E6} ",t.generatedItem.type),s(5),u(t.generatedItem.description),s(),p("ngIf",t.generatedItem.stats),s(),p("ngIf",t.generatedItem.effects&&t.generatedItem.effects.length>0),s(),p("ngIf",t.generatedItem.requirements),s(),p("ngIf",t.generatedItem.lore),s(),p("ngIf",t.generatedItem.tags&&t.generatedItem.tags.length>0)}}function xr(i,e){if(i&1){let t=x();r(0,"div",283)(1,"div",194)(2,"h3"),c(3,"\u{1F48E} AI \uC544\uC774\uD15C \uC0DD\uC131"),a(),r(4,"button",52),C("click",function(){h(t);let o=g();return f(o.showItemCreatorPanel=!1)}),c(5,"\xD7"),a()(),r(6,"div",195)(7,"div",284)(8,"div",53)(9,"h4"),c(10,"\u2728 Loworld AI\uB85C \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30"),a(),r(11,"p"),c(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),a()(),r(13,"div",285)(14,"button",286),C("click",function(){h(t);let o=g();return f(o.generateAiItem("\uBB34\uAE30","\uACE0\uAE09"))}),P(15,Qi,2,0,"span",70)(16,Ji,2,0,"span",70),a(),r(17,"button",287),C("click",function(){h(t);let o=g();return f(o.generateAiItem("\uBC29\uC5B4\uAD6C","\uACE0\uAE09"))}),P(18,tr,2,0,"span",70)(19,er,2,0,"span",70),a(),r(20,"button",288),C("click",function(){h(t);let o=g();return f(o.generateAiItem("\uBB34\uAE30","\uD76C\uADC0"))}),P(21,nr,2,0,"span",70)(22,or,2,0,"span",70),a(),r(23,"button",289),C("click",function(){h(t);let o=g();return f(o.generateAiItem("\uBB34\uAE30","\uC804\uC124"))}),P(24,ir,2,0,"span",70)(25,rr,2,0,"span",70),a(),r(26,"button",290),C("click",function(){h(t);let o=g();return f(o.generateAiItem("\uC18C\uBE44\uD488","\uACE0\uAE09"))}),P(27,ar,2,0,"span",70)(28,cr,2,0,"span",70),a(),r(29,"button",291),C("click",function(){h(t);let o=g();return f(o.generateAiItem("\uD2B9\uC218","\uD76C\uADC0"))}),P(30,sr,2,0,"span",70)(31,lr,2,0,"span",70),a()(),P(32,dr,2,1,"div",54)(33,Or,28,13,"div",292),a()()()}if(i&2){let t=g();s(14),p("disabled",t.isGeneratingItem),s(),p("ngIf",!t.isGeneratingItem),s(),p("ngIf",t.isGeneratingItem),s(),p("disabled",t.isGeneratingItem),s(),p("ngIf",!t.isGeneratingItem),s(),p("ngIf",t.isGeneratingItem),s(),p("disabled",t.isGeneratingItem),s(),p("ngIf",!t.isGeneratingItem),s(),p("ngIf",t.isGeneratingItem),s(),p("disabled",t.isGeneratingItem),s(),p("ngIf",!t.isGeneratingItem),s(),p("ngIf",t.isGeneratingItem),s(),p("disabled",t.isGeneratingItem),s(),p("ngIf",!t.isGeneratingItem),s(),p("ngIf",t.isGeneratingItem),s(),p("disabled",t.isGeneratingItem),s(),p("ngIf",!t.isGeneratingItem),s(),p("ngIf",t.isGeneratingItem),s(),p("ngIf",t.itemGenerationError),s(),p("ngIf",t.generatedItem)}}function vr(i,e){i&1&&(r(0,"span"),c(1,"\u{1F3AC}"),a())}function yr(i,e){i&1&&(r(0,"span"),c(1,"\u{1F4D6}"),a())}function kr(i,e){i&1&&(r(0,"span"),c(1,"\u{1F500}"),a())}function wr(i,e){i&1&&(r(0,"span"),c(1,"\u{1F4CD}"),a())}function Sr(i,e){if(i&1&&(r(0,"div",336),c(1),a()),i&2){let t=e.$implicit;s(),B(" \u2192 ",t.substring(0,30),"",t.length>30?"...":""," ")}}function Dr(i,e){if(i&1&&(r(0,"div",334),P(1,Sr,2,2,"div",335),a()),i&2){let t=g().$implicit;s(),p("ngForOf",t.choices)}}function Er(i,e){i&1&&I(0,"div",337)}function Ir(i,e){if(i&1&&(r(0,"div",327)(1,"div",328),P(2,vr,2,0,"span",70)(3,yr,2,0,"span",70)(4,kr,2,0,"span",70)(5,wr,2,0,"span",70),a(),r(6,"div",329)(7,"div",330),c(8),a(),r(9,"div",331),c(10),a(),P(11,Dr,2,1,"div",332),a(),P(12,Er,1,0,"div",333),a()),i&2){let t=e.$implicit,n=e.index,o=g(2);V("margin-left",t.level*40,"px"),p("ngClass",Te(11,po,t.type==="start",t.type==="story",t.type==="choice",t.type==="current")),s(2),p("ngIf",t.type==="start"),s(),p("ngIf",t.type==="story"),s(),p("ngIf",t.type==="choice"),s(),p("ngIf",t.type==="current"),s(3),u(t.label),s(2),b("\uB808\uBCA8 ",t.level),s(),p("ngIf",t.type==="current"&&t.choices),s(),p("ngIf",n<o.storyFlowNodes.length-1)}}function Br(i,e){if(i&1){let t=x();r(0,"div",310)(1,"div",311)(2,"div",312)(3,"div",313)(4,"span",314),c(5,"\u22EE\u22EE"),a(),r(6,"h3"),c(7,"\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0"),a()(),r(8,"button",52),C("click",function(){h(t);let o=g();return f(o.toggleStoryFlowPanel())}),c(9,"\u2715"),a()(),r(10,"div",315)(11,"p"),c(12,"\uD604\uC7AC\uAE4C\uC9C0\uC758 \uC120\uD0DD\uACFC \uC55E\uC73C\uB85C\uC758 \uAC00\uB2A5\uD55C \uACBD\uB85C\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4. "),r(13,"strong"),c(14,"\uD5E4\uB354\uB97C \uB4DC\uB798\uADF8"),a(),c(15,"\uD558\uC5EC \uC774\uB3D9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),a(),r(16,"div",316)(17,"span",145),c(18),a(),r(19,"span",145),c(20),a(),r(21,"span",145),c(22),a()()(),r(23,"div",317)(24,"div",318),P(25,Ir,13,16,"div",319),a(),r(26,"div",320)(27,"h4"),c(28,"\uBC94\uB840"),a(),r(29,"div",321)(30,"div",322)(31,"span",323),c(32,"\u{1F3AC}"),a(),c(33," \uC2DC\uC791"),a(),r(34,"div",322)(35,"span",324),c(36,"\u{1F4D6}"),a(),c(37," \uC2A4\uD1A0\uB9AC"),a(),r(38,"div",322)(39,"span",325),c(40,"\u{1F500}"),a(),c(41," \uC120\uD0DD"),a(),r(42,"div",322)(43,"span",326),c(44,"\u{1F4CD}"),a(),c(45," \uD604\uC7AC \uC704\uCE58"),a()()()()()()}if(i&2){let t=g();s(18),b("\u{1F4CA} \uC9C4\uD589 \uB2E8\uACC4: ",t.storyBlocks.length),s(2),b("\u{1F500} \uC120\uD0DD \uD69F\uC218: ",t.currentPath.length),s(2),b("\u{1F3AF} \uD604\uC7AC \uC120\uD0DD\uC9C0: ",t.choices.length),s(3),p("ngForOf",t.storyFlowNodes)}}function Tr(i,e){if(i&1&&(r(0,"span",123),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function Ar(i,e){if(i&1&&(r(0,"div",119),P(1,Tr,2,1,"span",120),a()),i&2){let t=g().$implicit;s(),p("ngForOf",t.tags.slice(0,3))}}function Nr(i,e){if(i&1){let t=x();r(0,"div",116),C("click",function(){let o=h(t).$implicit,l=g(2);return f(l.linkScenarioToChoice(l.currentLinkingChoiceIndex,o.id))}),r(1,"div",117)(2,"h4"),c(3),a(),r(4,"span",346),c(5),a()(),r(6,"div",347)(7,"p",276),c(8),a(),r(9,"div",121)(10,"span",83),c(11),a(),r(12,"span",83),c(13),a()(),P(14,Ar,2,1,"div",278),a()()}if(i&2){let t=e.$implicit;s(3),u(t.title),s(2),u(t.genre),s(3),u(t.description),s(3),b("\u{1F4CD} ",t.setting),s(2),b("\u{1F3AD} ",t.mood),s(),p("ngIf",t.tags&&t.tags.length>0)}}function Fr(i,e){if(i&1){let t=x();r(0,"div",348)(1,"p"),c(2,"\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),a(),r(3,"button",349),C("click",function(){h(t);let o=g(2);return o.openScenarioCreator(),f(o.closeScenarioLinkPanel())}),c(4," \u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 "),a()()}}function Rr(i,e){if(i&1){let t=x();r(0,"div",338)(1,"div",339)(2,"div",340)(3,"div",313)(4,"span",314),c(5,"\u22EE\u22EE"),a(),r(6,"h3"),c(7,"\u{1F517} \uC120\uD0DD\uC9C0\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0"),a()(),r(8,"button",52),C("click",function(){h(t);let o=g();return f(o.closeScenarioLinkPanel())}),c(9,"\u2715"),a()(),r(10,"div",341)(11,"p"),c(12,"\uC120\uD0DD\uC9C0 "),r(13,"strong"),c(14),a(),c(15,"\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694."),a(),r(16,"p",342),c(17,"\u{1F4A1} \uC120\uD0DD\uD558\uBA74 \uD574\uB2F9 \uC120\uD0DD\uC9C0\uB97C \uACE0\uB97C \uB54C \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC804\uAC1C\uB429\uB2C8\uB2E4."),a()(),r(18,"div",343)(19,"div",344),P(20,Nr,15,6,"div",115),a(),P(21,Fr,5,0,"div",345),a()()()}if(i&2){let t=g();s(14),b("#",t.currentLinkingChoiceIndex+1),s(6),p("ngForOf",t.savedScenarios),s(),p("ngIf",t.savedScenarios.length===0)}}function Gr(i,e){if(i&1&&(r(0,"div",367)(1,"div",368),c(2),a(),r(3,"div",369)(4,"div",370),c(5),a(),r(6,"div",371),c(7),a()()()),i&2){let t=g(2);s(2),u(t.getNodeIcon(t.getCurrentNode())),s(3),u(t.getCurrentNode().title),s(2),B("\uACBD\uB85C: ",t.storyProgress.visitedNodes.length,"/",t.storyNodes.length)}}function zr(i,e){if(i&1&&(j(),I(0,"path",372)),i&2){let t=e.$implicit;z("d",t.path)("stroke",t.color)("stroke-width",t.width*.5)}}function Vr(i,e){if(i&1&&(j(),r(0,"g"),I(1,"circle",373),r(2,"text",374),c(3),a()()),i&2){let t=e.$implicit,n=g(2);z("transform","translate("+t.position.x+","+t.position.y+")"),s(),w("pulse",t.isCurrent),z("fill",n.getNodeColor(t))("stroke",n.getNodeBorderColor(t))("stroke-width",t.isCurrent?3:1.5),s(2),b(" ",n.getNodeIcon(t)," ")}}function Lr(i,e){if(i&1&&(r(0,"span",379),c(1),a()),i&2){let t,n=e.$implicit,o=g(3);w("current",n.nodeId===o.currentStoryNodeId),p("title",((t=o.getNodeById(n.nodeId))==null?null:t.title)||"\uC54C \uC218 \uC5C6\uC74C"),s(),b(" ",o.getNodeIcon(o.getNodeById(n.nodeId)||o.storyNodes[0])," ")}}function $r(i,e){if(i&1&&(r(0,"div",375)(1,"div",376),c(2,"\uCD5C\uADFC \uACBD\uB85C"),a(),r(3,"div",377),P(4,Lr,2,4,"span",378),a()()),i&2){let t=g(2);s(4),p("ngForOf",t.storyProgress.pathHistory.slice(-8))}}function jr(i,e){if(i&1){let t=x();r(0,"div",350)(1,"div",351)(2,"div",194)(3,"div",352)(4,"span",353),c(5),a(),r(6,"span",354),c(7),a()(),r(8,"div",355)(9,"h3"),c(10,"\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uB9F5"),a(),r(11,"div",25)(12,"button",356),C("click",function(){h(t);let o=g();return f(o.toggleAdvancedFlowPanel())}),c(13," \u26F6 "),a(),r(14,"button",357),C("click",function(){h(t);let o=g();return f(o.toggleFlowPanel())}),c(15," \u2715 "),a()()()(),P(16,Gr,8,4,"div",358),r(17,"div",359),j(),r(18,"svg",360)(19,"g",361),P(20,zr,1,3,"path",362),a(),r(21,"g",363),P(22,Vr,4,7,"g",85),a()()(),bt(),r(23,"div",364)(24,"div",145)(25,"span",146),c(26,"\u{1F4CD}"),a(),r(27,"span",365),c(28),a()(),r(29,"div",145)(30,"span",146),c(31,"\u{1F500}"),a(),r(32,"span",365),c(33),a()(),r(34,"div",145)(35,"span",146),c(36,"\u2694\uFE0F"),a(),r(37,"span",365),c(38),a()()(),P(39,$r,5,1,"div",366),a()()}if(i&2){let t=g();s(5),u(t.getCurrentTime()),s(2),b("",t.calculateExplorationRate(),"%"),s(9),p("ngIf",t.getCurrentNode()),s(2),z("viewBox",t.flowViewBox),s(2),p("ngForOf",t.storyConnections),s(2),p("ngForOf",t.visibleNodes),s(6),u(t.storyProgress.visitedNodes.length),s(5),u(t.storyProgress.totalChoices),s(5),B("",t.storyProgress.battlesWon,"/",t.storyProgress.battlesWon+t.storyProgress.battlesLost),s(),p("ngIf",t.storyProgress.pathHistory.length>0)}}function qr(i,e){if(i&1){let t=x();r(0,"button",380),C("click",function(){h(t);let o=g();return f(o.toggleFlowPanel())}),r(1,"span",381),c(2,"\u{1F5FA}\uFE0F"),a(),r(3,"span",382),c(4,"\uB9F5"),a()()}}function Ur(i,e){if(i&1){let t=x();r(0,"div",391)(1,"div",392)(2,"button",393),C("click",function(){h(t);let o=g(2);return f(o.zoomIn())}),c(3," \u{1F50D}+ \uD655\uB300 "),a(),r(4,"button",394),C("click",function(){h(t);let o=g(2);return f(o.zoomOut())}),c(5," \u{1F50D}\u2212 \uCD95\uC18C "),a(),r(6,"button",395),C("click",function(){h(t);let o=g(2);return f(o.centerView())}),c(7," \u{1F3AF} \uC911\uC559 "),a(),r(8,"button",396),C("click",function(){h(t);let o=g(2);return f(o.fitToScreen())}),c(9," \u{1F4D0} \uC804\uCCB4 "),a()(),r(10,"div",392)(11,"button",397),C("click",function(){h(t);let o=g(2);return f(o.toggleFilter("visited"))}),c(12," \u2705 \uBC29\uBB38 \uACBD\uB85C "),a(),r(13,"button",398),C("click",function(){h(t);let o=g(2);return f(o.toggleFilter("battles"))}),c(14," \u2694\uFE0F \uC804\uD22C "),a(),r(15,"button",399),C("click",function(){h(t);let o=g(2);return f(o.toggleFilter("endings"))}),c(16," \u{1F3C1} \uC5D4\uB529 "),a()(),r(17,"div",392)(18,"select",400),it("ngModelChange",function(o){h(t);let l=g(2);return ot(l.flowLayoutType,o)||(l.flowLayoutType=o),f(o)}),C("change",function(){h(t);let o=g(2);return f(o.changeLayout(o.flowLayoutType))}),r(19,"option",401),c(20,"\uACC4\uCE35\uD615"),a(),r(21,"option",402),c(22,"\uBC29\uC0AC\uD615"),a(),r(23,"option",403),c(24,"\uC790\uC720\uD615"),a()()(),r(25,"div",392)(26,"button",404),C("click",function(){h(t);let o=g(2);return f(o.toggleStats())}),c(27," \u{1F4CA} \uD1B5\uACC4 "),a()()()}if(i&2){let t=g(2);s(11),w("active",t.showVisitedOnly),s(2),w("active",t.showBattlesOnly),s(2),w("active",t.showEndingsOnly),s(3),nt("ngModel",t.flowLayoutType),s(8),w("active",t.showStats)}}function Hr(i,e){if(i&1&&(j(),I(0,"path",433)),i&2){let t=e.$implicit;w("visited",t.isVisited)("current",t.isCurrent),z("d",t.path)("stroke",t.color)("stroke-width",t.width)("marker-end",t.isVisited?"url(#arrowhead-visited)":"url(#arrowhead)")}}function Yr(i,e){if(i&1&&(j(),I(0,"circle",441)),i&2){let t=g().$implicit,n=g(3);z("stroke",n.getNodeBorderColor(t))}}function Wr(i,e){if(i&1&&(j(),r(0,"g",442),I(1,"circle",443),r(2,"text",444),c(3),a()()),i&2){let t=g().$implicit;s(3),b(" ",t.badge," ")}}function Xr(i,e){if(i&1&&(j(),r(0,"g",445),I(1,"circle",446),r(2,"text",447),c(3),a()()),i&2){let t=g().$implicit;s(3),b(" ",t.visitCount," ")}}function Kr(i,e){if(i&1){let t=x();j(),r(0,"g",434),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.onNodeClick(o))}),I(1,"circle",435),P(2,Yr,1,1,"circle",436),r(3,"text",437),c(4),a(),r(5,"text",438),c(6),a(),P(7,Wr,4,1,"g",439)(8,Xr,4,1,"g",440),a()}if(i&2){let t=e.$implicit,n=g(3);w("current",t.isCurrent)("visited",t.isVisited)("available",t.isAvailable)("battle",t.type==="battle")("ending",t.type==="ending")("event",t.type==="event"),z("transform","translate("+t.position.x+","+t.position.y+")"),s(),z("fill",n.getNodeColor(t))("stroke",n.getNodeBorderColor(t)),s(),p("ngIf",t.isCurrent),s(2),b(" ",n.getNodeIcon(t)," "),s(2),b(" ",t.title.length>12?t.title.substring(0,12)+"...":t.title," "),s(),p("ngIf",t.badge),s(),p("ngIf",t.visitCount&&t.visitCount>1)}}function Zr(i,e){if(i&1&&(j(),I(0,"circle",448)),i&2){let t=e.$implicit;z("cx",t.position.x)("cy",t.position.y)("fill",t.isVisited?"#48bb78":"#cbd5e0")}}function Qr(i,e){if(i&1&&(r(0,"div",405),j(),r(1,"svg",406)(2,"defs")(3,"marker",407),I(4,"polygon",408),a(),r(5,"marker",409),I(6,"polygon",410),a(),r(7,"marker",411),I(8,"polygon",412),a(),r(9,"marker",413),I(10,"polygon",414),a()(),r(11,"g",415),P(12,Hr,1,8,"path",416),a(),r(13,"g",417),P(14,Kr,9,20,"g",418),a()(),bt(),r(15,"div",419)(16,"div",420),c(17,"\uC804\uCCB4 \uC9C0\uB3C4"),a(),r(18,"div",421),j(),r(19,"svg",422)(20,"g",423),P(21,Zr,1,3,"circle",424),a()()()(),bt(),r(22,"div",425)(23,"div",426),c(24,"\uB178\uB4DC \uC720\uD615"),a(),r(25,"div",321)(26,"div",322)(27,"div",427),c(28,"\u{1F3AC}"),a(),r(29,"span"),c(30,"\uC2DC\uC791"),a()(),r(31,"div",322)(32,"div",428),c(33,"\u{1F4D6}"),a(),r(34,"span"),c(35,"\uC2A4\uD1A0\uB9AC (\uBC29\uBB38)"),a()(),r(36,"div",322)(37,"div",429),c(38,"\u{1F4D6}"),a(),r(39,"span"),c(40,"\uC2A4\uD1A0\uB9AC (\uBBF8\uBC29\uBB38)"),a()(),r(41,"div",322)(42,"div",430),c(43,"\u2694\uFE0F"),a(),r(44,"span"),c(45,"\uC804\uD22C"),a()(),r(46,"div",322)(47,"div",431),c(48,"\u2728"),a(),r(49,"span"),c(50,"\uC774\uBCA4\uD2B8"),a()(),r(51,"div",322)(52,"div",432),c(53,"\u{1F3C1}"),a(),r(54,"span"),c(55,"\uC5D4\uB529"),a()()()()()),i&2){let t=g(2);s(),z("viewBox",t.flowViewBox)("width","100%")("height","100%"),s(11),p("ngForOf",t.storyConnections),s(2),p("ngForOf",t.visibleNodes),s(5),z("viewBox",t.flowViewBox),s(2),p("ngForOf",t.storyNodes)}}function Jr(i,e){if(i&1&&(r(0,"p"),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function ta(i,e){i&1&&(r(0,"p",460),c(1,"... \uB354\uBCF4\uAE30"),a())}function ea(i,e){if(i&1&&(r(0,"div",461)(1,"h4"),c(2,"\u{1F4CA} \uD1B5\uACC4"),a(),r(3,"div",210)(4,"span",211),c(5,"\uBC29\uBB38 \uD69F\uC218:"),a(),r(6,"span",147),c(7),a()()()),i&2){let t=g(3);s(7),u(t.selectedNode.visitCount||1)}}function na(i,e){if(i&1&&(r(0,"li"),c(1),a()),i&2){let t=e.$implicit;s(),b(" ",t.description||t.type," ")}}function oa(i,e){if(i&1&&(r(0,"div",462)(1,"h4"),c(2,"\u{1F512} \uC9C4\uC785 \uC870\uAC74"),a(),r(3,"ul"),P(4,na,2,1,"li",85),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.selectedNode.conditions)}}function ia(i,e){if(i&1&&(r(0,"div",336)(1,"span",464),c(2),a(),r(3,"span",234),c(4),a()()),i&2){let t=e.$implicit;s(2),u(t.icon||"\u25B6\uFE0F"),s(2),u(t.text)}}function ra(i,e){if(i&1&&(r(0,"div",463)(1,"h4"),c(2),a(),P(3,ia,5,2,"div",335),a()),i&2){let t=g(3);s(2),b("\u{1F500} \uC120\uD0DD\uC9C0 (",t.selectedNode.choices.length,"\uAC1C)"),s(),p("ngForOf",t.selectedNode.choices)}}function aa(i,e){if(i&1&&(r(0,"div",465)(1,"h4"),c(2,"\u2694\uFE0F \uC804\uD22C \uC815\uBCF4"),a(),r(3,"p")(4,"strong"),c(5,"\uC801:"),a(),c(6),a(),r(7,"p")(8,"strong"),c(9,"\uB09C\uC774\uB3C4:"),a(),c(10),a()()),i&2){let t=g(3);s(6),b(" ",t.selectedNode.battleConfig.enemyName),s(4),b(" ","\u2B50".repeat(t.selectedNode.battleConfig.difficulty))}}function ca(i,e){if(i&1){let t=x();r(0,"div",449)(1,"div",450)(2,"h3"),c(3),a(),r(4,"button",451),C("click",function(){h(t);let o=g(2);return f(o.selectedNode=null)}),c(5,"\u2715"),a()(),r(6,"div",452)(7,"div",453)(8,"span",297),c(9),a()(),r(10,"div",454)(11,"h4"),c(12,"\u{1F4D6} \uB0B4\uC6A9 \uBBF8\uB9AC\uBCF4\uAE30"),a(),P(13,Jr,2,1,"p",85)(14,ta,2,0,"p",455),a(),P(15,ea,8,1,"div",456)(16,oa,5,1,"div",457)(17,ra,4,2,"div",458)(18,aa,11,2,"div",459),a()()}if(i&2){let t=g(2);s(3),u(t.selectedNode.title),s(5),w("battle",t.selectedNode.type==="battle")("ending",t.selectedNode.type==="ending")("event",t.selectedNode.type==="event"),s(),B(" ",t.getNodeIcon(t.selectedNode)," ",t.selectedNode.type," "),s(4),p("ngForOf",t.selectedNode.content.slice(0,3)),s(),p("ngIf",t.selectedNode.content.length>3),s(),p("ngIf",t.selectedNode.isVisited),s(),p("ngIf",t.selectedNode.conditions&&t.selectedNode.conditions.length>0),s(),p("ngIf",t.selectedNode.choices&&t.selectedNode.choices.length>0),s(),p("ngIf",t.selectedNode.type==="battle"&&t.selectedNode.battleConfig)}}function sa(i,e){if(i&1&&(r(0,"div",470)(1,"h4"),c(2,"\u{1F4CD} \uD604\uC7AC \uC704\uCE58"),a(),r(3,"div",471)(4,"div",472),c(5),a(),r(6,"div",473)(7,"div",474),c(8),a(),r(9,"div",475),c(10),a()()()()),i&2){let t=g(3);s(5),u(t.getNodeIcon(t.getCurrentNode())),s(3),u(t.getCurrentNode().title),s(2),b("\uACBD\uB85C: ",t.currentPath.join(" \u2192 ")||"\uC2DC\uC791")}}function la(i,e){if(i&1&&(r(0,"span",483),c(1),a()),i&2){let t=g(2).$implicit;s(),b("\u2192 ",t.choiceText)}}function da(i,e){if(i&1&&(De(0),r(1,"span",480),c(2),a(),r(3,"span",481),c(4),a(),P(5,la,2,1,"span",482),Ee()),i&2){let t=e.ngIf,n=g().$implicit,o=g(4);s(2),u(o.getNodeIcon(t)),s(2),u(t.title),s(),p("ngIf",n.choiceText)}}function ga(i,e){if(i&1&&(r(0,"div",479),P(1,da,6,3,"ng-container",70),a()),i&2){let t=e.$implicit,n=g(4);s(),p("ngIf",n.getNodeById(t.nodeId))}}function pa(i,e){if(i&1&&(r(0,"div",476)(1,"h4"),c(2,"\u{1F6E4}\uFE0F \uCD5C\uADFC \uACBD\uB85C"),a(),r(3,"div",477),P(4,ga,2,1,"div",478),a()()),i&2){let t=g(3);s(4),p("ngForOf",t.storyProgress.pathHistory.slice(-5).reverse())}}function _a(i,e){if(i&1&&(r(0,"div",466)(1,"h3"),c(2,"\u{1F4CA} \uC9C4\uD589 \uD1B5\uACC4"),a(),P(3,sa,11,3,"div",467),r(4,"div",304)(5,"div",468)(6,"div",146),c(7,"\u{1F4CD}"),a(),r(8,"div",147),c(9),a(),r(10,"div",211),c(11,"\uBC29\uBB38\uD55C \uB178\uB4DC"),a()(),r(12,"div",468)(13,"div",146),c(14,"\u{1F500}"),a(),r(15,"div",147),c(16),a(),r(17,"div",211),c(18,"\uC120\uD0DD \uD69F\uC218"),a()(),r(19,"div",468)(20,"div",146),c(21,"\u2694\uFE0F"),a(),r(22,"div",147),c(23),a(),r(24,"div",211),c(25,"\uC804\uD22C \uC2B9\uB960"),a()(),r(26,"div",468)(27,"div",146),c(28,"\u{1F5FA}\uFE0F"),a(),r(29,"div",147),c(30),a(),r(31,"div",211),c(32,"\uD0D0\uD5D8\uB960"),a()()(),P(33,pa,5,1,"div",469),a()),i&2){let t=g(2);s(3),p("ngIf",t.getCurrentNode()),s(6),B("",t.storyProgress.visitedNodes.length,"/",t.storyNodes.length),s(7),u(t.storyProgress.totalChoices),s(7),B(" ",t.storyProgress.battlesWon,"/",t.storyProgress.battlesWon+t.storyProgress.battlesLost," "),s(7),b("",t.calculateExplorationRate(),"%"),s(3),p("ngIf",t.storyProgress.pathHistory.length>0)}}function ma(i,e){if(i&1){let t=x();r(0,"div",484)(1,"div",485),c(2,"\u{1F5FA}\uFE0F"),a(),r(3,"h3"),c(4,"\uC2A4\uD1A0\uB9AC \uB9F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4"),a(),r(5,"p"),c(6,"\uC0D8\uD50C \uC2A4\uD1A0\uB9AC\uB97C \uB85C\uB4DC\uD558\uAC70\uB098 AI\uB85C \uC0C8\uB85C\uC6B4 \uC2A4\uD1A0\uB9AC\uB97C \uC0DD\uC131\uD558\uC138\uC694."),a(),r(7,"div",486)(8,"button",487),C("click",function(){h(t);let o=g(2);return f(o.loadSampleStoryMap())}),c(9," \u{1F4E5} \uC0D8\uD50C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC "),a(),r(10,"button",488),C("click",function(){h(t);let o=g(2);return f(o.toggleStoryCreatorPanel())}),c(11," \u2728 AI \uC2A4\uD1A0\uB9AC \uC0DD\uC131 "),a()()()}}function Ca(i,e){if(i&1){let t=x();r(0,"div",383)(1,"div",384)(2,"div",385)(3,"div",313)(4,"h2"),c(5,"\u{1F5FA}\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0"),a(),r(6,"span",24),c(7,"\uC120\uD0DD\uACFC \uC804\uD22C\uAC00 \uB9CC\uB4DC\uB294 \uB2F9\uC2E0\uB9CC\uC758 \uC5EC\uC815"),a()(),r(8,"button",52),C("click",function(){h(t);let o=g();return f(o.toggleAdvancedFlowPanel())}),c(9," \u2715 "),a()(),P(10,Ur,28,9,"div",386)(11,Qr,56,7,"div",387)(12,ca,19,15,"div",388)(13,_a,34,8,"div",389)(14,ma,12,0,"div",390),a()()}if(i&2){let t=g();s(10),p("ngIf",t.storyNodes.length>0),s(),p("ngIf",t.storyNodes.length>0),s(),p("ngIf",t.selectedNode),s(),p("ngIf",t.showStats&&t.storyNodes.length>0),s(),p("ngIf",t.storyNodes.length===0)}}function ua(i,e){if(i&1&&(r(0,"div",494)(1,"div",495),c(2),a(),r(3,"div",496)(4,"h4"),c(5),a(),r(6,"p",497),c(7),a()()()),i&2){let t=e.ngIf,n=g(2);s(2),u(n.getNodeIcon(t)),s(3),u(t.title),s(2),u(t.type)}}function ha(i,e){if(i&1&&(r(0,"div",498)(1,"span",499),c(2,"\uC120\uD0DD\uC9C0 ID:"),a(),r(3,"span",500),c(4),a()()),i&2){let t=g(2);s(4),u(t.currentLinkingChoiceId)}}function fa(i,e){i&1&&(r(0,"span",502),c(1," \u2713 \uC5F0\uACB0\uB428 "),a())}function Pa(i,e){if(i&1&&(r(0,"span",123),c(1),a()),i&2){let t=e.$implicit;s(),u(t)}}function ba(i,e){if(i&1&&(r(0,"div",119),P(1,Pa,2,1,"span",120),a()),i&2){let t=g().$implicit;s(),p("ngForOf",t.tags.slice(0,3))}}function Ma(i,e){if(i&1){let t=x();r(0,"div",116),C("click",function(){let o=h(t).$implicit,l=g(2);return f(l.linkScenarioToFlowNode(o.id))}),r(1,"div",117)(2,"h4"),c(3),a(),r(4,"span",346),c(5),a(),P(6,fa,2,0,"span",501),a(),r(7,"div",347)(8,"p",276),c(9),a(),r(10,"div",121)(11,"span",83),c(12),a(),r(13,"span",83),c(14),a()(),P(15,ba,2,1,"div",278),a()()}if(i&2){let t=e.$implicit,n=g(2);w("linked",n.getLinkedScenarioId(n.currentLinkingNodeId,n.currentLinkingChoiceId)===t.id),s(3),u(t.title),s(2),u(t.genre),s(),p("ngIf",n.getLinkedScenarioId(n.currentLinkingNodeId,n.currentLinkingChoiceId)===t.id),s(3),u(t.description),s(3),b("\u{1F4CD} ",t.setting),s(2),b("\u{1F3AD} ",t.mood),s(),p("ngIf",t.tags&&t.tags.length>0)}}function Oa(i,e){if(i&1){let t=x();r(0,"div",348)(1,"div",485),c(2,"\u{1F3AC}"),a(),r(3,"p"),c(4,"\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),a(),r(5,"button",349),C("click",function(){h(t);let o=g(2);return o.openScenarioCreator(),f(o.closeFlowScenarioLinkPanel())}),c(6," \u2728 \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 "),a()()}}function xa(i,e){if(i&1){let t=x();r(0,"div",489)(1,"div",490)(2,"div",340)(3,"div",313)(4,"span",314),c(5,"\u22EE\u22EE"),a(),r(6,"h3"),c(7,"\u{1F3AC} \uD50C\uB85C\uC6B0 \uB178\uB4DC\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0"),a()(),r(8,"button",52),C("click",function(){h(t);let o=g();return f(o.closeFlowScenarioLinkPanel())}),c(9,"\u2715"),a()(),r(10,"div",341),P(11,ua,8,3,"div",491)(12,ha,5,1,"div",492),r(13,"p",342),c(14,"\u{1F4A1} \uC774 \uC120\uD0DD\uC9C0\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694."),a()(),r(15,"div",343)(16,"div",344),P(17,Ma,16,9,"div",493),a(),P(18,Oa,7,0,"div",345),a()()()}if(i&2){let t=g();s(11),p("ngIf",t.getNodeById(t.currentLinkingNodeId)),s(),p("ngIf",t.currentLinkingChoiceId),s(5),p("ngForOf",t.savedScenarios),s(),p("ngIf",t.savedScenarios.length===0)}}function va(i,e){if(i&1){let t=x();r(0,"div",509)(1,"div",510)(2,"h3"),c(3,"\u5167\u529F\u4FEE\u7149 (\uB0B4\uACF5\uC218\uB828)"),a(),r(4,"div",511)(5,"div",512)(6,"span",513),c(7,"\u5167\u529B (\uB0B4\uB825)"),a(),r(8,"span",514),c(9),a()(),r(10,"div",515),I(11,"div",516),a(),r(12,"div",517)(13,"span"),c(14),a(),r(15,"span"),c(16),a(),r(17,"span"),c(18),a()()(),r(19,"div",518)(20,"div",519)(21,"span",520),c(22,"\u2B50"),a(),r(23,"div",521)(24,"span",522),c(25),a(),r(26,"span",523),c(27,"\u5883\u754C (\uACBD\uC9C0)"),a()()(),r(28,"div",524)(29,"span",525),c(30,"\uB3CC\uD30C \uC9C4\uD589\uB3C4"),a(),r(31,"div",526),I(32,"div",527),a(),r(33,"span",528),c(34),a()()(),r(35,"div",529)(36,"button",530),C("click",function(){h(t);let o=g(2);return f(o.cultivateInternalPower(1))}),r(37,"span",531),c(38,"\u{1F9D8}"),a(),r(39,"span",532),c(40,"1\uC2DC\uAC04 \uC218\uB828"),a()(),r(41,"button",530),C("click",function(){h(t);let o=g(2);return f(o.cultivateInternalPower(4))}),r(42,"span",531),c(43,"\u{1F9D8}\u200D\u2642\uFE0F"),a(),r(44,"span",532),c(45,"4\uC2DC\uAC04 \uC218\uB828"),a()(),r(46,"button",530),C("click",function(){h(t);let o=g(2);return f(o.cultivateInternalPower(12))}),r(47,"span",531),c(48,"\u{1F9D8}\u200D\u2640\uFE0F"),a(),r(49,"span",532),c(50,"12\uC2DC\uAC04 \uC218\uB828"),a()()(),r(51,"div",533)(52,"span",534),c(53,"\u4FEE\u7DF4\u5EA6 (\uC218\uB828\uB3C4)"),a(),r(54,"div",535),I(55,"div",536),a(),r(56,"span",537),c(57),a()()()()}if(i&2){let t=g(2);s(9),B("",t.playerInternalPower.current," / ",t.playerInternalPower.max),s(2),V("width",t.playerInternalPower.current/t.playerInternalPower.max*100,"%"),s(3),b("\uD68C\uBCF5 \uC18D\uB3C4: ",t.playerInternalPower.recoveryRate,"/\uD134"),s(2),b("\uC21C\uB3C4: ",t.playerInternalPower.purity,"%"),s(2),b("\uC548\uC815\uC131: ",t.playerInternalPower.stability,"%"),s(2),q("realm-"+t.playerInternalPower.realm),s(5),u(t.playerInternalPower.realm),s(7),V("width",t.playerInternalPower.realmProgress,"%"),s(2),b("",t.playerInternalPower.realmProgress,"%"),s(21),V("width",t.playerInternalPower.trainingLevel,"%"),s(2),b("",t.playerInternalPower.trainingLevel,"%")}}function ya(i,e){i&1&&(r(0,"span",557),c(1,"\u2694\uFE0F"),a())}function ka(i,e){i&1&&(r(0,"span",557),c(1,"\u{1F4FF}"),a())}function wa(i,e){i&1&&(r(0,"span",557),c(1,"\u{1F985}"),a())}function Sa(i,e){i&1&&(r(0,"span",557),c(1,"\u{1F5E1}\uFE0F"),a())}function Da(i,e){if(i&1&&(r(0,"div",558)(1,"span",559),c(2),a(),r(3,"span",560),c(4),a()()),i&2){let t=g().$implicit;s(),q("element-"+t.element),s(),b(" ",t.element==="fire"?"\u{1F525}":t.element==="ice"?"\u2744\uFE0F":t.element==="wind"?"\u{1F32A}\uFE0F":t.element==="thunder"?"\u26A1":"\u2620\uFE0F"," "),s(2),u(t.element)}}function Ea(i,e){if(i&1&&(r(0,"div",561)(1,"span",562),c(2,"\uC18C\uC18D:"),a(),r(3,"span",563),c(4),a()()),i&2){let t=g().$implicit,n=g(3);s(4),u(n.getFactionName(t.factionId))}}function Ia(i,e){if(i&1&&(r(0,"div",543)(1,"div",544)(2,"div",545)(3,"h4",546),c(4),a(),r(5,"p",547),c(6),a()(),r(7,"span",548),c(8),a()(),r(9,"div",549),P(10,ya,2,0,"span",550)(11,ka,2,0,"span",550)(12,wa,2,0,"span",550)(13,Sa,2,0,"span",550),r(14,"span",551),c(15),a()(),r(16,"div",552)(17,"div",210)(18,"span",211),c(19,"\uC18C\uBAA8 \uB0B4\uB825:"),a(),r(20,"span",147),c(21),a()(),r(22,"div",210)(23,"span",211),c(24,"\uC704\uB825:"),a(),r(25,"span",147),c(26),a()(),r(27,"div",210)(28,"span",211),c(29,"\uBA85\uC911\uB960:"),a(),r(30,"span",147),c(31),a()(),r(32,"div",210)(33,"span",211),c(34,"\uCE58\uBA85\uD0C0:"),a(),r(35,"span",147),c(36),a()()(),r(37,"div",553)(38,"p"),c(39),a(),r(40,"p",554),c(41),a()(),P(42,Da,5,4,"div",555)(43,Ea,5,1,"div",556),a()),i&2){let t=e.$implicit;q("grade-"+t.grade),s(4),u(t.chineseName),s(2),u(t.name),s(2),u(t.grade),s(2),p("ngIf",t.type==="choShik"),s(),p("ngIf",t.type==="shimBeop"),s(),p("ngIf",t.type==="gyeongGong"),s(),p("ngIf",t.type==="amGi"),s(2),b(" ",t.type==="choShik"?"\uCD08\uC2DD":t.type==="shimBeop"?"\uC2EC\uBC95":t.type==="gyeongGong"?"\uACBD\uACF5":"\uC554\uAE30"," "),s(6),u(t.internalPowerCost),s(5),b("\xD7",t.damageMultiplier),s(5),b("",(t.hitRate*100).toFixed(0),"%"),s(5),b("",(t.criticalRate*100).toFixed(0),"%"),s(3),u(t.description),s(2),u(t.skillEffect),s(),p("ngIf",t.element),s(),p("ngIf",t.factionId)}}function Ba(i,e){i&1&&(r(0,"div",564)(1,"p"),c(2,"\uC544\uC9C1 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),a(),r(3,"p"),c(4,"\uBB38\uD30C\uC5D0 \uC785\uBB38\uD558\uAC70\uB098 \uBB34\uACF5 \uBE44\uAE09\uC744 \uC5BB\uC73C\uC138\uC694!"),a()())}function Ta(i,e){if(i&1&&(r(0,"div",509)(1,"div",538)(2,"h3"),c(3,"\u6B66\u529F\u62DB\u5F0F (\uBB34\uACF5\uCD08\uC2DD)"),a(),r(4,"div",539)(5,"span"),c(6),a()(),r(7,"div",540),P(8,Ia,44,18,"div",541),a(),P(9,Ba,5,0,"div",542),a()()),i&2){let t=g(2);s(6),b("\uC2B5\uB4DD\uD55C \uBB34\uACF5: ",t.learnedMartialSkills.length,"\uAC1C"),s(2),p("ngForOf",t.learnedMartialSkills),s(),p("ngIf",t.learnedMartialSkills.length===0)}}function Aa(i,e){if(i&1&&(r(0,"div",568)(1,"div",569)(2,"div",570)(3,"h4"),c(4),a(),r(5,"p",571),c(6),a()(),r(7,"div",572),c(8),a(),r(9,"div",573)(10,"p"),c(11),a(),r(12,"p")(13,"strong"),c(14,"\uBCF8\uAC70\uC9C0:"),a(),c(15),a(),r(16,"p")(17,"strong"),c(18,"\uCC3D\uC2DC\uC790:"),a(),c(19),a()(),r(20,"div",574)(21,"span"),c(22,"\uD3C9\uD310:"),a(),r(23,"div",575),I(24,"div",576),a(),r(25,"span"),c(26),a()()()()),i&2){let t=g(3);s(4),u(t.playerFaction.chineseName),s(2),u(t.playerFaction.name),s(),q("type-"+t.playerFaction.type),s(),b(" ",t.playerFaction.type==="righteous"?"\u6B63\u6D3E":t.playerFaction.type==="evil"?"\u9B54\u654E":"\u4E2D\u7ACB"," "),s(3),u(t.playerFaction.description),s(4),b(" ",t.playerFaction.headquarters),s(4),b(" ",t.playerFaction.founder),s(5),V("width",(t.playerFaction.reputation+1e3)/2e3*100+"%"),s(2),u(t.playerFaction.reputation)}}function Na(i,e){if(i&1&&(r(0,"span",584),c(1),a()),i&2){let t=e.$implicit;s(),b(" ",t," ")}}function Fa(i,e){if(i&1){let t=x();r(0,"div",580)(1,"div",570)(2,"h4"),c(3),a(),r(4,"p",571),c(5),a()(),r(6,"div",572),c(7),a(),r(8,"div",573)(9,"p"),c(10),a(),r(11,"p")(12,"strong"),c(13,"\uBCF8\uAC70\uC9C0:"),a(),c(14),a()(),r(15,"div",581),P(16,Na,2,1,"span",582),a(),r(17,"button",583),C("click",function(){let o=h(t).$implicit,l=g(4);return f(l.joinFaction(o.id))}),c(18," \uC785\uBB38\uD558\uAE30 "),a()()}if(i&2){let t=e.$implicit;q("type-"+t.type),s(3),u(t.chineseName),s(2),u(t.name),s(),q("type-"+t.type),s(),b(" ",t.type==="righteous"?"\u6B63\u6D3E":t.type==="evil"?"\u9B54\u654E":"\u4E2D\u7ACB"," "),s(3),u(t.description),s(4),b(" ",t.headquarters),s(2),p("ngForOf",t.specialties)}}function Ra(i,e){if(i&1&&(r(0,"div",577)(1,"p"),c(2,"\uC544\uC9C1 \uBB38\uD30C\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."),a(),r(3,"h4"),c(4,"\uC785\uBB38 \uAC00\uB2A5\uD55C \uBB38\uD30C:"),a(),r(5,"div",578),P(6,Fa,19,10,"div",579),a()()),i&2){let t=g(3);s(6),p("ngForOf",t.availableFactions)}}function Ga(i,e){if(i&1&&(r(0,"div",509)(1,"div",565)(2,"h3"),c(3,"\u9580\u6D3E (\uBB38\uD30C)"),a(),P(4,Aa,27,11,"div",566)(5,Ra,7,1,"div",567),a()()),i&2){let t=g(2);s(4),p("ngIf",t.playerFaction),s(),p("ngIf",!t.playerFaction)}}function za(i,e){i&1&&(r(0,"span",605),c(1,"\u2B50"),a())}function Va(i,e){if(i&1&&(r(0,"div",606)(1,"span",607),c(2,"\u2728"),a(),r(3,"span",608),c(4),a()()),i&2){let t=e.$implicit;s(4),u(t.description)}}function La(i,e){if(i&1&&(r(0,"div",609)(1,"span",610),c(2,"\u26A0\uFE0F"),a(),r(3,"span",611),c(4),a()()),i&2){let t=g().$implicit;s(4),B("",t.sideEffect," (",(t.sideEffectChance*100).toFixed(0),"%)")}}function $a(i,e){if(i&1){let t=x();r(0,"div",589)(1,"div",590)(2,"div",591)(3,"h4",592),c(4),a(),r(5,"p",593),c(6),a()(),r(7,"span",594),c(8),a()(),r(9,"div",595)(10,"span",297),c(11),a(),r(12,"span",596),P(13,za,2,0,"span",597),a()(),r(14,"div",598)(15,"p"),c(16),a()(),r(17,"div",599),P(18,Va,5,1,"div",600),a(),P(19,La,5,2,"div",601),r(20,"div",602)(21,"span",603),c(22),a(),r(23,"button",604),C("click",function(){let o=h(t).$implicit,l=g(3);return f(l.useElixir(o.id))}),c(24," \uC0AC\uC6A9\uD558\uAE30 "),a()()()}if(i&2){let t=e.$implicit;q("grade-"+t.grade),s(4),u(t.chineseName),s(2),u(t.name),s(2),u(t.grade),s(3),u(t.type),s(2),p("ngForOf",Be(11,_o).constructor(t.rarity)),s(3),u(t.description),s(2),p("ngForOf",t.effects),s(),p("ngIf",t.sideEffect),s(3),b("\u{1F4B0} ",t.price,"G")}}function ja(i,e){i&1&&(r(0,"div",612)(1,"p"),c(2,"\uBCF4\uC720\uD55C \uB2E8\uC57D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),a()())}function qa(i,e){if(i&1&&(r(0,"div",509)(1,"div",585)(2,"h3"),c(3,"\u4E39\u85E5 (\uB2E8\uC57D)"),a(),r(4,"div",586),P(5,$a,25,12,"div",587),a(),P(6,ja,3,0,"div",588),a()()),i&2){let t=g(2);s(5),p("ngForOf",t.elixirs),s(),p("ngIf",t.elixirs.length===0)}}function Ua(i,e){if(i&1){let t=x();r(0,"div",623)(1,"button",624),C("click",function(){h(t);let o=g().$implicit,l=g(3);return f(l.openMeridian(o.id))}),c(2," \uAC1C\uD1B5 "),a()()}}function Ha(i,e){if(i&1&&(r(0,"div",619)(1,"div",620)(2,"span",621),c(3),a()(),P(4,Ua,3,0,"div",622),a()),i&2){let t=e.$implicit,n=e.index,o=g(3);V("top",o.getMeridianPosition(n).top)("left",o.getMeridianPosition(n).left),w("opened",t.isOpened),p("title",t.name+" "+t.chineseName),s(3),u(n+1),s(),p("ngIf",!t.isOpened)}}function Ya(i,e){if(i&1&&(r(0,"div",634)(1,"div",526),I(2,"div",527),a(),r(3,"span"),c(4),a()()),i&2){let t=g().$implicit;s(2),V("width",t.openProgress,"%"),s(2),b("",t.openProgress,"%")}}function Wa(i,e){if(i&1&&(r(0,"span",635),c(1),a()),i&2){let t=e.$implicit,n=g().$implicit;s(),B(" ",t,": +",n.bonus[t]," ")}}function Xa(i,e){i&1&&(r(0,"span",636),c(1,"\u2713 \uAC1C\uD1B5\uB428"),a())}function Ka(i,e){if(i&1){let t=x();r(0,"button",637),C("click",function(){h(t);let o=g().$implicit,l=g(3);return f(l.openMeridian(o.id))}),c(1," \uAC1C\uD1B5\uD558\uAE30 "),a()}}function Za(i,e){if(i&1&&(r(0,"div",625)(1,"div",626),c(2),a(),r(3,"div",627)(4,"h4"),c(5),a(),r(6,"p"),c(7),a(),P(8,Ya,5,3,"div",628),r(9,"div",629),P(10,Wa,2,2,"span",630),a()(),r(11,"div",631),P(12,Xa,2,0,"span",632)(13,Ka,2,0,"button",633),a()()),i&2){let t=e.$implicit,n=e.index,o=g(3);w("opened",t.isOpened),s(2),u(n+1),s(3),u(t.chineseName),s(2),u(t.name),s(),p("ngIf",!t.isOpened),s(2),p("ngForOf",o.getObjectKeys(t.bonus)),s(2),p("ngIf",t.isOpened),s(),p("ngIf",!t.isOpened)}}function Qa(i,e){if(i&1&&(r(0,"div",509)(1,"div",613)(2,"h3"),c(3,"\u7D93\u8108 (\uACBD\uB9E5)"),a(),r(4,"div",614)(5,"p"),c(6),a()(),r(7,"div",615),P(8,Ha,5,9,"div",616),a(),r(9,"div",617),P(10,Za,14,9,"div",618),a()()()),i&2){let t=g(2);s(6),B("\uAC1C\uD1B5\uB41C \uD608\uB3C4: ",t.playerInternalPower.meridians.opened," / ",t.playerInternalPower.meridians.total),s(2),p("ngForOf",t.playerInternalPower.meridians.meridians),s(2),p("ngForOf",t.playerInternalPower.meridians.meridians)}}function Ja(i,e){if(i&1){let t=x();r(0,"div",503),C("click",function(){h(t);let o=g();return f(o.closeWuxiaPanel())}),r(1,"div",504),C("click",function(o){return h(t),f(o.stopPropagation())}),r(2,"div",505)(3,"h2"),c(4,"\u2694\uFE0F \uBB34\uD611 \uC2DC\uC2A4\uD15C \u6B66\u4FE0\u7CFB\u7D71"),a(),r(5,"button",52),C("click",function(){h(t);let o=g();return f(o.closeWuxiaPanel())}),c(6,"\u2715"),a()(),r(7,"div",506)(8,"button",507),C("click",function(){h(t);let o=g();return f(o.wuxiaActiveTab="cultivation")}),c(9," \u{1F525} \uB0B4\uACF5\uC218\uB828 "),a(),r(10,"button",507),C("click",function(){h(t);let o=g();return f(o.wuxiaActiveTab="skills")}),c(11," \u{1F4D6} \uBB34\uACF5\uCD08\uC2DD "),a(),r(12,"button",507),C("click",function(){h(t);let o=g();return f(o.wuxiaActiveTab="faction")}),c(13," \u{1F3DB}\uFE0F \uBB38\uD30C "),a(),r(14,"button",507),C("click",function(){h(t);let o=g();return f(o.wuxiaActiveTab="elixir")}),c(15," \u{1F48A} \uB2E8\uC57D "),a(),r(16,"button",507),C("click",function(){h(t);let o=g();return f(o.wuxiaActiveTab="meridians")}),c(17," \u2B55 \uD608\uB3C4 "),a()(),P(18,va,58,16,"div",508)(19,Ta,10,3,"div",508)(20,Ga,6,2,"div",508)(21,qa,7,2,"div",508)(22,Qa,11,4,"div",508),a()()}if(i&2){let t=g();s(8),w("active",t.wuxiaActiveTab==="cultivation"),s(2),w("active",t.wuxiaActiveTab==="skills"),s(2),w("active",t.wuxiaActiveTab==="faction"),s(2),w("active",t.wuxiaActiveTab==="elixir"),s(2),w("active",t.wuxiaActiveTab==="meridians"),s(2),p("ngIf",t.wuxiaActiveTab==="cultivation"),s(),p("ngIf",t.wuxiaActiveTab==="skills"),s(),p("ngIf",t.wuxiaActiveTab==="faction"),s(),p("ngIf",t.wuxiaActiveTab==="elixir"),s(),p("ngIf",t.wuxiaActiveTab==="meridians")}}var mt=class i{constructor(e,t,n,o,l,d,_,m,M,O,y){this.cdr=e;this.dialog=t;this.router=n;this.route=o;this.geminiAiService=l;this.scenarioDbService=d;this.itemDbService=_;this.characterDbService=m;this.novelAuthService=M;this.storyDbService=O;this.notification=y;this.initializePlayer(),this.loadThemePreference(),this.loadSavedScenarios(),this.loadSavedItems(),this.loadSavedCharacters(),this.loadSavedStories()}battleLogContainer;shouldScrollBattleLog=!1;gameStarted=!1;novelSelected=!1;selectedNovel=null;storyBlocks=[];choices=[];currentPath=[];currentGameId=null;playerCharacter;gold=100;inventory=[];showCharacterPanel=!1;showInventoryPanel=!1;showShopPanel=!1;showCharacterCreatorPanel=!1;isGeneratingCharacter=!1;generatedCharacter=null;characterGenerationError="";savedCharacters=[];showScenarioCreatorPanel=!1;isGeneratingScenario=!1;generatedScenario=null;scenarioGenerationError="";savedScenarios=[];showItemCreatorPanel=!1;isGeneratingItem=!1;generatedItem=null;itemGenerationError="";savedItems=[];showStoryCreatorPanel=!1;isGeneratingStory=!1;storyTitle="";selectedCharactersForStory=[];selectedItemsForStory=[];selectedScenariosForStory=[];generatedStory=null;storyGenerationError="";savedStories=[];showScenarioLinkPanel=!1;currentLinkingChoiceIndex=-1;showFlowScenarioLinkPanel=!1;currentLinkingNodeId="";currentLinkingChoiceId="";nodeScenarioLinks=new Map;isLeftPanelCollapsed=!0;isRightPanelCollapsed=!0;isFlowPanelOpen=!0;showStoryFlowPanel=!1;storyFlowNodes=[];storyNodes=[];storyConnections=[];currentStoryNodeId="start";storyProgress={currentNodeId:"start",visitedNodes:[],pathHistory:[],totalChoices:0,battlesWon:0,battlesLost:0,branchingFactor:0,explorationRate:0,possibleEndings:[],flags:{}};showAdvancedFlowPanel=!1;selectedNode=null;flowLayoutType="hierarchical";flowZoomLevel=1;flowPanX=0;flowPanY=0;flowViewBox="0 0 1200 800";showVisitedOnly=!1;showBattlesOnly=!1;showEndingsOnly=!1;showStats=!1;battleSkills=[];battleItems=[];currentBattleState=null;martialArtsSkills=[];learnedMartialSkills=[];playerInternalPower={current:100,max:100,recoveryRate:5,trainingLevel:0,realm:"\uCD08\uB958",realmProgress:0,meridians:{opened:0,total:12,meridians:[]},purity:50,stability:100};playerFaction=null;availableFactions=[];wulinRelationships=[];elixirs=[];martialManuals=[];martialBattleState=null;showWuxiaPanel=!1;wuxiaActiveTab="cultivation";defaultBattleSkills=[{id:"basic-attack",name:"\uC77C\uBC18 \uACF5\uACA9",description:"\uAE30\uBCF8\uC801\uC778 \uBB3C\uB9AC \uACF5\uACA9",type:"attack",mpCost:0,cooldown:0,damageMultiplier:1,hitRate:.9,criticalRate:.1,icon:"\u2694\uFE0F"},{id:"power-strike",name:"\uAC15\uD0C0",description:"\uAC15\uB825\uD55C \uC77C\uACA9\uC744 \uB0A0\uB9BD\uB2C8\uB2E4",type:"attack",mpCost:15,cooldown:2,damageMultiplier:2,hitRate:.8,criticalRate:.25,icon:"\u{1F4A5}"},{id:"defend",name:"\uBC29\uC5B4 \uD0DC\uC138",description:"\uB2E4\uC74C \uD134\uAE4C\uC9C0 \uBC29\uC5B4\uB825 50% \uC99D\uAC00",type:"defense",mpCost:0,cooldown:1,defenseBoost:.5,duration:1,icon:"\u{1F6E1}\uFE0F"},{id:"heal",name:"\uC751\uAE09 \uCE58\uB8CC",description:"HP\uB97C 30% \uD68C\uBCF5\uD569\uB2C8\uB2E4",type:"heal",mpCost:20,cooldown:3,healAmount:.3,icon:"\u{1F49A}"},{id:"fire-ball",name:"\uD654\uC5FC\uAD6C",description:"\uD654\uC5FC \uB9C8\uBC95\uC73C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uD654\uC0C1\uC744 \uC785\uD799\uB2C8\uB2E4",type:"attack",mpCost:25,cooldown:2,damageMultiplier:1.8,hitRate:.85,statusEffect:{type:"burn",duration:3,value:5,name:"\uD654\uC0C1",icon:"\u{1F525}"},icon:"\u{1F525}"},{id:"strengthen",name:"\uD798\uC758 \uC99D\uAC15",description:"3\uD134 \uB3D9\uC548 \uACF5\uACA9\uB825 40% \uC99D\uAC00",type:"buff",mpCost:15,cooldown:4,duration:3,statusEffect:{type:"strengthen",duration:3,value:.4,name:"\uD798\uC758 \uC99D\uAC15",icon:"\u{1F4AA}"},icon:"\u{1F4AA}"},{id:"weaken",name:"\uC57D\uD654",description:"\uC801\uC758 \uACF5\uACA9\uB825\uC744 30% \uAC10\uC18C\uC2DC\uD0B5\uB2C8\uB2E4",type:"debuff",mpCost:10,cooldown:3,duration:2,statusEffect:{type:"weaken",duration:2,value:.3,name:"\uC57D\uD654",icon:"\u{1F53B}"},icon:"\u{1F53B}"}];isDarkTheme=!1;inBattle=!1;battleEnded=!1;battleVictory=!1;battleTurn="player";battleLog=[];battleEnemy={name:"\uACE0\uBE14\uB9B0",hp:50,maxHp:50,attack:8,defense:3};playerDefenseBonus=0;playerTakingDamage=!1;enemyTakingDamage=!1;shopItems=[{id:"sword_basic",name:"\uAE30\uBCF8 \uAC80",description:"\uD3C9\uBC94\uD55C \uCCA0\uAC80\uC785\uB2C8\uB2E4. \uACF5\uACA9\uB825 +5",price:50,type:"weapon",rarity:"common",stock:5,stats:{attack:5}},{id:"potion_hp",name:"\uCCB4\uB825 \uBB3C\uC57D",description:"HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:20,type:"consumable",rarity:"common",stock:10},{id:"potion_mp",name:"\uB9C8\uB098 \uBB3C\uC57D",description:"MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:25,type:"consumable",rarity:"common",stock:8},{id:"armor_leather",name:"\uAC00\uC8FD \uAC11\uC637",description:"\uD2BC\uD2BC\uD55C \uAC00\uC8FD \uAC11\uC637. \uBC29\uC5B4\uB825 +3",price:80,type:"armor",rarity:"common",stock:3,stats:{defense:3}},{id:"sword_silver",name:"\uC740\uBE5B \uAC80",description:"\uC740\uC73C\uB85C \uC81C\uC791\uB41C \uACE0\uAE09 \uAC80. \uACF5\uACA9\uB825 +12",price:200,type:"weapon",rarity:"uncommon",stock:2,stats:{attack:12}},{id:"armor_chain",name:"\uC0AC\uC2AC \uAC11\uC637",description:"\uACAC\uACE0\uD55C \uC0AC\uC2AC \uAC11\uC637. \uBC29\uC5B4\uB825 +8",price:250,type:"armor",rarity:"uncommon",stock:2,stats:{defense:8}}];novelTemplates=[];ngOnInit(){this.initializeWuxiaSystem(),this.loadNodeScenarioLinks(),this.route.paramMap.subscribe(e=>{let t=e.get("gameId");if(t){this.currentGameId=t;let o=this.router.getCurrentNavigation()?.extras?.state||window.history.state;o?.isNewGame&&o?.novel?(console.log("\u{1F3AE} \uC0C8 \uAC8C\uC784 \uC2DC\uC791:",o.novel.title),this.initializeNewGame(t,o.novel)):this.loadGameById(t)}else this.currentGameId=null})}ngAfterViewChecked(){this.shouldScrollBattleLog&&this.battleLogContainer&&(this.scrollToBattleLogBottom(),this.shouldScrollBattleLog=!1)}loadThemePreference(){localStorage.getItem("novel-theme")==="dark"?(this.isDarkTheme=!0,document.body.classList.add("dark-theme")):(this.isDarkTheme=!1,document.body.classList.remove("dark-theme"))}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.isDarkTheme?(document.body.classList.add("dark-theme"),localStorage.setItem("novel-theme","dark")):(document.body.classList.remove("dark-theme"),localStorage.setItem("novel-theme","light"))}logout(){return v(this,null,function*(){(yield this.showConfirmDialog("\uB85C\uADF8\uC544\uC6C3\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))&&(this.novelAuthService.logout(),this.router.navigate(["/novel/login"]))})}getCurrentUsername(){return this.novelAuthService.getCurrentUsername()}showConfirmDialog(e){return new Promise(t=>{this.dialog.open(Rt,{width:"450px",maxWidth:"90vw",data:{message:e},panelClass:"custom-confirm-dialog",autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(o=>{t(o===!0)})})}initializePlayer(){this.playerCharacter={name:"\uBAA8\uD5D8\uAC00",level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:50,maxMp:50,attack:10,defense:5,agility:8,strength:10,intelligence:7,skillPoints:0,skills:[{id:"basic_attack",name:"\uAE30\uBCF8 \uACF5\uACA9",description:"\uAE30\uBCF8\uC801\uC778 \uACF5\uACA9 \uAE30\uC220",level:1,maxLevel:5,type:"combat"}]},this.inventory=[{id:"wooden_sword",name:"\uB098\uBB34 \uAC80",description:"\uCD08\uBCF4\uC790\uC6A9 \uB098\uBB34 \uAC80",type:"weapon",quantity:1,buyPrice:10,sellPrice:5,rarity:"common",stats:{attack:2},isEquipped:!0}]}scrollToNovels(){let e=document.getElementById("novelsSection");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}selectNovel(e){let t=`${e.id}_${Date.now()}`;console.log("\u{1F4DA} \uC18C\uC124 \uC120\uD0DD:",e.title,"| \uAC8C\uC784 ID:",t),this.router.navigate(["/novel",t],{state:{isNewGame:!0,novel:e}})}backToNovelSelection(){this.novelSelected=!1,this.selectedNovel=null,this.currentGameId=null,this.router.navigate(["/novel"])}initializeNewGame(e,t){this.currentGameId=e,this.selectedNovel=t,this.novelSelected=!0,this.gold=t.startingGold,this.inventory=[...t.startingItems],this.storyBlocks=[],this.choices=[],this.currentPath=[],this.gameStarted=!1,console.log("\u2728 \uC0C8 \uAC8C\uC784 \uCD08\uAE30\uD654 \uC644\uB8CC:",t.title,"| ID:",e)}startStory(){if(!this.selectedNovel){console.error("\uC18C\uC124\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");return}console.log("\u{1F4D6} \uC18C\uC124 \uC77D\uAE30 \uC2DC\uC791!",this.selectedNovel.title),this.gameStarted=!0,this.initializeNonlinearStory(),this.addStoryBlock(this.selectedNovel.firstStory),this.setChoices(this.selectedNovel.firstChoices),this.scrollToBottom()}selectChoice(e){let t=this.choices[e];if(console.log("\u{1F3AF} \uC120\uD0DD:",t),t.includes("\uC804\uD22C\uD558\uAE30")){this.addChoiceBlock(`\u2B50 \uC120\uD0DD: ${t}`),this.startBattleFromChoice(),this.choices=[],this.transitionToStoryNode(e);return}let n=[...this.currentPath,e.toString()].join("-"),o=this.getLinkedScenario(n);if(o){console.log("\u{1F4CB} \uC5F0\uACB0\uB41C \uC2DC\uB098\uB9AC\uC624 \uBC1C\uACAC:",o.title),this.addChoiceBlock(`\u2B50 \uC120\uD0DD: ${t}`),this.applyLinkedScenario(o),this.currentPath.push(e.toString()),this.transitionToStoryNode(e),this.saveGame("autosave");return}this.addChoiceBlock(`\u2B50 \uC120\uD0DD: ${t}`),this.currentPath.push(e.toString()),console.log("\u{1F5FA}\uFE0F \uD604\uC7AC \uACBD\uB85C \uBC30\uC5F4:",this.currentPath);let l=this.currentPath.join("-");console.log("\u{1F511} \uACBD\uB85C \uD0A4:",l);let d=this.mapPathToNodeId(l);if(d&&this.storyNodes.length>0){console.log("\u{1F5FA}\uFE0F \uACBD\uB85C\uB97C \uB178\uB4DC ID\uB85C \uB9E4\uD551:",l,"->",d);let _=this.currentStoryNodeId;this.currentStoryNodeId=d;let m=this.storyNodes.find(O=>O.id===_),M=this.storyNodes.find(O=>O.id===d);m&&(m.isCurrent=!1,m.isVisited=!0),M&&(M.isCurrent=!0,M.isVisited=!0,M.isAvailable=!0,M.childIds.forEach(O=>{let y=this.storyNodes.find(D=>D.id===O);y&&(y.isAvailable=!0)}),this.storyProgress.currentNodeId=d,this.storyProgress.visitedNodes.includes(d)||this.storyProgress.visitedNodes.push(d),this.storyProgress.pathHistory.push({nodeId:d,choiceIndex:e,choiceText:t,timestamp:new Date}),this.storyProgress.totalChoices++,this.generateConnections(),console.log("\u2705 \uBE44\uC120\uD615 \uB178\uB4DC \uC0C1\uD0DC \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC:",{nodeId:d,title:M.title,visitedCount:this.storyProgress.visitedNodes.length}))}else console.log("\u26A0\uFE0F \uACBD\uB85C\uB97C \uB178\uB4DC ID\uB85C \uB9E4\uD551\uD560 \uC218 \uC5C6\uC74C:",l);this.choices=[],this.processStoryPath(l,e),this.saveGame("autosave")}processStoryPath(e,t){switch(console.log("\u{1F5FA}\uFE0F \uD604\uC7AC \uACBD\uB85C:",e),e){case"0":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uBC1D\uC740 \uAE38\uC744 \uC120\uD0DD\uD588\uC2B5\uB2C8\uB2E4.","\uBC1C\uAC78\uC74C\uC744 \uC62E\uAE38 \uB54C\uB9C8\uB2E4 \uB530\uB73B\uD55C \uAE30\uC6B4\uC774 \uBC1C\uB05D\uC5D0\uC11C \uC62C\uB77C\uC635\uB2C8\uB2E4.","\uC5BC\uB9C8 \uC9C0\uB098\uC9C0 \uC54A\uC544 \uC544\uB984\uB2E4\uC6B4 \uC815\uC6D0\uC774 \uB208\uC55E\uC5D0 \uD3BC\uCCD0\uC84C\uC2B5\uB2C8\uB2E4.","\uC0C9\uC0C9\uC758 \uAF43\uB4E4\uC774 \uB9CC\uAC1C\uD558\uACE0 \uC788\uACE0, \uB098\uBE44\uB4E4\uC774 \uC6B0\uC544\uD558\uAC8C \uCDA4\uC744 \uCD94\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uC815\uC6D0 \uC911\uC559\uC5D0\uB294 \uC218\uC815\uCC98\uB7FC \uB9D1\uC740 \uC5F0\uBABB\uC774 \uC788\uC5B4 \uB2EC\uBE5B\uC744 \uBC18\uC0AC\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4."]),this.setChoices(["\u{1F338} \uC815\uC6D0\uC744 \uCC9C\uCC9C\uD788 \uAC70\uB2D0\uBA70 \uAF43\uD5A5\uAE30\uB97C \uB9E1\uB294\uB2E4","\u{1F48E} \uC2E0\uBE44\uB85C\uC6B4 \uC5F0\uBABB\uC5D0 \uB2E4\uAC00\uAC00 \uBCF8\uB2E4","\u{1F3C3} \uC544\uB984\uB2F5\uC9C0\uB9CC \uBE60\uB974\uAC8C \uC9C0\uB098\uAC04\uB2E4"]);break;case"1":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC5B4\uB450\uC6B4 \uAE38\uC744 \uC120\uD0DD\uD588\uC2B5\uB2C8\uB2E4.","\uBC1C\uC744 \uB0B4\uB514\uB51C \uB54C\uB9C8\uB2E4 \uB099\uC5FD\uC774 \uBC14\uC2A4\uB77D\uAC70\uB9AC\uBA70 \uC18C\uB9AC\uB97C \uB0C5\uB2C8\uB2E4.","\uCC28\uAC00\uC6B4 \uBC14\uB78C\uC774 \uC637\uAE43\uC744 \uD30C\uACE0\uB4E4\uBA70 \uC628\uBAB8\uC5D0 \uC18C\uB984\uC774 \uB3CB\uC2B5\uB2C8\uB2E4.","\uBA40\uB9AC\uC11C \uB291\uB300\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB824\uC624\uACE0, \uC5B4\uB518\uAC00\uC5D0\uC11C \uB098\uBB47\uAC00\uC9C0 \uBD80\uB7EC\uC9C0\uB294 \uC18C\uB9AC\uAC00 \uB0A9\uB2C8\uB2E4.","\uD558\uC9C0\uB9CC \uC774\uC0C1\uD558\uAC8C\uB3C4 \uC774 \uAE38\uC5D0\uC11C\uB294 \uBB18\uD55C \uD798\uC774 \uB290\uAEF4\uC9D1\uB2C8\uB2E4."]),this.setChoices(["\u2694\uFE0F \uC6A9\uAC10\uD558\uAC8C \uC5B4\uB460 \uC18D\uC73C\uB85C \uB354 \uAE4A\uC774 \uB4E4\uC5B4\uAC04\uB2E4","\u{1F6E1}\uFE0F \uC870\uC2EC\uC2A4\uB7FD\uAC8C \uC8FC\uBCC0\uC744 \uC0B4\uD53C\uBA70 \uCC9C\uCC9C\uD788 \uC9C4\uD589\uD55C\uB2E4","\u{1F525} \uD683\uBD88\uC744 \uCF1C\uC11C \uC8FC\uBCC0\uC744 \uBC1D\uD78C\uB2E4"]);break;case"0-0":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC815\uC6D0\uC744 \uCC9C\uCC9C\uD788 \uAC70\uB2D0\uAE30 \uC2DC\uC791\uD588\uC2B5\uB2C8\uB2E4.","\uC7A5\uBBF8, \uBC31\uD569, \uB77C\uBCA4\uB354\uC758 \uD5A5\uAE30\uAC00 \uCF54\uB05D\uC744 \uAC04\uC9C8\uC785\uB2C8\uB2E4.","\uAC11\uC790\uAE30 \uD55C \uB9C8\uB9AC\uC758 \uD558\uC580 \uD1A0\uB07C\uAC00 \uB098\uD0C0\uB098 \uB2F9\uC2E0\uC744 \uBC14\uB77C\uBD05\uB2C8\uB2E4.",'"\uC548\uB155\uD558\uC138\uC694, \uC5EC\uD589\uC790\uB2D8. \uC774\uACF3\uC740 \uB9C8\uBC95\uC758 \uC815\uC6D0\uC785\uB2C8\uB2E4."',"\uD1A0\uB07C\uAC00 \uB9D0\uC744 \uD558\uC790 \uB2F9\uC2E0\uC740 \uAE5C\uC9DD \uB180\uB790\uC2B5\uB2C8\uB2E4."]),this.setChoices(["\u{1F430} \uD1A0\uB07C\uC640 \uB300\uD654\uB97C \uB098\uB208\uB2E4","\u{1F3AD} \uC774\uAC83\uC774 \uAFC8\uC778\uC9C0 \uD655\uC778\uD574\uBCF8\uB2E4","\u{1F33F} \uB354 \uAE4A\uC740 \uC815\uC6D0\uC73C\uB85C \uB4E4\uC5B4\uAC04\uB2E4"]);break;case"0-1":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC2E0\uBE44\uB85C\uC6B4 \uC5F0\uBABB\uC5D0 \uB2E4\uAC00\uAC14\uC2B5\uB2C8\uB2E4.","\uC218\uBA74\uC774 \uAC70\uC6B8\uCC98\uB7FC \uB9D1\uC544 \uB2EC\uACFC \uBCC4\uB4E4\uC774 \uC644\uBCBD\uD558\uAC8C \uBC18\uC0AC\uB418\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uC5F0\uBABB \uAC00\uC7A5\uC790\uB9AC\uC5D0 \uC549\uC544 \uBB3C\uC5D0 \uC190\uC744 \uB2F4\uADF8\uC790, \uB530\uB73B\uD55C \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9D1\uB2C8\uB2E4.","\uAC11\uC790\uAE30 \uC218\uBA74\uC5D0\uC11C \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC758 \uBAA8\uC2B5\uC774 \uB098\uD0C0\uB0AC\uC2B5\uB2C8\uB2E4.",'"\uB2F9\uC2E0\uC758 \uB9C8\uC74C\uC18D \uC18C\uC6D0\uC744 \uB9D0\uD574\uBCF4\uC138\uC694." \uADF8\uB140\uAC00 \uBD80\uB4DC\uB7FD\uAC8C \uB9D0\uD588\uC2B5\uB2C8\uB2E4.']),this.setChoices(["\u{1F4AB} \uD3C9\uD654\uB85C\uC6B4 \uC138\uC0C1\uC744 \uC6D0\uD55C\uB2E4\uACE0 \uB9D0\uD55C\uB2E4","\u{1F4B0} \uBD80\uC640 \uAD8C\uB825\uC744 \uC6D0\uD55C\uB2E4\uACE0 \uB9D0\uD55C\uB2E4","\u2764\uFE0F \uC9C4\uC2E4\uD55C \uC0AC\uB791\uC744 \uC6D0\uD55C\uB2E4\uACE0 \uB9D0\uD55C\uB2E4"]);break;case"0-2":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC544\uB984\uB2E4\uC6B4 \uC815\uC6D0\uC744 \uBE60\uB974\uAC8C \uC9C0\uB098\uCCE4\uC2B5\uB2C8\uB2E4.","\uC11C\uB458\uB7EC \uAC77\uB2E4 \uBCF4\uB2C8 \uC815\uC6D0 \uB05D\uC5D0 \uC6C5\uC7A5\uD55C \uC131\uC774 \uBCF4\uC785\uB2C8\uB2E4.","\uC131\uBB38 \uC55E\uC5D0\uB294 \uD669\uAE08 \uAC11\uC637\uC744 \uC785\uC740 \uAE30\uC0AC\uAC00 \uC11C \uC788\uC2B5\uB2C8\uB2E4.",'"\uBA48\uCDB0\uB77C! \uC774\uACF3\uC740 \uC2E0\uC131\uD55C \uC131\uC5ED\uC774\uB2E4."','"\uC5EC\uAE30\uB97C \uC9C0\uB098\uB824\uBA74 \uC2DC\uD5D8\uC744 \uD1B5\uACFC\uD574\uC57C \uD55C\uB2E4."']),this.setChoices(["\u2694\uFE0F \uC6A9\uAE30\uC758 \uC2DC\uD5D8\uC5D0 \uB3C4\uC804\uD55C\uB2E4","\u{1F9E0} \uC9C0\uD61C\uC758 \uC2DC\uD5D8\uC5D0 \uB3C4\uC804\uD55C\uB2E4","\u{1F496} \uC790\uBE44\uC758 \uC2DC\uD5D8\uC5D0 \uB3C4\uC804\uD55C\uB2E4"]);break;case"1-0":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC6A9\uAC10\uD558\uAC8C \uC5B4\uB460 \uC18D\uC73C\uB85C \uB354 \uAE4A\uC774 \uB4E4\uC5B4\uAC14\uC2B5\uB2C8\uB2E4.","\uAC11\uC790\uAE30 \uC55E\uC5D0\uC11C \uBD89\uC740 \uB208\uC774 \uBE5B\uB098\uB294 \uAC70\uB300\uD55C \uB291\uB300\uAC00 \uB098\uD0C0\uB0AC\uC2B5\uB2C8\uB2E4.","\uD558\uC9C0\uB9CC \uC774\uC0C1\uD558\uAC8C\uB3C4 \uB291\uB300\uB294 \uC801\uB300\uC801\uC774\uC9C0 \uC54A\uC544 \uBCF4\uC785\uB2C8\uB2E4.",'"\uB450\uB824\uC6CC\uD558\uC9C0 \uB9C8\uB77C, \uC6A9\uAC10\uD55C \uC790\uC5EC." \uB291\uB300\uAC00 \uB9D0\uD588\uC2B5\uB2C8\uB2E4.','"\uB098\uB294 \uC774 \uC232\uC758 \uC218\uD638\uC790\uB2E4. \uB108\uC5D0\uAC8C \uC120\uBB3C\uC744 \uC8FC\uACA0\uB2E4."']),this.setChoices(["\u{1F52E} \uB9C8\uBC95\uC758 \uD06C\uB9AC\uC2A4\uD0C8\uC744 \uBC1B\uB294\uB2E4","\u{1F5E1}\uFE0F \uC804\uC124\uC758 \uAC80\uC744 \uBC1B\uB294\uB2E4","\u{1F4DC} \uACE0\uB300\uC758 \uC9C0\uC2DD\uC744 \uBC1B\uB294\uB2E4"]);break;case"1-1":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC870\uC2EC\uC2A4\uB7FD\uAC8C \uC8FC\uBCC0\uC744 \uC0B4\uD53C\uBA70 \uCC9C\uCC9C\uD788 \uC9C4\uD589\uD588\uC2B5\uB2C8\uB2E4.","\uB364\uBD88 \uC0AC\uC774\uB85C \uC624\uB798\uB41C \uC624\uB450\uB9C9\uC774 \uBCF4\uC785\uB2C8\uB2E4.","\uCC3D\uBB38\uC5D0\uC11C \uB530\uB73B\uD55C \uBD88\uBE5B\uC774 \uC0C8\uC5B4 \uB098\uC624\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uBB38\uC744 \uB450\uB4DC\uB9AC\uC790 \uD560\uBA38\uB2C8\uAC00 \uB098\uC640 \uBC18\uAC11\uAC8C \uB9DE\uC544\uC90D\uB2C8\uB2E4.",'"\uC5B4\uBA38, \uC774\uB7F0 \uBC24\uC5D0 \uC5B4\uCA50 \uC77C\uC774\uB2C8? \uB4E4\uC5B4\uC640\uC11C \uCC28\uB77C\uB3C4 \uD55C \uC794 \uD558\uB834."']),this.setChoices(["\u{1F375} \uD560\uBA38\uB2C8\uC640 \uD568\uAED8 \uCC28\uB97C \uB9C8\uC2E0\uB2E4","\u{1F4D6} \uD560\uBA38\uB2C8\uC5D0\uAC8C \uC774\uACF3\uC5D0 \uB300\uD574 \uBB3B\uB294\uB2E4","\u{1F381} \uD560\uBA38\uB2C8\uC5D0\uAC8C \uC120\uBB3C\uC744 \uC900\uB2E4"]);break;case"1-2":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uD683\uBD88\uC744 \uCF1C\uC11C \uC8FC\uBCC0\uC744 \uBC1D\uD614\uC2B5\uB2C8\uB2E4.","\uBD88\uBE5B\uC774 \uC5B4\uB460\uC744 \uBC00\uC5B4\uB0B4\uC790 \uB180\uB77C\uC6B4 \uAD11\uACBD\uC774 \uD3BC\uCCD0\uC84C\uC2B5\uB2C8\uB2E4.","\uACE0\uB300 \uC720\uC801\uC758 \uC785\uAD6C\uAC00 \uBAA8\uC2B5\uC744 \uB4DC\uB7EC\uB0C8\uC2B5\uB2C8\uB2E4.","\uB3CC\uBB38\uC5D0\uB294 \uC2E0\uBE44\uD55C \uBB38\uC591\uC774 \uC0C8\uACA8\uC838 \uC788\uACE0, \uC138 \uAC1C\uC758 \uBCF4\uC11D \uD648\uC774 \uC788\uC2B5\uB2C8\uB2E4.","\uAC01\uAC01 \uBE68\uAC04\uC0C9, \uD30C\uB780\uC0C9, \uB179\uC0C9\uC758 \uBCF4\uC11D\uC774 \uD544\uC694\uD574 \uBCF4\uC785\uB2C8\uB2E4."]),this.setChoices(["\u{1F534} \uBE68\uAC04 \uBCF4\uC11D\uC744 \uCC3E\uC544\uBCF8\uB2E4","\u{1F535} \uD30C\uB780 \uBCF4\uC11D\uC744 \uCC3E\uC544\uBCF8\uB2E4","\u{1F7E2} \uB179\uC0C9 \uBCF4\uC11D\uC744 \uCC3E\uC544\uBCF8\uB2E4"]);break;case"0-0-0":this.addStoryBlock(['"\uD1A0\uB07C\uB2D8, \uC774\uACF3\uC740 \uC815\uB9D0 \uB9C8\uBC95\uC758 \uC815\uC6D0\uC778\uAC00\uC694?"','"\uADF8\uB807\uC2B5\uB2C8\uB2E4. \uC774\uACF3\uC740 \uC120\uD55C \uB9C8\uC74C\uC744 \uAC00\uC9C4 \uC774\uB4E4\uB9CC \uBCFC \uC218 \uC788\uB294 \uACF3\uC774\uC5D0\uC694."','"\uB2F9\uC2E0\uC740 \uD2B9\uBCC4\uD55C \uC6B4\uBA85\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."',"\uD1A0\uB07C\uAC00 \uC791\uC740 \uD669\uAE08 \uC5F4\uC1E0\uB97C \uAC74\uB124\uC90D\uB2C8\uB2E4.",'"\uC774 \uC5F4\uC1E0\uB85C \uC228\uACA8\uC9C4 \uBCF4\uBB3C\uC744 \uCC3E\uC744 \uC218 \uC788\uC744 \uAC70\uC608\uC694."']),this.gainExp(25),this.gold+=30,this.addToInventory("key_golden",1),this.addStoryBlock(["\u{1F4B0} \uACBD\uD5D8\uCE58 25\uC640 \uACE8\uB4DC 30\uC744 \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!","\u{1F5DD}\uFE0F \uD669\uAE08 \uC5F4\uC1E0\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!"]),this.setChoices(["\u{1F5DD}\uFE0F \uBCF4\uBB3C\uC744 \uCC3E\uC73C\uB7EC \uAC04\uB2E4","\u2753 \uC6B4\uBA85\uC5D0 \uB300\uD574 \uB354 \uBB3B\uB294\uB2E4","\u{1F3E0} \uC9D1\uC73C\uB85C \uB3CC\uC544\uAC00\uB824 \uD55C\uB2E4"]);break;case"0-1-0":this.addStoryBlock(['"\uD3C9\uD654\uB85C\uC6B4 \uC138\uC0C1\uC744 \uC6D0\uD569\uB2C8\uB2E4."',"\uC5F0\uBABB\uC758 \uC815\uB839\uC774 \uBBF8\uC18C\uB97C \uC9C0\uC5C8\uC2B5\uB2C8\uB2E4.",'"\uC544\uB984\uB2E4\uC6B4 \uC18C\uC6D0\uC774\uAD70\uC694. \uB2F9\uC2E0\uC758 \uB9C8\uC74C\uC774 \uC138\uC0C1\uC744 \uBC14\uAFC0 \uAC83\uC785\uB2C8\uB2E4."',"\uC5F0\uBABB\uC5D0\uC11C \uBE5B\uB098\uB294 \uAD6C\uC2AC\uC774 \uB5A0\uC62C\uB77C \uB2F9\uC2E0\uC758 \uC190\uC5D0 \uB193\uC785\uB2C8\uB2E4.",'"\uC774 \uD3C9\uD654\uC758 \uAD6C\uC2AC\uC740 \uB2F9\uC2E0\uC5D0\uAC8C \uD2B9\uBCC4\uD55C \uD798\uC744 \uC904 \uAC83\uC785\uB2C8\uB2E4."']),this.gainExp(40),this.gold+=50,this.addToInventory("orb_peace",1),this.addStoryBlock(["\u{1F4B0} \uACBD\uD5D8\uCE58 40\uACFC \uACE8\uB4DC 50\uC744 \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!","\u{1F52E} \uD3C9\uD654\uC758 \uAD6C\uC2AC\uC744 \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!"]),this.setChoices(["\u{1F30D} \uC138\uC0C1\uC744 \uAD6C\uD558\uB7EC \uB5A0\uB09C\uB2E4","\u{1F3D8}\uFE0F \uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC0AC\uB78C\uB4E4\uC744 \uB3D5\uB294\uB2E4","\u{1F4DA} \uB354 \uB9CE\uC740 \uC9C0\uD61C\uB97C \uC5BB\uC73C\uB7EC \uAC04\uB2E4"]);break;default:this.addStoryBlock(["\uB2F9\uC2E0\uC758 \uBAA8\uD5D8\uC774 \uACC4\uC18D\uB429\uB2C8\uB2E4...","\uC774 \uC120\uD0DD\uC774 \uC5B4\uB5A4 \uACB0\uACFC\uB97C \uAC00\uC838\uC62C\uC9C0 \uC544\uBB34\uB3C4 \uBAA8\uB985\uB2C8\uB2E4.","\uC0C8\uB85C\uC6B4 \uC7A5\uC774 \uC2DC\uC791\uB418\uB824 \uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uB2F9\uC2E0\uC758 \uC774\uC57C\uAE30\uB294 \uC5EC\uAE30\uC11C \uB05D\uB098\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.","\uACC4\uC18D\uD574\uC11C \uBAA8\uD5D8\uC744 \uC774\uC5B4\uAC00 \uBCF4\uC138\uC694!"]),this.setChoices(["\u{1F504} \uC0C8\uB85C\uC6B4 \uBAA8\uD5D8\uC744 \uC2DC\uC791\uD55C\uB2E4","\u{1F4DD} \uC774\uC57C\uAE30\uB97C \uAE30\uB85D\uD55C\uB2E4","\u{1F3AF} \uB2E4\uB978 \uC120\uD0DD\uC744 \uD574\uBCF8\uB2E4"]);break}}addStoryBlock(e){this.storyBlocks.push({type:"story",lines:e})}addChoiceBlock(e){this.storyBlocks.push({type:"choice",choiceText:e})}setChoices(e){if(Math.random()<.3&&e.length>0){let n=["\u2694\uFE0F \uC218\uC0C1\uD55C \uC801\uACFC \uB9C8\uC8FC\uCCE4\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F43A} \uC57C\uC0DD \uB291\uB300\uAC00 \uB098\uD0C0\uB0AC\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F9D9} \uC0AC\uC545\uD55C \uB9C8\uBC95\uC0AC\uAC00 \uB098\uD0C0\uB0AC\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F479} \uAC11\uC790\uAE30 \uAD34\uBB3C\uC774 \uC2B5\uACA9\uD574\uC654\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F480} \uD574\uACE8 \uC804\uC0AC\uAC00 \uAE38\uC744 \uB9C9\uB294\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F409} \uB4DC\uB798\uACE4\uC774 \uB0A0\uC544\uC624\uACE0 \uC788\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F9DB} \uC624\uD06C \uC804\uC0AC\uB4E4\uC774 \uB098\uD0C0\uB0AC\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F47E} \uACE0\uBE14\uB9B0 \uBB34\uB9AC\uB97C \uBC1C\uACAC\uD588\uB2E4 - \uC804\uD22C\uD558\uAE30"],o=n[Math.floor(Math.random()*n.length)],l=Math.floor(Math.random()*(e.length+1));e.splice(l,0,o)}this.choices=e,this.scrollToBottom()}scrollToBottom(){this.cdr.detectChanges(),this.attemptScroll(),setTimeout(()=>{this.attemptScroll()},100),setTimeout(()=>{this.attemptScroll()},500)}attemptScroll(){let e=document.querySelector(".novel-scroll-area"),t=document.querySelector(".scroll-target");e&&t?(console.log("\u{1F53D} \uC2A4\uD06C\uB864 \uD0C0\uAC9F\uC73C\uB85C \uC774\uB3D9:",t),t.scrollIntoView({behavior:"smooth",block:"end"})):e?(console.log("\u{1F53D} \uC2A4\uD06C\uB864 \uC601\uC5ED \uB9E8 \uC544\uB798\uB85C:",e.scrollHeight),e.scrollTo({top:e.scrollHeight,behavior:"smooth"})):console.warn("\u274C \uC2A4\uD06C\uB864 \uC601\uC5ED\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}scrollToBattleLog(){this.shouldScrollBattleLog=!0,this.cdr.detectChanges()}scrollToBattleLogBottom(){if(this.battleLogContainer){let e=this.battleLogContainer.nativeElement;e.scrollTop=e.scrollHeight}}extractNumber(e){let t=e.match(/\d+/);return t?t[0]:"0"}saveGame(e="autosave"){if(!this.selectedNovel){console.warn("\u274C \uC120\uD0DD\uB41C \uC18C\uC124\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");return}this.currentGameId||(this.currentGameId=`${this.selectedNovel.id}_${Date.now()}`);let t={id:this.currentGameId,novelId:this.selectedNovel.id,novelTitle:this.selectedNovel.title,novelTemplate:this.selectedNovel,playerCharacter:this.playerCharacter,storyBlocks:this.storyBlocks,currentPath:this.currentPath,choices:this.choices,gameStarted:this.gameStarted,gold:this.gold,inventory:this.inventory,completedQuests:[],currentChapter:1,saveDate:new Date};localStorage.setItem(`novel_game_${this.currentGameId}`,JSON.stringify(t)),console.log("\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC:",this.currentGameId)}loadGameById(e){try{let t=`novel_game_${e}`,n=localStorage.getItem(t);if(!n){console.error("\u274C \uC800\uC7A5\uB41C \uAC8C\uC784\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",e),this.router.navigate(["/novel"]);return}let o=JSON.parse(n),l=o.novelTemplate;if(l||(l=this.novelTemplates.find(d=>d.id===o.novelId)),!l){console.error("\u274C \uC18C\uC124\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",o.novelId),this.notification.show("\uC800\uC7A5\uB41C \uAC8C\uC784\uC758 \uC18C\uC124 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/novel"]);return}this.selectedNovel=l,this.novelSelected=!0,this.playerCharacter=o.playerCharacter,this.storyBlocks=o.storyBlocks,this.currentPath=o.currentPath,this.choices=o.choices,this.gameStarted=o.gameStarted,this.gold=o.gold,this.inventory=o.inventory,console.log("\uFFFD \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC131\uACF5:",o.novelTitle),setTimeout(()=>this.scrollToBottom(),100)}catch(t){console.error("\u274C \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",t),this.router.navigate(["/novel"])}}formatSaveDate(e){let t=new Date(e),o=new Date().getTime()-t.getTime(),l=Math.floor(o/(1e3*60*60)),d=Math.floor(o/(1e3*60));return d<1?"\uBC29\uAE08 \uC804":d<60?`${d}\uBD84 \uC804`:l<24?`${l}\uC2DC\uAC04 \uC804`:t.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}isArray(e){return Array.isArray(e)}loadGame(e="autosave"){let t=localStorage.getItem(`novel_game_${e}`);if(!t)return console.warn("\u274C \uC800\uC7A5\uB41C \uAC8C\uC784\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",e),!1;try{let n=JSON.parse(t);return this.playerCharacter=n.playerCharacter,this.storyBlocks=n.storyBlocks,this.currentPath=n.currentPath,this.choices=n.choices,this.gameStarted=n.gameStarted,this.gold=n.gold,this.inventory=n.inventory,console.log("\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC644\uB8CC:",e),this.scrollToBottom(),!0}catch(n){return console.error("\u274C \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",n),!1}}getSaveList(){let e=[];for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);n&&n.startsWith("novel_game_")&&e.push(n.replace("novel_game_",""))}return e}toggleCharacterPanel(){this.showCharacterPanel=!this.showCharacterPanel,this.showInventoryPanel=!1,this.showShopPanel=!1}gainExp(e){this.playerCharacter.exp+=e,this.playerCharacter.exp>=this.playerCharacter.maxExp&&this.levelUp()}levelUp(){this.playerCharacter.level++,this.playerCharacter.exp=0,this.playerCharacter.maxExp=Math.floor(this.playerCharacter.maxExp*1.5),this.playerCharacter.maxHp+=20,this.playerCharacter.hp=this.playerCharacter.maxHp,this.playerCharacter.maxMp+=10,this.playerCharacter.mp=this.playerCharacter.maxMp,this.playerCharacter.attack+=2,this.playerCharacter.defense+=1,this.playerCharacter.skillPoints+=2,this.addStoryBlock([`\u{1F389} \uB808\uBCA8 \uC5C5! \uB808\uBCA8 ${this.playerCharacter.level}\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,"\uCCB4\uB825\uACFC \uB9C8\uB098\uAC00 \uD68C\uBCF5\uB418\uACE0 \uB2A5\uB825\uCE58\uAC00 \uC0C1\uC2B9\uD588\uC2B5\uB2C8\uB2E4.","\uC2A4\uD0AC \uD3EC\uC778\uD2B8 2\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4."])}toggleInventoryPanel(){this.showInventoryPanel=!this.showInventoryPanel,this.showCharacterPanel=!1,this.showShopPanel=!1}useItem(e){if(e.type==="consumable"){switch(e.id){case"potion_hp":this.playerCharacter.hp=Math.min(this.playerCharacter.hp+50,this.playerCharacter.maxHp),this.removeFromInventory(e.id,1),this.addStoryBlock(["\u{1F49A} \uCCB4\uB825 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD558\uC5EC HP\uAC00 50 \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."]);break;case"potion_mp":this.playerCharacter.mp=Math.min(this.playerCharacter.mp+30,this.playerCharacter.maxMp),this.removeFromInventory(e.id,1),this.addStoryBlock(["\u{1F499} \uB9C8\uB098 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD558\uC5EC MP\uAC00 30 \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."]);break}this.saveGame()}}equipItem(e){(e.type==="weapon"||e.type==="armor")&&(this.inventory.forEach(t=>{t.type===e.type&&t.isEquipped&&(t.isEquipped=!1)}),e.isEquipped=!0,this.updatePlayerStats(),this.addStoryBlock([`\u2694\uFE0F ${e.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4.`]))}updatePlayerStats(){this.initializePlayer(),this.inventory.forEach(e=>{e.isEquipped&&e.stats&&Object.keys(e.stats).forEach(t=>{t in this.playerCharacter&&(this.playerCharacter[t]+=e.stats[t])})})}addToInventory(e,t=1){let n=this.inventory.find(o=>o.id===e);if(n)n.quantity+=t;else{let o=this.shopItems.find(l=>l.id===e);o||(o={key_golden:{id:"key_golden",name:"\uD669\uAE08 \uC5F4\uC1E0",description:"\uC2E0\uBE44\uD55C \uBCF4\uBB3C\uC0C1\uC790\uB97C \uC5F4 \uC218 \uC788\uB294 \uD669\uAE08 \uC5F4\uC1E0",type:"quest",rarity:"rare",price:0},orb_peace:{id:"orb_peace",name:"\uD3C9\uD654\uC758 \uAD6C\uC2AC",description:"\uD3C9\uD654\uB85C\uC6B4 \uB9C8\uC74C\uC744 \uB2F4\uC740 \uC2E0\uC131\uD55C \uAD6C\uC2AC. \uC9C0\uB2A5 +5",type:"misc",rarity:"epic",price:0,stats:{intelligence:5}},crystal_magic:{id:"crystal_magic",name:"\uB9C8\uBC95 \uD06C\uB9AC\uC2A4\uD0C8",description:"\uB9C8\uBC95\uC758 \uD798\uC774 \uAE43\uB4E0 \uD06C\uB9AC\uC2A4\uD0C8. MP +20",type:"misc",rarity:"rare",price:0,stats:{maxMp:20}}}[e]),o&&this.inventory.push({id:o.id,name:o.name,description:o.description,type:o.type,quantity:t,buyPrice:o.price||0,sellPrice:Math.floor((o.price||0)*.7),rarity:o.rarity,stats:o.stats,isEquipped:!1})}}removeFromInventory(e,t=1){let n=this.inventory.find(o=>o.id===e);n&&(n.quantity-=t,n.quantity<=0&&(this.inventory=this.inventory.filter(o=>o.id!==e)))}toggleShopPanel(){this.showShopPanel=!this.showShopPanel,this.showCharacterPanel=!1,this.showInventoryPanel=!1}buyItem(e){this.gold>=e.price&&e.stock>0?(this.gold-=e.price,e.stock--,this.addToInventory(e.id),this.addStoryBlock([`\u{1F4B0} ${e.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${e.price} \uACE8\uB4DC)`])):this.gold<e.price?this.addStoryBlock([`\u274C \uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. (${e.price} \uACE8\uB4DC \uD544\uC694)`]):this.addStoryBlock(["\u274C \uC0C1\uD488\uC774 \uD488\uC808\uB418\uC5C8\uC2B5\uB2C8\uB2E4."])}sellItem(e){e.quantity>0&&(this.gold+=e.sellPrice,this.removeFromInventory(e.id,1),this.addStoryBlock([`\u{1F4B0} ${e.name}\uC744(\uB97C) \uD310\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${e.sellPrice} \uACE8\uB4DC \uD68D\uB4DD)`]))}toggleLeftPanel(){this.isLeftPanelCollapsed=!this.isLeftPanelCollapsed}toggleRightPanel(){this.isRightPanelCollapsed=!this.isRightPanelCollapsed}toggleFlowPanel(){this.isFlowPanelOpen=!this.isFlowPanelOpen}closeLeftPanel(){this.isLeftPanelCollapsed=!0}closeRightPanel(){this.isRightPanelCollapsed=!0}expandLeftPanel(){this.isLeftPanelCollapsed=!1}expandRightPanel(){this.isRightPanelCollapsed=!1}closeAllPanels(){this.showCharacterPanel=!1,this.showInventoryPanel=!1,this.showShopPanel=!1,this.showCharacterCreatorPanel=!1,this.showScenarioCreatorPanel=!1,this.showItemCreatorPanel=!1}openCharacterCreator(){this.showCharacterCreatorPanel=!0,this.generatedCharacter=null,this.characterGenerationError=""}generateAiCharacter(e="\uC8FC\uC778\uACF5"){if(!this.geminiAiService.hasApiKey()){this.characterGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.isGeneratingCharacter=!0,this.characterGenerationError="",this.generatedCharacter=null,console.log("\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC2DC\uC791:",e),this.geminiAiService.generateCharacter(e).subscribe({next:t=>{console.log("\u2705 \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC644\uB8CC:",t),this.generatedCharacter=t,this.isGeneratingCharacter=!1},error:t=>{console.error("\u274C \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC2E4\uD328:",t),this.characterGenerationError=t.message||"AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",this.isGeneratingCharacter=!1}})}applyGeneratedCharacter(){if(!this.generatedCharacter)return;let e=this.generatedCharacter;this.playerCharacter.name=e.name||"\uBB34\uBA85";let t=Math.floor((e.age||20)/10);this.playerCharacter.level=1+t,this.playerCharacter.attack=10+t*2,this.playerCharacter.defense=5+t,this.playerCharacter.agility=8+t,e.abilities&&e.abilities.length>0&&(this.playerCharacter.skills=e.abilities.slice(0,3).map((n,o)=>({id:`skill_${o+1}`,name:n,description:`${e.name}\uC758 \uD2B9\uAE30 \uBB34\uACF5`,level:1,maxLevel:5,type:"combat"}))),this.addStoryBlock(["\u2728 \uC0C8\uB85C\uC6B4 \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!","",`\uC774\uB984: ${e.name}`,`\uB098\uC774: ${e.age}\uC138`,`\uC5ED\uD560: ${this.getRoleKorean(e.role)}`,"",`\u{1F4D6} ${e.appearance||"\uC218\uB824\uD55C \uC678\uBAA8\uB97C \uC9C0\uB2C8\uACE0 \uC788\uC2B5\uB2C8\uB2E4."}`,"",`\u{1F4AD} ${e.personality||"\uB0C9\uCCA0\uD558\uACE0 \uCE68\uCC29\uD55C \uC131\uACA9\uC785\uB2C8\uB2E4."}`,"",`\u{1F3AF} \uBAA9\uD45C: ${e.goals||"\uBB34\uB9BC\uC758 \uC815\uC810\uC744 \uD5A5\uD574 \uB098\uC544\uAC11\uB2C8\uB2E4."}`,""]),e.background&&this.addStoryBlock(["\u{1F4DC} \uBC30\uACBD \uC2A4\uD1A0\uB9AC:",e.background]),e.traits&&e.traits.length>0&&this.addStoryBlock([`\u2B50 \uD2B9\uC131: ${e.traits.join(", ")}`]),this.showCharacterCreatorPanel=!1,this.scrollToBottom(),console.log("\uCE90\uB9AD\uD130 \uC801\uC6A9 \uC644\uB8CC:",this.playerCharacter)}loadSavedCharacters(){return v(this,null,function*(){try{this.savedCharacters=yield this.characterDbService.getAllCharacters(),console.log("\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130 \uB85C\uB4DC:",this.savedCharacters.length)}catch(e){console.error("\u274C \uCE90\uB9AD\uD130 \uB85C\uB4DC \uC2E4\uD328:",e),this.savedCharacters=[]}})}saveGeneratedCharacter(){return v(this,null,function*(){if(!this.generatedCharacter)return;let e={name:this.generatedCharacter.name||"\uC774\uB984 \uC5C6\uC74C",gender:this.generatedCharacter.gender||"\uBBF8\uC815",age:this.generatedCharacter.age||20,occupation:this.generatedCharacter.occupation||"\uBAA8\uD5D8\uAC00",personality:this.generatedCharacter.personality||[],backstory:this.generatedCharacter.background||this.generatedCharacter.backstory||"",skills:this.generatedCharacter.skills||[],appearance:this.generatedCharacter.appearance||"",goal:this.generatedCharacter.goal||"",weakness:this.generatedCharacter.weakness||"",tags:this.generatedCharacter.traits||this.generatedCharacter.tags||[],createdAt:new Date};try{let t=yield this.characterDbService.saveCharacter(e);console.log("\u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5 \uC131\uACF5. ID:",t),this.notification.show("\uCE90\uB9AD\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),yield this.loadSavedCharacters(),this.showCharacterCreatorPanel=!1}catch(t){console.error("\u274C \uCE90\uB9AD\uD130 \uC800\uC7A5 \uC2E4\uD328:",t),this.notification.show("\uCE90\uB9AD\uD130 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteCharacter(e,t){return v(this,null,function*(){if(t&&t.stopPropagation(),!!(yield this.showConfirmDialog("\uC774 \uCE90\uB9AD\uD130\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")))try{yield this.characterDbService.deleteCharacter(e),console.log("\u{1F5D1}\uFE0F \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC131\uACF5"),yield this.loadSavedCharacters()}catch(o){console.error("\u274C \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC2E4\uD328:",o),this.notification.show("\uCE90\uB9AD\uD130 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadCharacter(e){return v(this,null,function*(){this.generatedCharacter=e,this.showCharacterCreatorPanel=!0,console.log("\u{1F3AD} \uCE90\uB9AD\uD130 \uBD88\uB7EC\uC624\uAE30:",e.name)})}getRoleKorean(e){return{protagonist:"\uC8FC\uC778\uACF5",antagonist:"\uC801\uB300\uC790",supporting:"\uC870\uC5F0",minor:"\uB2E8\uC5ED"}[e]||"\uC54C \uC218 \uC5C6\uC74C"}loadSavedScenarios(){return v(this,null,function*(){try{this.savedScenarios=yield this.scenarioDbService.getAllScenarios(),console.log("\u{1F4DA} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624:",this.savedScenarios.length,"\uAC1C")}catch(e){console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uB85C\uB4DC \uC2E4\uD328:",e),this.savedScenarios=[]}})}openScenarioCreator(){this.showScenarioCreatorPanel=!0,this.generatedScenario=null,this.scenarioGenerationError=""}generateAiScenario(e="\uBB34\uD611",t="\uC804\uD1B5\uC801\uC778",n="\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294",o=!1){if(!this.geminiAiService.hasApiKey()){this.scenarioGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.isGeneratingScenario=!0,this.scenarioGenerationError="",this.generatedScenario=null,console.log("\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC2DC\uC791:",{genre:e,style:t,mood:n,isAdult:o}),this.geminiAiService.generateScenario({genre:e,style:t,mood:n,isAdult:o}).subscribe({next:l=>{console.log("\u2705 \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC644\uB8CC:",l),this.generatedScenario=l,this.isGeneratingScenario=!1},error:l=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC2E4\uD328:",l),this.scenarioGenerationError=l.message||"AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",this.isGeneratingScenario=!1}})}saveGeneratedScenario(){return v(this,null,function*(){if(!this.generatedScenario)return;let e={id:`scenario_${Date.now()}`,title:this.generatedScenario.title||"\uC81C\uBAA9 \uC5C6\uC74C",description:this.generatedScenario.description||"",characters:this.generatedScenario.characters||[],setting:this.generatedScenario.setting||"",conflict:this.generatedScenario.conflict||"",goal:this.generatedScenario.goal||"",mood:this.generatedScenario.mood||"",tags:this.generatedScenario.tags||[],genre:this.generatedScenario.genre||"\uBB34\uD611",style:this.generatedScenario.style||"\uC804\uD1B5\uC801\uC778",createdAt:new Date,isAdult:this.generatedScenario.isAdult||!1};try{yield this.scenarioDbService.saveScenario(e),yield this.loadSavedScenarios(),this.notification.show("\u2705 \uC2DC\uB098\uB9AC\uC624\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),console.log("\u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC644\uB8CC:",e.title)}catch(t){console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC2E4\uD328:",t),this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteScenario(e){return v(this,null,function*(){if(yield this.showConfirmDialog("\uC774 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{yield this.scenarioDbService.deleteScenario(e),yield this.loadSavedScenarios(),console.log("\u{1F5D1}\uFE0F \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC644\uB8CC:",e)}catch(n){console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC2E4\uD328:",n),this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadScenario(e){return v(this,null,function*(){this.generatedScenario=e,this.showScenarioCreatorPanel=!0,console.log("\u{1F4D6} \uC2DC\uB098\uB9AC\uC624 \uBD88\uB7EC\uC624\uAE30:",e.title)})}startGameWithScenario(){if(!this.generatedScenario)return;let e=this.generatedScenario;this.addStoryBlock([`\u{1F3AC} ${e.title}`,"",`${e.description}`,"",`\u{1F4CD} \uBC30\uACBD: ${e.setting}`,"",`\u2694\uFE0F \uAC08\uB4F1: ${e.conflict}`,"",`\u{1F3AF} \uBAA9\uD45C: ${e.goal}`,"",`\u{1F4AD} \uBD84\uC704\uAE30: ${e.mood}`,""]),e.characters&&e.characters.length>0&&this.addStoryBlock(["\u{1F465} \uB4F1\uC7A5\uC778\uBB3C:",...e.characters.map(t=>`  \u2022 ${t}`)]),e.tags&&e.tags.length>0&&this.addStoryBlock([`\u{1F3F7}\uFE0F \uD0DC\uADF8: ${e.tags.join(", ")}`]),this.showScenarioCreatorPanel=!1,this.scrollToBottom(),console.log("\uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791:",e.title)}startBattleFromChoice(){this.addStoryBlock(["\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4!","\uC801\uC774 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uACE0 \uACF5\uACA9 \uC790\uC138\uB97C \uCDE8\uD588\uC2B5\uB2C8\uB2E4."]),this.initializeBattle(),this.inBattle=!0,this.battleEnded=!1,this.battleVictory=!1,this.battleTurn="player",this.battleLog=["\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!"],this.playerDefenseBonus=0,this.generateRandomEnemy(),this.scrollToBottom(),setTimeout(()=>this.autoBattle(),1e3)}generateRandomEnemy(){let e=[{name:"\uACE0\uBE14\uB9B0",hp:50,attack:8,defense:3},{name:"\uC624\uD06C",hp:80,attack:12,defense:5},{name:"\uB291\uB300",hp:60,attack:10,defense:2},{name:"\uD574\uACE8 \uC804\uC0AC",hp:70,attack:11,defense:4},{name:"\uB9C8\uBC95\uC0AC",hp:45,attack:15,defense:2},{name:"\uB4DC\uB798\uACE4",hp:150,attack:20,defense:10}],t=e[Math.floor(Math.random()*e.length)];this.battleEnemy={name:t.name,hp:t.hp,maxHp:t.hp,attack:t.attack,defense:t.defense},this.battleLog.push(`${this.battleEnemy.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`)}initializeBattle(){this.playerDefenseBonus=0,this.learnedMartialSkills.length>0&&(this.martialBattleState={turn:1,playerHp:this.playerCharacter.hp,playerMp:this.playerCharacter.mp,enemyHp:this.battleEnemy.hp,playerStatusEffects:[],enemyStatusEffects:[],playerDefending:!1,combatLog:[],isPlayerTurn:!0,playerInternalPower:this.playerInternalPower.current,playerMaxInternalPower:this.playerInternalPower.max,enemyInternalPower:100,enemyMaxInternalPower:100,skillCooldowns:{},lastSkillUsed:void 0,comboCounter:0,playerRealm:this.playerInternalPower.realm,enemyRealm:"\uCD08\uB958"})}autoBattle(){this.battleEnded||this.battleTurn==="player"&&this.playerAutoAction()}playerAutoAction(){if(this.battleEnded)return;if(this.playerCharacter.hp/this.playerCharacter.maxHp*100<=30&&this.hasPotion()){this.usePotion();return}if(this.playerCharacter.mp>=10&&Math.random()<.3){this.playerSkill();return}if(Math.random()<.2){this.playerDefend();return}this.playerAttack()}playerAttack(){if(this.battleTurn!=="player"||this.battleEnded)return;let e=Math.max(1,this.playerCharacter.attack-this.battleEnemy.defense);this.triggerEnemyDamage(),this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-e),this.battleLog.push(`\uB2F9\uC2E0\uC740 ${this.battleEnemy.name}\uC5D0\uAC8C ${e} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`),this.battleEnemy.hp<=0?this.winBattle():(this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500)),this.scrollToBattleLog()}playerSkill(){if(this.battleTurn!=="player"||this.battleEnded||this.playerCharacter.mp<10)return;this.playerCharacter.mp-=10;let e=Math.max(1,Math.floor(this.playerCharacter.attack*1.5)-this.battleEnemy.defense);this.triggerEnemyDamage(),this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-e),this.battleLog.push(`\u2728 \uAC15\uB825\uD55C \uC2A4\uD0AC \uACF5\uACA9! ${this.battleEnemy.name}\uC5D0\uAC8C ${e} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`),this.battleEnemy.hp<=0?this.winBattle():(this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500)),this.scrollToBattleLog()}useMartialSkillInBattle(e){if(this.battleTurn!=="player"||this.battleEnded)return;if(this.playerInternalPower.current<e.internalPowerCost){this.notification.show(`\uB0B4\uACF5\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4! (\uD544\uC694: ${e.internalPowerCost}, \uD604\uC7AC: ${this.playerInternalPower.current})`);return}this.playerInternalPower.current-=e.internalPowerCost;let t=this.useMartialSkill(e.id);t.success?(this.triggerEnemyDamage(),this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-t.damage),this.battleLog.push(`\u2694\uFE0F ${e.name}(${e.chineseName}) \uC0AC\uC6A9!`),this.battleLog.push(`\u{1F4A5} ${this.battleEnemy.name}\uC5D0\uAC8C ${t.damage} \uD53C\uD574!`),t.specialEffect&&this.battleLog.push(`\u2728 ${t.specialEffect}`),this.battleEnemy.hp<=0?this.winBattle():(this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),800))):this.battleLog.push(`\u274C ${t.message}`),this.scrollToBattleLog()}playerDefend(){this.battleTurn!=="player"||this.battleEnded||(this.playerDefenseBonus=Math.floor(this.playerCharacter.defense*.5),this.battleLog.push(`\u{1F6E1}\uFE0F \uBC29\uC5B4 \uC790\uC138\uB97C \uCDE8\uD588\uB2E4! (\uBC29\uC5B4\uB825 +${this.playerDefenseBonus})`),this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500),this.scrollToBattleLog())}usePotion(){if(this.battleTurn!=="player"||this.battleEnded||!this.hasPotion())return;let e=50;this.playerCharacter.hp=Math.min(this.playerCharacter.maxHp,this.playerCharacter.hp+e);let t=this.inventory.find(n=>n.type==="consumable"&&n.name.includes("\uBB3C\uC57D"));t&&t.quantity>0&&(t.quantity--,t.quantity===0&&(this.inventory=this.inventory.filter(n=>n.id!==t.id))),this.battleLog.push(`\u{1F9EA} \uD3EC\uC158\uC744 \uC0AC\uC6A9\uD588\uB2E4! HP ${e} \uD68C\uBCF5!`),this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500),this.scrollToBattleLog()}hasPotion(){return this.inventory.some(e=>e.type==="consumable"&&e.name.includes("\uBB3C\uC57D")&&e.quantity>0)}enemyTurn(){if(this.battleEnded)return;let e=this.playerCharacter.defense+this.playerDefenseBonus,t=Math.max(1,this.battleEnemy.attack-e);this.triggerPlayerDamage(),this.playerCharacter.hp=Math.max(0,this.playerCharacter.hp-t),this.battleLog.push(`${this.battleEnemy.name}\uC758 \uACF5\uACA9! \uB2F9\uC2E0\uC740 ${t} \uD53C\uD574\uB97C \uBC1B\uC558\uB2E4!`),this.playerDefenseBonus>0&&(this.battleLog.push("\uBC29\uC5B4 \uC790\uC138\uAC00 \uD480\uB838\uB2E4."),this.playerDefenseBonus=0),this.playerCharacter.hp<=0?this.loseBattle():(this.battleTurn="player",setTimeout(()=>this.autoBattle(),500)),this.scrollToBattleLog()}winBattle(){this.battleEnded=!0,this.battleVictory=!0;let e=Math.floor(this.battleEnemy.maxHp*.8),t=Math.floor(this.battleEnemy.maxHp*.6);this.gainExp(e),this.gold+=t,this.battleLog.push(""),this.battleLog.push("\u{1F3C6} \uC2B9\uB9AC!"),this.battleLog.push(`\u{1F4AB} \uACBD\uD5D8\uCE58 ${e} \uD68D\uB4DD!`),this.battleLog.push(`\u{1F4B0} \uACE8\uB4DC ${t} \uD68D\uB4DD!`),this.updateBattleNodeResult("win"),this.addStoryBlock(["","\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500","\u2694\uFE0F \uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!",`\u{1F4AB} \uACBD\uD5D8\uCE58 ${e} \uD68D\uB4DD!`,`\u{1F4B0} \uACE8\uB4DC ${t} \uD68D\uB4DD!`,"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",""]),this.scrollToBattleLog(),setTimeout(()=>this.endBattle(),2e3)}loseBattle(){this.battleEnded=!0,this.battleVictory=!1,this.playerCharacter.hp=Math.floor(this.playerCharacter.maxHp/2),this.battleLog.push(""),this.battleLog.push("\u{1F480} \uD328\uBC30..."),this.battleLog.push("\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD558\uB2E4."),this.updateBattleNodeResult("lose"),this.addStoryBlock(["","\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500","\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uCCB4\uB825\uC774 \uC808\uBC18\uC73C\uB85C \uC904\uC5C8\uC2B5\uB2C8\uB2E4.","\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.","\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",""]),this.scrollToBattleLog(),setTimeout(()=>this.endBattle(),2e3)}endBattle(){this.inBattle=!1,this.battleVictory?this.setChoices(["\u{1F6B6} \uC5EC\uD589\uC744 \uACC4\uC18D\uD55C\uB2E4","\u{1F6D1} \uC7A0\uC2DC \uD734\uC2DD\uC744 \uCDE8\uD55C\uB2E4","\u{1F50D} \uC804\uB9AC\uD488\uC744 \uB354 \uCC3E\uC544\uBCF8\uB2E4"]):(this.addStoryBlock(["","\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.",""]),this.setChoices(["\u{1F3E0} \uB9C8\uC744\uB85C \uB3CC\uC544\uAC04\uB2E4","\u{1F48A} \uD68C\uBCF5 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD55C\uB2E4","\u26FA \uADF8 \uC790\uB9AC\uC5D0\uC11C \uC57C\uC601\uD55C\uB2E4"])),this.scrollToBottom()}triggerPlayerDamage(){this.playerTakingDamage=!0,setTimeout(()=>{this.playerTakingDamage=!1},500)}triggerEnemyDamage(){this.enemyTakingDamage=!0,setTimeout(()=>{this.enemyTakingDamage=!1},500)}initializeBattleSkills(){this.battleSkills=[...this.defaultBattleSkills],this.playerCharacter.level>=5&&this.battleSkills.push({id:"lightning-strike",name:"\uBC88\uAC1C \uC77C\uACA9",description:"\uBC88\uAC1C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uC2A4\uD134\uC2DC\uD0B5\uB2C8\uB2E4",type:"attack",mpCost:30,cooldown:3,damageMultiplier:2.2,hitRate:.9,statusEffect:{type:"stun",duration:1,value:1,name:"\uC2A4\uD134",icon:"\u26A1"},icon:"\u26A1"})}initializeBattleItems(){this.battleItems=this.inventory.filter(e=>e.type==="consumable").map(e=>({id:e.id,name:e.name,description:e.description,type:this.getBattleItemType(e.id),effect:this.getBattleItemEffect(e.id),quantity:e.quantity,usableInBattle:!0,icon:this.getItemIcon(e.id)}))}getBattleItemType(e){return e.includes("potion")||e.includes("elixir")?"potion":e.includes("scroll")?"scroll":e.includes("bomb")||e.includes("grenade")?"throwable":"buff"}getBattleItemEffect(e){return e.includes("health-potion")?{heal:50}:e.includes("mana-potion")?{mpRestore:30}:e.includes("bomb")?{damage:40}:{heal:30}}getItemIcon(e){return e.includes("health-potion")?"\u2764\uFE0F":e.includes("mana-potion")?"\u{1F499}":e.includes("bomb")?"\u{1F4A3}":e.includes("scroll")?"\u{1F4DC}":"\u{1F381}"}useBattleSkill(e){let t=this.battleSkills.find(n=>n.id===e);if(!t)return!1;if(this.playerCharacter.mp<t.mpCost)return this.addBattleLog("player",`MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4! (\uD544\uC694: ${t.mpCost})`),!1;if(t.currentCooldown&&t.currentCooldown>0)return this.addBattleLog("player",`${t.name}\uC740(\uB294) \uC544\uC9C1 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. (${t.currentCooldown}\uD134 \uB0A8\uC74C)`),!1;switch(this.playerCharacter.mp-=t.mpCost,t.type){case"attack":this.executeAttackSkill(t);break;case"defense":this.executeDefenseSkill(t);break;case"heal":this.executeHealSkill(t);break;case"buff":this.executeBuffSkill(t);break;case"debuff":this.executeDebuffSkill(t);break}return t.cooldown>0&&(t.currentCooldown=t.cooldown),!0}executeAttackSkill(e){let t=this.playerCharacter.attack*(e.damageMultiplier||1);if(Math.random()>(e.hitRate||.9)){this.addBattleLog("player",`${e.name}\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4!`,{isMiss:!0}),this.triggerSkillEffect(e.icon||"\u{1F4A8}","miss");return}let l=Math.random()<(e.criticalRate||0),d=Math.floor(t*(l?1.5:1));this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-d),this.addBattleLog("player",`${e.name}! ${d} \uB370\uBBF8\uC9C0!`,{damage:d,isCritical:l}),this.triggerSkillEffect(e.icon||"\u{1F4A5}",l?"critical":"hit"),this.triggerEnemyDamage(),e.statusEffect&&this.applyStatusEffect("enemy",e.statusEffect)}executeDefenseSkill(e){this.playerDefenseBonus=e.defenseBoost||.5,this.addBattleLog("player",`${e.name}! \uBC29\uC5B4\uB825\uC774 ${e.defenseBoost*100}% \uC99D\uAC00\uD588\uB2E4!`),this.triggerSkillEffect(e.icon||"\u{1F6E1}\uFE0F","buff")}executeHealSkill(e){let t=Math.floor(this.playerCharacter.maxHp*(e.healAmount||.3)),n=Math.min(t,this.playerCharacter.maxHp-this.playerCharacter.hp);this.playerCharacter.hp+=n,this.addBattleLog("player",`${e.name}! HP ${n} \uD68C\uBCF5!`,{heal:n}),this.triggerSkillEffect(e.icon||"\u{1F49A}","heal")}executeBuffSkill(e){e.statusEffect&&(this.applyStatusEffect("player",e.statusEffect),this.addBattleLog("player",`${e.name}! ${e.statusEffect.name} \uD6A8\uACFC \uBC1C\uB3D9!`),this.triggerSkillEffect(e.icon||"\u2728","buff"))}executeDebuffSkill(e){e.statusEffect&&(this.applyStatusEffect("enemy",e.statusEffect),this.addBattleLog("player",`${e.name}! \uC801\uC5D0\uAC8C ${e.statusEffect.name} \uD6A8\uACFC!`),this.triggerSkillEffect(e.icon||"\u{1F53B}","debuff"))}useBattleItem(e){let t=this.battleItems.find(o=>o.id===e);if(!t||t.quantity<=0)return!1;if(t.effect.heal){let o=Math.min(t.effect.heal,this.playerCharacter.maxHp-this.playerCharacter.hp);this.playerCharacter.hp+=o,this.addBattleLog("player",`${t.name} \uC0AC\uC6A9! HP ${o} \uD68C\uBCF5!`,{heal:o}),this.triggerSkillEffect(t.icon||"\u2764\uFE0F","heal")}if(t.effect.mpRestore){let o=Math.min(t.effect.mpRestore,this.playerCharacter.maxMp-this.playerCharacter.mp);this.playerCharacter.mp+=o,this.addBattleLog("player",`${t.name} \uC0AC\uC6A9! MP ${o} \uD68C\uBCF5!`),this.triggerSkillEffect(t.icon||"\u{1F499}","heal")}t.effect.damage&&(this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-t.effect.damage),this.addBattleLog("player",`${t.name} \uC0AC\uC6A9! ${t.effect.damage} \uB370\uBBF8\uC9C0!`,{damage:t.effect.damage}),this.triggerSkillEffect(t.icon||"\u{1F4A3}","hit"),this.triggerEnemyDamage()),t.effect.buff&&(this.applyStatusEffect("player",t.effect.buff),this.addBattleLog("player",`${t.name} \uC0AC\uC6A9! ${t.effect.buff.name} \uD6A8\uACFC!`),this.triggerSkillEffect(t.icon||"\u2728","buff")),t.quantity--;let n=this.inventory.find(o=>o.id===e);return n&&(n.quantity--,n.quantity<=0&&(this.inventory=this.inventory.filter(o=>o.id!==e))),!0}applyStatusEffect(e,t){if(!this.currentBattleState)return;let n=e==="player"?this.currentBattleState.playerStatusEffects:this.currentBattleState.enemyStatusEffects,o=n.findIndex(l=>l.type===t.type);o>=0&&n.splice(o,1),n.push(ht({},t))}triggerSkillEffect(e,t){console.log(`\u{1F3AC} \uC2A4\uD0AC \uC774\uD399\uD2B8: ${e} (${t})`)}addBattleLog(e,t,n){if(!this.currentBattleState)return;let o=ht({turn:this.currentBattleState.turn,actor:e,action:t,timestamp:new Date},n);this.currentBattleState.combatLog.push(o),this.battleLog.push(this.formatBattleLog(o))}formatBattleLog(e){let n=`${e.actor==="player"?"\u{1F464}":"\u{1F479}"} ${e.action}`;return e.isCritical&&(n+=" \u26A1\uD06C\uB9AC\uD2F0\uCEEC!\u26A1"),e.isMiss&&(n+=" \u{1F4A8}Miss!"),n}updateSkillCooldowns(){this.battleSkills.forEach(e=>{e.currentCooldown&&e.currentCooldown>0&&e.currentCooldown--})}initializeWuxiaSystem(){this.initializeMeridians(),this.initializeFactions(),this.initializeMartialSkills(),this.initializeElixirs(),this.initializeMartialManuals()}initializeMeridians(){let e=[{id:"lung",name:"\uC218\uD0DC\uC74C\uD3D0\uACBD",chinese:"\u624B\u592A\u9670\u80BA\u7D93",bonus:{hp:10,defense:2}},{id:"large_intestine",name:"\uC218\uC591\uBA85\uB300\uC7A5\uACBD",chinese:"\u624B\u967D\u660E\u5927\u8178\u7D93",bonus:{strength:2}},{id:"stomach",name:"\uC871\uC591\uBA85\uC704\uACBD",chinese:"\u8DB3\u967D\u660E\u80C3\u7D93",bonus:{maxHp:20}},{id:"spleen",name:"\uC871\uD0DC\uC74C\uBE44\uACBD",chinese:"\u8DB3\u592A\u9670\u813E\u7D93",bonus:{hp:15}},{id:"heart",name:"\uC218\uC18C\uC74C\uC2EC\uACBD",chinese:"\u624B\u5C11\u9670\u5FC3\u7D93",bonus:{mp:10,intelligence:2}},{id:"small_intestine",name:"\uC218\uD0DC\uC591\uC18C\uC7A5\uACBD",chinese:"\u624B\u592A\u967D\u5C0F\u8178\u7D93",bonus:{agility:2}},{id:"bladder",name:"\uC871\uD0DC\uC591\uBC29\uAD11\uACBD",chinese:"\u8DB3\u592A\u967D\u8180\u80F1\u7D93",bonus:{maxMp:20}},{id:"kidney",name:"\uC871\uC18C\uC74C\uC2E0\uACBD",chinese:"\u8DB3\u5C11\u9670\u814E\u7D93",bonus:{maxHp:25,maxMp:25}},{id:"pericardium",name:"\uC218\uAD90\uC74C\uC2EC\uD3EC\uACBD",chinese:"\u624B\u53A5\u9670\u5FC3\u5305\u7D93",bonus:{defense:3}},{id:"triple_burner",name:"\uC218\uC18C\uC591\uC0BC\uCD08\uACBD",chinese:"\u624B\u5C11\u967D\u4E09\u7126\u7D93",bonus:{mp:15}},{id:"gallbladder",name:"\uC871\uC18C\uC591\uB2F4\uACBD",chinese:"\u8DB3\u5C11\u967D\u81BD\u7D93",bonus:{attack:3}},{id:"liver",name:"\uC871\uAD90\uC74C\uAC04\uACBD",chinese:"\u8DB3\u53A5\u9670\u809D\u7D93",bonus:{attack:5,strength:3}}];this.playerInternalPower.meridians.meridians=e.map(t=>({id:t.id,name:t.name,chineseName:t.chinese,isOpened:!1,openProgress:0,bonus:t.bonus}))}initializeFactions(){this.availableFactions=[{id:"shaolin",name:"\uC18C\uB9BC\uD30C",chineseName:"\u5C11\u6797\u6D3E",type:"righteous",description:"\uCC9C\uD558\uBB34\uB9BC\uC758 \uD0DC\uC0B0\uBD81\uB450. \uBD88\uAC00\uC758 \uC790\uBE44\uC640 \uAC15\uB825\uD55C \uAD8C\uBC95\uC73C\uB85C \uC720\uBA85\uD558\uB2E4.",headquarters:"\uC22D\uC0B0 \uC18C\uB9BC\uC0AC",founder:"\uB2EC\uB9C8\uC870\uC0AC",reputation:0,relationship:"neutral",basicSkills:["luohan_quan","vajra_palm"],advancedSkills:["prajna_palm","dragon_claw_hand"],secretSkills:["yijin_jing","marrow_washing_classic"],specialties:["\uAD8C\uBC95","\uC7A5\uBC95","\uB0B4\uACF5"],philosophy:"\uBD88\uAC00\uC758 \uC790\uBE44\uC640 \uBB34\uD559\uC758 \uC870\uD654"},{id:"wudang",name:"\uBB34\uB2F9\uD30C",chineseName:"\u6B66\u7576\u6D3E",type:"righteous",description:"\uB3C4\uAC00\uC758 \uBB34\uD559\uC744 \uC9D1\uB300\uC131\uD55C \uBA85\uBB38\uC815\uD30C. \uD0DC\uADF9\uAD8C\uACFC \uAC80\uC220\uC758 \uB300\uAC00\uB4E4\uC774 \uBAA8\uC5EC\uC788\uB2E4.",headquarters:"\uBB34\uB2F9\uC0B0",founder:"\uC7A5\uC0BC\uBD09",reputation:0,relationship:"neutral",basicSkills:["taiji_quan","wudang_sword"],advancedSkills:["taiji_sword","pure_yang_palm"],secretSkills:["taiji_mystical_skill","tai_chi_divine_technique"],specialties:["\uAC80\uC220","\uAD8C\uBC95","\uB3C4\uBC95"],philosophy:"\uBB34\uC704\uC790\uC5F0, \uC774\uC720\uC81C\uAC15"},{id:"demon_sect",name:"\uB9C8\uAD50",chineseName:"\u9B54\u654E",type:"evil",description:"\uBB34\uB9BC\uC758 \uACF5\uC801. \uAC15\uB825\uD558\uACE0 \uC0AC\uC545\uD55C \uBB34\uACF5\uC744 \uC0AC\uC6A9\uD55C\uB2E4.",headquarters:"\uAD11\uBA85\uC815",founder:"\uCC9C\uB9C8",reputation:0,relationship:"neutral",basicSkills:["demon_palm","blood_claw"],advancedSkills:["soul_absorbing_palm","ten_directions_annihilation"],secretSkills:["absorb_power","heaven_demon_technique"],specialties:["\uD761\uACF5","\uB3C5\uACF5","\uC554\uAE30"],philosophy:"\uD798\uC774 \uACE7 \uC815\uC758"},{id:"huashan",name:"\uD654\uC0B0\uD30C",chineseName:"\u83EF\u5C71\u6D3E",type:"righteous",description:"\uAC80\uC220\uC758 \uBA85\uAC00. \uD654\uC0B0\uAC80\uBC95\uC740 \uBB34\uB9BC\uC5D0\uC11C \uAC00\uC7A5 \uBE60\uB974\uACE0 \uB0A0\uCE74\uB86D\uAE30\uB85C \uC720\uBA85\uD558\uB2E4.",headquarters:"\uD654\uC0B0",founder:"\uD654\uC0B0\uAC80\uC131",reputation:0,relationship:"neutral",basicSkills:["huashan_sword","yangwu_sword"],advancedSkills:["dugu_nine_swords","swift_sword"],secretSkills:["purple_mist_divine_art","lone_sword_technique"],specialties:["\uAC80\uC220","\uACBD\uACF5"],philosophy:"\uAC80\uC73C\uB85C \uB3C4\uB97C \uD1B5\uD55C\uB2E4"},{id:"emei",name:"\uC544\uBBF8\uD30C",chineseName:"\u5CE8\u5D4B\u6D3E",type:"righteous",description:"\uC5EC\uD611\uB4E4\uC758 \uC131\uC9C0. \uC6B0\uC544\uD558\uBA74\uC11C\uB3C4 \uCE58\uBA85\uC801\uC778 \uBB34\uACF5\uC744 \uC0AC\uC6A9\uD55C\uB2E4.",headquarters:"\uC544\uBBF8\uC0B0",founder:"\uACFD\uC591",reputation:0,relationship:"neutral",basicSkills:["emei_sword","jade_maiden_skill"],advancedSkills:["buddha_palm","nine_yin_divine_claw"],secretSkills:["emei_ultimate_skill","jade_maiden_heart_sutra"],specialties:["\uAC80\uC220","\uC7A5\uBC95","\uC554\uAE30"],philosophy:"\uAC15\uC720\uBCD1\uC81C, \uC720\uC911\uB300\uAC15"}]}initializeMartialSkills(){this.martialArtsSkills=[{id:"luohan_quan",name:"\uB098\uD55C\uAD8C",chineseName:"\u7F85\u6F22\u62F3",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:50,internalPowerCost:15,requiredLevel:1,damageMultiplier:1.2,hitRate:.85,criticalRate:.1,description:"\uC18C\uB9BC\uC0AC\uC758 \uAE30\uBCF8 \uAD8C\uBC95. \uAC15\uC9C1\uD558\uACE0 \uC815\uD655\uD55C \uACF5\uACA9\uC774 \uD2B9\uC9D5\uC774\uB2E4.",skillEffect:"\uACF5\uACA9\uB825 120%, \uBC29\uC5B4\uB825 \uC77C\uC2DC 10% \uC99D\uAC00",learningDifficulty:3,factionId:"shaolin",isSecret:!1},{id:"vajra_palm",name:"\uAE08\uAC15\uC7A5",chineseName:"\u91D1\u525B\u638C",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:80,internalPowerCost:25,requiredLevel:3,damageMultiplier:1.5,hitRate:.8,criticalRate:.15,element:"fire",description:"\uAC15\uB825\uD55C \uC7A5\uB825\uC744 \uB2F4\uC740 \uC18C\uB9BC \uC7A5\uBC95",skillEffect:"\uAC15\uB825\uD55C \uC77C\uACA9, 15% \uD655\uB960\uB85C \uAE30\uC808",learningDifficulty:5,factionId:"shaolin",isSecret:!1,statusEffect:{type:"stun",duration:1,damagePerTurn:0,name:"\uAE30\uC808",icon:"\u{1F4AB}",description:"1\uD134 \uB3D9\uC548 \uD589\uB3D9 \uBD88\uAC00",statModifier:{}}},{id:"yijin_jing",name:"\uC5ED\uADFC\uACBD",chineseName:"\u6613\u7B4B\u7D93",type:"shimBeop",grade:"\uC808\uD559",requiredInternalPower:200,internalPowerCost:0,requiredLevel:10,damageMultiplier:0,hitRate:1,criticalRate:0,description:"\uC18C\uB9BC \uCD5C\uACE0\uC758 \uB0B4\uACF5\uC2EC\uBC95. \uC218\uB828 \uC2DC \uB0B4\uB825 \uD68C\uBCF5 \uC18D\uB3C4\uC640 \uCD5C\uB300\uCE58\uAC00 \uD06C\uAC8C \uC99D\uAC00\uD55C\uB2E4.",skillEffect:"\uB0B4\uB825 \uD68C\uBCF5 \uC18D\uB3C4 +50%, \uCD5C\uB300 \uB0B4\uB825 +100, \uC804\uD22C \uC911 \uD134\uB9C8\uB2E4 HP 5% \uD68C\uBCF5",learningDifficulty:10,factionId:"shaolin",isSecret:!0},{id:"taiji_quan",name:"\uD0DC\uADF9\uAD8C",chineseName:"\u592A\u6975\u62F3",type:"choShik",grade:"\uC0C1\uC2B9",requiredInternalPower:100,internalPowerCost:30,requiredLevel:5,damageMultiplier:1.3,hitRate:.9,criticalRate:.2,description:"\uC720\uC5F0\uD568 \uC18D\uC758 \uAC15\uD568. \uC0C1\uB300\uC758 \uACF5\uACA9\uC744 \uD758\uB824\uBCF4\uB0B4\uBA70 \uBC18\uACA9\uD55C\uB2E4.",skillEffect:"\uACF5\uACA9\uB825 130%, \uC0C1\uB300 \uACF5\uACA9\uC758 30%\uB97C \uBC18\uC0AC",learningDifficulty:7,factionId:"wudang",isSecret:!1,specialEffect:"counter"},{id:"taiji_sword",name:"\uD0DC\uADF9\uAC80",chineseName:"\u592A\u6975\u528D",type:"choShik",grade:"\uC808\uD559",requiredInternalPower:150,internalPowerCost:50,requiredLevel:8,damageMultiplier:2,hitRate:.95,criticalRate:.25,description:"\uBB34\uB2F9\uD30C \uCD5C\uACE0\uC758 \uAC80\uBC95. \uAC80\uAE30\uB97C \uBC1C\uB3D9\uD558\uC5EC \uC6D0\uAC70\uB9AC \uACF5\uACA9\uC774 \uAC00\uB2A5\uD558\uB2E4.",skillEffect:"\uAC80\uAE30 \uBC1C\uB3D9, \uAC15\uB825\uD55C \uC77C\uACA9, \uD0DC\uADF9\uAD8C\uACFC \uC5F0\uACC4 \uC2DC \uCD94\uAC00 \uD53C\uD574",learningDifficulty:9,factionId:"wudang",isSecret:!0,comboSkills:["taiji_quan"]},{id:"absorb_power",name:"\uD761\uC131\uB300\uBC95",chineseName:"\u5438\u661F\u5927\u6CD5",type:"shimBeop",grade:"\uC808\uD559",requiredInternalPower:180,internalPowerCost:100,requiredLevel:12,damageMultiplier:.8,hitRate:.75,criticalRate:.1,description:"\uC0C1\uB300\uC758 \uB0B4\uB825\uC744 \uD761\uC218\uD558\uB294 \uB9C8\uAD50\uC758 \uC0AC\uC545\uD55C \uBB34\uACF5",skillEffect:"\uD53C\uD574\uC758 50%\uB9CC\uD07C \uB0B4\uB825 \uD68C\uBCF5, 10% \uD655\uB960\uB85C \uC8FC\uD654\uC785\uB9C8",learningDifficulty:10,factionId:"demon_sect",isSecret:!0,specialEffect:"absorb"},{id:"demon_palm",name:"\uCC9C\uB9C8\uC7A5",chineseName:"\u5929\u9B54\u638C",type:"choShik",grade:"\uC0C1\uC2B9",requiredInternalPower:120,internalPowerCost:40,requiredLevel:6,damageMultiplier:1.8,hitRate:.85,criticalRate:.2,element:"poison",description:"\uB3C5\uAE30\uB97C \uD488\uC740 \uB9C8\uAD50\uC758 \uC7A5\uBC95",skillEffect:"\uAC15\uB825\uD55C \uD53C\uD574, \uC911\uB3C5 \uD6A8\uACFC",learningDifficulty:7,factionId:"demon_sect",isSecret:!1,statusEffect:{type:"poison",duration:3,damagePerTurn:10,name:"\uC911\uB3C5",chineseName:"\u4E2D\u6BD2",icon:"\u2620\uFE0F",description:"3\uD134 \uB3D9\uC548 \uD134\uB9C8\uB2E4 10 \uD53C\uD574",statModifier:{}}},{id:"huashan_sword",name:"\uD654\uC0B0\uAC80\uBC95",chineseName:"\u83EF\u5C71\u528D\u6CD5",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:70,internalPowerCost:20,requiredLevel:2,damageMultiplier:1.4,hitRate:.9,criticalRate:.2,description:"\uBE60\uB974\uACE0 \uC815\uD655\uD55C \uD654\uC0B0\uD30C\uC758 \uAC80\uBC95",skillEffect:"\uC2E0\uC18D\uD55C \uAC80\uACA9, \uB192\uC740 \uBA85\uC911\uB960",learningDifficulty:4,factionId:"huashan",isSecret:!1},{id:"dugu_nine_swords",name:"\uB3C5\uACE0\uAD6C\uAC80",chineseName:"\u7368\u5B64\u4E5D\u528D",type:"choShik",grade:"\uC808\uD559",requiredInternalPower:0,internalPowerCost:60,requiredLevel:15,damageMultiplier:2.5,hitRate:.99,criticalRate:.4,description:"\uAC80\uB9C8 \uB3C5\uACE0\uAD6C\uD328\uAC00 \uCC3D\uC548\uD55C \uC808\uC138\uAC80\uBC95. \uB0B4\uB825\uC774 \uC544\uB2CC \uAC80\uB9AC\uB85C \uC2B9\uBD80\uD55C\uB2E4.",skillEffect:"\uBAA8\uB4E0 \uBB34\uACF5\uC744 \uD30C\uD6FC, \uCD08\uACE0 \uCE58\uBA85\uD0C0\uC728, \uB0B4\uB825 \uBD88\uD544\uC694",learningDifficulty:10,factionId:"huashan",isSecret:!0,specialEffect:"pierce"},{id:"emei_sword",name:"\uC544\uBBF8\uAC80\uBC95",chineseName:"\u5CE8\u5D4B\u528D\u6CD5",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:60,internalPowerCost:18,requiredLevel:2,damageMultiplier:1.3,hitRate:.88,criticalRate:.15,description:"\uC6B0\uC544\uD558\uBA74\uC11C\uB3C4 \uCE58\uBA85\uC801\uC778 \uC544\uBBF8\uD30C\uC758 \uAC80\uBC95",skillEffect:"\uBE60\uB978 \uC5F0\uACA9, \uBBFC\uCCA9\uC131 \uBCF4\uB108\uC2A4",learningDifficulty:4,factionId:"emei",isSecret:!1},{id:"basic_punch",name:"\uAE30\uBCF8\uAD8C\uBC95",chineseName:"\u57FA\u672C\u62F3\u6CD5",type:"choShik",grade:"\uD558\uC2B9",requiredInternalPower:10,internalPowerCost:5,requiredLevel:1,damageMultiplier:1,hitRate:.85,criticalRate:.05,description:"\uAC00\uC7A5 \uAE30\uBCF8\uC801\uC778 \uAD8C\uBC95",skillEffect:"\uAE30\uBCF8 \uACF5\uACA9",learningDifficulty:1,isSecret:!1},{id:"basic_palm",name:"\uAE30\uBCF8\uC7A5\uBC95",chineseName:"\u57FA\u672C\u638C\u6CD5",type:"choShik",grade:"\uD558\uC2B9",requiredInternalPower:15,internalPowerCost:8,requiredLevel:1,damageMultiplier:1.1,hitRate:.82,criticalRate:.08,description:"\uAE30\uBCF8\uC801\uC778 \uC7A5\uBC95",skillEffect:"\uC7A5\uB825\uC744 \uB2F4\uC740 \uACF5\uACA9",learningDifficulty:2,isSecret:!1},{id:"lightness_skill",name:"\uACBD\uC2E0\uC220",chineseName:"\u8F15\u8EAB\u8853",type:"gyeongGong",grade:"\uD558\uC2B9",requiredInternalPower:20,internalPowerCost:10,requiredLevel:1,damageMultiplier:0,hitRate:1,criticalRate:0,description:"\uAE30\uBCF8 \uACBD\uACF5. \uD68C\uD53C\uC728\uC744 \uB192\uC778\uB2E4.",skillEffect:"3\uD134 \uB3D9\uC548 \uD68C\uD53C\uC728 +30%",learningDifficulty:3,isSecret:!1}],this.learnedMartialSkills=this.martialArtsSkills.filter(e=>e.id==="basic_punch"||e.id==="basic_palm"||e.id==="lightness_skill")}initializeElixirs(){this.elixirs=[{id:"small_return_pill",name:"\uC18C\uD658\uB2E8",chineseName:"\u5C0F\u9084\u4E39",type:"healing",grade:"\uC911\uD488",effects:[{type:"hp_recovery",value:50,description:"HP 50 \uD68C\uBCF5"},{type:"cure_injury",value:1,description:"\uACBD\uBBF8\uD55C \uB0B4\uC0C1 \uCE58\uB8CC"}],description:"\uACBD\uBBF8\uD55C \uB0B4\uC0C1\uC744 \uCE58\uB8CC\uD558\uB294 \uB2E8\uC57D",rarity:3,price:100},{id:"great_return_pill",name:"\uB300\uD658\uB2E8",chineseName:"\u5927\u9084\u4E39",type:"healing",grade:"\uC0C1\uD488",effects:[{type:"hp_recovery",value:150,description:"HP 150 \uD68C\uBCF5"},{type:"mp_recovery",value:50,description:"MP 50 \uD68C\uBCF5"},{type:"cure_injury",value:3,description:"\uC911\uC0C1 \uCE58\uB8CC"}],description:"\uC911\uC0C1\uC744 \uCE58\uB8CC\uD558\uB294 \uADC0\uC911\uD55C \uB2E8\uC57D",rarity:7,price:500},{id:"thousand_year_ginseng",name:"\uCC9C\uB144\uD558\uC218\uC624",chineseName:"\u5343\u5E74\u4F55\u9996\u70CF",type:"cultivation",grade:"\uADF9\uD488",effects:[{type:"internal_power_boost",value:10,description:"\uCD5C\uB300 \uB0B4\uB825 +10\uB144 \uACF5\uB825"}],description:"\uCC9C\uB144 \uBB35\uC740 \uC601\uC57D. 10\uB144 \uACF5\uB825\uC744 \uC99D\uC9C4\uC2DC\uD0A8\uB2E4.",rarity:9,price:2e3},{id:"snow_lotus",name:"\uCC9C\uC0B0\uC124\uB828",chineseName:"\u5929\u5C71\u96EA\u84EE",type:"cultivation",grade:"\uADF9\uD488",effects:[{type:"internal_power_boost",value:20,description:"\uCD5C\uB300 \uB0B4\uB825 +20\uB144 \uACF5\uB825"},{type:"cure_poison",value:100,description:"\uBAA8\uB4E0 \uB3C5 \uC81C\uAC70"}],description:"\uCC9C\uC0B0\uC5D0\uC11C\uB9CC \uC790\uB77C\uB294 \uC2E0\uBE44\uC758 \uC601\uC57D",rarity:10,price:5e3},{id:"demon_blood_ginseng",name:"\uCC9C\uB9C8\uD608\uC0BC",chineseName:"\u5929\u9B54\u8840\u8518",type:"cultivation",grade:"\uADF9\uD488",effects:[{type:"internal_power_boost",value:50,description:"\uCD5C\uB300 \uB0B4\uB825 +50\uB144 \uACF5\uB825"},{type:"stat_boost",value:10,duration:0,description:"\uACF5\uACA9\uB825 +10"}],description:"\uB9C8\uAD50\uC758 \uBE44\uC804 \uC601\uC57D. \uAC15\uB825\uD558\uC9C0\uB9CC \uC8FC\uD654\uC785\uB9C8\uC758 \uC704\uD5D8\uC774 \uC788\uB2E4.",rarity:10,price:1e4,sideEffect:"30% \uD655\uB960\uB85C \uC8FC\uD654\uC785\uB9C8",sideEffectChance:.3},{id:"fasting_pill",name:"\uBCBD\uACE1\uB2E8",chineseName:"\u8F9F\u7A40\u4E39",type:"special",grade:"\uD558\uD488",effects:[{type:"hp_recovery",value:20,description:"HP 20 \uD68C\uBCF5"}],description:"\uACF5\uBCF5\uC744 \uBA74\uD558\uAC8C \uD574\uC8FC\uB294 \uB2E8\uC57D",rarity:1,price:10},{id:"antidote_pill",name:"\uD574\uB3C5\uB2E8",chineseName:"\u89E3\u6BD2\u4E39",type:"detox",grade:"\uC911\uD488",effects:[{type:"cure_poison",value:50,description:"\uC911\uB3C5 \uC0C1\uD0DC \uCE58\uB8CC"}],description:"\uC77C\uBC18\uC801\uC778 \uB3C5\uC744 \uD574\uB3C5\uD558\uB294 \uB2E8\uC57D",rarity:4,price:150}]}initializeMartialManuals(){this.martialManuals=[{id:"manual_luohan_quan",name:"\uB098\uD55C\uAD8C\uBCF4",chineseName:"\u7F85\u6F22\u62F3\u8B5C",skillId:"luohan_quan",requiredLevel:1,requiredInternalPower:30,learningTime:7,learningDifficulty:3,deviationRisk:5,description:"\uC18C\uB9BC\uC0AC \uB098\uD55C\uAD8C\uC744 \uAE30\uB85D\uD55C \uBB34\uACF5 \uBE44\uAE09",isObtained:!1,isLearned:!1},{id:"manual_taiji_sword",name:"\uD0DC\uADF9\uAC80\uBCF4",chineseName:"\u592A\u6975\u528D\u8B5C",skillId:"taiji_sword",requiredLevel:8,requiredInternalPower:150,requiredFaction:"wudang",learningTime:30,learningDifficulty:9,deviationRisk:20,description:"\uBB34\uB2F9\uD30C\uC758 \uC808\uD559 \uD0DC\uADF9\uAC80\uC744 \uAE30\uB85D\uD55C \uBE44\uAE09",isObtained:!1,isLearned:!1},{id:"manual_dugu_nine_swords",name:"\uB3C5\uACE0\uAD6C\uAC80\uBCF4",chineseName:"\u7368\u5B64\u4E5D\u528D\u8B5C",skillId:"dugu_nine_swords",requiredLevel:15,requiredInternalPower:0,learningTime:90,learningDifficulty:10,deviationRisk:0,description:"\uAC80\uB9C8 \uB3C5\uACE0\uAD6C\uD328\uC758 \uC808\uC138\uAC80\uBC95. \uB0B4\uB825\uC774 \uD544\uC694\uC5C6\uB294 \uAC80\uB9AC\uC758 \uADF9\uCE58",location:"\uD654\uC0B0 \uC0AC\uACE0",isObtained:!1,isLearned:!1},{id:"manual_absorb_power",name:"\uD761\uC131\uB300\uBC95\uBE44\uAE09",chineseName:"\u5438\u661F\u5927\u6CD5\u79D8\u7B08",skillId:"absorb_power",requiredLevel:12,requiredInternalPower:180,learningTime:60,learningDifficulty:10,deviationRisk:50,description:"\uB9C8\uAD50\uC758 \uAE08\uB2E8\uC758 \uBB34\uACF5. \uC2B5\uB4DD \uC2DC \uC8FC\uD654\uC785\uB9C8\uC758 \uC704\uD5D8\uC774 \uB9E4\uC6B0 \uB192\uB2E4",isObtained:!1,isLearned:!1}]}joinFaction(e){let t=this.availableFactions.find(l=>l.id===e);if(!t)return;this.playerFaction=t,this.playerFaction.relationship="ally",this.playerFaction.reputation=100;let n={playerId:"player",factionId:e,rank:"\uC18D\uAC00\uC81C\uC790",contribution:0,trustLevel:50,joinDate:new Date};this.wulinRelationships.push(n),this.martialArtsSkills.filter(l=>t.basicSkills.includes(l.id)).forEach(l=>{this.learnedMartialSkills.find(d=>d.id===l.id)||this.learnedMartialSkills.push(l)}),this.notification.show(`${t.name}\uC5D0 \uC785\uBB38\uD558\uC600\uC2B5\uB2C8\uB2E4!`)}learnMartialSkill(e){let t=this.martialArtsSkills.find(n=>n.id===e);return t?this.learnedMartialSkills.find(n=>n.id===e)?(this.notification.show("\uC774\uBBF8 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC785\uB2C8\uB2E4."),!1):this.playerCharacter.level<t.requiredLevel?(this.notification.show(`\uB808\uBCA8 ${t.requiredLevel} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`),!1):this.playerInternalPower.max<t.requiredInternalPower?(this.notification.show(`\uB0B4\uB825 ${t.requiredInternalPower} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`),!1):t.factionId&&(!this.playerFaction||this.playerFaction.id!==t.factionId)?(this.notification.show(`${t.factionId} \uBB38\uD30C \uC18C\uC18D\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`),!1):(this.learnedMartialSkills.push(t),this.notification.show(`${t.name}(${t.chineseName})\uC744(\uB97C) \uC2B5\uB4DD\uD558\uC600\uC2B5\uB2C8\uB2E4!`),!0):!1}openMeridian(e){let t=this.playerInternalPower.meridians.meridians.find(o=>o.id===e);if(!t)return!1;if(t.isOpened)return this.notification.show("\uC774\uBBF8 \uAC1C\uD1B5\uB41C \uD608\uB3C4\uC785\uB2C8\uB2E4."),!1;let n=(this.playerInternalPower.meridians.opened+1)*50;return this.playerInternalPower.max<n?(this.notification.show(`\uB0B4\uB825 ${n} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`),!1):(t.isOpened=!0,t.openProgress=100,this.playerInternalPower.meridians.opened++,Object.keys(t.bonus).forEach(o=>{let l=t.bonus[o];switch(o){case"hp":this.playerCharacter.hp+=l;break;case"maxHp":this.playerCharacter.maxHp+=l,this.playerCharacter.hp+=l;break;case"mp":this.playerCharacter.mp+=l;break;case"maxMp":this.playerCharacter.maxMp+=l,this.playerCharacter.mp+=l;break;case"attack":this.playerCharacter.attack+=l;break;case"defense":this.playerCharacter.defense+=l;break;case"strength":this.playerCharacter.strength+=l;break;case"agility":this.playerCharacter.agility+=l;break;case"intelligence":this.playerCharacter.intelligence+=l;break}}),this.notification.show(`${t.name}(${t.chineseName}) \uAC1C\uD1B5 \uC131\uACF5!`),!0)}cultivateInternalPower(e){let t=e*(1+this.playerInternalPower.trainingLevel/100),n=this.playerInternalPower.purity/100,o=Math.floor(t*(1+n));this.playerInternalPower.current=Math.min(this.playerInternalPower.max,this.playerInternalPower.current+o),this.playerInternalPower.trainingLevel=Math.min(100,this.playerInternalPower.trainingLevel+e*.5),this.playerInternalPower.realmProgress+=e*.2,this.checkRealmBreakthrough(),this.notification.show(`${e}\uC2DC\uAC04 \uC218\uB828 \uC644\uB8CC. \uB0B4\uB825 +${o}`)}checkRealmBreakthrough(){if(this.playerInternalPower.realmProgress<100)return;let e=["\uCD08\uB958","\uC77C\uB958","\uC808\uC815","\uD654\uACBD","\uCC9C\uC778\uD569\uC77C"],t=e.indexOf(this.playerInternalPower.realm);if(t>=e.length-1){this.notification.show("\uC774\uBBF8 \uCD5C\uACE0 \uACBD\uC9C0\uC5D0 \uB3C4\uB2EC\uD558\uC600\uC2B5\uB2C8\uB2E4.");return}let n=e[t+1],o=(t+2)*200;if(this.playerInternalPower.max<o){this.notification.show(`\uACBD\uC9C0 \uB3CC\uD30C\uC5D0\uB294 \uB0B4\uB825 ${o} \uC774\uC0C1\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.`);return}this.playerInternalPower.realm=n,this.playerInternalPower.realmProgress=0,this.playerInternalPower.max+=100,this.playerInternalPower.recoveryRate+=2,this.notification.show(`\u2B50 \uACBD\uC9C0 \uB3CC\uD30C! ${n} \uACBD\uC9C0\uC5D0 \uB3C4\uB2EC\uD558\uC600\uC2B5\uB2C8\uB2E4!`)}useElixir(e){let t=this.elixirs.find(o=>o.id===e);if(!t)return;let n=this.inventory.find(o=>o.id===e);if(!n||n.quantity<=0){this.notification.show("\uB2E8\uC57D\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.");return}if(n.quantity--,n.quantity===0&&(this.inventory=this.inventory.filter(o=>o.id!==e)),t.sideEffect&&t.sideEffectChance&&Math.random()<t.sideEffectChance){this.notification.show(`\u26A0\uFE0F ${t.sideEffect}!`),this.playerInternalPower.stability-=30,this.playerCharacter.hp=Math.floor(this.playerCharacter.hp*.5);return}t.effects.forEach(o=>{switch(o.type){case"hp_recovery":this.playerCharacter.hp=Math.min(this.playerCharacter.maxHp,this.playerCharacter.hp+o.value);break;case"mp_recovery":this.playerCharacter.mp=Math.min(this.playerCharacter.maxMp,this.playerCharacter.mp+o.value);break;case"internal_power_boost":this.playerInternalPower.max+=o.value,this.playerInternalPower.current+=o.value;break;case"cure_poison":break;case"stat_boost":this.playerCharacter.attack+=o.value;break}}),this.notification.show(`${t.name}(${t.chineseName})\uC744(\uB97C) \uC0AC\uC6A9\uD558\uC600\uC2B5\uB2C8\uB2E4.`)}getRealmBonus(e){switch(e){case"\uCD08\uB958":return 0;case"\uC77C\uB958":return .05;case"\uC808\uC815":return .1;case"\uD654\uACBD":return .2;case"\uCC9C\uC778\uD569\uC77C":return .3;default:return 0}}startMartialBattle(e){this.startBattle(),this.martialBattleState=fe(ht({},this.currentBattleState),{playerInternalPower:this.playerInternalPower.current,playerMaxInternalPower:this.playerInternalPower.max,enemyInternalPower:100,enemyMaxInternalPower:100,skillCooldowns:{},comboCounter:0,playerRealm:this.playerInternalPower.realm,enemyRealm:"\uCD08\uB958"})}useMartialSkill(e){if(!this.martialBattleState)return{success:!1,damage:0,message:"\uC804\uD22C \uC911\uC774 \uC544\uB2D9\uB2C8\uB2E4!"};let t=this.learnedMartialSkills.find(D=>D.id===e);if(!t)return{success:!1,damage:0,message:"\uD574\uB2F9 \uBB34\uACF5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!"};if(this.martialBattleState.playerInternalPower<t.internalPowerCost)return{success:!1,damage:0,message:"\uB0B4\uB825\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4!"};if(this.martialBattleState.skillCooldowns[e]&&this.martialBattleState.skillCooldowns[e]>0)return{success:!1,damage:0,message:"\uC544\uC9C1 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!"};this.martialBattleState.playerInternalPower-=t.internalPowerCost;let n=this.getRealmBonus(this.martialBattleState.playerRealm),o=t.hitRate+n;if(Math.random()>o)return{success:!1,damage:0,message:`${t.name}(${t.chineseName})\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4! \u{1F4A8}`};let l=this.playerCharacter.attack*t.damageMultiplier,d=Math.floor(this.martialBattleState.playerInternalPower/50),_=Math.floor(l+d),m=t.criticalRate+n,M=Math.random()<m,O=M?Math.floor(_*1.5):_,y="";if(t.comboSkills&&this.martialBattleState.lastSkillUsed&&t.comboSkills.includes(this.martialBattleState.lastSkillUsed)){this.martialBattleState.comboCounter++;let D=Math.floor(O*.3),S=O+D;return y=`\u{1F525} \uC5F0\uACC4 \uC131\uACF5! \uCF64\uBCF4 ${this.martialBattleState.comboCounter}`,this.martialBattleState.lastSkillUsed=e,{success:!0,damage:S,message:M?"\u26A1\uD68C\uC2EC\uC758 \uC77C\uACA9!\u26A1":"",specialEffect:y}}else{this.martialBattleState.comboCounter=0;let D=M?"\u26A1\uD68C\uC2EC\uC758 \uC77C\uACA9!\u26A1":"";if(t.specialEffect==="absorb"){let S=Math.floor(O*.5);this.martialBattleState.playerInternalPower=Math.min(this.martialBattleState.playerMaxInternalPower,this.martialBattleState.playerInternalPower+S),y=`${S}\uC758 \uB0B4\uB825\uC744 \uD761\uC218\uD588\uB2E4!`}return t.statusEffect&&(y=`${t.statusEffect.name} \uD6A8\uACFC \uBC1C\uB3D9!`),this.martialBattleState.lastSkillUsed=e,{success:!0,damage:O,message:D,specialEffect:y||void 0}}}toggleWuxiaPanel(){this.showWuxiaPanel=!this.showWuxiaPanel}closeWuxiaPanel(){this.showWuxiaPanel=!1}getFactionName(e){let t=this.availableFactions.find(n=>n.id===e);return t?t.name:"\uC54C \uC218 \uC5C6\uC74C"}getMeridianPosition(e){let n=e/12*2*Math.PI-Math.PI/2,o=40,l=50,d=50,_=l+o*Math.cos(n);return{top:`${d+o*Math.sin(n)}%`,left:`${_}%`}}getObjectKeys(e){return Object.keys(e||{})}startBattle(){this.inBattle=!0,this.battleEnded=!1,this.battleVictory=!1,this.battleTurn="player",this.battleLog=[],this.battleEnemy={name:"\uC0B0\uC801",maxHp:80,hp:80,attack:15,defense:8},this.battleLog.push("\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),this.battleLog.push(`\uC801: ${this.battleEnemy.name} (HP: ${this.battleEnemy.hp}/${this.battleEnemy.maxHp})`)}loadSavedItems(){return v(this,null,function*(){try{this.savedItems=yield this.itemDbService.getAllItems(),console.log("\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C \uB85C\uB4DC:",this.savedItems.length)}catch(e){console.error("\u274C \uC544\uC774\uD15C \uB85C\uB4DC \uC2E4\uD328:",e),this.savedItems=[]}})}openItemCreator(){this.showItemCreatorPanel=!0,this.generatedItem=null,this.itemGenerationError="",this.geminiAiService.hasApiKey()||(this.itemGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.")}generateAiItem(e,t){this.itemGenerationError="",this.generatedItem=null,this.isGeneratingItem=!0,console.log("\u{1F3A8} AI \uC544\uC774\uD15C \uC0DD\uC131 \uC2DC\uC791:",e,t),this.geminiAiService.generateItem(e,t).subscribe({next:n=>{console.log("\u2705 AI \uC544\uC774\uD15C \uC0DD\uC131 \uC131\uACF5:",n),this.isGeneratingItem=!1,this.generatedItem=n},error:n=>{console.error("\u274C AI \uC544\uC774\uD15C \uC0DD\uC131 \uC2E4\uD328:",n),this.isGeneratingItem=!1,this.itemGenerationError=n.message||"AI \uC544\uC774\uD15C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}})}saveGeneratedItem(){return v(this,null,function*(){if(!this.generatedItem)return;let e={name:this.generatedItem.name||"\uC774\uB984 \uC5C6\uC74C",description:this.generatedItem.description||"",type:this.generatedItem.type||"\uAE30\uD0C0",grade:this.generatedItem.grade||"\uC77C\uBC18",effects:this.generatedItem.effects||[],stats:this.generatedItem.stats||{},requirements:this.generatedItem.requirements||"",lore:this.generatedItem.lore||"",tags:this.generatedItem.tags||[],createdAt:new Date};try{let t=yield this.itemDbService.saveItem(e);console.log("\u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5 \uC131\uACF5. ID:",t),this.notification.show("\uC544\uC774\uD15C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),yield this.loadSavedItems(),this.showItemCreatorPanel=!1}catch(t){console.error("\u274C \uC544\uC774\uD15C \uC800\uC7A5 \uC2E4\uD328:",t),this.notification.show("\uC544\uC774\uD15C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}addGeneratedItemToInventory(){if(!this.generatedItem)return;let e={id:`ai_item_${Date.now()}`,name:this.generatedItem.name||"\uC544\uC774\uD15C",description:this.generatedItem.description||"",type:this.mapItemType(this.generatedItem.type),quantity:1,buyPrice:this.calculateItemPrice(this.generatedItem.grade),sellPrice:Math.floor(this.calculateItemPrice(this.generatedItem.grade)*.6),rarity:this.mapItemGrade(this.generatedItem.grade),stats:this.generatedItem.stats||{}};this.addToInventory(e.id,1),this.addStoryBlock([`\u{1F48E} ${e.name}\uC744(\uB97C) \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4!`,`${e.description}`]),this.showItemCreatorPanel=!1,this.scrollToBottom(),console.log("\uC544\uC774\uD15C \uCD94\uAC00:",e)}deleteItem(e,t){return v(this,null,function*(){if(t&&t.stopPropagation(),!!(yield this.showConfirmDialog("\uC774 \uC544\uC774\uD15C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")))try{yield this.itemDbService.deleteItem(e),console.log("\u{1F5D1}\uFE0F \uC544\uC774\uD15C \uC0AD\uC81C \uC131\uACF5"),yield this.loadSavedItems()}catch(o){console.error("\u274C \uC544\uC774\uD15C \uC0AD\uC81C \uC2E4\uD328:",o),this.notification.show("\uC544\uC774\uD15C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadItem(e){return v(this,null,function*(){this.generatedItem=e,this.showItemCreatorPanel=!0,console.log("\u{1F48E} \uC544\uC774\uD15C \uBD88\uB7EC\uC624\uAE30:",e.name)})}mapItemType(e){return e==="\uBB34\uAE30"?"weapon":e==="\uBC29\uC5B4\uAD6C"?"armor":e==="\uC18C\uBE44\uD488"?"consumable":"misc"}mapItemGrade(e){return e==="\uC77C\uBC18"?"common":e==="\uACE0\uAE09"?"uncommon":e==="\uD76C\uADC0"?"rare":e==="\uC804\uC124"?"epic":e==="\uC2E0\uD654"?"legendary":"common"}calculateItemPrice(e){return{\uC77C\uBC18:100,\uACE0\uAE09:500,\uD76C\uADC0:2e3,\uC804\uC124:1e4,\uC2E0\uD654:5e4}[e]||100}toggleStoryCreatorPanel(){this.showStoryCreatorPanel=!this.showStoryCreatorPanel,this.showStoryCreatorPanel&&(this.showCharacterCreatorPanel=!1,this.showScenarioCreatorPanel=!1,this.showItemCreatorPanel=!1,this.storyTitle="",this.selectedCharactersForStory=[],this.selectedItemsForStory=[],this.selectedScenariosForStory=[],this.generatedStory=null,this.storyGenerationError="")}selectCharacterForStory(e){let t=this.selectedCharactersForStory.findIndex(n=>n.id===e.id);t>-1?this.selectedCharactersForStory.splice(t,1):this.selectedCharactersForStory.push(e)}isCharacterSelected(e){return this.selectedCharactersForStory.some(t=>t.id===e.id)}selectItemForStory(e){let t=this.selectedItemsForStory.findIndex(n=>n.id===e.id);t>-1?this.selectedItemsForStory.splice(t,1):this.selectedItemsForStory.push(e)}isItemSelected(e){return this.selectedItemsForStory.some(t=>t.id===e.id)}selectScenarioForStory(e){let t=this.selectedScenariosForStory.findIndex(n=>n.id===e.id);t>-1?this.selectedScenariosForStory.splice(t,1):this.selectedScenariosForStory.push(e)}isScenarioSelected(e){return this.selectedScenariosForStory.some(t=>t.id===e.id)}generateStoryFromSavedContent(){return v(this,null,function*(){if(!this.storyTitle||this.storyTitle.trim()===""){this.storyGenerationError="\uC2A4\uD1A0\uB9AC \uC81C\uBAA9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}if(this.selectedCharactersForStory.length===0||this.selectedItemsForStory.length===0||this.selectedScenariosForStory.length===0){this.storyGenerationError="\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uAC01\uAC01 \uCD5C\uC18C 1\uAC1C \uC774\uC0C1 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.";return}this.isGeneratingStory=!0,this.storyGenerationError="",this.generatedStory=null;let e=this.selectedCharactersForStory[0],t=this.selectedItemsForStory[0],n=this.selectedScenariosForStory[0],o=this.selectedCharactersForStory.map((m,M)=>`
${M+1}. ${m.name} (${m.age}\uC138, ${m.gender}, ${m.occupation})
   - \uBC30\uACBD: ${m.backstory}
   - \uC131\uACA9: ${Array.isArray(m.personality)?m.personality.join(", "):m.personality}
   - \uC678\uBAA8: ${m.appearance}
   - \uBAA9\uD45C: ${m.goal}`).join(""),l=this.selectedItemsForStory.map((m,M)=>`
${M+1}. ${m.name} (${m.type}, ${m.grade})
   - \uC124\uBA85: ${m.description}
   - \uD2B9\uC218 \uD6A8\uACFC: ${m.effects}`).join(""),d=this.selectedScenariosForStory.map((m,M)=>`
${M+1}. ${m.title} (${m.genre})
   - \uBC30\uACBD: ${m.setting}
   - \uC8FC\uC694 \uAC08\uB4F1: ${m.conflict}
   - \uBAA9\uD45C: ${m.goal}
   - \uBD84\uC704\uAE30: ${m.mood}`).join(""),_=`\uB2E4\uC74C \uC694\uC18C\uB4E4\uC744 \uBC14\uD0D5\uC73C\uB85C \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uC2A4\uD1A0\uB9AC\uB97C \uB9CC\uB4E4\uC5B4\uC8FC\uC138\uC694:

**\uC2A4\uD1A0\uB9AC \uC81C\uBAA9:** ${this.storyTitle}

**\uB4F1\uC7A5\uC778\uBB3C\uB4E4:**${o}

\uC8FC\uC778\uACF5: ${e.name}

**\uD575\uC2EC \uC544\uC774\uD15C\uB4E4:**${l}

\uC2DC\uC791 \uC544\uC774\uD15C: ${t.name}

**\uC2DC\uB098\uB9AC\uC624 \uC694\uC18C\uB4E4:**${d}

\uBA54\uC778 \uC2DC\uB098\uB9AC\uC624: ${n.title}

\uB2E4\uC74C \uD615\uC2DD\uC758 JSON\uC73C\uB85C \uC751\uB2F5\uD574\uC8FC\uC138\uC694:
{
  "title": "\uC18C\uC124 \uC81C\uBAA9 (\uC774\uBAA8\uC9C0 \uD3EC\uD568)",
  "genre": "\uC7A5\uB974 (\uC601\uBB38)",
  "description": "\uC18C\uC124 \uC124\uBA85 (\uD55C \uC904 \uC694\uC57D)",
  "icon": "\uB300\uD45C \uC774\uBAA8\uC9C0 (\uD558\uB098\uB9CC)",
  "difficulty": "easy, normal, hard \uC911 \uD558\uB098",
  "startingGold": \uC2DC\uC791 \uACE8\uB4DC (\uC22B\uC790),
  "startingItemName": "\uC2DC\uC791 \uC544\uC774\uD15C \uC774\uB984",
  "startingItemDescription": "\uC2DC\uC791 \uC544\uC774\uD15C \uC124\uBA85",
  "firstStory": [
    "\uCCAB \uBC88\uC9F8 \uC2A4\uD1A0\uB9AC \uBB38\uC7A5",
    "\uB450 \uBC88\uC9F8 \uC2A4\uD1A0\uB9AC \uBB38\uC7A5",
    "\uC138 \uBC88\uC9F8 \uC2A4\uD1A0\uB9AC \uBB38\uC7A5"
  ],
  "firstChoices": [
    "\uCCAB \uBC88\uC9F8 \uC120\uD0DD\uC9C0",
    "\uB450 \uBC88\uC9F8 \uC120\uD0DD\uC9C0",
    "\uC138 \uBC88\uC9F8 \uC120\uD0DD\uC9C0"
  ]
}

\uC8FC\uC758\uC0AC\uD56D:
- \uC8FC\uC778\uACF5\uC758 \uC131\uACA9\uACFC \uBC30\uACBD\uC744 \uC798 \uC0B4\uB824\uC8FC\uC138\uC694
- \uD575\uC2EC \uC544\uC774\uD15C\uC774 \uC2A4\uD1A0\uB9AC\uC5D0\uC11C \uC911\uC694\uD55C \uC5ED\uD560\uC744 \uD558\uB3C4\uB85D \uD574\uC8FC\uC138\uC694
- \uC2DC\uB098\uB9AC\uC624\uC758 \uAC08\uB4F1\uACFC \uC0AC\uAC74\uC744 \uC2A4\uD1A0\uB9AC\uC5D0 \uC790\uC5F0\uC2A4\uB7FD\uAC8C \uB179\uC5EC\uC8FC\uC138\uC694
- \uC120\uD0DD\uC9C0\uB294 \uD50C\uB808\uC774\uC5B4\uAC00 \uD765\uBBF8\uB97C \uB290\uB084 \uC218 \uC788\uB3C4\uB85D \uB2E4\uC591\uD558\uAC8C \uAD6C\uC131\uD574\uC8FC\uC138\uC694
- \uC21C\uC218 JSON\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694`;try{console.log("\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC2DC\uC791...");let m=this.geminiAiService.getApiKey(),M="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent",O={contents:[{parts:[{text:_}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:2048}},D=(yield fetch(`${M}?key=${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)}).then(k=>k.json()))?.candidates?.[0]?.content?.parts?.[0]?.text;if(!D)throw new Error("AI \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.");console.log("\u{1F4DD} AI \uC751\uB2F5:",D);let S=D.match(/\{[\s\S]*\}/);if(!S)throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let A=JSON.parse(S[0]),ut=`story_${Date.now()}`,R=`item_${Date.now()}`;this.generatedStory={id:ut,title:this.storyTitle,genre:A.genre,description:A.description,icon:A.icon,difficulty:A.difficulty||"normal",startingGold:A.startingGold||100,startingItems:[{id:R,name:A.startingItemName,description:A.startingItemDescription,type:this.mapItemType(t.type),quantity:1,buyPrice:this.calculateItemPrice(t.grade),sellPrice:Math.floor(this.calculateItemPrice(t.grade)/2),rarity:this.mapItemGrade(t.grade),stats:t.type==="\uBB34\uAE30"?{attack:5}:t.type==="\uBC29\uC5B4\uAD6C"?{defense:5}:void 0}],firstStory:A.firstStory,firstChoices:A.firstChoices},console.log("\u2705 \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC131\uACF5:",this.generatedStory)}catch(m){console.error("\u274C \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC2E4\uD328:",m),this.storyGenerationError=m instanceof Error?m.message:"\uC2A4\uD1A0\uB9AC \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}finally{this.isGeneratingStory=!1}})}addGeneratedStoryToList(){this.generatedStory&&(this.novelTemplates.push(this.generatedStory),console.log("\u{1F4DA} \uC0DD\uC131\uB41C \uC2A4\uD1A0\uB9AC\uB97C \uBAA9\uB85D\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4:",this.generatedStory.title),this.selectNovel(this.generatedStory),this.showStoryCreatorPanel=!1,this.storyTitle="",this.selectedCharactersForStory=[],this.selectedItemsForStory=[],this.selectedScenariosForStory=[],this.generatedStory=null,this.storyGenerationError="")}clearGeneratedStory(){this.generatedStory=null,this.storyGenerationError=""}loadSavedStories(){return v(this,null,function*(){try{this.savedStories=yield this.storyDbService.getAllStories(),this.novelTemplates=this.savedStories.map(e=>({id:e.id,title:e.title,genre:e.genre,description:e.description,icon:e.icon,difficulty:e.difficulty,startingGold:e.startingGold,startingItems:e.startingItems,firstStory:e.firstStory,firstChoices:e.firstChoices})),console.log("\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC \uC644\uB8CC:",this.savedStories.length)}catch(e){console.error("\u274C \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC \uC2E4\uD328:",e)}})}saveGeneratedStory(){return v(this,null,function*(){if(this.generatedStory)try{let e={id:this.generatedStory.id,title:this.generatedStory.title,genre:this.generatedStory.genre,description:this.generatedStory.description,icon:this.generatedStory.icon,difficulty:this.generatedStory.difficulty,startingGold:this.generatedStory.startingGold,startingItems:this.generatedStory.startingItems,firstStory:this.generatedStory.firstStory,firstChoices:this.generatedStory.firstChoices,createdAt:new Date,createdBy:"AI"};yield this.storyDbService.saveStory(e),yield this.loadSavedStories(),this.notification.show("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),console.log("\u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC644\uB8CC:",e.title)}catch(e){console.error("\u274C \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC2E4\uD328:",e),this.notification.show("\uC2A4\uD1A0\uB9AC \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteSavedStory(e,t){return v(this,null,function*(){if(t&&t.stopPropagation(),!!(yield this.showConfirmDialog("\uC774 \uC2A4\uD1A0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")))try{yield this.storyDbService.deleteStory(e),yield this.loadSavedStories(),console.log("\u{1F5D1}\uFE0F \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC644\uB8CC:",e)}catch(o){console.error("\u274C \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC2E4\uD328:",o),this.notification.show("\uC2A4\uD1A0\uB9AC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadSavedStoryForGame(e){let t={id:e.id,title:e.title,genre:e.genre,description:e.description,icon:e.icon,difficulty:e.difficulty,startingGold:e.startingGold,startingItems:e.startingItems,firstStory:e.firstStory,firstChoices:e.firstChoices};this.selectNovel(t)}toggleStoryFlowPanel(){console.log("\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0 \uD328\uB110 \uD1A0\uAE00 \uD074\uB9AD\uB428"),console.log("\uD604\uC7AC \uC0C1\uD0DC:",this.showStoryFlowPanel),console.log("\uC2A4\uD1A0\uB9AC \uBE14\uB85D \uC218:",this.storyBlocks.length),console.log("\uD604\uC7AC \uACBD\uB85C:",this.currentPath),console.log("\uD604\uC7AC \uC120\uD0DD\uC9C0:",this.choices),this.showStoryFlowPanel=!this.showStoryFlowPanel,this.showStoryFlowPanel&&(console.log("\uD50C\uB85C\uC6B0 \uC0DD\uC131 \uC2DC\uC791..."),this.generateStoryFlow(),console.log("\uC0DD\uC131\uB41C \uB178\uB4DC \uC218:",this.storyFlowNodes.length))}generateStoryFlow(){console.log("\u{1F4CA} \uD50C\uB85C\uC6B0 \uC0DD\uC131 \uC2DC\uC791"),this.storyFlowNodes=[];let e=0,t=0;this.storyFlowNodes.push({id:`node-${e++}`,label:"\uC2DC\uC791",type:"start",level:t++}),console.log("\uC2DC\uC791 \uB178\uB4DC \uCD94\uAC00\uB428"),console.log("\uC2A4\uD1A0\uB9AC \uBE14\uB85D \uC21C\uD68C \uC2DC\uC791, \uCD1D:",this.storyBlocks.length);for(let n=0;n<this.storyBlocks.length;n++){let o=this.storyBlocks[n];if(console.log(`\uBE14\uB85D ${n}:`,o.type,o),o.type==="story"&&o.lines&&o.lines.length>0){let l=o.lines[0].substring(0,30)+(o.lines[0].length>30?"...":"");this.storyFlowNodes.push({id:`node-${e++}`,label:l,type:"story",level:t}),console.log("\uC2A4\uD1A0\uB9AC \uB178\uB4DC \uCD94\uAC00:",l)}else o.type==="choice"&&o.choiceText&&(this.storyFlowNodes.push({id:`node-${e++}`,label:`\uC120\uD0DD: ${o.choiceText.substring(0,25)}...`,type:"choice",level:t++}),console.log("\uC120\uD0DD \uB178\uB4DC \uCD94\uAC00:",o.choiceText))}if(console.log("\uD604\uC7AC \uC120\uD0DD\uC9C0 \uC218:",this.choices.length),this.choices.length>0){let n={id:`node-${e++}`,label:"\uD604\uC7AC \uC704\uCE58",type:"current",choices:this.choices,level:t};this.storyFlowNodes.push(n),console.log("\uD604\uC7AC \uC704\uCE58 \uB178\uB4DC \uCD94\uAC00\uB428"),this.choices.forEach((o,l)=>{this.storyFlowNodes.push({id:`node-${e++}`,label:`? ${o.substring(0,25)}${o.length>25?"...":""}`,type:"story",level:t+1}),console.log(`\uBBF8\uB798 \uC120\uD0DD\uC9C0 ${l} \uCD94\uAC00:`,o)})}console.log("\u2705 \uD50C\uB85C\uC6B0 \uC0DD\uC131 \uC644\uB8CC, \uCD1D \uB178\uB4DC \uC218:",this.storyFlowNodes.length),console.log("\uC0DD\uC131\uB41C \uB178\uB4DC\uB4E4:",this.storyFlowNodes)}getLinkedScenario(e){let t=`scenario_link_${this.selectedNovel?.id}_${e}`,n=localStorage.getItem(t);return n&&this.savedScenarios.find(o=>o.id===n)||null}applyLinkedScenario(e){console.log("\u{1F4CB} \uC2DC\uB098\uB9AC\uC624 \uC801\uC6A9:",e.title);let t=[`
=== ${e.title} ===`,`${e.description}`,""];e.setting&&(t.push(`\u{1F4CD} \uBC30\uACBD: ${e.setting}`),t.push("")),e.conflict&&(t.push(`\u26A1 \uAC08\uB4F1: ${e.conflict}`),t.push("")),e.goal&&(t.push(`\u{1F3AF} \uBAA9\uD45C: ${e.goal}`),t.push("")),e.characters&&e.characters.length>0&&(t.push("\u{1F465} \uB4F1\uC7A5 \uC778\uBB3C:"),e.characters.forEach(o=>{t.push(`\u2022 ${o}`)}),t.push("")),e.mood&&(t.push(`\u{1F31F} \uBD84\uC704\uAE30: ${e.mood}`),t.push("")),this.addStoryBlock(t);let n=[`\u{1F6B6} ${e.goal||"\uC55E\uC73C\uB85C \uB098\uC544\uAC04\uB2E4"}`,"\u{1F50D} \uC8FC\uBCC0\uC744 \uC790\uC138\uD788 \uC0B4\uD540\uB2E4","\u{1F4AD} \uC0C1\uD669\uC744 \uBD84\uC11D\uD574\uBCF8\uB2E4","\u2694\uFE0F \uC804\uD22C\uD558\uAE30"];this.setChoices(n)}loadSampleStoryMap(){console.log("\u{1F5FA}\uFE0F \uC0D8\uD50C \uC2A4\uD1A0\uB9AC \uB9F5 \uB85C\uB4DC \uC911..."),import("./chunk-JLKRLPQ2.js").then(e=>{this.storyNodes=JSON.parse(JSON.stringify(e.SAMPLE_STORY_MAP));let t=this.storyNodes.find(n=>n.id==="start");t&&(t.isCurrent=!0,t.isAvailable=!0,this.currentStoryNodeId="start",this.storyProgress.currentNodeId="start"),this.generateConnections(),this.calculateLayout(),console.log("\u2705 \uC2A4\uD1A0\uB9AC \uB9F5 \uB85C\uB4DC \uC644\uB8CC:",this.storyNodes.length,"\uAC1C \uB178\uB4DC"),this.notification.show("\uC0D8\uD50C \uC2A4\uD1A0\uB9AC \uB9F5\uC774 \uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!")}).catch(e=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uB9F5 \uB85C\uB4DC \uC2E4\uD328:",e),this.notification.show("\uC2A4\uD1A0\uB9AC \uB9F5 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")})}generateConnections(){this.storyConnections=[],this.storyNodes.forEach(e=>{e.childIds.forEach(t=>{let n=this.storyNodes.find(o=>o.id===t);if(n){let o={id:`${e.id}-${t}`,from:e.id,to:t,path:this.calculatePath(e.position,n.position),isVisited:e.isVisited&&n.isVisited,isCurrent:e.isCurrent||n.isCurrent,color:this.getConnectionColor(e,n),width:2};this.storyConnections.push(o)}})})}calculatePath(e,t){let n=(e.x+t.x)/2,o=(e.y+t.y)/2;return`M ${e.x} ${e.y} Q ${n} ${e.y+50} ${t.x} ${t.y}`}getConnectionColor(e,t){return e.isVisited&&t.isVisited?"#48bb78":e.isCurrent?"#4299e1":t.type==="battle"?"#fc8181":t.type==="ending"?"#9f7aea":"#cbd5e0"}calculateLayout(){console.log("\u{1F3A8} \uB808\uC774\uC544\uC6C3 \uACC4\uC0B0 \uC2DC\uC791:",this.flowLayoutType),this.flowLayoutType==="hierarchical"?this.calculateHierarchicalLayout():this.flowLayoutType==="radial"?this.calculateRadialLayout():this.calculateForceLayout(),console.log("\u2705 \uB808\uC774\uC544\uC6C3 \uACC4\uC0B0 \uC644\uB8CC. ViewBox:",this.flowViewBox),console.log("\u{1F4CA} \uCCAB \uBC88\uC9F8 \uB178\uB4DC \uC704\uCE58:",this.storyNodes[0]?.position)}calculateHierarchicalLayout(){let e=new Map,t=new Set,n=[],o=this.storyNodes.find(_=>_.id==="start");for(o&&n.push({node:o,level:0});n.length>0;){let{node:_,level:m}=n.shift();t.has(_.id)||(t.add(_.id),e.has(m)||e.set(m,[]),e.get(m).push(_),_.childIds.forEach(M=>{let O=this.storyNodes.find(y=>y.id===M);O&&!t.has(M)&&n.push({node:O,level:m+1})}))}let l=200,d=150;e.forEach((_,m)=>{let O=-(_.length*l)/2;_.forEach((y,D)=>{y.position.x=O+D*l+l/2,y.position.y=m*d})}),this.generateConnections(),this.updateViewBox()}calculateRadialLayout(){this.storyNodes.forEach((o,l)=>{let d=l/this.storyNodes.length*2*Math.PI;o.position.x=0+300*Math.cos(d),o.position.y=0+300*Math.sin(d)}),this.generateConnections(),this.updateViewBox()}calculateForceLayout(){for(let o=0;o<50;o++){for(let l=0;l<this.storyNodes.length;l++)for(let d=l+1;d<this.storyNodes.length;d++){let _=this.storyNodes[l],m=this.storyNodes[d],M=m.position.x-_.position.x,O=m.position.y-_.position.y,y=Math.sqrt(M*M+O*O)||1,D=5e3/(y*y),S=M/y*D,A=O/y*D;_.position.x-=S,_.position.y-=A,m.position.x+=S,m.position.y+=A}this.storyNodes.forEach(l=>{l.childIds.forEach(d=>{let _=this.storyNodes.find(m=>m.id===d);if(_){let m=_.position.x-l.position.x,M=_.position.y-l.position.y;l.position.x+=m*.1,l.position.y+=M*.1,_.position.x-=m*.1,_.position.y-=M*.1}})})}this.generateConnections(),this.updateViewBox()}updateViewBox(){let e=1/0,t=1/0,n=-1/0,o=-1/0;this.storyNodes.forEach(m=>{e=Math.min(e,m.position.x),t=Math.min(t,m.position.y),n=Math.max(n,m.position.x),o=Math.max(o,m.position.y)});let l=100,d=n-e+l*2,_=o-t+l*2;this.flowViewBox=`${e-l} ${t-l} ${d} ${_}`}toggleAdvancedFlowPanel(){this.showAdvancedFlowPanel=!this.showAdvancedFlowPanel,this.showAdvancedFlowPanel&&this.storyNodes.length===0&&this.loadSampleStoryMap()}onNodeClick(e){console.log("\u{1F3AF} \uB178\uB4DC \uD074\uB9AD:",e.id,e.title),this.selectedNode=e}getNodeIcon(e){switch(e.type){case"start":return"\u{1F3AC}";case"story":return"\u{1F4D6}";case"battle":return"\u2694\uFE0F";case"event":return"\u2728";case"ending":return"\u{1F3C1}";default:return"\u{1F4CD}"}}getNodeColor(e){if(e.isCurrent)return"#4299e1";if(e.isVisited)return"#48bb78";if(!e.isAvailable)return"#a0aec0";switch(e.type){case"battle":return"#fc8181";case"ending":return"#9f7aea";case"event":return"#f6ad55";default:return"#edf2f7"}}getNodeBorderColor(e){if(e.isCurrent)return"#2b6cb0";if(e.isVisited)return"#2f855a";if(!e.isAvailable)return"#718096";switch(e.type){case"battle":return"#c53030";case"ending":return"#6b46c1";case"event":return"#dd6b20";default:return"#a0aec0"}}zoomIn(){this.flowZoomLevel=Math.min(this.flowZoomLevel*1.2,3)}zoomOut(){this.flowZoomLevel=Math.max(this.flowZoomLevel/1.2,.3)}centerView(){this.flowPanX=0,this.flowPanY=0,this.flowZoomLevel=1,this.updateViewBox()}fitToScreen(){this.flowZoomLevel=1,this.updateViewBox()}changeLayout(e){this.flowLayoutType=e,this.calculateLayout()}toggleFilter(e){switch(e){case"visited":this.showVisitedOnly=!this.showVisitedOnly;break;case"battles":this.showBattlesOnly=!this.showBattlesOnly;break;case"endings":this.showEndingsOnly=!this.showEndingsOnly;break}}get visibleNodes(){return this.storyNodes.filter(e=>!(this.showVisitedOnly&&!e.isVisited||this.showBattlesOnly&&e.type!=="battle"||this.showEndingsOnly&&e.type!=="ending"))}toggleStats(){this.showStats=!this.showStats}calculateExplorationRate(){let e=this.storyNodes.length,t=this.storyNodes.filter(n=>n.isVisited).length;return Math.round(t/e*100)}linkScenarioToChoice(e,t){let n=[...this.currentPath,e.toString()].join("-"),o=`scenario_link_${this.selectedNovel?.id}_${n}`;localStorage.setItem(o,t),console.log(`\u2705 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0\uB428: ${n} -> ${t}`),this.notification.show("\uC2DC\uB098\uB9AC\uC624\uAC00 \uC120\uD0DD\uC9C0\uC5D0 \uC5F0\uACB0\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),this.showScenarioLinkPanel=!1}openScenarioLinkPanel(e){this.currentLinkingChoiceIndex=e,this.showScenarioLinkPanel=!0}closeScenarioLinkPanel(){this.showScenarioLinkPanel=!1,this.currentLinkingChoiceIndex=-1}openFlowScenarioLinkPanel(e,t){this.currentLinkingNodeId=e,this.currentLinkingChoiceId=t,this.showFlowScenarioLinkPanel=!0,console.log("\u{1F517} \uD50C\uB85C\uC6B0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0 \uD328\uB110 \uC5F4\uAE30:",{nodeId:e,choiceId:t})}closeFlowScenarioLinkPanel(){this.showFlowScenarioLinkPanel=!1,this.currentLinkingNodeId="",this.currentLinkingChoiceId=""}linkScenarioToFlowNode(e){if(!this.currentLinkingNodeId||!this.currentLinkingChoiceId){console.warn("\u26A0\uFE0F \uC5F0\uACB0\uD560 \uB178\uB4DC/\uC120\uD0DD\uC9C0\uAC00 \uC9C0\uC815\uB418\uC9C0 \uC54A\uC74C");return}let t=`${this.currentLinkingNodeId}:${this.currentLinkingChoiceId}`;this.nodeScenarioLinks.set(t,e);let n=Object.fromEntries(this.nodeScenarioLinks);localStorage.setItem("nodeScenarioLinks",JSON.stringify(n)),console.log("\u2705 \uD50C\uB85C\uC6B0 \uB178\uB4DC \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0:",{linkKey:t,scenarioId:e}),this.notification.show("\uC2DC\uB098\uB9AC\uC624\uAC00 \uD50C\uB85C\uC6B0 \uB178\uB4DC\uC5D0 \uC5F0\uACB0\uB418\uC5C8\uC2B5\uB2C8\uB2E4! \u{1F3AC}"),this.closeFlowScenarioLinkPanel(),this.updateFlowVisualization()}getLinkedScenarioId(e,t){let n=`${e}:${t}`;return this.nodeScenarioLinks.get(n)}hasLinkedScenario(e,t){return this.nodeScenarioLinks.has(`${e}:${t}`)}updateFlowVisualization(){this.storyNodes.forEach(e=>{e.choices&&e.choices.forEach(t=>{let n=this.hasLinkedScenario(e.id,t.id);t.hasScenarioLink=n})})}loadNodeScenarioLinks(){let e=localStorage.getItem("nodeScenarioLinks");if(e)try{let t=JSON.parse(e);this.nodeScenarioLinks=new Map(Object.entries(t)),console.log("\u2705 \uB178\uB4DC \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0 \uB85C\uB4DC:",this.nodeScenarioLinks.size,"\uAC1C")}catch(t){console.error("\u274C \uB178\uB4DC \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0 \uB85C\uB4DC \uC2E4\uD328:",t)}}transitionToStoryNode(e){if(console.log("\u{1F504} \uC2A4\uD1A0\uB9AC \uB178\uB4DC \uC804\uD658 \uC2DC\uC791:",{currentNodeId:this.currentStoryNodeId,choiceIndex:e}),!this.currentStoryNodeId||this.storyNodes.length===0){console.warn("\u26A0\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC74C");return}let t=this.storyNodes.find(d=>d.id===this.currentStoryNodeId);if(!t){console.warn("\u26A0\uFE0F \uD604\uC7AC \uB178\uB4DC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C:",this.currentStoryNodeId);return}if(!t.choices||e>=t.choices.length){console.warn("\u26A0\uFE0F \uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uC120\uD0DD\uC9C0:",e);return}let n=t.choices[e],o=n.targetNodeId;console.log("\u2705 \uC120\uD0DD\uB41C \uC120\uD0DD\uC9C0:",{text:n.text,targetNodeId:o});let l=this.storyNodes.find(d=>d.id===o);if(!l){console.warn("\u26A0\uFE0F \uB300\uC0C1 \uB178\uB4DC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C:",o);return}t.isCurrent=!1,t.isVisited=!0,l.isCurrent=!0,l.isVisited=!0,l.isAvailable=!0,l.childIds.forEach(d=>{let _=this.storyNodes.find(m=>m.id===d);_&&(_.isAvailable=!0)}),this.currentStoryNodeId=o,this.storyProgress.currentNodeId=o,this.storyProgress.visitedNodes.includes(o)||this.storyProgress.visitedNodes.push(o),this.storyProgress.pathHistory.push({nodeId:o,choiceIndex:e,choiceText:n.text,timestamp:new Date}),this.storyProgress.totalChoices++,this.generateConnections(),console.log("\u2705 \uB178\uB4DC \uC804\uD658 \uC644\uB8CC:",{from:t.id,to:o,visitedCount:this.storyProgress.visitedNodes.length})}mapPathToNodeId(e){return{start:"start",0:"light-path",1:"dark-path","0-0":"garden-walk","0-1":"pond-approach","0-2":"quick-pass","1-0":"brave-advance","1-1":"careful-advance","1-2":"torch-light","0-0-0":"rabbit-talk","0-0-1":"dream-check","0-0-2":"deeper-garden","1-0-0":"forest-guardian-battle","1-1-0":"old-woman-hut"}[e]||null}initializeNonlinearStory(){this.storyNodes.length===0&&(console.log("\u{1F5FA}\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uB9F5 \uC790\uB3D9 \uB85C\uB4DC..."),this.loadSampleStoryMap())}syncChoicesWithNode(){if(!this.currentStoryNodeId||this.storyNodes.length===0)return;let e=this.storyNodes.find(t=>t.id===this.currentStoryNodeId);!e||!e.choices||(this.choices=e.choices.map(t=>`${t.icon||"\u{1F539}"} ${t.text}`),console.log("\u{1F504} \uC120\uD0DD\uC9C0 \uB3D9\uAE30\uD654 \uC644\uB8CC:",this.choices))}getCurrentNode(){return!this.currentStoryNodeId||this.storyNodes.length===0?null:this.storyNodes.find(e=>e.id===this.currentStoryNodeId)||null}getNodeById(e){return this.storyNodes.find(t=>t.id===e)||null}getCurrentTime(){let e=new Date,t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0");return`${t}:${n}`}updateBattleNodeResult(e){if(!this.currentStoryNodeId||this.storyNodes.length===0){console.warn("\u26A0\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC74C - \uC804\uD22C \uACB0\uACFC \uBBF8\uBC18\uC601");return}let t=this.storyNodes.find(n=>n.id===this.currentStoryNodeId);if(!t){console.warn("\u26A0\uFE0F \uD604\uC7AC \uB178\uB4DC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C:",this.currentStoryNodeId);return}if(t.type!=="battle"){console.log("\u2139\uFE0F \uC804\uD22C \uB178\uB4DC\uAC00 \uC544\uB2D8, \uC77C\uBC18 \uB178\uB4DC\uB85C \uCC98\uB9AC");return}if(console.log("\u2694\uFE0F \uC804\uD22C \uACB0\uACFC \uBC18\uC601:",{nodeId:this.currentStoryNodeId,result:e,battleConfig:t.battleConfig}),e==="win"?this.storyProgress.battlesWon++:this.storyProgress.battlesLost++,t.battleConfig){let n=e==="win"?t.battleConfig.winNodeId:t.battleConfig.loseNodeId;if(n){let o=this.storyNodes.find(l=>l.id===n);if(o){t.isCurrent=!1,t.isVisited=!0,o.isCurrent=!0,o.isVisited=!0,o.isAvailable=!0,o.childIds.forEach(d=>{let _=this.storyNodes.find(m=>m.id===d);_&&(_.isAvailable=!0)}),this.currentStoryNodeId=n,this.storyProgress.currentNodeId=n,this.storyProgress.visitedNodes.includes(n)||this.storyProgress.visitedNodes.push(n),this.storyProgress.pathHistory.push({nodeId:n,battleResult:e,timestamp:new Date});let l=this.storyConnections.find(d=>d.from===t.id&&d.to===n);l&&(l.battleResult=e,l.isVisited=!0,l.isCurrent=!0),this.generateConnections(),console.log("\u2705 \uC804\uD22C \uACB0\uACFC \uB178\uB4DC \uC804\uD658 \uC644\uB8CC:",{from:t.id,to:n,result:e,battlesWon:this.storyProgress.battlesWon,battlesLost:this.storyProgress.battlesLost})}else console.warn("\u26A0\uFE0F \uB300\uC0C1 \uB178\uB4DC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C:",n)}else console.warn("\u26A0\uFE0F \uC804\uD22C \uACB0\uACFC\uC5D0 \uB300\uD55C \uB178\uB4DC ID\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC74C")}else console.warn("\u26A0\uFE0F \uC804\uD22C \uB178\uB4DC \uC124\uC815\uC774 \uC5C6\uC74C")}static \u0275fac=function(t){return new(t||i)(N(vt),N(Je),N(rt),N($e),N(Gt),N(zt),N(Vt),N(Lt),N(Z),N($t),N(_n))};static \u0275cmp=Y({type:i,selectors:[["app-novel-generator"]],viewQuery:function(t,n){if(t&1&&Qt(go,5),t&2){let o;Jt(o=te())&&(n.battleLogContainer=o.first)}},standalone:!1,decls:18,vars:17,consts:[["battleLogContainer",""],[1,"novel-book-container"],["class","novel-home-screen",4,"ngIf"],["class","book-cover",4,"ngIf"],["class","game-layout",4,"ngIf"],["class","panel-backdrop",3,"click",4,"ngIf"],["class","game-panel character-panel",4,"ngIf"],["class","game-panel inventory-panel",4,"ngIf"],["class","game-panel shop-panel",4,"ngIf"],["class","game-panel character-creator-panel",4,"ngIf"],["class","game-panel scenario-creator-panel",4,"ngIf"],["class","game-panel item-creator-panel",4,"ngIf"],["class","story-flow-overlay",4,"ngIf"],["class","scenario-link-overlay",4,"ngIf"],["class","flow-side-panel",4,"ngIf"],["class","flow-panel-toggle-btn","title","\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30",3,"click",4,"ngIf"],["class","advanced-story-flow-overlay",4,"ngIf"],["class","flow-scenario-link-overlay",4,"ngIf"],["class","wuxia-overlay",3,"click",4,"ngIf"],[1,"novel-home-screen"],[1,"home-container"],[1,"welcome-section"],[1,"welcome-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["class","user-info",4,"ngIf"],["title","\uB85C\uADF8\uC544\uC6C3",1,"logout-btn",3,"click"],[1,"home-theme-toggle-btn",3,"click","title"],[1,"quick-actions"],[1,"action-card","featured",3,"click"],[1,"card-icon"],[1,"card-badge"],[1,"action-card","ai-special",3,"click"],[1,"card-badge","ai-badge"],[1,"action-card","premium",3,"click"],[1,"card-badge","premium-badge"],["class","story-creator-panel",4,"ngIf"],["class","saved-stories-section",4,"ngIf"],["class","saved-characters-section",4,"ngIf"],["class","saved-scenarios-section",4,"ngIf"],["class","saved-items-section",4,"ngIf"],["id","novelsSection",1,"novels-section"],[1,"section-header"],[1,"section-desc"],[1,"novel-grid"],["class","novel-card",3,"click",4,"ngFor","ngForOf"],[1,"user-info"],[1,"user-name"],[1,"story-creator-panel"],[1,"creator-container"],[1,"creator-header"],[1,"close-btn",3,"click"],[1,"creator-intro"],["class","error-message",4,"ngIf"],[1,"title-input-section"],["for","storyTitle"],[1,"label-icon"],[1,"label-text"],[1,"required"],["type","text","id","storyTitle","placeholder","\uC608: \uAC80\uC740 \uC6A9\uC758 \uC804\uC124, \uB9C8\uBC95\uC0AC\uC758 \uC5EC\uC815, \uBE44\uBC00\uC758 \uC232...","maxlength","50",1,"title-input",3,"ngModelChange","ngModel"],[1,"char-count"],[1,"selection-section"],[1,"select-group"],[1,"selection-count"],[1,"select-grid"],["class","select-item",3,"selected","click",4,"ngFor","ngForOf"],["class","no-content",4,"ngIf"],[1,"creator-actions"],[1,"generate-story-btn",3,"click","disabled"],[4,"ngIf"],["class","generated-story-result",4,"ngIf"],[1,"error-message"],[1,"select-item",3,"click"],[1,"item-name"],[1,"item-desc"],[1,"no-content"],[1,"generated-story-result"],[1,"story-preview"],[1,"story-title"],[1,"story-icon"],[1,"story-desc"],[1,"story-meta"],[1,"meta-item"],[1,"story-intro"],[4,"ngFor","ngForOf"],[1,"story-actions"],[1,"save-btn",3,"click"],[1,"start-btn",3,"click"],[1,"regenerate-btn",3,"click"],[1,"saved-stories-section"],[1,"stories-grid"],["class","story-card",3,"click",4,"ngFor","ngForOf"],[1,"story-card",3,"click"],[1,"story-header"],[1,"story-icon-title"],[1,"delete-btn",3,"click"],[1,"story-description"],[1,"story-footer"],[1,"date"],[1,"created-by"],[1,"saved-characters-section"],[1,"characters-grid"],["class","character-card",3,"click",4,"ngFor","ngForOf"],[1,"character-card",3,"click"],[1,"character-header"],[1,"character-meta"],[1,"character-desc"],["class","character-traits",4,"ngIf"],[1,"character-footer"],[1,"character-traits"],["class","trait",4,"ngFor","ngForOf"],[1,"trait"],[1,"saved-scenarios-section"],[1,"scenarios-grid"],["class","scenario-card",3,"click",4,"ngFor","ngForOf"],[1,"scenario-card",3,"click"],[1,"scenario-header"],[1,"scenario-desc"],[1,"scenario-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"scenario-meta"],[1,"genre"],[1,"tag"],[1,"saved-items-section"],[1,"items-grid"],["class","item-card",3,"grade-legendary","grade-rare","grade-uncommon","click",4,"ngFor","ngForOf"],[1,"item-card",3,"click"],[1,"item-header"],["class","item-stats",4,"ngIf"],[1,"item-tags"],[1,"tag","type-tag"],[1,"tag","grade-tag"],[1,"item-meta"],[1,"item-stats"],["class","stat",4,"ngIf"],[1,"stat"],[1,"novel-card",3,"click"],[1,"novel-card-header"],[1,"novel-icon"],[1,"novel-difficulty"],[1,"novel-info"],[1,"novel-genre"],[1,"novel-description"],[1,"novel-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-value"],[1,"book-cover"],[1,"cover-content","novel-start-screen"],[1,"selected-novel-icon"],[1,"book-title"],[1,"book-subtitle"],[1,"novel-intro"],[1,"start-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"action-buttons"],[1,"back-btn",3,"click"],[1,"start-reading-btn",3,"click"],[1,"game-layout"],[1,"left-panel-container"],[1,"side-panel","left-panel"],["class","collapsed-view",3,"click",4,"ngIf"],["class","expanded-view",4,"ngIf"],[1,"main-content-area"],[1,"game-status-bar"],[1,"toggle-btn",3,"click"],["title","\uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30",1,"back-home-btn",3,"click"],[1,"player-info"],[1,"player-name"],[1,"player-hp"],[1,"player-mp"],[1,"player-gold"],["class","player-internal-power","title","\uB0B4\uACF5",4,"ngIf"],["class","player-realm","title","\uACBD\uC9C0",4,"ngIf"],["class","player-faction",3,"title",4,"ngIf"],[1,"status-bar-actions"],["title","\uBB34\uD611 \uC2DC\uC2A4\uD15C",1,"wuxia-btn",3,"click"],["title","\uACE0\uAE09 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0",1,"flow-btn",3,"click"],["title","\uB85C\uADF8\uC544\uC6C3",1,"logout-btn-game",3,"click"],[1,"theme-toggle-btn",3,"click","title"],[1,"novel-scroll-area"],[1,"novel-header"],[1,"story-blocks"],["class","story-block",4,"ngFor","ngForOf"],["class","battle-section flat-battle",4,"ngIf"],[1,"right-panel-container"],[1,"side-panel","right-panel"],[1,"collapsed-view",3,"click"],[1,"collapse-icon"],[1,"collapse-text"],[1,"expanded-view"],[1,"panel-header"],[1,"panel-content"],[1,"menu-item",3,"click"],["title","\uB0B4\uACF5",1,"player-internal-power"],["title","\uACBD\uC9C0",1,"player-realm"],[1,"player-faction",3,"title"],[1,"story-block"],[1,"battle-section","flat-battle"],[1,"battle-container"],[1,"battle-title"],["class","turn-text",4,"ngIf"],[1,"battle-board"],[1,"combatant","player-side"],[1,"combatant-header"],[1,"level-tag"],[1,"stats-list"],[1,"stat-row"],[1,"stat-label"],[1,"stat-bar-wrapper"],[1,"stat-bar"],[1,"stat-bar-fill","hp"],[1,"stat-bar-fill","mp"],["class","stat-row",4,"ngIf"],[1,"stat-row","compact"],[1,"stat-value-inline"],[1,"stat-separator"],[1,"vs-divider"],[1,"combatant","enemy-side"],[1,"stat-bar-fill","enemy-hp"],[1,"battle-log","text-only-log"],[1,"log-lines"],["class","log-line",3,"damage","heal","critical","combo","animation-delay",4,"ngFor","ngForOf"],[1,"turn-text"],[1,"stat-bar-fill","internal"],[1,"log-line"],[1,"choice-container"],["class","choice-item",4,"ngFor","ngForOf"],[1,"choice-item"],[1,"choice-button",3,"click"],[1,"choice-number"],[1,"choice-text"],["title","\uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0",1,"link-scenario-btn",3,"click"],[1,"choice-container","battle-choices"],[1,"choice-button",3,"click","disabled"],[1,"choice-cost"],["class","choice-item martial-skill-choice",4,"ngFor","ngForOf"],[1,"choice-item","martial-skill-choice"],[1,"choice-grade"],[1,"panel-backdrop",3,"click"],[1,"game-panel","character-panel"],[1,"game-panel","inventory-panel"],[3,"click",4,"ngIf"],[3,"click"],[1,"game-panel","shop-panel"],[3,"click","disabled"],[1,"game-panel","character-creator-panel"],[1,"character-creator-container"],[1,"character-type-buttons"],[1,"generate-btn","primary",3,"click","disabled"],[1,"generate-btn",3,"click","disabled"],["class","generated-character-info",4,"ngIf"],[1,"generated-character-info"],[1,"character-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"character-description"],["class","character-abilities",4,"ngIf"],[1,"apply-btn",3,"click"],[1,"character-abilities"],[1,"abilities-list"],["class","ability-tag",4,"ngFor","ngForOf"],[1,"ability-tag"],[1,"traits-list"],["class","trait-tag",4,"ngFor","ngForOf"],[1,"trait-tag"],[1,"game-panel","scenario-creator-panel"],[1,"scenario-creator-container"],[1,"scenario-type-buttons"],["class","generated-scenario-info",4,"ngIf"],[1,"generated-scenario-info"],[1,"scenario-title"],[1,"scenario-description"],["class","scenario-characters",4,"ngIf"],["class","scenario-tags",4,"ngIf"],[1,"scenario-characters"],[1,"tags-list"],["class","tag-item",4,"ngFor","ngForOf"],[1,"tag-item"],[1,"game-panel","item-creator-panel"],[1,"item-creator-container"],[1,"item-type-buttons"],[1,"generate-btn","weapon",3,"click","disabled"],[1,"generate-btn","armor",3,"click","disabled"],[1,"generate-btn","rare",3,"click","disabled"],[1,"generate-btn","legendary",3,"click","disabled"],[1,"generate-btn","consumable",3,"click","disabled"],[1,"generate-btn","special",3,"click","disabled"],["class","generated-item-info",4,"ngIf"],[1,"generated-item-info"],[1,"item-title"],[1,"item-grade-badge"],[1,"item-type-info"],[1,"type-badge"],[1,"item-description"],["class","item-effects",4,"ngIf"],["class","item-requirements",4,"ngIf"],["class","item-lore",4,"ngIf"],["class","item-tags",4,"ngIf"],[1,"add-btn",3,"click"],[1,"stats-grid"],["class","stat-item",4,"ngIf"],[1,"item-effects"],[1,"item-requirements"],[1,"item-lore"],[1,"lore-text"],[1,"story-flow-overlay"],["cdkDrag","","cdkDragBoundary",".story-flow-overlay",1,"story-flow-panel"],["cdkDragHandle","",1,"flow-header"],[1,"header-left"],[1,"drag-indicator"],[1,"flow-info"],[1,"flow-stats"],[1,"flow-canvas"],[1,"flow-nodes"],["class","flow-node",3,"ngClass","margin-left",4,"ngFor","ngForOf"],[1,"flow-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","start"],[1,"legend-icon","story"],[1,"legend-icon","choice"],[1,"legend-icon","current"],[1,"flow-node",3,"ngClass"],[1,"node-icon"],[1,"node-content"],[1,"node-label"],[1,"node-level"],["class","node-choices",4,"ngIf"],["class","flow-connector",4,"ngIf"],[1,"node-choices"],["class","choice-preview",4,"ngFor","ngForOf"],[1,"choice-preview"],[1,"flow-connector"],[1,"scenario-link-overlay"],["cdkDrag","","cdkDragBoundary",".scenario-link-overlay",1,"scenario-link-panel"],["cdkDragHandle","",1,"link-header"],[1,"link-info"],[1,"hint"],[1,"scenario-list"],[1,"scenario-grid"],["class","no-scenarios",4,"ngIf"],[1,"scenario-genre"],[1,"scenario-body"],[1,"no-scenarios"],[1,"create-scenario-btn",3,"click"],[1,"flow-side-panel"],[1,"panel-container"],[1,"status-bar"],[1,"time"],[1,"progress"],[1,"title-bar"],["title","\uC804\uCCB4\uD654\uBA74",1,"expand-btn",3,"click"],["title","\uB2EB\uAE30",1,"close-btn",3,"click"],["class","current-status",4,"ngIf"],[1,"mini-flow-map"],["width","100%","height","100%","preserveAspectRatio","xMidYMid meet"],[1,"mini-connections"],["fill","none","opacity","0.6",4,"ngFor","ngForOf"],[1,"mini-nodes"],[1,"quick-stats"],[1,"stat-text"],["class","recent-path",4,"ngIf"],[1,"current-status"],[1,"status-icon"],[1,"status-info"],[1,"status-title"],[1,"status-path"],["fill","none","opacity","0.6"],["r","20"],["text-anchor","middle","dy","7","font-size","16"],[1,"recent-path"],[1,"recent-title"],[1,"path-dots"],["class","path-dot",3,"current","title",4,"ngFor","ngForOf"],[1,"path-dot",3,"title"],["title","\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30",1,"flow-panel-toggle-btn",3,"click"],[1,"toggle-icon"],[1,"toggle-text"],[1,"advanced-story-flow-overlay"],[1,"advanced-flow-panel"],[1,"advanced-flow-header"],["class","flow-toolbar",4,"ngIf"],["class","flow-canvas-container",4,"ngIf"],["class","node-detail-panel",4,"ngIf"],["class","stats-overlay",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"flow-toolbar"],[1,"toolbar-section"],["title","\uD655\uB300",1,"tool-btn",3,"click"],["title","\uCD95\uC18C",1,"tool-btn",3,"click"],["title","\uC911\uC559\uC73C\uB85C",1,"tool-btn",3,"click"],["title","\uD654\uBA74\uC5D0 \uB9DE\uCD94\uAE30",1,"tool-btn",3,"click"],["title","\uBC29\uBB38\uD55C \uACBD\uB85C\uB9CC \uD45C\uC2DC",1,"filter-btn",3,"click"],["title","\uC804\uD22C \uB178\uB4DC\uB9CC \uD45C\uC2DC",1,"filter-btn",3,"click"],["title","\uC5D4\uB529 \uB178\uB4DC\uB9CC \uD45C\uC2DC",1,"filter-btn",3,"click"],[1,"layout-selector",3,"ngModelChange","change","ngModel"],["value","hierarchical"],["value","radial"],["value","force"],["title","\uD1B5\uACC4 \uD45C\uC2DC/\uC228\uAE30\uAE30",1,"tool-btn",3,"click"],[1,"flow-canvas-container"],["preserveAspectRatio","xMidYMid meet",1,"flow-svg-canvas"],["id","arrowhead","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#cbd5e0"],["id","arrowhead-visited","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#48bb78"],["id","arrowhead-current","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#4299e1"],["id","arrowhead-battle","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#fc8181"],[1,"connections-layer"],["class","connection-path",3,"visited","current",4,"ngFor","ngForOf"],[1,"nodes-layer"],["class","story-node",3,"current","visited","available","battle","ending","event","click",4,"ngFor","ngForOf"],[1,"minimap"],[1,"minimap-title"],[1,"minimap-content"],["width","100%","height","100%"],["opacity","0.5"],["r","5",4,"ngFor","ngForOf"],[1,"legend"],[1,"legend-title"],[1,"legend-icon",2,"background","#4299e1"],[1,"legend-icon",2,"background","#48bb78"],[1,"legend-icon",2,"background","#edf2f7"],[1,"legend-icon",2,"background","#fc8181"],[1,"legend-icon",2,"background","#f6ad55"],[1,"legend-icon",2,"background","#9f7aea"],[1,"connection-path"],[1,"story-node",3,"click"],["r","40","stroke-width","3",1,"node-circle"],["r","50","stroke-width","2","fill","none","opacity","0.5","class","node-glow",4,"ngIf"],["text-anchor","middle","dy","10","font-size","28",1,"node-icon"],["y","60","text-anchor","middle","font-size","14","font-weight","600",1,"node-title"],["transform","translate(25, -25)",4,"ngIf"],["transform","translate(-25, -25)",4,"ngIf"],["r","50","stroke-width","2","fill","none","opacity","0.5",1,"node-glow"],["transform","translate(25, -25)"],["r","15","fill","#e53e3e"],["text-anchor","middle","dy","5","font-size","16",1,"badge-text"],["transform","translate(-25, -25)"],["r","12","fill","#4299e1"],["text-anchor","middle","dy","4","font-size","10","fill","white",1,"visit-count"],["r","5"],[1,"node-detail-panel"],[1,"detail-header"],[1,"detail-close-btn",3,"click"],[1,"detail-body"],[1,"detail-type"],[1,"detail-content"],["class","more-indicator",4,"ngIf"],["class","detail-stats",4,"ngIf"],["class","detail-conditions",4,"ngIf"],["class","detail-choices",4,"ngIf"],["class","detail-battle",4,"ngIf"],[1,"more-indicator"],[1,"detail-stats"],[1,"detail-conditions"],[1,"detail-choices"],[1,"choice-icon"],[1,"detail-battle"],[1,"stats-overlay"],["class","current-location",4,"ngIf"],[1,"stat-card"],["class","path-history",4,"ngIf"],[1,"current-location"],[1,"location-card"],[1,"location-icon"],[1,"location-info"],[1,"location-title"],[1,"location-path"],[1,"path-history"],[1,"history-list"],["class","history-item",4,"ngFor","ngForOf"],[1,"history-item"],[1,"history-icon"],[1,"history-node"],["class","history-choice",4,"ngIf"],[1,"history-choice"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-actions"],[1,"primary-btn",3,"click"],[1,"secondary-btn",3,"click"],[1,"flow-scenario-link-overlay"],["cdkDrag","","cdkDragBoundary",".flow-scenario-link-overlay",1,"flow-scenario-link-panel"],["class","node-info-card",4,"ngIf"],["class","choice-info",4,"ngIf"],["class","scenario-card",3,"linked","click",4,"ngFor","ngForOf"],[1,"node-info-card"],[1,"node-icon-large"],[1,"node-details"],[1,"node-type-badge"],[1,"choice-info"],[1,"choice-label"],[1,"choice-value"],["class","linked-badge",4,"ngIf"],[1,"linked-badge"],[1,"wuxia-overlay",3,"click"],["cdkDrag","","cdkDragBoundary",".wuxia-overlay",1,"wuxia-panel",3,"click"],["cdkDragHandle","",1,"wuxia-header"],[1,"wuxia-tabs"],[1,"tab-btn",3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"cultivation-section"],[1,"internal-power-gauge"],[1,"gauge-header"],[1,"gauge-label"],[1,"gauge-value"],[1,"gauge-bar"],[1,"gauge-fill"],[1,"gauge-info"],[1,"realm-display"],[1,"realm-badge"],[1,"realm-icon"],[1,"realm-info"],[1,"realm-name"],[1,"realm-subtitle"],[1,"realm-progress"],[1,"progress-label"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-value"],[1,"cultivation-actions"],[1,"cultivation-btn",3,"click"],[1,"btn-icon"],[1,"btn-text"],[1,"training-level"],[1,"training-label"],[1,"training-bar"],[1,"training-fill"],[1,"training-value"],[1,"skills-section"],[1,"learned-skills-count"],[1,"skills-grid"],["class","skill-card",3,"class",4,"ngFor","ngForOf"],["class","no-skills",4,"ngIf"],[1,"skill-card"],[1,"skill-header"],[1,"skill-names"],[1,"skill-name-chinese"],[1,"skill-name-korean"],[1,"skill-grade-badge"],[1,"skill-type"],["class","type-icon",4,"ngIf"],[1,"type-label"],[1,"skill-stats"],[1,"skill-description"],[1,"skill-effect"],["class","skill-element",4,"ngIf"],["class","skill-faction",4,"ngIf"],[1,"type-icon"],[1,"skill-element"],[1,"element-icon"],[1,"element-name"],[1,"skill-faction"],[1,"faction-label"],[1,"faction-name"],[1,"no-skills"],[1,"faction-section"],["class","current-faction",4,"ngIf"],["class","no-faction",4,"ngIf"],[1,"current-faction"],[1,"faction-card","current"],[1,"faction-header"],[1,"faction-name-korean"],[1,"faction-type"],[1,"faction-info"],[1,"faction-reputation"],[1,"reputation-bar"],[1,"reputation-fill"],[1,"no-faction"],[1,"factions-grid"],["class","faction-card",3,"class",4,"ngFor","ngForOf"],[1,"faction-card"],[1,"faction-specialties"],["class","specialty-badge",4,"ngFor","ngForOf"],[1,"join-faction-btn",3,"click"],[1,"specialty-badge"],[1,"elixir-section"],[1,"elixir-inventory"],["class","elixir-card",3,"class",4,"ngFor","ngForOf"],["class","no-elixir",4,"ngIf"],[1,"elixir-card"],[1,"elixir-header"],[1,"elixir-names"],[1,"elixir-chinese"],[1,"elixir-korean"],[1,"elixir-grade"],[1,"elixir-type"],[1,"rarity-stars"],["class","star",4,"ngFor","ngForOf"],[1,"elixir-description"],[1,"elixir-effects"],["class","effect-item",4,"ngFor","ngForOf"],["class","elixir-warning",4,"ngIf"],[1,"elixir-footer"],[1,"elixir-price"],[1,"use-elixir-btn",3,"click"],[1,"star"],[1,"effect-item"],[1,"effect-icon"],[1,"effect-text"],[1,"elixir-warning"],[1,"warning-icon"],[1,"warning-text"],[1,"no-elixir"],[1,"meridians-section"],[1,"meridian-info"],[1,"meridian-diagram"],["class","meridian-point",3,"opened","top","left","title",4,"ngFor","ngForOf"],[1,"meridian-list"],["class","meridian-item",3,"opened",4,"ngFor","ngForOf"],[1,"meridian-point",3,"title"],[1,"point-circle"],[1,"point-number"],["class","point-info",4,"ngIf"],[1,"point-info"],[1,"open-meridian-btn",3,"click"],[1,"meridian-item"],[1,"meridian-number"],[1,"meridian-details"],["class","meridian-progress",4,"ngIf"],[1,"meridian-bonus"],["class","bonus-item",4,"ngFor","ngForOf"],[1,"meridian-status"],["class","status-opened",4,"ngIf"],["class","open-btn",3,"click",4,"ngIf"],[1,"meridian-progress"],[1,"bonus-item"],[1,"status-opened"],[1,"open-btn",3,"click"]],template:function(t,n){t&1&&(r(0,"div",1),P(1,Ho,74,10,"div",2)(2,Yo,31,9,"div",3)(3,_i,47,24,"div",4)(4,mi,1,0,"div",5)(5,Ci,15,4,"div",6)(6,Pi,8,1,"div",7)(7,Mi,10,2,"div",8)(8,Fi,28,14,"div",9)(9,Zi,28,14,"div",10)(10,xr,34,20,"div",11),a(),P(11,Br,46,4,"div",12)(12,Rr,22,3,"div",13)(13,jr,40,11,"div",14)(14,qr,5,0,"button",15)(15,Ca,15,5,"div",16)(16,xa,19,4,"div",17)(17,Ja,23,15,"div",18)),t&2&&(s(),p("ngIf",!n.novelSelected&&!n.gameStarted),s(),p("ngIf",n.novelSelected&&!n.gameStarted),s(),p("ngIf",n.gameStarted),s(),p("ngIf",n.showCharacterPanel||n.showInventoryPanel||n.showShopPanel||n.showCharacterCreatorPanel||n.showScenarioCreatorPanel||n.showItemCreatorPanel),s(),p("ngIf",n.showCharacterPanel),s(),p("ngIf",n.showInventoryPanel),s(),p("ngIf",n.showShopPanel),s(),p("ngIf",n.showCharacterCreatorPanel),s(),p("ngIf",n.showScenarioCreatorPanel),s(),p("ngIf",n.showItemCreatorPanel),s(),p("ngIf",n.showStoryFlowPanel),s(),p("ngIf",n.showScenarioLinkPanel),s(),p("ngIf",n.gameStarted&&n.storyNodes.length>0&&n.isFlowPanelOpen),s(),p("ngIf",n.gameStarted&&n.storyNodes.length>0&&!n.isFlowPanelOpen),s(),p("ngIf",n.showAdvancedFlowPanel),s(),p("ngIf",n.showFlowScenarioLinkPanel),s(),p("ngIf",n.showWuxiaPanel))},dependencies:[Ne,Fe,yt,ze,Ve,wt,Ge,St,Le,Dt,Rn,Fn],styles:['@charset "UTF-8";.dialogue[_ngcontent-%COMP%]{color:#2196f3;cursor:default;padding:2px 4px;border-radius:4px;display:inline-block}.dialogue-choice[_ngcontent-%COMP%]{display:block!important;margin:16px 0!important;padding:16px 20px;border-radius:12px;cursor:pointer;transition:all .3s ease;position:relative;border:2px solid transparent;background:linear-gradient(135deg,#ffffff1a,#ffffff0d);box-shadow:0 2px 8px #0000001a;clear:both;width:100%;box-sizing:border-box}p[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]{display:block!important;margin:16px -20px!important;max-width:calc(100% + 40px)}.dialogue-choice[_ngcontent-%COMP%]:hover{transform:translate(8px) scale(1.02);box-shadow:0 4px 16px #00000026}.dialogue-choice.selected[_ngcontent-%COMP%]{transform:translate(12px) scale(1.03);box-shadow:0 6px 20px #0003;font-weight:500}.dialogue-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:12px;vertical-align:middle}.dialogue-choice[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{font-size:16px;line-height:1.6;vertical-align:middle}.dialogue-choice[_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{display:inline-block;margin-left:12px;padding:4px 10px;border-radius:6px;font-size:11px;font-weight:600;text-transform:uppercase;vertical-align:middle;letter-spacing:.5px}.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]{border-color:#4caf50;background:linear-gradient(135deg,#4caf501a,#4caf500d)}.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover{border-color:#45a049;background:linear-gradient(135deg,#4caf5026,#4caf5014)}.dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%]{border-color:#45a049;background:linear-gradient(135deg,#4caf5040,#4caf5026);box-shadow:0 0 0 3px #4caf5033}.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]{border-color:#f44336;background:linear-gradient(135deg,#f443361a,#f443360d)}.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover{border-color:#da190b;background:linear-gradient(135deg,#f4433626,#f4433614)}.dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%]{border-color:#da190b;background:linear-gradient(135deg,#f4433640,#f4433626);box-shadow:0 0 0 3px #f4433633}.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#f44336;color:#fff}.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]{border-color:#9e9e9e;background:linear-gradient(135deg,#9e9e9e1a,#9e9e9e0d)}.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]:hover{border-color:#757575;background:linear-gradient(135deg,#9e9e9e26,#9e9e9e14)}.dialogue-choice[data-choice-type=neutral].selected[_ngcontent-%COMP%]{border-color:#757575;background:linear-gradient(135deg,#9e9e9e40,#9e9e9e26);box-shadow:0 0 0 3px #9e9e9e33}.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff}.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]{border-color:#ff5722;background:linear-gradient(135deg,#ff57221a,#ff57220d)}.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]:hover{border-color:#e64a19;background:linear-gradient(135deg,#ff572226,#ff572214)}.dialogue-choice[data-choice-type=aggressive].selected[_ngcontent-%COMP%]{border-color:#e64a19;background:linear-gradient(135deg,#ff572240,#ff572226);box-shadow:0 0 0 3px #ff572233}.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#ff5722;color:#fff}.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]{border-color:#2196f3;background:linear-gradient(135deg,#2196f31a,#2196f30d)}.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]:hover{border-color:#1976d2;background:linear-gradient(135deg,#2196f326,#2196f314)}.dialogue-choice[data-choice-type=passive].selected[_ngcontent-%COMP%]{border-color:#1976d2;background:linear-gradient(135deg,#2196f340,#2196f326);box-shadow:0 0 0 3px #2196f333}.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.selectable[_ngcontent-%COMP%]{position:relative}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff0d,#ffffff05);box-shadow:0 2px 8px #0000004d}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0006}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf5026,#4caf5014)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4caf5033,#4caf501f)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf504d,#4caf5033)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]{background:linear-gradient(135deg,#f4433626,#f4433614)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f4433633,#f443361f)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f443364d,#f4433633)}body.dark-theme[_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%]{color:#64b5f6}.battle-trigger-button[_ngcontent-%COMP%]{display:block!important;margin:20px 0!important;padding:20px 24px;border-radius:16px;cursor:pointer;transition:all .3s ease;position:relative;border:3px solid #FF5722;background:linear-gradient(135deg,#ff572226,#ff572214);box-shadow:0 4px 12px #ff57224d;text-align:center;font-weight:600;color:#ff5722;width:100%;box-sizing:border-box}.battle-trigger-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #ff572266;border-color:#e64a19;background:linear-gradient(135deg,#ff572240,#ff572226)}.battle-trigger-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.battle-trigger-button[_ngcontent-%COMP%]   .battle-icon[_ngcontent-%COMP%]{font-size:28px;margin-right:12px;vertical-align:middle;animation:_ngcontent-%COMP%_battlePulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_battlePulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.battle-trigger-button[_ngcontent-%COMP%]   .battle-text[_ngcontent-%COMP%]{font-size:18px;vertical-align:middle;letter-spacing:1px}body.dark-theme[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]{border-color:#ff7043;background:linear-gradient(135deg,#ff704333,#ff70431a);color:#ff7043}body.dark-theme[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff70434d,#ff70432e);box-shadow:0 6px 20px #ff704380}.dialogue-selection-hint[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#2196f3e6;color:#fff;padding:12px 16px;border-radius:8px;font-size:13px;box-shadow:0 4px 12px #0003;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.text-battle-display[_ngcontent-%COMP%]{margin:30px 0;padding:20px;background:var(--bg-secondary);border:2px solid #FF5722;border-radius:12px;box-shadow:0 4px 16px #ff572233}.battle-text-divider[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:700;color:#ff5722;margin:20px 0;padding:10px 0;border-top:2px solid #FF5722;border-bottom:2px solid #FF5722;letter-spacing:2px}.battle-text-participants[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background:var(--bg-tertiary);border-radius:8px;font-size:16px;line-height:1.8}.battle-text-participants[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.battle-character-info[_ngcontent-%COMP%]{padding:15px;background:var(--bg-primary);border-radius:8px;margin:10px 0;border:2px solid var(--border-color)}.battle-character-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:18px;margin-bottom:12px;color:var(--text-primary)}.stat-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:8px 0}.stat-label[_ngcontent-%COMP%]{min-width:35px;font-weight:700;font-size:14px;color:var(--text-secondary)}.stat-bar-container[_ngcontent-%COMP%]{flex:1;height:24px;background:var(--bg-tertiary);border-radius:12px;overflow:hidden;border:2px solid var(--border-color);position:relative}.stat-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease-out;border-radius:10px;position:relative;box-shadow:inset 0 2px 4px #0003}.stat-bar[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.3),transparent);border-radius:10px 10px 0 0}.hp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef5350,#f44336,#e53935)}.mp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#42a5f5,#2196f3,#1e88e5)}.stat-value[_ngcontent-%COMP%]{min-width:80px;text-align:right;font-size:14px;font-weight:700;color:var(--text-primary)}.stat-value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--accent-primary)}.battle-text-log[_ngcontent-%COMP%]{margin:20px 0;padding:20px;background:var(--bg-primary);border-radius:8px;max-height:400px;overflow-y:auto;border:1px solid var(--border-color)}.battle-text-entry[_ngcontent-%COMP%]{padding:8px 12px;margin:6px 0;background:var(--bg-secondary);border-left:3px solid #2196F3;border-radius:4px;font-size:15px;line-height:1.6}.battle-text-result[_ngcontent-%COMP%]{margin:20px 0}.battle-text-actions[_ngcontent-%COMP%]{margin:20px 0;text-align:center}.battle-text-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:15px;color:var(--accent-primary)}.battle-text-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.battle-text-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}body.dark-theme[_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%]{background:#ff57220d;border-color:#ff7043;box-shadow:0 4px 16px #ff70434d}body.dark-theme[_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%]{color:#ff7043;border-color:#ff7043}body.dark-theme[_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%]{border-left-color:#4fc3f7}body.dark-theme[_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%]{background:#2d2d2dcc;border-color:#555}body.dark-theme[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]{background:#404040cc;border-color:#666}body.dark-theme[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#d32f2f,#f44336,#ef5350)}body.dark-theme[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1565c0,#2196f3,#42a5f5)}.novel-book-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-secondary);font-family:Inter,Segoe UI,system-ui,-apple-system,sans-serif;color:var(--text-primary);transition:background-color .3s ease}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--bg-primary)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]{text-align:center;max-width:800px;padding:60px 50px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;box-shadow:0 8px 24px var(--shadow);position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:20px;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-subtitle[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:16px;color:var(--text-secondary);font-weight:400}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:50px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:2px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .select-guide[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin-bottom:30px;font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]{padding:16px 48px;font-size:1.1rem;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;box-shadow:0 4px 12px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 6px 16px #00000026}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{padding:12px 32px;font-size:1rem;background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;margin-right:16px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--accent-primary);transform:translateY(-2px)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]{max-width:700px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .selected-novel-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .novel-intro[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:24px 0;line-height:1.6}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:12px;padding:24px;margin:32px 0;border:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);font-size:1rem}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);font-size:1.1rem}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-easy[_ngcontent-%COMP%]{color:#10b981}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-normal[_ngcontent-%COMP%]{color:#f59e0b}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-hard[_ngcontent-%COMP%]{color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]{min-height:100vh;height:100vh;overflow-y:auto;overflow-x:hidden;background:var(--bg-secondary);padding:40px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b5cf64d;border-radius:5px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b5cf680}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]{margin-bottom:60px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]{position:relative;text-align:center;margin-bottom:40px;display:flex;justify-content:center;align-items:center;gap:20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1;text-align:center}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;margin-bottom:16px;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-secondary);font-weight:400}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;align-items:center;gap:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:10px 18px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:12px;display:flex;align-items:center;gap:6px;box-shadow:0 2px 8px var(--shadow);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow);border-color:var(--accent-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;background:var(--gradient-primary);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .home-theme-toggle-btn[_ngcontent-%COMP%]{padding:12px 18px;font-size:1.5rem;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:12px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow);min-width:52px;min-height:52px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .home-theme-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);border-color:var(--accent-secondary);transform:translateY(-2px) rotate(15deg);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .home-theme-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) rotate(0)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{padding:12px 20px;font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);color:var(--text-primary);border:2px solid var(--accent-primary);border-radius:12px;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px var(--shadow);display:flex;align-items:center;gap:6px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px}@media (min-width: 1400px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width: 1000px) and (max-width: 1399px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:32px 28px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.featured[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,#3b82f60d,#8b5cf60d)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]{border-color:#8b5cf6;background:linear-gradient(135deg,#8b5cf614,#ec489914)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b5cf6,#ec4899)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover{border-color:#8b5cf6;box-shadow:0 8px 32px #8b5cf64d}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aiGlow 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]   .card-badge.ai-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{transform:scale(1.15)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;background:var(--accent-primary);color:#fff;border-radius:20px;font-size:.85rem;font-weight:700}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:24px;cursor:pointer;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover   .novel-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-icon[_ngcontent-%COMP%]{font-size:3rem;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:700;text-transform:uppercase}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-easy[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-normal[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-hard[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-genre[_ngcontent-%COMP%]{font-size:.85rem;color:var(--accent-primary);font-weight:600;text-transform:uppercase;margin-bottom:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-description[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);line-height:1.5;margin-bottom:16px;min-height:44px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]{display:flex;gap:12px;padding-top:12px;border-top:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:var(--text-secondary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.1rem}.novel-book-container[_ngcontent-%COMP%]   .game-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:100vh;position:relative;background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]{position:fixed;top:70px;height:calc(100vh - 70px);background:var(--bg-primary);border:1px solid var(--border-color);z-index:999;transition:transform .3s ease,box-shadow .3s ease;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]:hover{transform:translate(0)!important;box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]{left:0;width:280px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]{right:0;width:280px}.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]{transform:translate(100%)}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]{padding:30px 15px;cursor:pointer;text-align:center;height:100%;display:flex;flex-direction:column;align-items:center;transition:background .2s ease}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px;color:var(--accent-primary);transition:transform .2s ease}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-text[_ngcontent-%COMP%]{font-size:.9rem;writing-mode:vertical-rl;letter-spacing:2px;color:var(--text-secondary);font-weight:600;text-transform:uppercase}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover   .collapse-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-secondary);color:var(--text-primary);display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:1.3rem;cursor:pointer;padding:0;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:20px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;padding:14px 16px;margin-bottom:10px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;text-align:left;font-size:1rem;font-weight:500;color:var(--text-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--accent-primary);transform:translate(4px)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]{margin-top:14px;padding:14px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(148,163,184,.05)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%]{color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:700;margin:24px 0 12px;padding-bottom:8px;border-bottom:1px solid var(--border-color);text-transform:uppercase;letter-spacing:1px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{margin-bottom:20px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 14px;margin-bottom:8px;background:var(--bg-secondary);border-radius:6px;border-left:2px solid var(--accent-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:3px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--text-secondary);margin-bottom:8px;font-weight:500;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:20px;background:var(--bg-secondary);border-radius:10px;overflow:hidden;border:1px solid var(--border-color);margin-bottom:6px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-primary);transition:width .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{text-align:right;color:var(--text-secondary);font-size:.85rem;font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 14px;margin-bottom:8px;background:var(--bg-secondary);border-radius:6px;border-left:2px solid var(--accent-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:3px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:10px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{flex:1;color:var(--text-primary);font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:24px;font-style:italic;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{width:100%;padding:12px 18px;margin-bottom:10px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;color:var(--text-primary);font-weight:500;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]{flex:1;position:relative;transition:all .3s ease;margin-left:0;margin-right:0;margin-top:70px;overflow-y:auto;height:calc(100vh - 70px);background:var(--bg-primary)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;width:100%;height:70px;z-index:1001;background:linear-gradient(135deg,#667eea,#764ba2);padding:12px 32px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #667eea4d,0 0 0 1px #ffffff1a;gap:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;pointer-events:none}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.5) 50%,transparent 100%)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:12px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:10px;cursor:pointer;font-size:1.3rem;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;position:relative;z-index:1}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:10px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;white-space:nowrap;position:relative;z-index:1;display:flex;align-items:center;gap:6px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translate(-3px);box-shadow:0 4px 12px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:active{transform:translate(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex:1;justify-content:center;position:relative;z-index:1}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px 18px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.2);font-weight:700;color:#fff;white-space:nowrap;font-size:.95rem;transition:all .3s cubic-bezier(.4,0,.2,1);text-shadow:0 2px 4px rgba(0,0,0,.2);position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.2) 50%,transparent 70%);transform:translate(-100%);transition:transform .6s}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;box-shadow:0 4px 12px #0003;transform:translateY(-2px)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover:before{transform:translate(100%)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;position:relative;z-index:1}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .theme-toggle-btn[_ngcontent-%COMP%]{padding:12px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;cursor:pointer;font-size:1.4rem;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .theme-toggle-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px) rotate(15deg);box-shadow:0 6px 16px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .theme-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) rotate(0)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]{padding:10px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;cursor:pointer;font-size:.95rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;height:50px;display:flex;align-items:center;gap:6px;white-space:nowrap;box-shadow:0 2px 8px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px);box-shadow:0 6px 16px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]{padding:12px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;cursor:pointer;font-size:1.4rem;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444466;transform:translateY(-2px);box-shadow:0 6px 16px #ef44444d}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:40px 40px 100px;min-height:calc(100vh - 62px)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]{text-align:center;padding:48px 0;margin-bottom:48px;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:120%;height:100%;background:linear-gradient(135deg,#667eea14,#764ba214);border-radius:24px;z-index:0}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:3px;background:linear-gradient(90deg,transparent 0%,#667eea 20%,#764ba2 50%,#667eea 80%,transparent 100%);border-radius:3px;box-shadow:0 0 20px #667eea80;animation:_ngcontent-%COMP%_lineGlow 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:800;margin:0;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px;text-shadow:0 2px 20px rgba(102,126,234,.3);position:relative;z-index:1;padding:0 24px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"\\1f4d6";position:absolute;left:-20px;top:50%;transform:translateY(-50%);font-size:2rem;opacity:.7;animation:_ngcontent-%COMP%_bookFloat 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"\\2728";position:absolute;right:-20px;top:50%;transform:translateY(-50%);font-size:1.5rem;opacity:.7;animation:_ngcontent-%COMP%_sparkle 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_lineGlow{0%,to{opacity:.6;box-shadow:0 0 20px #667eea80}50%{opacity:1;box-shadow:0 0 30px #667eeacc}}@keyframes _ngcontent-%COMP%_bookFloat{0%,to{transform:translateY(-50%) translate(0)}50%{transform:translateY(-50%) translate(-5px)}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.7;transform:translateY(-50%) rotate(0)}50%{opacity:1;transform:translateY(-50%) rotate(180deg)}}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{margin-bottom:28px;padding:28px;background:#fff;border-radius:12px;border:1px solid #e0e0e0;transition:all .3s ease;box-shadow:0 2px 8px #0000000d}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 16px #00000014}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;color:#1a1a1a;margin:14px 0;text-align:justify}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid var(--accent-primary);border-left-width:4px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600;font-size:1.05rem;display:flex;align-items:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:1.6rem;font-weight:700;margin:40px 0 28px;text-transform:uppercase;letter-spacing:1.5px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:20px 28px;margin:14px 0;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:10px;color:var(--text-primary);font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;text-align:left;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--accent-primary);transform:scaleY(0);transition:transform .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--accent-primary);transform:translate(8px);box-shadow:0 4px 12px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(8px) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .panel-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1999;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out;cursor:pointer}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:1100px;max-height:85vh;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;z-index:2000;box-shadow:0 20px 60px var(--shadow);overflow:hidden;animation:_ngcontent-%COMP%_slideInUp .3s ease-out}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:24px 28px;background:var(--bg-secondary);color:var(--text-primary);display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:1.6rem;cursor:pointer;width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:28px;max-height:calc(80vh - 90px);overflow-y:auto}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:16px 20px;margin:12px 0;background:var(--bg-secondary);border-radius:8px;border-left:3px solid var(--accent-primary);color:var(--text-primary);font-size:1rem;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:4px;transform:translate(4px);box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background:var(--accent-primary);border:none;border-radius:6px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease;margin-left:10px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 8px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.battle-section[_ngcontent-%COMP%]{width:100%;padding:32px 24px;margin:24px 0;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);box-shadow:0 2px 8px #0000000d}.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:50px;gap:50px;flex-wrap:wrap;position:relative;z-index:1}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]{flex:1;min-width:280px;max-width:340px;padding:24px 20px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 2px 8px #00000014;transition:all .3s ease;position:relative;overflow:visible}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_damageShakeStrong .5s ease-in-out}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ff00004d;border-radius:12px;animation:_ngcontent-%COMP%_damageFlash .5s ease-out;pointer-events:none;z-index:10}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.player.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 4px 20px #3b82f64d,inset 0 0 0 1px #3b82f633}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.enemy.active[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 4px 20px #ef44444d,inset 0 0 0 1px #ef444433}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{display:none}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;margin-bottom:20px;text-align:center;color:var(--text-primary);letter-spacing:.5px}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]{margin-bottom:16px}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:.95rem;color:var(--text-secondary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:600}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]{margin-bottom:12px;position:relative;background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;padding:2px 8px;border-radius:4px;background:transparent;color:var(--accent-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-primary);font-weight:700;font-family:Courier New,monospace}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:20px;background:transparent;border-radius:10px;overflow:hidden;border:2px solid rgba(255,255,255,.1);box-shadow:inset 0 2px 4px #0000004d,0 2px 8px #0000001a;position:relative}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]:before, .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.2),transparent);border-radius:10px 10px 0 0;pointer-events:none;z-index:2}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .6s cubic-bezier(.34,1.56,.64,1);border-radius:8px;position:relative;overflow:hidden;box-shadow:inset 0 -2px 4px #0000004d}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]:before, .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:40%;background:linear-gradient(to bottom,rgba(255,255,255,.4),transparent);border-radius:8px 8px 0 0;z-index:1}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626,#ef4444);box-shadow:inset 0 1px #fff3,inset 0 -1px #0000001a}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c,#dc2626);animation:_ngcontent-%COMP%_hpPulseLow .8s ease-in-out infinite}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb,#3b82f6);box-shadow:inset 0 1px #fff3,inset 0 -1px #0000001a}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .vs-indicator[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-secondary);opacity:.6}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto;padding:16px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);margin-bottom:24px;font-family:Inter,-apple-system,sans-serif;scroll-behavior:smooth;box-shadow:inset 0 1px 2px #0000000d}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:3px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]{padding:6px 10px;color:var(--text-secondary);font-size:.9rem;line-height:1.5;border-radius:4px;margin-bottom:2px;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]{color:#ef4444;font-weight:600;background:#ef444414}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]{color:#10b981;font-weight:600;background:#10b98114}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.victory[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700;font-size:1rem;background:#fbbf241a;padding:8px;text-align:center;border-radius:6px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.defeat[_ngcontent-%COMP%]{color:#6b7280;font-weight:700;font-size:1rem;background:#6b72801a;padding:8px;text-align:center;border-radius:6px;opacity:.8}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:.95rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;color:#fff}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]{background:#ef4444}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]{background:#3b82f6}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]{background:#10b981}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]{background:#8b5cf6}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]:hover:not(:disabled){background:#7c3aed}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]{text-align:center;padding:32px 24px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);margin-top:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.victory[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.victory[_ngcontent-%COMP%]{color:#fbbf24}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.defeat[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.defeat[_ngcontent-%COMP%]{color:#6b7280}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);margin-bottom:12px;line-height:1.6}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .auto-continue[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);opacity:.7;margin-top:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]{margin-top:20px;padding:10px 24px;font-size:1rem;font-weight:600;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary)}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_battlePulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:.5}50%{transform:translate(-50%,-50%) scale(1.2);opacity:.3}}@keyframes _ngcontent-%COMP%_playerGlow{0%,to{box-shadow:0 15px 40px #3b82f699,0 0 30px #3b82f666}50%{box-shadow:0 15px 40px #3b82f6cc,0 0 40px #3b82f699}}@keyframes _ngcontent-%COMP%_enemyGlow{0%,to{box-shadow:0 15px 40px #ef444499,0 0 30px #ef444466}50%{box-shadow:0 15px 40px #ef4444cc,0 0 40px #ef444499}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes _ngcontent-%COMP%_hpPulseLow{0%,to{opacity:1}50%{opacity:.7}}@keyframes _ngcontent-%COMP%_shimmerFlow{0%{transform:translate(-100%)}to{transform:translate(200%)}}@keyframes _ngcontent-%COMP%_damageShakeStrong{0%,to{transform:translate(0) rotate(0)}10%{transform:translate(-10px) rotate(-2deg)}20%{transform:translate(10px) rotate(2deg)}30%{transform:translate(-10px) rotate(-2deg)}40%{transform:translate(10px) rotate(2deg)}50%{transform:translate(-8px) rotate(-1deg)}60%{transform:translate(8px) rotate(1deg)}70%{transform:translate(-5px) rotate(-.5deg)}80%{transform:translate(5px) rotate(.5deg)}90%{transform:translate(-2px) rotate(0)}}@keyframes _ngcontent-%COMP%_damageFlash{0%{opacity:0}10%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_damageNumber{0%{transform:translateY(0) scale(.5);opacity:0}20%{transform:translateY(-20px) scale(1.2);opacity:1}80%{transform:translateY(-60px) scale(1);opacity:1}to{transform:translateY(-80px) scale(.8);opacity:0}}@keyframes _ngcontent-%COMP%_vsGlow{0%,to{filter:drop-shadow(0 0 20px rgba(59,130,246,.6));transform:scale(1)}50%{filter:drop-shadow(0 0 30px rgba(59,130,246,.9));transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.5;transform:rotate(0) scale(1)}50%{opacity:1;transform:rotate(180deg) scale(1.2)}}@keyframes _ngcontent-%COMP%_damageShake{0%,to{transform:translate(0)}25%{transform:translate(-3px)}75%{transform:translate(3px)}}@keyframes _ngcontent-%COMP%_healPulse{0%,to{transform:scale(1);box-shadow:0 0 #10b98100}50%{transform:scale(1.05);box-shadow:0 0 10px #10b98180}}@keyframes _ngcontent-%COMP%_victoryFlash{0%,to{opacity:1;box-shadow:0 0 10px #fbbf2480}50%{opacity:.8;box-shadow:0 0 20px #fbbf24cc}}@keyframes _ngcontent-%COMP%_resultGlow{0%,to{opacity:.3}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_victoryBounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(1.05)}}@keyframes _ngcontent-%COMP%_celebrate{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-15px) rotate(360deg)}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.4}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translate(-50%,-45%)}to{opacity:1;transform:translate(-50%,-50%)}}  .battle-modal-backdrop{background-color:#000000bf!important;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}  .cdk-overlay-dark-backdrop{background-color:#000000bf!important;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;padding:20px;background:var(--bg-secondary);border-radius:12px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent-secondary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{padding:16px;background:var(--danger);color:#fff;border-radius:8px;margin-bottom:20px;text-align:center;font-weight:600}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);padding:28px;border-radius:12px;border:2px solid var(--accent-primary);animation:_ngcontent-%COMP%_slideInUp .4s ease-out;width:100%;box-sizing:border-box}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;margin-bottom:24px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;background:var(--bg-primary);border-radius:8px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);margin-right:12px;min-width:60px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-primary);font-weight:500}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]{margin-bottom:20px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:16px;background:var(--bg-primary);border-radius:8px;line-height:1.6;color:var(--text-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]{margin-bottom:20px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%]{padding:8px 16px;background:var(--bg-primary);border:2px solid var(--accent-primary);border-radius:20px;font-weight:600;color:var(--accent-primary);font-size:.95rem}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:30px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:16px 24px;font-size:1.1rem;font-weight:600;border-radius:12px;cursor:pointer;transition:all .3s ease}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border:none}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:var(--bg-primary);color:var(--text-primary);border:2px solid var(--border-color)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}@keyframes _ngcontent-%COMP%_aiGlow{0%,to{filter:drop-shadow(0 0 8px rgba(139,92,246,.4))}50%{filter:drop-shadow(0 0 16px rgba(236,72,153,.6))}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.85;transform:scale(1.05)}}.saved-characters-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:linear-gradient(135deg,#8b5cf60d,#3b82f60d);border-radius:20px;border:1px solid rgba(139,92,246,.1)}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:8px;font-weight:700;background:linear-gradient(135deg,#8b5cf6,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #8b5cf64d;border-color:#8b5cf680}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:24px;cursor:pointer;padding:4px 8px;transition:all .2s ease}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait[_ngcontent-%COMP%]{background:#3b82f626;color:#60a5fa;padding:4px 12px;border-radius:10px;font-size:11px;font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-footer[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding-top:8px;border-top:1px solid var(--border-color)}.saved-scenarios-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:20px;border:1px solid rgba(139,92,246,.1)}.saved-scenarios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:24px;font-weight:700;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #8b5cf64d;border-color:#8b5cf680}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:24px;cursor:pointer;padding:4px 8px;transition:all .2s ease}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:var(--text-secondary);padding-top:12px;border-top:1px solid var(--border-color)}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{font-weight:600;color:#a78bfa}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:16px;border:2px solid rgba(139,92,246,.1)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:12px;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px;width:100%}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;border:2px solid var(--border-color);background:var(--bg-secondary);border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);border-color:transparent;color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf64d;border-color:#8b5cf6}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid #fcc;text-align:center;font-weight:500}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);border-radius:20px;padding:32px;box-shadow:0 8px 32px var(--shadow);border:2px solid var(--border-color);width:100%;box-sizing:border-box}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:24px;text-align:center;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;padding:24px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:16px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-primary);margin:0}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{margin-bottom:20px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;font-size:15px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]{margin-bottom:20px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;background:#8b5cf60d;border-left:3px solid #8b5cf6;margin-bottom:8px;border-radius:8px;color:var(--text-secondary)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{margin-bottom:24px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:12px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf61a,#ec48991a);color:#8b5cf6;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:500}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(139,92,246,.1)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf666}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #f59e0b66}.saved-items-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:linear-gradient(135deg,#ffd7000d,#ec48990d);border-radius:20px;border:1px solid rgba(255,215,0,.2)}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:8px;font-weight:700;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:20px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-legendary[_ngcontent-%COMP%]{border-color:gold;background:linear-gradient(135deg,#ffd7001a,#ffa5001a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-rare[_ngcontent-%COMP%]{border-color:#a855f7;background:linear-gradient(135deg,#a855f71a,#8b5cf61a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#3b82f61a,#2563eb1a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #ffd7004d}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:20px;cursor:pointer;padding:4px;transition:all .2s ease}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:13px;line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981;padding:4px 10px;border-radius:8px;font-size:12px;font-weight:600}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6;padding:3px 10px;border-radius:10px;font-size:11px;font-weight:500}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.type-tag[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.grade-tag[_ngcontent-%COMP%]{background:#ffd70033;color:#d97706;font-weight:600}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding-top:8px;border-top:1px solid rgba(0,0,0,.05)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#ffd7000d,#ec48990d);border-radius:16px;border:2px solid rgba(255,215,0,.2)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:12px;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;border:2px solid rgba(255,215,0,.3);background:var(--bg-secondary);border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]{border-color:#ef4444}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ef44441a,#dc26261a);border-color:#dc2626}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]{border-color:#3b82f6}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#3b82f61a,#2563eb1a);border-color:#2563eb}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]{border-color:#a855f7}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#a855f71a,#8b5cf61a);border-color:#8b5cf6}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);border-color:transparent;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ffd70080}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]{border-color:#10b981}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#10b9811a,#0596691a);border-color:#059669}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]{border-color:#ec4899}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ec48991a,#db27771a);border-color:#db2777}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid #fcc;text-align:center;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);border-radius:20px;padding:32px;box-shadow:var(--shadow);border:2px solid var(--border-color);width:100%}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:24px;text-align:center;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;padding:24px;background:linear-gradient(135deg,#ffd7001a,#ec48991a);border-radius:16px;position:relative}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title.grade-legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd70026,#ffa50026);border:2px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_legendaryGlow 2s ease-in-out infinite}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:600}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c77c\\bc18[_ngcontent-%COMP%] {background:#9ca3af;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\ace0\\ae09[_ngcontent-%COMP%] {background:#3b82f6;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\d76c\\adc0[_ngcontent-%COMP%] {background:#a855f7;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c804\\c124[_ngcontent-%COMP%] {background:linear-gradient(135deg,gold,#ff8c00);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c2e0\\d654[_ngcontent-%COMP%] {background:linear-gradient(135deg,#ff0080,#7928ca);color:#fff;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:8px 20px;background:#3b82f61a;color:#3b82f6;border-radius:20px;font-size:14px;font-weight:600}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;font-size:15px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#10b9810d;border-left:3px solid #10b981;border-radius:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981;font-size:16px;font-weight:700}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;background:#8b5cf60d;border-left:3px solid #8b5cf6;margin-bottom:8px;border-radius:8px;color:var(--text-secondary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ef4444;font-weight:500;padding:12px;background:#ef44440d;border-left:3px solid #ef4444;border-radius:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   .lore-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:italic;padding:16px;background:#8b5cf60d;border-radius:12px;border:2px dashed rgba(139,92,246,.3);line-height:1.8}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{margin-bottom:24px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd7001a,#ec48991a);color:#d97706;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(255,215,0,.2)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ffd70066}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #f59e0b66}.story-creator-panel[_ngcontent-%COMP%]{margin-top:40px;padding:32px;background:var(--bg-secondary);border-radius:24px;border:2px solid var(--border-color);box-shadow:var(--shadow)}.story-creator-panel[_ngcontent-%COMP%]   .creator-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:var(--bg-primary);border-radius:12px;font-size:24px;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{transform:rotate(90deg);background:#ef4444;color:#fff}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px solid rgba(102,126,234,.2)}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;color:var(--text-primary);margin-bottom:12px}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:15px;line-height:1.6}.story-creator-panel[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid rgba(239,68,68,.3);text-align:center;font-weight:500}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]{margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px solid rgba(102,126,234,.2)}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-size:16px;font-weight:600;color:var(--text-primary)}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%]{font-size:20px}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444;font-size:18px}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{width:100%;padding:14px 18px;font-size:16px;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-secondary);color:var(--text-primary);transition:all .3s ease;font-family:inherit}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.6}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{text-align:right;margin-top:8px;font-size:13px;color:var(--text-secondary)}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]{display:grid;gap:24px;margin-bottom:32px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;color:var(--text-primary);margin-bottom:16px;font-weight:600;display:flex;align-items:center;gap:8px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   .selection-count[_ngcontent-%COMP%]{font-size:14px;color:#667eea;font-weight:500;padding:4px 12px;background:#667eea1a;border-radius:12px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{padding:16px;background:var(--bg-primary);border:2px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s ease}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea26,#764ba226);border-color:#667eea;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary)}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:24px;background:var(--bg-primary);border-radius:12px;font-size:14px}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:32px}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]{padding:18px 48px;font-size:18px;font-weight:600;border:none;border-radius:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #667eea80}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]{margin-top:32px;padding:32px;background:linear-gradient(135deg,#667eea14,#764ba214);border-radius:20px;border:2px solid rgba(102,126,234,.3)}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#667eea;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:24px;border-radius:16px;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%]{font-size:36px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--text-primary);margin:0}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px;line-height:1.6;margin-bottom:16px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{padding:8px 16px;background:#667eea1a;border-radius:20px;font-size:14px;color:#667eea;font-weight:500}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;color:var(--text-primary);margin-bottom:12px;font-weight:600}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;margin-bottom:8px;font-size:15px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 32px;font-size:16px;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 16px #10b9814d}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98180}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:2px solid var(--border-color)}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.saved-stories-section[_ngcontent-%COMP%]{margin-top:48px;padding:32px;background:var(--bg-secondary);border-radius:24px;border:2px solid var(--border-color);box-shadow:var(--shadow)}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--text-primary);margin-bottom:8px}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:15px}.saved-stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;padding:24px;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026;border-color:#667eea}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%]{font-size:32px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;color:var(--text-primary);margin:0;font-weight:700}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;opacity:.6;transition:all .3s ease;padding:4px 8px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.2)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{padding:6px 12px;background:#667eea1a;border-radius:12px;font-size:13px;color:#667eea;font-weight:500}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:16px;border-top:1px solid var(--border-color)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .created-by[_ngcontent-%COMP%]{font-size:12px;color:#667eea;font-weight:500}.action-card.premium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd7001a,#ffa5001a);border:2px solid rgba(255,215,0,.3)}.action-card.premium[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:48px;animation:_ngcontent-%COMP%_sparkle 2s ease-in-out infinite}.action-card.premium[_ngcontent-%COMP%]:hover{border-color:gold;box-shadow:0 8px 32px #ffd7004d}.action-card.premium[_ngcontent-%COMP%]   .premium-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#fff;font-weight:700;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_sparkle{0%,to{transform:scale(1) rotate(0)}50%{transform:scale(1.1) rotate(5deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}@keyframes _ngcontent-%COMP%_legendaryGlow{0%,to{box-shadow:0 0 20px #ffd7004d}50%{box-shadow:0 0 30px #ffd70099}}.story-flow-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:99999!important;animation:_ngcontent-%COMP%_fadeIn .3s ease;pointer-events:all}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]{width:90%;max-width:1200px;height:85vh;max-height:800px;background:var(--bg-primary);border:3px solid var(--accent-primary);border-radius:20px;box-shadow:0 20px 60px #00000080;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .3s ease;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 30px 80px #000000b3;opacity:.9}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]{padding:20px 32px;background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--border-color);cursor:move;-webkit-user-select:none;user-select:none}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]:active{cursor:grabbing}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff9;font-weight:700;line-height:1}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;font-weight:700;color:#fff}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:2px solid rgba(255,255,255,.3);color:#fff;padding:8px 16px;border-radius:8px;font-size:1.2rem;cursor:pointer;transition:all .3s ease}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]{padding:16px 32px;background:var(--bg-secondary);border-bottom:2px solid var(--border-color)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-secondary);font-size:.9rem}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:600}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:8px 16px;background:var(--bg-primary);border:2px solid var(--accent-primary);border-radius:8px;font-size:.9rem;font-weight:600;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]{flex:1;padding:32px;overflow-y:auto;background:var(--bg-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]{min-height:100%;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:16px;margin-bottom:24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;transition:all .3s ease;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:0 4px 16px var(--shadow);border-color:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(16,185,129,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(59,130,246,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(245,158,11,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(139,92,246,.2) 100%);box-shadow:0 0 20px #8b5cf64d;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:var(--gradient-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0;box-shadow:0 4px 12px var(--shadow)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]{flex:1}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin-bottom:6px;line-height:1.4}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-level[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);margin-bottom:8px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid var(--border-color)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]{padding:8px 12px;margin-bottom:8px;background:var(--bg-primary);border-left:3px solid var(--accent-primary);border-radius:6px;font-size:.9rem;color:var(--text-secondary);transition:all .2s ease}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;transform:translate(4px)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:last-child{margin-bottom:0}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]{position:absolute;left:40px;bottom:-24px;width:2px;height:24px;background:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);font-size:.6rem;color:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]{margin-top:32px;padding:20px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:1.1rem;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-primary);border-radius:8px;font-size:.9rem;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1rem}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.start[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.story[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.choice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.current[_ngcontent-%COMP%]{background:var(--gradient-primary)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 20px #8b5cf64d}50%{box-shadow:0 0 30px #8b5cf699}}.choice-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin:20px 0}.choice-item[_ngcontent-%COMP%]{display:flex;align-items:stretch;gap:8px}.choice-button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px;padding:16px 20px;background:#8b45ff1a;border:2px solid rgba(139,69,255,.3);border-radius:12px;transition:all .3s ease;cursor:pointer;text-align:left;min-width:0}.choice-button[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#8b45ff33;border-radius:50%;font-weight:700;color:#8b45ff;font-size:14px;flex-shrink:0}.choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{flex:1;color:var(--text-color);font-size:15px;line-height:1.5;overflow:hidden;text-overflow:ellipsis}.choice-button[_ngcontent-%COMP%]:hover{background:#8b45ff33;border-color:#8b45ff80;transform:translate(8px);box-shadow:0 4px 12px #8b45ff33}.choice-button[_ngcontent-%COMP%]:active{transform:translate(8px) scale(.98)}.link-scenario-btn[_ngcontent-%COMP%]{padding:0;background:transparent;border:2px solid rgba(139,69,255,.5);border-radius:8px;color:#8b45ff;cursor:pointer;transition:all .2s ease;font-size:16px;flex-shrink:0;width:40px;min-width:40px;max-width:40px;display:flex;align-items:center;justify-content:center}.link-scenario-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;border-color:#8b45ffb3;transform:scale(1.15);box-shadow:0 2px 8px #8b45ff4d}.link-scenario-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.scenario-link-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:99998;animation:_ngcontent-%COMP%_fadeIn .3s ease}.scenario-link-panel[_ngcontent-%COMP%]{background:#fff;border:2px solid #ced4da;border-radius:16px;padding:24px;width:90%;max-width:1200px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 4px 20px #0000001a;position:relative}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #e9ecef;cursor:move}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{color:#6c757d;font-size:18px;-webkit-user-select:none;user-select:none}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:20px;font-weight:700;margin:0;display:flex;align-items:center;gap:8px}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;color:#212529;cursor:pointer;transition:all .2s ease;font-size:18px;line-height:1}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:scale(1.05)}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:#f8f9fa;border-radius:8px;border-left:4px solid #0d6efd}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#212529;margin:0 0 8px;font-size:15px}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0d6efd;font-weight:700}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:13px;opacity:.8;color:#6c757d}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#8b45ff1a;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b45ff4d;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b45ff80}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin-bottom:20px;opacity:.7}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#0d6efd;border:2px solid #0d6efd;border-radius:8px;color:#fff;font-size:15px;cursor:pointer;transition:all .2s ease}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{background:#0b5ed7;border-color:#0b5ed7;transform:translateY(-2px);box-shadow:0 4px 12px #0d6efd4d}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(139,69,255,.2);cursor:move}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color);font-size:20px;font-weight:700;margin:0;display:flex;align-items:center;gap:8px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#8b45ff33;border:1px solid rgba(139,69,255,.3);border-radius:8px;color:var(--text-color);cursor:pointer;transition:all .2s ease}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;transform:scale(1.05)}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#8b45ff1a;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b45ff4d;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b45ff80}.flow-scenario-link-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:2000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.flow-scenario-link-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:24px;width:90%;max-width:1000px;max-height:85vh;padding:32px;box-shadow:0 20px 60px #667eea66,0 0 0 1px #fff3;display:flex;flex-direction:column;gap:24px;position:relative;overflow:hidden}.flow-scenario-link-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;pointer-events:none}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:20px;border-bottom:2px solid rgba(255,255,255,.2);cursor:move;position:relative;z-index:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{font-size:20px;opacity:.5;color:#fff}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:800;margin:0;text-shadow:0 2px 8px rgba(0,0,0,.2)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444466;transform:scale(1.1) rotate(90deg)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:20px;position:relative;z-index:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px;padding:16px;background:#ffffff1a;border-radius:12px;border:1px solid rgba(255,255,255,.2)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-icon-large[_ngcontent-%COMP%]{font-size:48px;line-height:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]{flex:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.2)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]   .node-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#fff3;border-radius:12px;color:#fff;font-size:12px;font-weight:600;text-transform:uppercase;margin:0}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-bottom:12px;padding:12px;background:#ffffff14;border-radius:8px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{color:#fffc;font-size:13px;font-weight:600}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]   .choice-value[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:700;font-family:monospace}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#ffffffe6;font-size:14px;margin:0;line-height:1.6}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;position:relative;z-index:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:5px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:5px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff6}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:2px solid transparent}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #0003;border-color:#667eea80}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card.linked[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#f0fdf4,#ecfdf5)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card.linked[_ngcontent-%COMP%]   .linked-badge[_ngcontent-%COMP%]{display:inline-block}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:8px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{flex:1;font-size:16px;font-weight:700;color:#1a202c;margin:0;line-height:1.4}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{padding:4px 10px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px;font-size:11px;font-weight:600;white-space:nowrap}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .linked-badge[_ngcontent-%COMP%]{display:none;padding:4px 10px;background:#10b981;color:#fff;border-radius:12px;font-size:11px;font-weight:700}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{font-size:13px;color:#4a5568;line-height:1.6;margin-bottom:12px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:8px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:12px;color:#718096}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:3px 8px;background:#edf2f7;color:#4a5568;border-radius:6px;font-size:11px;font-weight:600}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;background:#ffffff1a;border-radius:16px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:16px;margin-bottom:20px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#667eea;border:none;border-radius:12px;font-weight:700;font-size:14px;cursor:pointer;transition:all .3s}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0003}.scenario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.scenario-card[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #dee2e6;border-radius:12px;padding:16px;cursor:pointer;transition:all .3s ease;position:relative}.scenario-card[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#adb5bd;transform:translateY(-4px);box-shadow:0 6px 20px #0000001a}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:700;margin:0}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{display:inline-block;align-self:flex-start;padding:4px 8px;background:#0d6efd;border-radius:6px;font-size:12px;color:#fff}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#495057;font-size:13px;line-height:1.5;margin-bottom:12px;opacity:.8;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{color:#6c757d;font-size:12px;opacity:.7}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 8px;background:#e9ecef;border-radius:4px;font-size:11px;color:#495057}.scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:700;margin:0 0 8px;display:flex;align-items:center;gap:8px}.scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background:#0d6efd;border-radius:6px;font-size:12px;color:#fff;margin-bottom:8px}.scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#495057;font-size:13px;line-height:1.5;margin-bottom:12px;opacity:.8;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:12px;color:#6c757d;opacity:.7}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;gap:4px}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0d6efd}.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 8px;background:#e9ecef;border-radius:4px;font-size:11px;color:#495057}.scenario-card[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:20px;opacity:0;transition:opacity .2s ease}.scenario-card[_ngcontent-%COMP%]:hover   .select-icon[_ngcontent-%COMP%]{opacity:1}body.dark-theme[_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%]{background:#000000d9!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]{background:#1a1a2e!important;border-color:#2d2d44!important;box-shadow:0 4px 20px #00000080!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{border-bottom-color:#2d2d44!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#f5f5f7!important;background:#2d2d44!important;border-color:#3d3d54!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#3d3d54!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{background:#2d2d44!important;border-left-color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:#2d2d44!important;border-color:#3d3d54!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{background:#3d3d54!important;border-color:#4d4d64!important;box-shadow:0 6px 20px #0000004d!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{background:#0a84ff!important;color:#fff!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#3d3d54!important;color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{background:#0a84ff!important;color:#fff!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#3d3d54!important;color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{color:#fff!important;background:#0a84ff!important;border-color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{background:#0040dd!important;border-color:#0040dd!important}  .custom-confirm-dialog .mat-mdc-dialog-container{padding:0!important;border-radius:16px!important;box-shadow:0 20px 60px #0000004d!important;overflow:hidden!important}  .custom-confirm-dialog .mdc-dialog__surface{border-radius:16px!important;overflow:hidden!important}  .cdk-overlay-backdrop.cdk-overlay-backdrop-showing{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:#00000080}.advanced-story-flow-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:10000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.advanced-flow-panel[_ngcontent-%COMP%]{width:95vw;height:95vh;background:var(--bg-primary);border-radius:20px;box-shadow:0 25px 80px #00000080;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .4s ease;position:relative}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:48px}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:24px;opacity:.6}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0 0 12px;color:var(--text-primary)}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 32px;line-height:1.6;font-size:16px}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s;border:none}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.primary-btn[_ngcontent-%COMP%]{background:#667eea;color:#fff}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.primary-btn[_ngcontent-%COMP%]:hover{background:#5568d3;transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.secondary-btn[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.advanced-flow-header[_ngcontent-%COMP%]{padding:24px 32px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px #00000026}.advanced-flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;display:flex;align-items:center;gap:12px}.advanced-flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px;opacity:.9;margin-top:4px}.advanced-flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:28px;width:44px;height:44px;border-radius:50%;cursor:pointer;transition:all .2s}.advanced-flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:rotate(90deg)}.flow-toolbar[_ngcontent-%COMP%]{padding:16px 24px;background:var(--bg-secondary);border-bottom:1px solid var(--border-color);display:flex;gap:16px;flex-wrap:wrap;align-items:center}.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid var(--border-color);padding-right:16px}.flow-toolbar[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%], .flow-toolbar[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid var(--border-color);background:var(--bg-primary);color:var(--text-primary);border-radius:8px;font-size:14px;cursor:pointer;transition:all .2s;white-space:nowrap}.flow-toolbar[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]:hover, .flow-toolbar[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-1px)}.flow-toolbar[_ngcontent-%COMP%]   .tool-btn.active[_ngcontent-%COMP%], .flow-toolbar[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.flow-toolbar[_ngcontent-%COMP%]   .layout-selector[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid var(--border-color);background:var(--bg-primary);color:var(--text-primary);border-radius:8px;font-size:14px;cursor:pointer;min-width:120px}.flow-toolbar[_ngcontent-%COMP%]   .layout-selector[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-primary)}.flow-canvas-container[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;background:linear-gradient(180deg,var(--bg-primary) 0%,var(--bg-secondary) 100%)}.flow-svg-canvas[_ngcontent-%COMP%]{width:100%;height:100%}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path[_ngcontent-%COMP%]{fill:none;stroke:#cbd5e0;stroke-width:2;opacity:.6;transition:all .3s ease}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path.visited[_ngcontent-%COMP%]{stroke:#48bb78;stroke-width:3;opacity:.9}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path.current[_ngcontent-%COMP%]{stroke:#4299e1;stroke-width:4;opacity:1;animation:_ngcontent-%COMP%_pathPulse 2s infinite}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path[_ngcontent-%COMP%]:hover{stroke-width:4;opacity:1}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]:hover   .node-circle[_ngcontent-%COMP%]{filter:brightness(1.1);transform:scale(1.1)}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.current[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 20px #4299e1);animation:_ngcontent-%COMP%_nodeGlow 2s infinite}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.current[_ngcontent-%COMP%]   .node-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_glowPulse 2s infinite}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.visited[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(72,187,120,.5))}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.battle[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px rgba(252,129,129,.6))}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.ending[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 15px rgba(159,122,234,.8))}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{transition:all .3s ease}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%]{fill:var(--text-primary);pointer-events:none}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%], .flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .visit-count[_ngcontent-%COMP%]{fill:#fff;font-weight:600;pointer-events:none}.minimap[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;width:220px;height:160px;background:#fffffff2;border:2px solid var(--border-color);border-radius:12px;overflow:hidden;box-shadow:0 8px 24px #00000026}.minimap[_ngcontent-%COMP%]   .minimap-title[_ngcontent-%COMP%]{padding:8px 12px;background:var(--accent-primary);color:#fff;font-size:12px;font-weight:600;text-align:center}.minimap[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]{height:calc(100% - 36px)}.legend[_ngcontent-%COMP%]{position:absolute;bottom:24px;left:24px;background:#fffffff2;border:2px solid var(--border-color);border-radius:12px;padding:16px;box-shadow:0 8px 24px #00000026;max-width:200px}.legend[_ngcontent-%COMP%]   .legend-title[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin-bottom:12px;color:var(--text-primary)}.legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:13px;color:var(--text-secondary)}.legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;border:2px solid rgba(0,0,0,.1);flex-shrink:0}.node-detail-panel[_ngcontent-%COMP%]{position:absolute;top:50%;right:24px;transform:translateY(-50%);width:350px;max-height:80vh;background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;box-shadow:0 12px 40px #0003;overflow:hidden;animation:_ngcontent-%COMP%_slideInRight .3s ease}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]{padding:20px;background:var(--accent-primary);color:#fff;display:flex;justify-content:space-between;align-items:center}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .detail-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:20px;width:32px;height:32px;border-radius:50%;cursor:pointer;transition:all .2s}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .detail-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]{padding:20px;max-height:calc(80vh - 80px);overflow-y:auto}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:16px 0 8px;color:var(--text-primary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]{margin-bottom:16px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;background:var(--bg-secondary);border-radius:20px;font-size:14px;font-weight:600}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.battle[_ngcontent-%COMP%]{background:#fc818133;color:#c53030}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.ending[_ngcontent-%COMP%]{background:#9f7aea33;color:#6b46c1}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.event[_ngcontent-%COMP%]{background:#f6ad5533;color:#dd6b20}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]{margin-bottom:20px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:var(--text-secondary);line-height:1.6}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0;color:var(--text-secondary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%]{color:var(--accent-primary);font-style:italic}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border-color)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--text-secondary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:700;color:var(--accent-primary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]{padding:10px 12px;background:var(--bg-secondary);border-radius:8px;margin:8px 0;display:flex;align-items:center;gap:10px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:18px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{flex:1;color:var(--text-primary);font-size:14px}.stats-overlay[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;background:#fffffff2;border:2px solid var(--border-color);border-radius:16px;padding:24px;box-shadow:0 12px 40px #0003;min-width:320px;max-height:calc(100vh - 100px);overflow-y:auto;animation:_ngcontent-%COMP%_slideInRight .3s ease}.stats-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;font-weight:700;color:var(--text-primary)}.stats-overlay[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:16px 0 12px;font-size:16px;font-weight:600;color:var(--text-primary)}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]{margin-bottom:20px}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#4299e11a,#4299e10d);border:2px solid #4299e1;border-radius:12px;animation:_ngcontent-%COMP%_nodeGlow 2s ease-in-out infinite}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin-bottom:4px}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-path[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-family:monospace}.stats-overlay[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:20px}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{text-align:center;padding:16px;background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);transition:all .2s}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--accent-primary);margin-bottom:4px}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-primary);border-radius:8px;border:1px solid var(--border-color);font-size:13px;transition:all .2s}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{background:#4299e10d;border-color:#4299e1}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-node[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);flex-shrink:0}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-choice[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@keyframes _ngcontent-%COMP%_pathPulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_nodeGlow{0%,to{filter:drop-shadow(0 0 20px #4299e1)}50%{filter:drop-shadow(0 0 30px #4299e1)}}@keyframes _ngcontent-%COMP%_glowPulse{0%,to{opacity:.5;r:50}50%{opacity:.8;r:55}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(40px)}to{opacity:1;transform:translate(0)}}[data-theme=dark][_ngcontent-%COMP%]   .minimap[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .stats-overlay[_ngcontent-%COMP%]{background:#1a202cf2}[data-theme=dark][_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%]{fill:#e2e8f0}.flow-side-panel[_ngcontent-%COMP%]{position:fixed;top:80px;right:24px;z-index:900;animation:_ngcontent-%COMP%_slideInRight .4s ease;pointer-events:all}.flow-side-panel[_ngcontent-%COMP%]   .panel-container[_ngcontent-%COMP%]{width:300px;background:#fff;border-radius:16px;box-shadow:0 10px 40px #00000026,0 0 0 1px #0000000d;overflow:hidden;display:flex;flex-direction:column;max-height:calc(100vh - 120px)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;position:relative;overflow:hidden;box-shadow:0 4px 16px #667eea40}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;pointer-events:none}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:11px;margin-bottom:12px;font-weight:600;position:relative;z-index:1}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#ffffff26;padding:4px 10px;border-radius:12px;letter-spacing:.5px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]:before{content:"\\1f550";font-size:13px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#ffffff26;padding:4px 10px;border-radius:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]:before{content:"\\1f3af";font-size:13px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:800;letter-spacing:-.5px;text-shadow:0 2px 8px rgba(0,0,0,.2);display:flex;align-items:center;gap:8px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:6px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;width:36px;height:36px;border-radius:10px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:before, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .4s,height .4s}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:hover, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:hover:before, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover:before{width:100%;height:100%}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:active, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef444433;border-color:#ef444466}@keyframes _ngcontent-%COMP%_headerGlow{0%,to{transform:translate(0) rotate(0);opacity:.5}50%{transform:translate(-10%,-10%) rotate(180deg);opacity:.8}}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#4299e10d;border-bottom:2px solid rgba(66,153,225,.2)}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:36px;flex-shrink:0}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{flex:1;min-width:0}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#1a202c;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:4px}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-path[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:600}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]{flex:1;min-height:280px;max-height:360px;background:#f8fafc;position:relative;overflow:hidden;border-bottom:1px solid rgba(0,0,0,.05)}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-connections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:all .3s}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-nodes[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{transition:all .3s}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-nodes[_ngcontent-%COMP%]   circle.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_phonePulse 2s ease-in-out infinite}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:16px;background:#fff;border-bottom:1px solid rgba(0,0,0,.05)}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:22px}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#2d3748}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]{padding:16px;background:#fff}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .recent-title[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#718096;margin-bottom:10px;text-transform:uppercase;letter-spacing:.5px}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#edf2f7;font-size:16px;transition:all .2s;cursor:pointer;border:2px solid transparent}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.1);box-shadow:0 4px 12px #00000026;border-color:#4299e1}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot.current[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4299e1,#3182ce);box-shadow:0 6px 16px #4299e166;transform:translateY(-2px) scale(1.15);border-color:#2b6cb0}.flow-panel-toggle-btn[_ngcontent-%COMP%]{position:fixed;top:80px;right:24px;z-index:899;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:16px;padding:14px 18px;cursor:pointer;box-shadow:0 8px 24px #667eea66,0 0 0 1px #fff3;display:flex;flex-direction:column;align-items:center;gap:6px;transition:all .3s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_slideInRight .4s ease,_ngcontent-%COMP%_pulseGlow 3s ease-in-out infinite;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:relative;overflow:hidden}.flow-panel-toggle-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.3) 50%,transparent 70%);animation:_ngcontent-%COMP%_shimmer 3s infinite}.flow-panel-toggle-btn[_ngcontent-%COMP%]:hover{transform:translate(-6px) translateY(-2px) scale(1.08);box-shadow:0 12px 32px #667eea80,0 0 0 1px #fff6}.flow-panel-toggle-btn[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(10deg)}.flow-panel-toggle-btn[_ngcontent-%COMP%]:active{transform:translate(-6px) scale(1.02)}.flow-panel-toggle-btn[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:28px;line-height:1;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;z-index:1}.flow-panel-toggle-btn[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{font-size:12px;font-weight:800;letter-spacing:1px;text-transform:uppercase;position:relative;z-index:1}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%) translateY(-100%) rotate(0)}to{transform:translate(100%) translateY(100%) rotate(0)}}@keyframes _ngcontent-%COMP%_pulseGlow{0%,to{box-shadow:0 8px 24px #667eea66,0 0 0 1px #fff3}50%{box-shadow:0 8px 32px #667eea99,0 0 0 1px #ffffff4d,0 0 20px #667eea4d}}@keyframes _ngcontent-%COMP%_phonePulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}@media (max-width: 1400px){.flow-side-panel[_ngcontent-%COMP%]{display:none}}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .panel-container[_ngcontent-%COMP%]{background:#1a202c;box-shadow:0 10px 40px #0006,0 0 0 1px #ffffff1a}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]{background:#4299e11a;border-bottom-color:#4299e14d}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%]{color:#f7fafc}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-path[_ngcontent-%COMP%]{color:#a0aec0}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]{background:#2d3748;border-bottom-color:#ffffff0d}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]{background:#1a202c;border-bottom-color:#ffffff0d}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{color:#e2e8f0}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]{background:#1a202c}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .recent-title[_ngcontent-%COMP%]{color:#a0aec0}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]{background:#2d3748;border-color:transparent}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]:hover{border-color:#4299e1}[data-theme=dark][_ngcontent-%COMP%]   .flow-panel-toggle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 8px 24px #667eea80,0 0 0 1px #fff3,0 0 30px #667eea4d}[data-theme=dark][_ngcontent-%COMP%]   .flow-panel-toggle-btn[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #667eea99,0 0 0 1px #ffffff4d,0 0 40px #667eea66}.wuxia-btn[_ngcontent-%COMP%]{padding:10px 20px;background:linear-gradient(135deg,#c31432,#240b36);color:#fff;border:2px solid rgba(195,20,50,.5);border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:1.1rem}.wuxia-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #c3143266;border-color:#c31432cc}.wuxia-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:2000;display:flex;justify-content:center;align-items:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.wuxia-panel[_ngcontent-%COMP%]{width:90%;max-width:1200px;height:85vh;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);border-radius:20px;box-shadow:0 20px 60px #00000080,0 0 0 1px #ffffff1a,inset 0 0 60px #c314321a;overflow:hidden;display:flex;flex-direction:column;position:relative}.wuxia-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:repeating-linear-gradient(45deg,transparent,transparent 35px,rgba(195,20,50,.03) 35px,rgba(195,20,50,.03) 70px),repeating-linear-gradient(-45deg,transparent,transparent 35px,rgba(195,20,50,.03) 35px,rgba(195,20,50,.03) 70px);pointer-events:none}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]{padding:24px 32px;background:linear-gradient(135deg,#c3143233,#240b3633);border-bottom:2px solid rgba(195,20,50,.3);display:flex;justify-content:space-between;align-items:center;cursor:move;position:relative;z-index:1}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 10px rgba(195,20,50,.5);letter-spacing:2px}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:1.5rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#c3143280;transform:rotate(90deg)}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]{display:flex;padding:16px 32px;gap:12px;background:#0003;border-bottom:1px solid rgba(255,255,255,.1);overflow-x:auto;position:relative;z-index:1}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#ffffffb3;font-size:1.05rem;font-weight:600;cursor:pointer;transition:all .3s ease;white-space:nowrap}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c31432,#240b36);border-color:#c3143280;color:#fff;box-shadow:0 4px 15px #c314324d}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:32px;position:relative;z-index:1}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;color:#fff;margin:0 0 24px;text-align:center;text-shadow:0 2px 10px rgba(195,20,50,.5);letter-spacing:3px;font-weight:700}.cultivation-section[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]{background:#0000004d;border:2px solid rgba(195,20,50,.3);border-radius:15px;padding:24px;margin-bottom:24px}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-label[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:gold;text-shadow:0 0 10px rgba(255,215,0,.5)}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-value[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff;font-weight:600}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]{height:30px;background:#00000080;border-radius:15px;overflow:hidden;border:1px solid rgba(255,215,0,.3);position:relative}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]   .gauge-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b6b,gold,#ff6b6b);background-size:200% 100%;animation:_ngcontent-%COMP%_powerFlow 3s ease-in-out infinite;border-radius:15px;box-shadow:0 0 20px #ffd70080;transition:width .5s ease}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-info[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:12px}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fffc;font-size:.95rem}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:24px}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]{flex:0 0 auto;padding:20px 30px;background:linear-gradient(135deg,#c314324d,#240b364d);border:2px solid rgba(195,20,50,.5);border-radius:15px;display:flex;align-items:center;gap:16px}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge.realm-\\cd08\\b958[_ngcontent-%COMP%] {border-color:#96969680}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge.realm-\\c77c\\b958[_ngcontent-%COMP%] {border-color:#64c8ff80}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge.realm-\\c808\\c815[_ngcontent-%COMP%] {border-color:#8a2be280}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge.realm-\\d654\\acbd[_ngcontent-%COMP%] {border-color:#ffd70080;box-shadow:0 0 20px #ffd7004d}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge.realm-\\cc9c\\c778\\d569\\c77c[_ngcontent-%COMP%] {border-color:#ff1493cc;box-shadow:0 0 30px #ff149380;animation:_ngcontent-%COMP%_realmGlow 2s ease-in-out infinite}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_rotateStar 4s linear infinite}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]   .realm-name[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff;text-shadow:0 0 10px rgba(195,20,50,.5)}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]   .realm-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#ffffffb3}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;gap:8px}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{color:#fffc;font-size:.95rem}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:20px;background:#00000080;border-radius:10px;overflow:hidden;border:1px solid rgba(255,215,0,.3)}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:10px;transition:width .5s ease}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-value[_ngcontent-%COMP%]{color:#fff;font-weight:600}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#667eea33,#764ba233);border:2px solid rgba(102,126,234,.5);border-radius:12px;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;gap:8px}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:2rem}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#667eea4d,#764ba24d);transform:translateY(-3px);box-shadow:0 8px 20px #667eea66}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]{background:#0000004d;border:2px solid rgba(102,126,234,.3);border-radius:12px;padding:20px;display:flex;flex-direction:column;gap:12px}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-label[_ngcontent-%COMP%]{color:#ffffffe6;font-weight:600;font-size:1.1rem}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-bar[_ngcontent-%COMP%]{height:25px;background:#00000080;border-radius:12px;overflow:hidden;border:1px solid rgba(102,126,234,.3)}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-bar[_ngcontent-%COMP%]   .training-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:12px;transition:width .5s ease}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-value[_ngcontent-%COMP%]{color:#fff;font-weight:600;text-align:right}.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fffc;font-size:1.1rem;font-weight:600}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]{background:#0000004d;border:2px solid rgba(255,255,255,.1);border-radius:15px;padding:20px;transition:all .3s ease}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\d558\\c2b9[_ngcontent-%COMP%] {border-color:#9696964d}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c911\\c2b9[_ngcontent-%COMP%] {border-color:#64c8ff4d}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c0c1\\c2b9[_ngcontent-%COMP%] {border-color:#8a2be24d;box-shadow:0 0 15px #8a2be233}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c808\\d559[_ngcontent-%COMP%] {border-color:#ffd70080;box-shadow:0 0 20px #ffd7004d;animation:_ngcontent-%COMP%_skillGlow 2s ease-in-out infinite}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #c314324d}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]{flex:1}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]   .skill-name-chinese[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:gold;margin:0 0 4px;text-shadow:0 0 10px rgba(255,215,0,.3)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]   .skill-name-korean[_ngcontent-%COMP%]{font-size:1rem;color:#fffc;margin:0}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade-badge[_ngcontent-%COMP%]{padding:6px 12px;background:#ffd70033;border:1px solid rgba(255,215,0,.5);border-radius:8px;color:gold;font-size:.9rem;font-weight:700;white-space:nowrap}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]   .type-icon[_ngcontent-%COMP%]{font-size:1.3rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]   .type-label[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.95rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-bottom:12px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px;background:#0000004d;border-radius:6px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.9rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.95rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]{margin-bottom:12px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:.95rem;margin:0 0 8px;line-height:1.5}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]   .skill-effect[_ngcontent-%COMP%]{color:#ffd700e6;font-style:italic}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   .element-icon[_ngcontent-%COMP%]{font-size:1.2rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   .element-name[_ngcontent-%COMP%]{color:#fffc;font-size:.9rem;text-transform:uppercase}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]{display:flex;gap:8px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]   .faction-label[_ngcontent-%COMP%]{color:#fff9;font-size:.9rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]   .faction-name[_ngcontent-%COMP%]{color:#c31432e6;font-weight:600;font-size:.9rem}.skills-section[_ngcontent-%COMP%]   .no-skills[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.skills-section[_ngcontent-%COMP%]   .no-skills[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff9;font-size:1.1rem;margin:8px 0}.faction-section[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.faction-section[_ngcontent-%COMP%]   .current-faction[_ngcontent-%COMP%]{margin-bottom:40px}.faction-section[_ngcontent-%COMP%]   .current-faction[_ngcontent-%COMP%]   .faction-card.current[_ngcontent-%COMP%]{border-width:3px;box-shadow:0 0 30px #c3143266}.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#fffc;font-size:1.1rem;margin-bottom:32px}.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:1.3rem;margin-bottom:24px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:24px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]{background:#0000004d;border:2px solid rgba(255,255,255,.1);border-radius:15px;padding:24px;transition:all .3s ease}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]{border-color:#64c8ff4d}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]:hover{box-shadow:0 10px 30px #64c8ff4d}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]{border-color:#c3143280}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]:hover{box-shadow:0 10px 30px #c314324d}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]{border-color:#9696964d}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]:hover{box-shadow:0 10px 30px #9696964d}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]{margin-bottom:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:gold;margin:0 0 4px;text-shadow:0 0 10px rgba(255,215,0,.3)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]   .faction-name-korean[_ngcontent-%COMP%]{font-size:1.1rem;color:#fffc;margin:0}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:8px;font-size:.95rem;font-weight:700;margin-bottom:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-righteous[_ngcontent-%COMP%]{background:#64c8ff33;color:#64c8ff;border:1px solid rgba(100,200,255,.5)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-evil[_ngcontent-%COMP%]{background:#c3143233;color:#ff6464;border:1px solid rgba(195,20,50,.5)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-neutral[_ngcontent-%COMP%]{background:#96969633;color:#c8c8c8;border:1px solid rgba(150,150,150,.5)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]{margin-bottom:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;line-height:1.6;margin:0 0 12px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ffd700e6}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%]{padding:4px 12px;background:#ffd7001a;border:1px solid rgba(255,215,0,.3);border-radius:6px;color:#ffd700e6;font-size:.85rem}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fffc}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]{flex:1;height:10px;background:#00000080;border-radius:5px;overflow:hidden}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]   .reputation-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#c31432,gold,#64c8ff);transition:width .5s ease}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .join-faction-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:1.05rem;font-weight:700;cursor:pointer;transition:all .3s ease;margin-top:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .join-faction-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea66}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]{background:#0000004d;border:2px solid rgba(255,255,255,.1);border-radius:15px;padding:20px;transition:all .3s ease}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\d558\\d488[_ngcontent-%COMP%] {border-color:#9696964d}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c911\\d488[_ngcontent-%COMP%] {border-color:#64c8ff4d}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c0c1\\d488[_ngcontent-%COMP%] {border-color:#8a2be24d;box-shadow:0 0 15px #8a2be233}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\adf9\\d488[_ngcontent-%COMP%] {border-color:#ffd70080;box-shadow:0 0 20px #ffd7004d;animation:_ngcontent-%COMP%_elixirGlow 2s ease-in-out infinite}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #c314324d}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]{flex:1}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]   .elixir-chinese[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:gold;margin:0 0 4px;text-shadow:0 0 10px rgba(255,215,0,.3)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]   .elixir-korean[_ngcontent-%COMP%]{font-size:.95rem;color:#fffc;margin:0}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-grade[_ngcontent-%COMP%]{padding:4px 10px;background:#ffd70033;border:1px solid rgba(255,215,0,.5);border-radius:6px;color:gold;font-size:.85rem;font-weight:700}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{padding:4px 10px;background:#667eea33;border:1px solid rgba(102,126,234,.5);border-radius:6px;color:#667eea;font-size:.85rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .rarity-stars[_ngcontent-%COMP%]{display:flex;gap:2px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .rarity-stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:.9rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-description[_ngcontent-%COMP%]{margin-bottom:12px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:.95rem;line-height:1.5;margin:0}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]{margin-bottom:12px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px;background:#0000004d;border-radius:6px;margin-bottom:6px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%]{font-size:1rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.9rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px;background:#c3143233;border:1px solid rgba(195,20,50,.5);border-radius:6px;margin-bottom:12px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:1.2rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#ff6464;font-size:.9rem;font-weight:600}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid rgba(255,255,255,.1)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .elixir-price[_ngcontent-%COMP%]{color:gold;font-weight:700;font-size:1.1rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .use-elixir-btn[_ngcontent-%COMP%]{padding:8px 20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .use-elixir-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #667eea66}.elixir-section[_ngcontent-%COMP%]   .no-elixir[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.elixir-section[_ngcontent-%COMP%]   .no-elixir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff9;font-size:1.1rem}.meridians-section[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.meridians-section[_ngcontent-%COMP%]   .meridian-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.meridians-section[_ngcontent-%COMP%]   .meridian-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:1.2rem;font-weight:600}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;height:600px;margin:0 auto 40px;background:radial-gradient(circle,rgba(195,20,50,.1) 0%,transparent 70%);border-radius:50%;border:2px solid rgba(195,20,50,.3)}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#00000080;border:2px solid rgba(255,255,255,.3);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]   .point-number[_ngcontent-%COMP%]{color:#ffffffb3;font-weight:700;font-size:1.2rem}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point.opened[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eeacc;box-shadow:0 0 20px #667eea80;animation:_ngcontent-%COMP%_meridianPulse 2s ease-in-out infinite}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point.opened[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]   .point-number[_ngcontent-%COMP%]{color:#fff}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]:hover   .point-circle[_ngcontent-%COMP%]{transform:scale(1.1);box-shadow:0 0 25px #c3143280}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:#0000004d;border:2px solid rgba(255,255,255,.1);border-radius:12px;transition:all .3s ease}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item.opened[_ngcontent-%COMP%]{border-color:#667eea80;background:#667eea1a}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]:hover{transform:translate(5px);box-shadow:0 4px 15px #c3143233}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-number[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#c3143233;border:2px solid rgba(195,20,50,.5);display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:1.1rem}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]{flex:1}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem;color:gold;margin:0 0 4px;text-shadow:0 0 10px rgba(255,215,0,.3)}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;margin:0 0 8px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{flex:1;height:12px;background:#00000080;border-radius:6px;overflow:hidden}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .5s ease}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.9rem}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-bonus[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-bonus[_ngcontent-%COMP%]   .bonus-item[_ngcontent-%COMP%]{padding:4px 10px;background:#ffd7001a;border:1px solid rgba(255,215,0,.3);border-radius:6px;color:#ffd700e6;font-size:.85rem}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .status-opened[_ngcontent-%COMP%]{color:#667eea;font-weight:700;font-size:1.1rem}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]{padding:10px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #667eea66}@keyframes _ngcontent-%COMP%_powerFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_realmGlow{0%,to{box-shadow:0 0 20px #ff14934d}50%{box-shadow:0 0 40px #ff149399}}@keyframes _ngcontent-%COMP%_rotateStar{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_skillGlow{0%,to{box-shadow:0 0 15px #ffd70033}50%{box-shadow:0 0 30px #ffd70066}}@keyframes _ngcontent-%COMP%_elixirGlow{0%,to{box-shadow:0 0 15px #ffd70033}50%{box-shadow:0 0 30px #ffd70066}}@keyframes _ngcontent-%COMP%_meridianPulse{0%,to{box-shadow:0 0 15px #667eea4d}50%{box-shadow:0 0 30px #667eea99}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.battle-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;padding:20px;background:#0003;border-radius:12px;margin:16px 0}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:16px 12px;background:linear-gradient(135deg,#667eea33,#764ba233);border:2px solid rgba(102,126,234,.5);border-radius:10px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;gap:6px}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:1.8rem}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:.95rem}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 6px 20px #667eea66}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.5)}.battle-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]{border-color:#ff646480;background:linear-gradient(135deg,#ff646433,#c3143233)}.battle-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ff646466}.battle-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]{border-color:#8a2be280;background:linear-gradient(135deg,#8a2be233,#667eea33)}.battle-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #8a2be266}.battle-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]{border-color:#64c8ff80;background:linear-gradient(135deg,#64c8ff33,#409cff33)}.battle-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #64c8ff66}.battle-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]{border-color:#32cd3280;background:linear-gradient(135deg,#32cd3233,#228b2233)}.battle-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #32cd3266}.martial-skills-section[_ngcontent-%COMP%]{padding:20px;background:#0000004d;border:2px solid rgba(195,20,50,.3);border-radius:12px;margin:16px 0}.martial-skills-section[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]{font-size:1.3rem;color:gold;margin:0 0 16px;text-align:center;text-shadow:0 0 10px rgba(255,215,0,.5)}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]{padding:14px;background:#0006;border:2px solid rgba(255,255,255,.2);border-radius:10px;color:#fff;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;gap:8px;position:relative;overflow:hidden}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,transparent 0%,rgba(255,215,0,.1) 100%);opacity:0;transition:opacity .3s ease}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{opacity:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\d558\\c2b9[_ngcontent-%COMP%] {border-color:#96969666}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c911\\c2b9[_ngcontent-%COMP%] {border-color:#64c8ff66}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c0c1\\c2b9[_ngcontent-%COMP%] {border-color:#8a2be280;box-shadow:0 0 10px #8a2be233}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%] {border-color:#ffd70099;box-shadow:0 0 15px #ffd7004d;animation:_ngcontent-%COMP%_skillPulse 2s ease-in-out infinite}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-4px);box-shadow:0 8px 25px #c3143266}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.7)}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:disabled:after{content:"\\b0b4\\acf5  \\bd80\\c871";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000c;padding:4px 8px;border-radius:4px;font-size:.75rem;color:#ff6464;white-space:nowrap}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;position:relative;z-index:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-chinese[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:gold;text-shadow:0 0 8px rgba(255,215,0,.4)}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-korean[_ngcontent-%COMP%]{font-size:.85rem;color:#fffc}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;padding:4px 8px;background:#c314324d;border-radius:6px;position:relative;z-index:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-icon[_ngcontent-%COMP%]{font-size:1rem}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#ff9696}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;position:relative;z-index:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-icon[_ngcontent-%COMP%]{font-size:1rem}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#ffc864}.internal-power-bar[_ngcontent-%COMP%]{margin-top:8px}.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:4px}.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-weight:600;color:#ff9696;text-shadow:0 0 5px rgba(255,100,100,.5)}.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.85rem;color:#ffffffe6}.internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:12px;background:#00000080;border-radius:6px;overflow:hidden;border:1px solid rgba(255,100,100,.3)}.internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff6b6b,gold,#ff6b6b);background-size:200% 100%;animation:_ngcontent-%COMP%_powerFlow 3s ease-in-out infinite;box-shadow:0 0 10px #ffd70066}@keyframes _ngcontent-%COMP%_skillPulse{0%,to{box-shadow:0 0 10px #ffd70033}50%{box-shadow:0 0 25px #ffd70080}}.epic-battle[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);border-radius:20px;box-shadow:0 30px 80px #0009,inset 0 0 80px #8a2be21a}.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;overflow:hidden}.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]   .battle-particles[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-image:radial-gradient(2px 2px at 20% 30%,rgba(255,255,255,.3),transparent),radial-gradient(2px 2px at 60% 70%,rgba(138,43,226,.3),transparent),radial-gradient(1px 1px at 50% 50%,rgba(255,215,0,.3),transparent),radial-gradient(1px 1px at 80% 10%,rgba(195,20,50,.3),transparent);background-size:200% 200%,180% 180%,220% 220%,190% 190%;animation:_ngcontent-%COMP%_particleFloat 20s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]   .battle-glow[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:radial-gradient(circle at 50% 50%,rgba(138,43,226,.15) 0%,transparent 70%);animation:_ngcontent-%COMP%_glowPulse 4s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]{position:relative;z-index:1;padding:24px 32px;background:linear-gradient(135deg,#8a2be24d,#c314324d);border-bottom:3px solid rgba(255,215,0,.3);display:flex;justify-content:space-between;align-items:center}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#fff;margin:0;display:flex;align-items:center;gap:16px;text-shadow:0 0 20px rgba(255,215,0,.6),0 0 40px rgba(138,43,226,.4);animation:_ngcontent-%COMP%_titlePulse 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .battle-title-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconSpin 3s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 24px;background:#0006;border-radius:12px;border:2px solid rgba(255,215,0,.3)}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-label[_ngcontent-%COMP%]{color:#ffffffb3;font-size:1rem;font-weight:600}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;padding:4px 12px;border-radius:6px;transition:all .3s ease}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value.player-turn[_ngcontent-%COMP%]{color:#64c8ff;background:#64c8ff33;box-shadow:0 0 20px #64c8ff66;animation:_ngcontent-%COMP%_turnGlow 1s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value.enemy-turn[_ngcontent-%COMP%]{color:#ff6464;background:#ff646433;box-shadow:0 0 20px #ff646466;animation:_ngcontent-%COMP%_turnGlow 1s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-arena[_ngcontent-%COMP%]{position:relative;z-index:1;padding:40px 20px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;gap:40px;max-width:1200px;margin:0 auto}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]{flex:1;max-width:400px;position:relative;transition:all .5s cubic-bezier(.68,-.55,.265,1.55)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.active[_ngcontent-%COMP%]{transform:scale(1.05)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.active[_ngcontent-%COMP%]   .character-glow[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_activeGlow 1.5s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shakeDamage .5s ease-in-out}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.attacking[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_attackPulse .8s ease-out}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-glow[_ngcontent-%COMP%]{position:absolute;inset:-20px;background:radial-gradient(circle,rgba(100,200,255,.3) 0%,transparent 70%);border-radius:50%;opacity:0;transition:opacity .5s ease;pointer-events:none}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-glow.enemy-glow[_ngcontent-%COMP%]{background:radial-gradient(circle,rgba(255,100,100,.3) 0%,transparent 70%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e3ce6,#141428e6);border-radius:20px;padding:24px;border:3px solid rgba(100,200,255,.3);box-shadow:0 20px 60px #00000080,inset 0 0 40px #64c8ff0d;position:relative;overflow:hidden}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.05) 50%,transparent 70%);animation:_ngcontent-%COMP%_cardShine 3s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card.enemy-card[_ngcontent-%COMP%]{border-color:#ff64644d;box-shadow:0 20px 60px #00000080,inset 0 0 40px #ff64640d}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;margin:0 auto 16px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]{position:absolute;inset:-10px;border:3px solid rgba(100,200,255,.5);border-radius:50%;animation:_ngcontent-%COMP%_ringRotate 4s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:after{content:"";position:absolute;width:10px;height:10px;background:#64c8ff;border-radius:50%;box-shadow:0 0 15px #64c8ffcc}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:before{top:0;left:50%;transform:translate(-50%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:after{bottom:0;left:50%;transform:translate(-50%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]{border-color:#ff646480}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]:after{background:#ff6464;box-shadow:0 0 15px #ff6464cc}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{font-size:5rem;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:radial-gradient(circle,rgba(138,43,226,.2) 0%,transparent 70%);border-radius:50%;filter:drop-shadow(0 0 20px rgba(138,43,226,.5));animation:_ngcontent-%COMP%_avatarFloat 3s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;background:linear-gradient(135deg,gold,#ff6b6b);color:#fff;font-weight:800;font-size:.9rem;padding:4px 12px;border-radius:20px;box-shadow:0 4px 15px #ffd70066;animation:_ngcontent-%COMP%_badgePulse 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:800;color:#fff;text-align:center;margin-bottom:20px;text-shadow:0 0 10px rgba(100,200,255,.5),0 2px 4px rgba(0,0,0,.5);letter-spacing:2px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%]{font-size:1.2rem;filter:drop-shadow(0 0 5px currentColor)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;margin-left:8px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#ffffffe6}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:16px;background:#0009;border-radius:10px;overflow:hidden;border:2px solid rgba(255,255,255,.2);position:relative;box-shadow:inset 0 2px 8px #00000080}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;position:relative;transition:width .5s cubic-bezier(.68,-.55,.265,1.55)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%]{position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.4) 50%,transparent 100%);animation:_ngcontent-%COMP%_barShine 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff6b6b,#ee5a6f);box-shadow:0 0 15px #ff6b6b80}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hpWarning 1s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hpCritical .5s ease-in-out infinite;box-shadow:0 0 25px #f00c}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#c31432,#8e0000)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#764ba2);box-shadow:0 0 15px #667eea80}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff6b6b,gold,#ff6b6b);background-size:200% 100%;box-shadow:0 0 15px #ffd70099;animation:_ngcontent-%COMP%_powerFlow 3s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:12px;margin-top:16px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px;background:#0000004d;border-radius:10px;border:2px solid rgba(255,255,255,.1)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.3rem;filter:drop-shadow(0 0 5px currentColor)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;color:#fff;text-shadow:0 0 10px rgba(255,255,255,.5)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]{width:100px;height:100px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 0 40px #667eea99,inset 0 0 20px #fff3;animation:_ngcontent-%COMP%_vsRotate 4s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:before{inset:-10px;border:3px dashed rgba(255,215,0,.5);animation:_ngcontent-%COMP%_ringRotate 6s linear infinite reverse}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:after{inset:-20px;border:2px dotted rgba(255,255,255,.3);animation:_ngcontent-%COMP%_ringRotate 8s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:900;color:#fff;text-shadow:0 0 20px rgb(255,215,0),0 0 40px rgba(138,43,226,.8);animation:_ngcontent-%COMP%_vsScale 2s ease-in-out infinite;z-index:1}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:after{content:"\\26a1";position:absolute;font-size:1.5rem;animation:_ngcontent-%COMP%_lightningFlash 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:before{top:-10px;left:50%;transform:translate(-50%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:after{bottom:-10px;left:50%;transform:translate(-50%);animation-delay:1s}.epic-actions[_ngcontent-%COMP%]{position:relative;z-index:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;padding:24px 32px;background:linear-gradient(180deg,#0000004d,#00000080);border-radius:16px;margin:20px 32px;border:2px solid rgba(255,215,0,.2)}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{position:relative;padding:20px 16px;background:linear-gradient(135deg,#667eea4d,#764ba24d);border:3px solid rgba(102,126,234,.6);border-radius:14px;color:#fff;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);display:flex;flex-direction:column;align-items:center;gap:8px;overflow:hidden}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-glow[_ngcontent-%COMP%]{position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.2) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-particles[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:radial-gradient(2px 2px at 20% 30%,rgba(255,255,255,.5),transparent),radial-gradient(2px 2px at 80% 70%,rgba(255,255,255,.5),transparent);background-size:100% 100%;opacity:0;transition:opacity .3s ease}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:2.2rem;filter:drop-shadow(0 0 10px currentColor);transition:transform .3s ease;z-index:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:1px;z-index:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-cost[_ngcontent-%COMP%]{font-size:.85rem;color:#ffffffb3;z-index:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-5px) scale(1.05);box-shadow:0 15px 40px #667eea80}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-glow[_ngcontent-%COMP%]{opacity:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-particles[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_particleRise 2s ease-out infinite}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-3px) scale(1.02)}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.7);transform:scale(.95)}.epic-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]{border-color:#ff646499;background:linear-gradient(135deg,#ff64644d,#c314324d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #ff646499}.epic-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]{border-color:#8a2be299;background:linear-gradient(135deg,#8a2be24d,#667eea4d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #8a2be299}.epic-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]{border-color:#64c8ff99;background:linear-gradient(135deg,#64c8ff4d,#409cff4d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #64c8ff99}.epic-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]{border-color:#32cd3299;background:linear-gradient(135deg,#32cd324d,#228b224d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #32cd3299}.epic-skills[_ngcontent-%COMP%]{position:relative;z-index:1;padding:28px 32px;background:linear-gradient(135deg,#c3143233,#240b364d);border:3px solid rgba(255,215,0,.4);border-radius:16px;margin:20px 32px;box-shadow:0 20px 60px #00000080,inset 0 0 40px #ffd7000d}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]{font-size:1.6rem;color:gold;margin:0 0 8px;display:flex;align-items:center;justify-content:center;gap:16px;text-shadow:0 0 20px rgba(255,215,0,.8),0 0 40px rgba(255,215,0,.4)}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]   .title-decoration[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_decorationPulse 2s ease-in-out infinite}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{letter-spacing:4px}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#ffd700b3;letter-spacing:6px;font-weight:300}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]{position:relative;padding:20px;background:linear-gradient(135deg,#0009,#1e1e3c99);border:3px solid rgba(255,255,255,.2);border-radius:14px;color:#fff;cursor:pointer;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);display:flex;flex-direction:column;gap:12px;overflow:hidden}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-glow[_ngcontent-%COMP%]{position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,215,0,.3) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-particles[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:radial-gradient(1px 1px at 20% 30%,rgba(255,215,0,.6),transparent),radial-gradient(1px 1px at 80% 70%,rgba(255,215,0,.6),transparent),radial-gradient(1px 1px at 50% 50%,rgba(255,215,0,.6),transparent);background-size:100% 100%;opacity:0;transition:opacity .3s ease}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\d558\\c2b9[_ngcontent-%COMP%] {border-color:#96969680}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c911\\c2b9[_ngcontent-%COMP%] {border-color:#64c8ff80;box-shadow:0 0 15px #64c8ff33}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c0c1\\c2b9[_ngcontent-%COMP%] {border-color:#8a2be299;box-shadow:0 0 20px #8a2be24d}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%] {border-color:#ffd700cc;box-shadow:0 0 30px #ffd70080;animation:_ngcontent-%COMP%_epicSkillGlow 2s ease-in-out infinite}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;background:linear-gradient(45deg,#ffd70000,#ffd70080,#ffd70000);border-radius:14px;animation:_ngcontent-%COMP%_borderFlow 3s linear infinite}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-8px) scale(1.05);box-shadow:0 20px 50px #ffd70066}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .skill-glow[_ngcontent-%COMP%]{opacity:1}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .skill-particles[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_particleRise 2s ease-out infinite}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed;filter:grayscale(.8);transform:scale(.95)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:disabled:after{content:"\\b0b4\\acf5  \\bd80\\c871";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000000e6;padding:8px 16px;border-radius:8px;font-size:.85rem;color:#ff6464;font-weight:800;white-space:nowrap;box-shadow:0 0 20px #ff646480;z-index:10}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;position:relative;z-index:1}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-chinese[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:800;color:gold;text-shadow:0 0 15px rgba(255,215,0,.6),0 2px 4px rgba(0,0,0,.5);letter-spacing:2px}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-korean[_ngcontent-%COMP%]{font-size:.95rem;color:#ffffffe6;font-weight:600;letter-spacing:1px}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:12px;position:relative;z-index:1}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:8px;background:linear-gradient(135deg,#c3143266,#8a2be266);border-radius:8px;border:2px solid rgba(195,20,50,.5)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-icon[_ngcontent-%COMP%]{font-size:1.1rem;filter:drop-shadow(0 0 5px currentColor)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:#f99}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:8px;background:linear-gradient(135deg,#ffd7004d,#ff8c004d);border-radius:8px;border:2px solid rgba(255,215,0,.5)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-icon[_ngcontent-%COMP%]{font-size:1.1rem;filter:drop-shadow(0 0 5px currentColor)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:gold}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-grade-label[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:linear-gradient(135deg,#000c,#1e1e3ccc);color:gold;font-size:.75rem;font-weight:800;padding:4px 10px;border-radius:6px;border:1px solid rgba(255,215,0,.5);z-index:1}.epic-log[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:24px;background:linear-gradient(135deg,#0009,#1e1e3c99);border:2px solid rgba(138,43,226,.3);border-radius:14px;max-height:300px;overflow-y:auto;box-shadow:inset 0 0 40px #00000080}.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid rgba(138,43,226,.3)}.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]   .log-icon[_ngcontent-%COMP%]{font-size:1.5rem;filter:drop-shadow(0 0 10px rgba(255,215,0,.5))}.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]   .log-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:gold;text-shadow:0 0 10px rgba(255,215,0,.5);letter-spacing:2px}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#0000004d;border-radius:8px;border-left:4px solid rgba(138,43,226,.5);animation:_ngcontent-%COMP%_logEntrySlide .3s ease-out;transition:all .3s ease}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:hover{background:#00000080;transform:translate(5px)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.9rem;color:#fff;box-shadow:0 4px 15px #667eea66}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{flex:1;color:#ffffffe6;font-size:1rem;line-height:1.5}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]{border-left-color:#ff6464cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#c31432)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:#f99}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]{border-left-color:#32cd32cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#32cd32,#228b22)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:#90ee90}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]{border-left-color:#ffd700cc;animation:_ngcontent-%COMP%_criticalPulse .5s ease-out,_ngcontent-%COMP%_logEntrySlide .3s ease-out}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff6b6b);animation:_ngcontent-%COMP%_criticalShake .5s ease-out}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:gold;font-weight:700}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]{border-left-color:#ff8c00cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff8c00,tomato)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:#ffb347;font-weight:600}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]{border-left-color:#8a2be2cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8a2be2,indigo)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:orchid}.epic-result[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:2000;animation:_ngcontent-%COMP%_resultFadeIn .5s ease-out}.epic-result[_ngcontent-%COMP%]   .result-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000c;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]{position:relative;z-index:1;text-align:center;padding:60px 80px;background:linear-gradient(135deg,#1e1e3cf2,#141428f2);border-radius:30px;border:4px solid rgba(255,215,0,.5);box-shadow:0 40px 100px #000c,inset 0 0 60px #ffd7001a;animation:_ngcontent-%COMP%_resultScale .5s cubic-bezier(.68,-.55,.265,1.55)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:8rem;animation:_ngcontent-%COMP%_iconBounce .8s ease-out,_ngcontent-%COMP%_iconSpin 2s ease-in-out infinite;filter:drop-shadow(0 0 30px rgba(255,215,0,.8));margin-bottom:24px}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-icon.defeat[_ngcontent-%COMP%]{filter:drop-shadow(0 0 30px rgba(255,100,100,.8))}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{font-size:4rem;font-weight:900;color:gold;margin:0 0 16px;text-shadow:0 0 30px rgb(255,215,0),0 0 60px rgba(255,215,0,.5);letter-spacing:8px;animation:_ngcontent-%COMP%_titleBounce .6s cubic-bezier(.68,-.55,.265,1.55)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-title.defeat-title[_ngcontent-%COMP%]{color:#ff6464;text-shadow:0 0 30px rgb(255,100,100),0 0 60px rgba(255,100,100,.5)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-message[_ngcontent-%COMP%]{font-size:1.2rem;color:#fffc;margin:0;animation:_ngcontent-%COMP%_messageFade 1s ease-in-out .5s both}@keyframes _ngcontent-%COMP%_particleFloat{0%,to{background-position:0% 0%,100% 100%,50% 50%,80% 20%}50%{background-position:100% 100%,0% 0%,70% 70%,20% 80%}}@keyframes _ngcontent-%COMP%_glowPulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_titlePulse{0%,to{text-shadow:0 0 20px rgba(255,215,0,.6),0 0 40px rgba(138,43,226,.4)}50%{text-shadow:0 0 30px rgb(255,215,0),0 0 60px rgba(138,43,226,.6)}}@keyframes _ngcontent-%COMP%_iconSpin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_turnGlow{0%,to{box-shadow:0 0 20px currentColor}50%{box-shadow:0 0 40px currentColor}}@keyframes _ngcontent-%COMP%_shakeDamage{0%,to{transform:translate(0) scale(1)}25%{transform:translate(-10px) scale(.98)}75%{transform:translate(10px) scale(.98)}}@keyframes _ngcontent-%COMP%_attackPulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_activeGlow{0%,to{box-shadow:0 0 30px currentColor}50%{box-shadow:0 0 60px currentColor}}@keyframes _ngcontent-%COMP%_cardShine{0%{transform:translate(-100%) translateY(-100%) rotate(45deg)}to{transform:translate(100%) translateY(100%) rotate(45deg)}}@keyframes _ngcontent-%COMP%_ringRotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_avatarFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes _ngcontent-%COMP%_badgePulse{0%,to{transform:scale(1);box-shadow:0 4px 15px #ffd70066}50%{transform:scale(1.1);box-shadow:0 6px 25px #ffd70099}}@keyframes _ngcontent-%COMP%_barShine{0%{left:-100%}to{left:100%}}@keyframes _ngcontent-%COMP%_hpWarning{0%,to{box-shadow:0 0 15px #ff6b6b80}50%{box-shadow:0 0 30px #ff6b6bcc}}@keyframes _ngcontent-%COMP%_hpCritical{0%,to{box-shadow:0 0 25px #f00c}50%{box-shadow:0 0 50px red}}@keyframes _ngcontent-%COMP%_vsRotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_vsScale{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_lightningFlash{0%,to{opacity:0}50%{opacity:1}}@keyframes _ngcontent-%COMP%_particleRise{0%{background-position:0% 0%;opacity:0}50%{opacity:1}to{background-position:0% -100%;opacity:0}}@keyframes _ngcontent-%COMP%_epicSkillGlow{0%,to{box-shadow:0 0 30px #ffd70080}50%{box-shadow:0 0 50px #ffd700cc}}@keyframes _ngcontent-%COMP%_borderFlow{0%{background-position:0% 50%}to{background-position:200% 50%}}@keyframes _ngcontent-%COMP%_decorationPulse{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_logEntrySlide{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_criticalPulse{0%,to{background:#0000004d}50%{background:#ffd70033}}@keyframes _ngcontent-%COMP%_criticalShake{0%,to{transform:rotate(0)}25%{transform:rotate(-5deg)}75%{transform:rotate(5deg)}}@keyframes _ngcontent-%COMP%_resultFadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_resultScale{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_iconBounce{0%{transform:translateY(-100px) scale(0)}60%{transform:translateY(10px) scale(1.1)}80%{transform:translateY(-5px) scale(.95)}to{transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_titleBounce{0%{transform:scale(0)}60%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_messageFade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.epic-log-compact[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:16px;background:linear-gradient(135deg,#00000080,#1e1e3c80);border:2px solid rgba(138,43,226,.2);border-radius:14px;min-height:100px;max-height:120px;overflow:hidden;box-shadow:inset 0 0 30px #0006}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-start}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;gap:6px;padding:8px 12px;background:#0006;border-radius:20px;border:2px solid rgba(138,43,226,.4);animation:_ngcontent-%COMP%_bubblePop .3s cubic-bezier(.68,-.55,.265,1.55);transition:all .3s ease;cursor:pointer}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]:hover{transform:scale(1.1);z-index:10;box-shadow:0 8px 25px #8a2be280}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.player[_ngcontent-%COMP%]{border-color:#64c8ff80;background:linear-gradient(135deg,#64c8ff26,#409cff26)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.player[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #64c8ff80}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.enemy[_ngcontent-%COMP%]{border-color:#ff646480;background:linear-gradient(135deg,#ff646426,#c3143226)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.enemy[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #ff646480}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.damage[_ngcontent-%COMP%]{border-color:#ff646499;animation:_ngcontent-%COMP%_damageBubble .5s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.heal[_ngcontent-%COMP%]{border-color:#32cd3299;animation:_ngcontent-%COMP%_healBubble .5s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]{border-color:#ffd700cc;border-width:3px;animation:_ngcontent-%COMP%_criticalBubble .6s cubic-bezier(.68,-.55,.265,1.55);box-shadow:0 0 20px #ffd70099}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_criticalBounce .6s ease-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.combo[_ngcontent-%COMP%]{border-color:#ff8c0099;animation:_ngcontent-%COMP%_comboBubble .5s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.special[_ngcontent-%COMP%]{border-color:#8a2be299;background:linear-gradient(135deg,#8a2be233,#667eea33);animation:_ngcontent-%COMP%_specialBubble .7s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.special[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_specialFloat 2s ease-in-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%]{font-size:1.4rem;filter:drop-shadow(0 0 8px currentColor);flex-shrink:0;animation:_ngcontent-%COMP%_iconPulse 2s ease-in-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-weight:700;white-space:nowrap}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{font-size:1.1rem;color:#fff;font-weight:900;text-shadow:0 0 10px currentColor,0 2px 4px rgba(0,0,0,.5)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]   .log-label[_ngcontent-%COMP%]{font-size:.75rem;color:#fffc;text-transform:uppercase;letter-spacing:1px;font-weight:800}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.damage[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:#ff6b6b;text-shadow:0 0 15px rgba(255,107,107,.8),0 2px 4px rgba(0,0,0,.5)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.heal[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:#32cd32;text-shadow:0 0 15px rgba(50,205,50,.8),0 2px 4px rgba(0,0,0,.5)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:gold;font-size:1.3rem;text-shadow:0 0 20px rgb(255,215,0),0 2px 4px rgba(0,0,0,.5);animation:_ngcontent-%COMP%_criticalTextGlow .5s ease-in-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.combo[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:#ff8c00;text-shadow:0 0 15px rgba(255,140,0,.8),0 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_bubblePop{0%{transform:scale(0);opacity:0}70%{transform:scale(1.15)}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_damageBubble{0%,to{transform:scale(1)}25%{transform:scale(1.1) rotate(-3deg)}75%{transform:scale(1.1) rotate(3deg)}}@keyframes _ngcontent-%COMP%_healBubble{0%{transform:scale(.8) translateY(10px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_criticalBubble{0%{transform:scale(.5) rotate(-10deg);opacity:0}50%{transform:scale(1.2) rotate(5deg)}to{transform:scale(1) rotate(0);opacity:1}}@keyframes _ngcontent-%COMP%_comboBubble{0%,to{transform:scale(1)}50%{transform:scale(1.15)}}@keyframes _ngcontent-%COMP%_specialBubble{0%{transform:scale(0) rotate(0);opacity:0}to{transform:scale(1) rotate(360deg);opacity:1}}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_criticalBounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-5px) scale(1.2)}}@keyframes _ngcontent-%COMP%_specialFloat{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-3px) rotate(15deg)}}@keyframes _ngcontent-%COMP%_criticalTextGlow{0%,to{text-shadow:0 0 20px rgb(255,215,0),0 2px 4px rgba(0,0,0,.5)}50%{text-shadow:0 0 30px rgb(255,215,0),0 0 50px rgba(255,215,0,.5),0 2px 4px rgba(0,0,0,.5)}}.text-only-log[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:16px 20px;background:linear-gradient(135deg,#000000b3,#141428b3);border:2px solid rgba(138,43,226,.3);border-radius:12px;min-height:120px;max-height:180px;overflow-y:auto;box-shadow:inset 0 0 30px #00000080,0 4px 20px #0000004d}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000004d;border-radius:4px}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8a2be280;border-radius:4px}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8a2be2b3}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{padding:10px 16px;background:#0000004d;border-radius:8px;border-left:3px solid rgba(138,43,226,.5);color:#ffffffe6;font-size:.95rem;line-height:1.5;animation:_ngcontent-%COMP%_textSlideIn .3s ease-out;transition:all .2s ease}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]:hover{background:#00000080;transform:translate(5px);border-left-color:#8a2be2cc}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.damage[_ngcontent-%COMP%]{border-left-color:#ff6464b3;color:#ffb3b3}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.damage[_ngcontent-%COMP%]:hover{background:#ff64641a;border-left-color:#ff6464}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.heal[_ngcontent-%COMP%]{border-left-color:#32cd32b3;color:#b3ffb3}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.heal[_ngcontent-%COMP%]:hover{background:#32cd321a;border-left-color:#32cd32}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.critical[_ngcontent-%COMP%]{border-left-color:#ffd700e6;border-left-width:5px;color:#ffe680;font-weight:700;background:#ffd7000d;box-shadow:0 0 15px #ffd70033;animation:_ngcontent-%COMP%_criticalTextPulse .5s ease-out,_ngcontent-%COMP%_textSlideIn .3s ease-out}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.critical[_ngcontent-%COMP%]:hover{background:#ffd70026;box-shadow:0 0 25px #ffd70066;border-left-color:gold}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.combo[_ngcontent-%COMP%]{border-left-color:#ff8c00b3;color:#fc9;font-weight:600}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.combo[_ngcontent-%COMP%]:hover{background:#ff8c001a;border-left-color:#ff8c00}@keyframes _ngcontent-%COMP%_textSlideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_criticalTextPulse{0%{background:#ffd7000d;box-shadow:0 0 15px #ffd70033}50%{background:#ffd70026;box-shadow:0 0 30px #ffd70080}to{background:#ffd7000d;box-shadow:0 0 15px #ffd70033}}.battle-text-choices[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:20px 24px;background:linear-gradient(135deg,#0009,#14142899);border:2px solid rgba(138,43,226,.3);border-radius:12px;box-shadow:inset 0 0 30px #0006,0 4px 20px #0000004d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]{padding:12px 20px;margin-bottom:10px;background:#0000004d;border-left:4px solid rgba(138,43,226,.6);border-radius:8px;color:#ffffffe6;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover:not(.disabled){background:#8a2be233;border-left-color:#8a2be2;transform:translate(8px);color:#fff;box-shadow:0 4px 15px #8a2be24d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:active:not(.disabled){transform:translate(12px);background:#8a2be24d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:not-allowed;color:#ffffff80;border-left-color:#64646480}.battle-text-choices[_ngcontent-%COMP%]   .choice-item.disabled[_ngcontent-%COMP%]:hover{transform:none;background:#0000004d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%]{margin-left:auto;font-size:.85rem;color:#ffc864cc;font-weight:500}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%]{padding:2px 8px;background:#64c8ff33;border:1px solid rgba(100,200,255,.5);border-radius:4px;font-size:.75rem;font-weight:700;color:#64c8ff}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-grade.grade-\\c808\\d559[_ngcontent-%COMP%] {background:#ffd70033;border-color:#ffd700cc;color:gold;box-shadow:0 0 10px #ffd7004d;animation:_ngcontent-%COMP%_gradePulse 2s ease-in-out infinite}.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid rgba(138,43,226,.3)}.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]{border-left-color:#ffd70099}.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover:not(.disabled){border-left-color:gold;background:#ffd70026;box-shadow:0 4px 15px #ffd7004d}@keyframes _ngcontent-%COMP%_gradePulse{0%,to{box-shadow:0 0 10px #ffd7004d}50%{box-shadow:0 0 20px #ffd70099}}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:#6464644d}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:#6464644d}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%]{margin-left:8px;font-size:.85rem;color:#ffc864e6;font-weight:500}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%]{margin-left:8px;padding:2px 8px;background:#64c8ff4d;border:1px solid rgba(100,200,255,.6);border-radius:4px;font-size:.75rem;font-weight:700;color:#64c8ff}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade.grade-\\c808\\d559[_ngcontent-%COMP%] {background:#ffd7004d;border-color:#ffd700e6;color:gold;box-shadow:0 0 10px #ffd70066;animation:_ngcontent-%COMP%_gradeGlow 2s ease-in-out infinite}.battle-choices[_ngcontent-%COMP%]   .martial-skill-choice[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]{border-left-color:#ffd70099}.battle-choices[_ngcontent-%COMP%]   .martial-skill-choice[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:hover:not(:disabled){border-left-color:gold;background:#ffd7001a}@keyframes _ngcontent-%COMP%_gradeGlow{0%,to{box-shadow:0 0 10px #ffd70066}50%{box-shadow:0 0 20px #ffd700b3}}.flat-battle[_ngcontent-%COMP%]{margin:30px 0;padding:0;background:transparent;border:none;box-shadow:none}.flat-battle[_ngcontent-%COMP%]   .battle-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid rgba(150,150,150,.3)}.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:400;color:#000c;margin:0 0 10px;letter-spacing:8px}.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%]{font-size:.95rem;color:#646464cc;font-style:italic;margin:0}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:30px;align-items:start}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]{background:#fafafacc;border:1px solid rgba(200,200,200,.4);border-radius:4px;padding:20px;transition:all .3s ease}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant.active-turn[_ngcontent-%COMP%]{border-color:#64646499;box-shadow:0 2px 8px #0000001a}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(200,200,200,.3)}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#000000d9;margin:0}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%]{font-size:.75rem;color:#646464b3;padding:2px 8px;background:#c8c8c84d;border-radius:3px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row.compact[_ngcontent-%COMP%]{margin-top:8px;padding-top:12px;border-top:1px solid rgba(200,200,200,.2)}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:#646464cc;min-width:40px;font-weight:500}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:10px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#dcdcdc99;border-radius:4px;overflow:hidden}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.hp[_ngcontent-%COMP%]{background:#e57373}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.hp.low[_ngcontent-%COMP%]{background:#ef5350}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.enemy-hp[_ngcontent-%COMP%]{background:#ba68c8}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.enemy-hp.low[_ngcontent-%COMP%]{background:#ab47bc}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.mp[_ngcontent-%COMP%]{background:#64b5f6}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.internal[_ngcontent-%COMP%]{background:#ffb74d}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:.8rem;color:#646464cc;min-width:60px;text-align:right;font-variant-numeric:tabular-nums}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value-inline[_ngcontent-%COMP%]{font-size:.85rem;color:#323232e6;font-weight:600;font-variant-numeric:tabular-nums}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-separator[_ngcontent-%COMP%]{color:#96969680;margin:0 6px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%]{font-size:.9rem;font-weight:300;color:#96969699;text-align:center;padding-top:50px;letter-spacing:2px}.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{background:#1e232d;border-color:#3a3a3a;box-shadow:0 2px 8px #0000004d}.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e8e8e8}.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]{background:#282d37;border-color:var(--accent-primary)}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]{border-bottom-color:#6464644d}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ffffffe6}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%]{color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]{background:#1e1e1ecc;border-color:#64646466}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant.active-turn[_ngcontent-%COMP%]{border-color:#96969699;box-shadow:0 2px 8px #0000004d}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]{border-bottom-color:#6464644d}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ffffffe6}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%]{background:#6464644d;color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row.compact[_ngcontent-%COMP%]{border-top-color:#64646433}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{background:#3c3c3c99}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value-inline[_ngcontent-%COMP%]{color:#dcdcdce6}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-separator[_ngcontent-%COMP%]{color:#64646480}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%]{color:#96969680}']})};function tc(i,e){if(i&1&&(r(0,"div",14),c(1),a()),i&2){let t=g();s(),b(" \u26A0\uFE0F ",t.errorMessage," ")}}var jt=class i{constructor(e,t){this.authService=e;this.router=t}username="";password="";errorMessage="";ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/novel"])}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="\uC0AC\uC6A9\uC790 \uC774\uB984\uACFC \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.authService.login(this.username,this.password)?(console.log("\uB85C\uADF8\uC778 \uC131\uACF5:",this.username),this.router.navigate(["/novel"])):(this.errorMessage="\uC0AC\uC6A9\uC790 \uC774\uB984 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.password="")}onKeyPress(e){e.key==="Enter"&&this.onLogin()}static \u0275fac=function(t){return new(t||i)(N(Z),N(rt))};static \u0275cmp=Y({type:i,selectors:[["app-novel-login"]],standalone:!1,decls:32,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"login-form"],[1,"login-header"],[1,"subtitle"],[1,"form-group"],["for","username"],["type","text","id","username","placeholder","\uC0AC\uC6A9\uC790 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","username",3,"ngModelChange","keypress","ngModel"],["for","password"],["type","password","id","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password",3,"ngModelChange","keypress","ngModel"],["class","error-message",4,"ngIf"],[1,"login-btn",3,"click"],[1,"background-animation"],[1,"floating-book"],[1,"error-message"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),c(5,"\u{1F4D6} \uC18C\uC124 \uB77C\uC774\uBE0C\uB7EC\uB9AC"),a(),r(6,"h2"),c(7,"\uB85C\uADF8\uC778"),a(),r(8,"p",4),c(9,"\uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uC138\uACC4\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4"),a()(),r(10,"div",5)(11,"label",6),c(12,"\uC0AC\uC6A9\uC790 \uC774\uB984"),a(),r(13,"input",7),it("ngModelChange",function(l){return ot(n.username,l)||(n.username=l),l}),C("keypress",function(l){return n.onKeyPress(l)}),a()(),r(14,"div",5)(15,"label",8),c(16,"\uBE44\uBC00\uBC88\uD638"),a(),r(17,"input",9),it("ngModelChange",function(l){return ot(n.password,l)||(n.password=l),l}),C("keypress",function(l){return n.onKeyPress(l)}),a()(),P(18,tc,2,1,"div",10),r(19,"button",11),C("click",function(){return n.onLogin()}),c(20," \u{1F510} \uB85C\uADF8\uC778 "),a()()(),r(21,"div",12)(22,"div",13),c(23,"\u{1F4D6}"),a(),r(24,"div",13),c(25,"\u{1F4DA}"),a(),r(26,"div",13),c(27,"\u2728"),a(),r(28,"div",13),c(29,"\u{1F3AD}"),a(),r(30,"div",13),c(31,"\u2694\uFE0F"),a()()()),t&2&&(s(13),nt("ngModel",n.username),s(4),nt("ngModel",n.password),s(),p("ngIf",n.errorMessage))},dependencies:[yt,wt,St,Dt],styles:[".login-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);overflow:hidden}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:48px;width:90%;max-width:480px;box-shadow:0 20px 60px #0000004d;position:relative;z-index:10;animation:_ngcontent-%COMP%_slideIn .5s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:36px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:8px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin-bottom:8px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;font-weight:400}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.95rem;font-weight:600;color:#374151;margin-bottom:8px}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;font-size:1rem;border:2px solid #e5e7eb;border-radius:12px;transition:all .3s ease;box-sizing:border-box}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 4px #667eea1a}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.login-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;padding:12px 16px;border-radius:8px;font-size:.9rem;margin-bottom:20px;border-left:4px solid #dc2626;animation:_ngcontent-%COMP%_shake .3s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.login-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background:#d1fae5;color:#059669;padding:12px 16px;border-radius:8px;font-size:.9rem;margin-bottom:20px;border-left:4px solid #059669;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:1.1rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover, .login-container[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #667eea66}.login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:active, .login-container[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#6b7280}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;cursor:pointer;text-decoration:none;transition:all .2s ease}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]{margin-top:30px;padding-top:24px;border-top:2px solid #e5e7eb}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]   .demo-title[_ngcontent-%COMP%]{text-align:center;font-size:.85rem;font-weight:600;color:#6b7280;margin-bottom:12px;text-transform:uppercase;letter-spacing:.5px}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]   .demo-account[_ngcontent-%COMP%]{background:#f3f4f6;padding:10px 16px;border-radius:8px;margin-bottom:8px;text-align:center;font-size:.9rem;color:#374151;font-family:Courier New,monospace}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]   .demo-account[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]{position:absolute;font-size:3rem;opacity:.15;animation:_ngcontent-%COMP%_float 20s infinite ease-in-out}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(1){top:10%;left:10%;animation-delay:0s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(2){top:20%;right:15%;animation-delay:2s;animation-duration:25s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(3){bottom:15%;left:20%;animation-delay:4s;animation-duration:22s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(4){bottom:25%;right:10%;animation-delay:6s;animation-duration:28s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(5){top:50%;left:5%;animation-delay:8s;animation-duration:24s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-30px) rotate(5deg)}50%{transform:translateY(0) rotate(0)}75%{transform:translateY(30px) rotate(-5deg)}}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:32px 24px;width:95%}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var Ct=class i{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){return this.authService.isLoggedIn()?!0:(console.warn("\uC778\uC99D\uB418\uC9C0 \uC54A\uC740 \uC811\uADFC \uC2DC\uB3C4:",t.url),this.router.navigate(["/novel/login"]),!1)}static \u0275fac=function(t){return new(t||i)(st(Z),st(rt))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var ec=[{path:"login",component:jt},{path:"",component:mt,canActivate:[Ct]},{path:":gameId",component:mt,canActivate:[Ct]}],qt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=X({type:i});static \u0275inj=W({imports:[ne.forChild(ec),ne]})};var Ln=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=X({type:i});static \u0275inj=W({imports:[kt,on,qt,an,cn,rn,sn,Bt,mn,ln,Tt,gn,It,pn,Gn]})};export{Ln as NovelModule};
