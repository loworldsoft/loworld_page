import{c as qt}from"./chunk-LXM2H4CY.js";import{a as an}from"./chunk-QYDIUQ2O.js";import{a as Jt,b as en,c as tn,d as nn}from"./chunk-A7ALF5PU.js";import{d as Ut}from"./chunk-3AFCMRBG.js";import"./chunk-H5DYRQHK.js";import{d as Qt}from"./chunk-XTC3VQ76.js";import"./chunk-G2ORSPSH.js";import{c as Xt}from"./chunk-W6GIRAK2.js";import{a as on,b as rn}from"./chunk-R2H4B67A.js";import{k as jt,m as Ht,n as Se,o as Zt}from"./chunk-CUTTAL6N.js";import{I as Ft,K as Vt,L as zt,a as At,aa as Lt,b as Nt,ba as $t,c as ke,da as Wt,e as ce,ea as Yt,ga as Kt,h as Rt,i as W,l as Gt}from"./chunk-J3RFNY3B.js";import{c as Bt}from"./chunk-CZLCOE6K.js";import"./chunk-VQW7A4PH.js";import{$ as ee,A as Oe,E as ye,H as we,U as It,Z as Tt,ba as Ze,c as xe,d as Me,e as J,i as St,m as Dt,s as Z,u as Et}from"./chunk-F7C2LCNM.js";import{Ac as yt,B as mt,Ba as bt,C as $e,Cc as wt,Ea as He,F as K,J as ht,Mb as _,Nb as r,Ob as a,Pb as z,Pc as Pe,Tb as M,U as ut,Uc as Xe,V as Ct,Vc as kt,W as Ce,Xb as h,Y as vt,Yb as p,ac as We,ba as B,bb as l,bc as Ye,ca as H,cc as Ke,d as x,e as Q,ea as ne,eb as qe,fa as oe,g as Le,ga as k,gb as T,hc as $,ib as Pt,ic as E,j as D,k as ue,kc as ie,l as _t,la as u,lc as s,ma as C,mc as f,nb as U,nc as P,ob as q,oc as R,p as F,pa as ft,pb as ve,pc as Mt,qa as je,rc as re,sb as v,sc as ae,t as j,tc as se,ub as X,vb as fe,wa as Ue,wb as xt,wc as be,zc as Ot}from"./chunk-GLJNWZ2D.js";var sn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=q({type:i});static \u0275inj=H({imports:[Lt,$t]})}return i})();function Pn(i){let t=i.cloneNode(!0),e=t.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return n==="canvas"?dn(i,t):(n==="input"||n==="select"||n==="textarea")&&ln(i,t),cn("canvas",i,t,dn),cn("input, textarea, select",i,t,ln),t}function cn(i,t,e,n){let o=t.querySelectorAll(i);if(o.length){let c=e.querySelectorAll(i);for(let d=0;d<o.length;d++)n(o[d],c[d])}}var Gn=0;function ln(i,t){t.type!=="file"&&(t.value=i.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Gn++}`)}function dn(i,t){let e=t.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch{}}function at(i){let t=i.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function et(i,t,e){let{top:n,bottom:o,left:c,right:d}=i;return e>=n&&e<=o&&t>=c&&t<=d}function Fn(i,t){let e=t.left<i.left,n=t.left+t.width>i.right,o=t.top<i.top,c=t.top+t.height>i.bottom;return e||n||o||c}function ge(i,t,e){i.top+=t,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function gn(i,t,e,n){let{top:o,right:c,bottom:d,left:g,width:m,height:b}=i,O=m*t,w=b*t;return n>o-w&&n<d+w&&e>g-O&&e<c+O}var De=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:at(e)})})}handleScroll(t){let e=ce(t),n=this.positions.get(e);if(!n)return null;let o=n.scrollPosition,c,d;if(e===this._document){let b=this.getViewportScrollPosition();c=b.top,d=b.left}else c=e.scrollTop,d=e.scrollLeft;let g=o.top-c,m=o.left-d;return this.positions.forEach((b,O)=>{b.clientRect&&e!==O&&e.contains(O)&&ge(b.clientRect,g,m)}),o.top=c,o.left=d,{top:g,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function xn(i,t){let e=i.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let n=t.createElement("div");return e.forEach(o=>n.appendChild(o)),n}function st(i,t,e){for(let n in t)if(t.hasOwnProperty(n)){let o=t[n];o?i.setProperty(n,o,e?.has(n)?"important":""):i.removeProperty(n)}return i}function te(i,t){let e=t?"":"none";st(i.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function pn(i,t,e){st(i.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Ee(i,t){return t&&t!="none"?i+" "+t:i}function _n(i,t){i.style.width=`${t.width}px`,i.style.height=`${t.height}px`,i.style.transform=pe(t.left,t.top)}function pe(i,t){return`translate3d(${Math.round(i)}px, ${Math.round(t)}px, 0)`}function mn(i){let t=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*t}function Vn(i){let t=getComputedStyle(i),e=Qe(t,"transition-property"),n=e.find(g=>g==="transform"||g==="all");if(!n)return 0;let o=e.indexOf(n),c=Qe(t,"transition-duration"),d=Qe(t,"transition-delay");return mn(c[o])+mn(d[o])}function Qe(i,t){return i.getPropertyValue(t).split(",").map(n=>n.trim())}var zn=new Set(["position"]),tt=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,n,o,c,d,g,m,b,O){this._document=t,this._rootElement=e,this._direction=n,this._initialDomRect=o,this._previewTemplate=c,this._previewClass=d,this._pickupPositionOnPage=g,this._initialTransform=m,this._zIndex=b,this._renderer=O}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),hn(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return Vn(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,n=t?t.template:null,o;if(n&&t){let c=t.matchSize?this._initialDomRect:null,d=t.viewContainer.createEmbeddedView(n,t.context);d.detectChanges(),o=xn(d,this._document),this._previewEmbeddedView=d,t.matchSize?_n(o,c):o.style.transform=pe(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=Pn(this._rootElement),_n(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return st(o.style,{"pointer-events":"none",margin:hn(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},zn),te(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(c=>o.classList.add(c)):o.classList.add(e)),o}};function hn(i){return"showPopover"in i}var Ln={passive:!0},un={passive:!1},$n={passive:!1,capture:!0},jn=800,Cn=new Set(["position"]),nt=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Ue(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new D;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Q.EMPTY;_pointerUpSubscription=Q.EMPTY;_scrollSubscription=Q.EMPTY;_resizeSubscription=Q.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>te(e,t)))}_disabled=!1;beforeStarted=new D;started=new D;released=new D;ended=new D;entered=new D;exited=new D;dropped=new D;moved=this._moveEvents;data;constrainPosition;constructor(t,e,n,o,c,d,g){this._config=e,this._document=n,this._ngZone=o,this._viewportRuler=c,this._dragDropRegistry=d,this._renderer=g,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new De(n),d.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(n=>W(n)),this._handles.forEach(n=>te(n,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=W(t);if(e!==this._rootElement){this._removeRootElementListeners();let n=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[n.listen(e,"mousedown",this._pointerDown,un),n.listen(e,"touchstart",this._pointerDown,Ln),n.listen(e,"dragstart",this._nativeDragStart,un)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?W(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Fn(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let t=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),n=0,o=0;e.left<t.left?n=t.left-e.left:e.right>t.right&&(n=t.right-e.right),e.top<t.top?o=t.top-e.top:e.bottom>t.bottom&&(o=t.bottom-e.bottom);let c=this._activeTransform.x,d=this._activeTransform.y,g=c+n,m=d+o;this._rootElement.style.transform=pe(g,m),this._activeTransform={x:g,y:m},this._passiveTransform={x:g,y:m}}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),te(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),te(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let o=Math.abs(e.x-this._pickupPositionOnPage.x),c=Math.abs(e.y-this._pickupPositionOnPage.y);if(o+c>=this._config.dragStartThreshold){let g=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),m=this._dropContainer;if(!g){this._endDragSequence(t);return}(!m||!m.isDragging()&&!m.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let n=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,e);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,c=this._activeTransform;c.x=n.x-o.x+this._passiveTransform.x,c.y=n.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(c.x,c.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:t,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){le(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),n=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",Un,$n)}),n){let o=this._rootElement,c=o.parentNode,d=this._placeholder=this._createPlaceholderElement(),g=this._anchor=this._anchor||this._document.createComment("");c.insertBefore(g,o),this._initialTransform=o.style.transform||"",this._preview=new tt(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(c,e)),pn(o,!1,Cn),this._document.body.appendChild(c.replaceChild(d,o)),this.started.next({source:this,event:t}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let n=this.isDragging(),o=le(e),c=!o&&e.button!==0,d=this._rootElement,g=ce(e),m=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+jn>Date.now(),b=o?Nt(e):At(e);if(g&&g.draggable&&e.type==="mousedown"&&e.preventDefault(),n||c||m||b)return;if(this._handles.length){let I=d.style;this._rootElementTapHighlight=I.webkitTapHighlightColor||"",I.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(I=>this._updateOnScroll(I)),this._boundaryElement&&(this._boundaryRect=at(this._boundaryElement));let O=this._previewTemplate;this._pickupPositionInElement=O&&O.template&&!O.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let w=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:w.x,y:w.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){pn(this._rootElement,!0,Cn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,n=e.getItemIndex(this),o=this._getPointerPositionOnPage(t),c=this._getDragDistance(o),d=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:c,dropPoint:o,event:t}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:d,distance:c,dropPoint:o,event:t}),e.drop(this,n,this._initialIndex,this._initialContainer,d,c,o,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:n,y:o}){let c=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=c,this._dropContainer.enter(this,t,e,c===this._initialContainer&&c.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:c,currentIndex:c.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{let o=g=>{(!g||this._preview&&ce(g)===this._preview.element&&g.propertyName==="transform")&&(d(),n(),clearTimeout(c))},c=setTimeout(o,e*1.5),d=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),n=xn(this._placeholderRef,this._document)):n=Pn(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e,n){let o=e===this._rootElement?null:e,c=o?o.getBoundingClientRect():t,d=le(n)?n.targetTouches[0]:n,g=this._getViewportScrollPosition(),m=d.pageX-c.left-g.left,b=d.pageY-c.top-g.top;return{x:c.left-t.left+m,y:c.top-t.top+b}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),n=le(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=n.pageX-e.left,c=n.pageY-e.top;if(this._ownerSVGElement){let d=this._ownerSVGElement.getScreenCTM();if(d){let g=this._ownerSVGElement.createSVGPoint();return g.x=o,g.y=c,g.matrixTransform(d.inverse())}}return{x:o,y:c}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:n,y:o}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:c,y:d}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,g=this._boundaryRect,{width:m,height:b}=this._getPreviewRect(),O=g.top+d,w=g.bottom-(b-d),I=g.left+c,S=g.right-(m-c);n=vn(n,I,S),o=vn(o,O,w)}return{x:n,y:o}}_updatePointerDirectionDelta(t){let{x:e,y:n}=t,o=this._pointerDirectionDelta,c=this._pointerPositionAtLastDirectionChange,d=Math.abs(e-c.x),g=Math.abs(n-c.y);return d>this._config.pointerDirectionChangeThreshold&&(o.x=e>c.x?1:-1,c.x=e),g>this._config.pointerDirectionChangeThreshold&&(o.y=n>c.y?1:-1,c.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,te(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let n=1/this.scale,o=pe(t*n,e*n),c=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=c.transform&&c.transform!="none"?c.transform:""),c.transform=Ee(o,this._initialTransform)}_applyPreviewTransform(t,e){let n=this._previewTemplate?.template?void 0:this._initialTransform,o=pe(t,e);this._preview.setTransform(Ee(o,n))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||n.width===0&&n.height===0)return;let c=o.left-n.left,d=n.right-o.right,g=o.top-n.top,m=n.bottom-o.bottom;o.width>n.width?(c>0&&(t+=c),d>0&&(t-=d)):t=0,o.height>n.height?(g>0&&(e+=g),m>0&&(e-=m)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:le(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let n=ce(t);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&ge(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=ke(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let n=this._previewContainer||"global";if(n==="parent")return t;if(n==="global"){let o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return W(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function vn(i,t,e){return Math.max(t,Math.min(e,i))}function le(i){return i.type[0]==="t"}function Un(i){i.preventDefault()}function Mn(i,t,e){let n=fn(t,i.length-1),o=fn(e,i.length-1);if(n===o)return;let c=i[n],d=o<n?-1:1;for(let g=n;g!==o;g+=d)i[g]=i[g+d];i[o]=c}function fn(i,t){return Math.max(0,Math.min(t,i))}var Ie=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,n,o){let c=this._itemPositions,d=this._getItemIndexFromPointerPosition(t,e,n,o);if(d===-1&&c.length>0)return null;let g=this.orientation==="horizontal",m=c.findIndex(N=>N.drag===t),b=c[d],O=c[m].clientRect,w=b.clientRect,I=m>d?1:-1,S=this._getItemOffsetPx(O,w,I),A=this._getSiblingOffsetPx(m,c,I),he=c.slice();return Mn(c,m,d),c.forEach((N,y)=>{if(he[y]===N)return;let dt=N.drag===t,ze=dt?S:A,gt=dt?t.getPlaceholderElement():N.drag.getRootElement();N.offset+=ze;let pt=Math.round(N.offset*(1/N.drag.scale));g?(gt.style.transform=Ee(`translate3d(${pt}px, 0, 0)`,N.initialTransform),ge(N.clientRect,0,ze)):(gt.style.transform=Ee(`translate3d(0, ${pt}px, 0)`,N.initialTransform),ge(N.clientRect,ze,0))}),this._previousSwap.overlaps=et(w,e,n),this._previousSwap.drag=b.drag,this._previousSwap.delta=g?o.x:o.y,{previousIndex:m,currentIndex:d}}enter(t,e,n,o){let c=o==null||o<0?this._getItemIndexFromPointerPosition(t,e,n):o,d=this._activeDraggables,g=d.indexOf(t),m=t.getPlaceholderElement(),b=d[c];if(b===t&&(b=d[c+1]),!b&&(c==null||c===-1||c<d.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(b=d[0]),g>-1&&d.splice(g,1),b&&!this._dragDropRegistry.isDragging(b)){let O=b.getRootElement();O.parentElement.insertBefore(m,O),d.splice(c,0,t)}else this._element.appendChild(m),d.push(t);m.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let n=this._itemPositions.find(o=>o.drag===t)?.initialTransform;e.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:n})=>{ge(n,t,e)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:at(n)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_getItemOffsetPx(t,e,n){let o=this.orientation==="horizontal",c=o?e.left-t.left:e.top-t.top;return n===-1&&(c+=o?e.width-t.width:e.height-t.height),c}_getSiblingOffsetPx(t,e,n){let o=this.orientation==="horizontal",c=e[t].clientRect,d=e[t+n*-1],g=c[o?"width":"height"]*n;if(d){let m=o?"left":"top",b=o?"right":"bottom";n===-1?g-=d.clientRect[m]-c[b]:g+=c[m]-d.clientRect[b]}return g}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let n=this._itemPositions,o=this.orientation==="horizontal";if(n[0].drag!==this._activeDraggables[0]){let d=n[n.length-1].clientRect;return o?t>=d.right:e>=d.bottom}else{let d=n[0].clientRect;return o?t<=d.left:e<=d.top}}_getItemIndexFromPointerPosition(t,e,n,o){let c=this.orientation==="horizontal",d=this._itemPositions.findIndex(({drag:g,clientRect:m})=>{if(g===t)return!1;if(o){let b=c?o.x:o.y;if(g===this._previousSwap.drag&&this._previousSwap.overlaps&&b===this._previousSwap.delta)return!1}return c?e>=Math.floor(m.left)&&e<Math.floor(m.right):n>=Math.floor(m.top)&&n<Math.floor(m.bottom)});return d===-1||!this._sortPredicate(d,t)?-1:d}},ot=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let n=0;n<e.length;n++){let o=e[n];this._relatedNodes.push([o,o.nextSibling])}this.withItems(t)}sort(t,e,n,o){let c=this._getItemIndexFromPointerPosition(t,e,n),d=this._previousSwap;if(c===-1||this._activeItems[c]===t)return null;let g=this._activeItems[c];if(d.drag===g&&d.overlaps&&d.deltaX===o.x&&d.deltaY===o.y)return null;let m=this.getItemIndex(t),b=t.getPlaceholderElement(),O=g.getRootElement();c>m?O.after(b):O.before(b),Mn(this._activeItems,m,c);let w=this._getRootNode().elementFromPoint(e,n);return d.deltaX=o.x,d.deltaY=o.y,d.drag=g,d.overlaps=O===w||O.contains(w),{previousIndex:m,currentIndex:c}}enter(t,e,n,o){let c=o==null||o<0?this._getItemIndexFromPointerPosition(t,e,n):o;c===-1&&(c=this._getClosestItemIndexToPointer(t,e,n));let d=this._activeItems[c],g=this._activeItems.indexOf(t);g>-1&&this._activeItems.splice(g,1),d&&!this._dragDropRegistry.isDragging(d)?(this._activeItems.splice(c,0,t),d.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let n=this._relatedNodes.length-1;n>-1;n--){let[o,c]=this._relatedNodes[n];o.parentNode===t&&o.nextSibling!==c&&(c===null?t.appendChild(o):c.parentNode===t&&t.insertBefore(o,c))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,n){let o=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(n)),c=o?this._activeItems.findIndex(d=>{let g=d.getRootElement();return o===g||g.contains(o)}):-1;return c===-1||!this._sortPredicate(c,t)?-1:c}_getRootNode(){return this._rootNode||(this._rootNode=ke(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,n){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,c=-1;for(let d=0;d<this._activeItems.length;d++){let g=this._activeItems[d];if(g!==t){let{x:m,y:b}=g.getRootElement().getBoundingClientRect(),O=Math.hypot(e-m,n-b);O<o&&(o=O,c=d)}}return c}},bn=.05,On=.05,L=function(i){return i[i.NONE=0]="NONE",i[i.UP=1]="UP",i[i.DOWN=2]="DOWN",i}(L||{}),G=function(i){return i[i.NONE=0]="NONE",i[i.LEFT=1]="LEFT",i[i.RIGHT=2]="RIGHT",i}(G||{}),it=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new D;entered=new D;exited=new D;dropped=new D;sorted=new D;receivingStarted=new D;receivingStopped=new D;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Q.EMPTY;_verticalScrollDirection=L.NONE;_horizontalScrollDirection=G.NONE;_scrollNode;_stopScrollTimers=new D;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,n,o,c){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=c;let d=this.element=W(t);this._document=n,this.withOrientation("vertical").withElementContainer(d),e.registerDropContainer(this),this._parentPositions=new De(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,n,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,o,c,d,g,m={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:c,distance:d,dropPoint:g,event:m})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>t.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof Ie&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new ot(this._document,this._dragDropRegistry);else{let e=new Ie(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,n)=>this.sortPredicate(e,n,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=W(this.element),n=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(t);return n>-1&&this._scrollableElements.splice(n,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,o){if(this.sortingDisabled||!this._domRect||!gn(this._domRect,bn,e,n))return;let c=this._sortStrategy.sort(t,e,n,o);c&&this.sorted.next({previousIndex:c.previousIndex,currentIndex:c.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,o=L.NONE,c=G.NONE;if(this._parentPositions.positions.forEach((d,g)=>{g===this._document||!d.clientRect||n||gn(d.clientRect,bn,t,e)&&([o,c]=Hn(g,d.clientRect,this._direction,t,e),(o||c)&&(n=g))}),!o&&!c){let{width:d,height:g}=this._viewportRuler.getViewportSize(),m={width:d,height:g,top:0,right:d,bottom:g,left:0};o=yn(m,e),c=wn(m,t),n=window}n&&(o!==this._verticalScrollDirection||c!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=c,this._scrollNode=n,(o||c)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),mt(0,_t).pipe(Ce(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===L.UP?t.scrollBy(0,-e):this._verticalScrollDirection===L.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===G.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===G.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&et(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(o=>o._canReceive(t,e,n))}_canReceive(t,e,n){if(!this._domRect||!et(this._domRect,e,n)||!this.enterPredicate(t,this))return!1;let o=this._getShadowRoot().elementFromPoint(e,n);return o?o===this._container||this._container.contains(o):!1}_startReceiving(t,e){let n=this._activeSiblings;!n.has(t)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=ke(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function yn(i,t){let{top:e,bottom:n,height:o}=i,c=o*On;return t>=e-c&&t<=e+c?L.UP:t>=n-c&&t<=n+c?L.DOWN:L.NONE}function wn(i,t){let{left:e,right:n,width:o}=i,c=o*On;return t>=e-c&&t<=e+c?G.LEFT:t>=n-c&&t<=n+c?G.RIGHT:G.NONE}function Hn(i,t,e,n,o){let c=yn(t,o),d=wn(t,n),g=L.NONE,m=G.NONE;if(c){let b=i.scrollTop;c===L.UP?b>0&&(g=L.UP):i.scrollHeight-b>i.clientHeight&&(g=L.DOWN)}if(d){let b=i.scrollLeft;e==="rtl"?d===G.RIGHT?b<0&&(m=G.RIGHT):i.scrollWidth+b>i.clientWidth&&(m=G.LEFT):d===G.LEFT?b>0&&(m=G.LEFT):i.scrollWidth-b>i.clientWidth&&(m=G.RIGHT)}return[g,m]}var de={capture:!0},Je={passive:!1,capture:!0},qn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=U({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(n,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return i})(),ct=(()=>{class i{_ngZone=k(fe);_document=k(je);_styleLoader=k(Gt);_renderer=k(qe).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new D;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Ue([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new D;pointerUp=new D;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Je)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,n){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(qn),this._activeDragInstances.update(o=>[...o,e]),this._activeDragInstances().length===1)){let o=n.type.startsWith("touch"),c=g=>this.pointerUp.next(g),d=[["scroll",g=>this._scroll.next(g),de],["selectstart",this._preventDefaultWhileDragging,Je]];o?d.push(["touchend",c,de],["touchcancel",c,de]):d.push(["mouseup",c,de]),o||d.push(["mousemove",g=>this.pointerMove.next(g),Je]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=d.map(([g,m,b])=>this._renderer.listen(this._document,g,m,b))})}}stopDragging(e){this._activeDragInstances.update(n=>{let o=n.indexOf(e);return o>-1?(n.splice(o,1),[...n]):n}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let n=[this._scroll];return e&&e!==this._document&&n.push(new Le(o=>this._ngZone.runOutsideAngular(()=>{let c=this._renderer.listen(e,"scroll",d=>{this._activeDragInstances().length&&o.next(d)},de);return()=>{c()}}))),$e(...n)}registerDirectiveNode(e,n){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,n)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Wn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},kn=(()=>{class i{_document=k(je);_ngZone=k(fe);_viewportRuler=k(Vt);_dragDropRegistry=k(ct);_renderer=k(qe).createRenderer(null,null);constructor(){}createDrag(e,n=Wn){return new nt(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new it(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rt=new ne("CDK_DRAG_PARENT");var Sn=new ne("CdkDragHandle"),Dn=(()=>{class i{element=k(He);_parentDrag=k(rt,{optional:!0,skipSelf:!0});_dragDropRegistry=k(ct);_stateChanges=new D;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let n=this._dragDropRegistry.getDragDirectiveForNode(e);if(n){this._parentDrag=n,n._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ve({type:i,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Xe]},features:[be([{provide:Sn,useExisting:i}])]})}return i})(),Yn=new ne("CDK_DRAG_CONFIG"),Kn=new ne("CdkDropList"),En=(()=>{class i{element=k(He);dropContainer=k(Kn,{optional:!0,skipSelf:!0});_ngZone=k(fe);_viewContainerRef=k(Pt);_dir=k(Ft,{optional:!0});_changeDetectorRef=k(Pe);_selfHandle=k(Sn,{optional:!0,self:!0});_parentDrag=k(rt,{optional:!0,skipSelf:!0});_dragDropRegistry=k(ct);_destroyed=new D;_handles=new ue([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new X;released=new X;ended=new X;entered=new X;exited=new X;dropped=new X;moved=new Le(e=>{let n=this._dragRef.moved.pipe(j(o=>({source:this,pointerPosition:o.pointerPosition,event:o.event,delta:o.delta,distance:o.distance}))).subscribe(e);return()=>{n.unsubscribe()}});_injector=k(ft);constructor(){let e=this.dropContainer,n=k(Yn,{optional:!0}),o=k(kn);this._dragRef=o.createDrag(this.element,{dragStartThreshold:n&&n.dragStartThreshold!=null?n.dragStartThreshold:5,pointerDirectionChangeThreshold:n&&n.pointerDirectionChangeThreshold!=null?n.pointerDirectionChangeThreshold:5,zIndex:n?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),n&&this._assignDefaults(n),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(Ce(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){xt(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let n=e.rootElementSelector,o=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let n=this._handles.getValue();n.push(e),this._handles.next(n)}_removeHandle(e){let n=this._handles.getValue(),o=n.indexOf(e);o>-1&&(n.splice(o,1),this._handles.next(n))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,n=e;this.rootElementSelector&&(n=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):W(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let n=this._dir,o=this.dragStartDelay,c=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,d=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof o=="object"&&o?o:Rt(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(c).withPreviewTemplate(d).withPreviewContainer(this.previewContainer||"global"),n&&e.withDirection(n.value)}}),e.beforeStarted.pipe(ht(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let n=this.element.nativeElement.parentElement;for(;n;){let o=this._dragDropRegistry.getDragDirectiveForNode(n);if(o){e.withParent(o._dragRef);break}n=n.parentElement}})}_handleEvents(e){e.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),e.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(e){let{lockAxis:n,dragStartDelay:o,constrainPosition:c,previewClass:d,boundaryElement:g,draggingDisabled:m,rootElementSelector:b,previewContainer:O}=e;this.disabled=m??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),c&&(this.constrainPosition=c),d&&(this.previewClass=d),g&&(this.boundaryElement=g),b&&(this.rootElementSelector=b),O&&(this.previewContainer=O)}_setupHandlesListener(){this._handles.pipe(vt(e=>{let n=e.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),Ct(e=>$e(...e.map(n=>n._stateChanges.pipe(ut(n))))),Ce(this._destroyed)).subscribe(e=>{let n=this._dragRef,o=e.element.nativeElement;e.disabled?n.disableHandle(o):n.enableHandle(o)})}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ve({type:i,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(n,o){n&2&&E("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Xe],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",kt]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[be([{provide:rt,useExisting:i}]),bt]})}return i})();var In=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=q({type:i});static \u0275inj=H({providers:[kn],imports:[zt]})}return i})();function Jn(i,t){i&1&&(r(0,"span"),s(1,"\uD50C\uB808\uC774\uC5B4 \uD134"),a())}function eo(i,t){i&1&&(r(0,"span"),s(1,"\uC801 \uD134"),a())}function to(i,t){if(i&1&&(r(0,"div",27),v(1,Jn,2,0,"span",28)(2,eo,2,0,"span",28),a()),i&2){let e=p();l(),_("ngIf",e.currentTurn==="player"),l(),_("ngIf",e.currentTurn==="enemy")}}function no(i,t){if(i&1&&(r(0,"div",29)(1,"span",30),s(2),a()()),i&2){let e=p();l(2),P("",e.winner," \uC2B9\uB9AC!")}}function oo(i,t){if(i&1&&(r(0,"div",31)(1,"span",32),s(2),yt(3,"date"),a(),r(4,"span",33),s(5),a()()),i&2){let e=t.$implicit;_("ngClass","log-"+e.type),l(2),f(wt(3,3,e.timestamp,"HH:mm:ss")),l(3),f(e.message)}}function io(i,t){if(i&1){let e=M();r(0,"button",46),h("click",function(){let o=u(e).$implicit,c=p(4);return C(c.playerUseSkill(o))}),r(1,"div",47)(2,"span",48),s(3),a(),r(4,"span",49),s(5),a()()()}if(i&2){let e=t.$implicit,n=p(4);_("color",e.type==="attack"?"warn":e.type==="heal"?"primary":"accent")("disabled",n.playerCharacter.currentMp<e.mpCost)("title",e.description+" (MP: "+e.mpCost+")"),l(3),f(e.name),l(2),P("MP: ",e.mpCost)}}function ro(i,t){if(i&1&&(r(0,"div",43)(1,"h5"),s(2,"\uAE30\uC220"),a(),r(3,"div",44),v(4,io,6,5,"button",45),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.playerCharacter.skills)}}function ao(i,t){if(i&1){let e=M();r(0,"div",39)(1,"div",40)(2,"button",41),h("click",function(){u(e);let o=p(2);return C(o.playerAttack())}),s(3," \u2694\uFE0F \uC77C\uBC18 \uACF5\uACA9 "),a()(),v(4,ro,5,1,"div",42),a()}if(i&2){let e=p(2);l(4),_("ngIf",e.playerCharacter.skills.length>0)}}function so(i,t){if(i&1){let e=M();r(0,"div",34)(1,"div",35)(2,"h4"),s(3,"\uD589\uB3D9 \uC120\uD0DD"),a(),r(4,"div",36)(5,"button",37),h("click",function(){u(e);let o=p();return C(o.startAutoBattle())}),s(6," \u{1F916} \uC790\uB3D9 \uC804\uD22C \uC2DC\uC791 "),a()(),v(7,ao,5,1,"div",38),a()()}if(i&2){let e=p();l(7),_("ngIf",e.currentTurn==="player")}}function co(i,t){if(i&1){let e=M();r(0,"div",50)(1,"div",51),z(2,"mat-spinner",52),r(3,"span"),s(4),a(),r(5,"button",53),h("click",function(){u(e);let o=p();return C(o.stopAutoBattle())}),s(6,"\uC911\uB2E8"),a()()()}if(i&2){let e=p();l(4),P("\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911... (",e.currentTurn==="player"?"\uD50C\uB808\uC774\uC5B4":"\uC801"," \uD134)")}}function lo(i,t){if(i&1){let e=M();r(0,"div",54)(1,"button",37),h("click",function(){u(e);let o=p();return C(o.restartBattle())}),s(2," \uB2E4\uC2DC \uC804\uD22C "),a(),r(3,"button",55),h("click",function(){u(e);let o=p();return C(o.closeBattle())}),s(4," \uC804\uD22C \uC885\uB8CC "),a()()}}var Te=class i{constructor(t,e){this.dialogRef=t;this.data=e;this.initializeBattle()}playerCharacter;enemyCharacter;battleLogs=[];currentTurn="player";battleEnded=!1;winner="";isProcessing=!1;isAutoBattle=!1;initializeBattle(){this.data&&this.data.playerCharacter&&this.data.enemyCharacter?(this.playerCharacter=this.convertToBattleCharacter(this.data.playerCharacter,"player"),this.enemyCharacter=this.convertToBattleCharacter(this.data.enemyCharacter,"enemy")):(this.playerCharacter={id:"player1",name:"\uC8FC\uC778\uACF5",type:"player",maxHp:100,currentHp:100,maxMp:50,currentMp:50,attack:20,defense:15,agility:18,skills:[{id:"skill1",name:"\uC5F0\uC18D\uBCA0\uAE30",description:"\uC801\uC5D0\uAC8C 2\uD68C \uC5F0\uC18D \uACF5\uACA9",mpCost:10,damage:15,type:"attack"},{id:"skill2",name:"\uBC29\uC5B4\uD0DC\uC138",description:"\uBC29\uC5B4\uB825\uC744 \uC77C\uC2DC\uC801\uC73C\uB85C \uC99D\uAC00",mpCost:5,damage:0,type:"defense"},{id:"skill3",name:"\uD68C\uBCF5\uC220",description:"HP\uB97C \uD68C\uBCF5",mpCost:15,damage:-25,type:"heal"}],items:[{id:"item1",name:"\uAC15\uCCA0\uAC80",description:"\uACF5\uACA9\uB825 +10",type:"weapon",effect:10},{id:"item2",name:"\uAC00\uC8FD\uAC11\uC637",description:"\uBC29\uC5B4\uB825 +8",type:"armor",effect:8},{id:"item3",name:"\uCCB4\uB825\uD3EC\uC158",description:"HP +30 \uD68C\uBCF5",type:"consumable",effect:30}]},this.enemyCharacter=this.generateRandomEnemy()),this.addBattleLog("\uC804\uD22C\uAC00 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4!","system"),this.addBattleLog(`${this.playerCharacter.name} vs ${this.enemyCharacter.name}`,"system")}convertToBattleCharacter(t,e){let n=this.extractStat(t.notes,"HP")||100,o=this.extractStat(t.notes,"\uACF5\uACA9\uB825")||20,c=this.extractStat(t.notes,"\uBC29\uC5B4\uB825")||15,d=this.extractStat(t.notes,"\uC18D\uB3C4")||18,g=(t.abilities||[]).map((m,b)=>({id:`skill${b+1}`,name:m,description:`${m} \uAE30\uC220`,mpCost:10+b*5,damage:15+b*5,type:"attack"}));return g.length===0&&g.push({id:"skill1",name:"\uC77C\uBC18 \uACF5\uACA9",description:"\uAE30\uBCF8 \uACF5\uACA9",mpCost:0,damage:10,type:"attack"}),{id:t.id,name:t.name,type:e,maxHp:n,currentHp:n,maxMp:50,currentMp:50,attack:o,defense:c,agility:d,skills:g,items:[]}}extractStat(t,e){if(!t)return null;let n=new RegExp(`${e}:\\s*(\\d+)`,"i"),o=t.match(n);return o?parseInt(o[1],10):null}generateRandomEnemy(){let t=["\uC624\uD06C \uC804\uC0AC","\uC2A4\uCF08\uB808\uD1A4 \uB9C8\uBC95\uC0AC","\uACE0\uBE14\uB9B0 \uB3C4\uC801","\uB2E4\uD06C\uC5D8\uD504 \uC554\uC0B4\uC790","\uD2B8\uB864 \uAC70\uC778"],e=t[Math.floor(Math.random()*t.length)],n=80+Math.floor(Math.random()*40),o=30+Math.floor(Math.random()*30);return{id:"enemy1",name:e,type:"enemy",maxHp:n,currentHp:n,maxMp:o,currentMp:o,attack:15+Math.floor(Math.random()*10),defense:10+Math.floor(Math.random()*8),agility:12+Math.floor(Math.random()*12),skills:[{id:"enemy_skill1",name:"\uAC15\uD0C0",description:"\uAC15\uB825\uD55C \uACF5\uACA9",mpCost:8,damage:18,type:"attack"},{id:"enemy_skill2",name:"\uB9C8\uBC95 \uBC29\uD328",description:"\uB9C8\uBC95\uC73C\uB85C \uBC29\uC5B4",mpCost:6,damage:0,type:"defense"}],items:[{id:"enemy_item1",name:"\uB179\uC2A8 \uB3C4\uB07C",description:"\uACF5\uACA9\uB825 +5",type:"weapon",effect:5},{id:"enemy_item2",name:"\uB0A1\uC740 \uAC11\uC637",description:"\uBC29\uC5B4\uB825 +3",type:"armor",effect:3}]}}playerAttack(){if(this.battleEnded||this.currentTurn!=="player")return;let t=[`${this.playerCharacter.name}\uC774 \uAC80\uC744 \uD720\uB450\uB974\uBA70 \uC804\uC9C4\uD569\uB2C8\uB2E4!`,`${this.playerCharacter.name}\uC774 \uBE60\uB978 \uB3D9\uC791\uC73C\uB85C \uACF5\uACA9\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4!`,`${this.playerCharacter.name}\uC774 \uC804\uC88C\uC790\uC138\uB97C \uCDE8\uD558\uACE0 \uACF5\uACA9\uD569\uB2C8\uB2E4!`],e=t[Math.floor(Math.random()*t.length)];this.addBattleLog(e,"status");let n=this.calculateDamage(this.playerCharacter,this.enemyCharacter,"normal");this.applyDamage(this.enemyCharacter,n),this.addBattleLog(`\uACF5\uACA9\uC774 \uBA85\uC911\uD574 ${n}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`,"action",this.playerCharacter.name),this.checkBattleEnd(),this.battleEnded||this.switchTurn()}playerUseSkill(t){if(!(this.battleEnded||this.currentTurn!=="player")){if(this.playerCharacter.currentMp<t.mpCost){this.addBattleLog("MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!","status");return}if(this.addBattleLog(`${this.playerCharacter.name}\uC774 \uC9D1\uC911\uD558\uBA70 ${t.name}\uC744 \uBC1C\uB3D9\uC900\uBE44\uB97C \uD569\uB2C8\uB2E4...`,"status"),this.playerCharacter.currentMp-=t.mpCost,t.type==="attack"){let e=this.calculateDamage(this.playerCharacter,this.enemyCharacter,"skill",t);this.applyDamage(this.enemyCharacter,e),this.addBattleLog(`${t.name}\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uBC1C\uB3D9\uB418\uC5B4 ${e}\uC758 \uAC15\uB825\uD55C \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`,"action",this.playerCharacter.name)}else if(t.type==="heal"){let e=Math.abs(t.damage);this.playerCharacter.currentHp=Math.min(this.playerCharacter.maxHp,this.playerCharacter.currentHp+e),this.addBattleLog(`${t.name}\uC758 \uCE58\uC720 \uC5D0\uB108\uC9C0\uAC00 \uBAB8\uC744 \uAC10\uC2F8\uBA70 ${e}\uC758 HP\uB97C \uD68C\uBCF5\uD588\uC2B5\uB2C8\uB2E4.`,"heal",this.playerCharacter.name)}else t.type==="defense"&&this.addBattleLog(`${t.name}\uC744 \uC0AC\uC6A9\uD558\uC5EC \uAC15\uB825\uD55C \uBC29\uC5B4 \uC790\uC138\uB97C \uCDE8\uD588\uC2B5\uB2C8\uB2E4.`,"action",this.playerCharacter.name);this.checkBattleEnd(),this.battleEnded||this.switchTurn()}}enemyTurn(){if(this.battleEnded||this.currentTurn!=="enemy")return;let t=this.enemyCharacter.currentHp/this.enemyCharacter.maxHp*100,e=this.enemyCharacter.currentMp/this.enemyCharacter.maxMp*100;this.addBattleLog(`${this.enemyCharacter.name}\uC774 \uB0A0\uCE74\uB85C\uC6B4 \uB208\uBE5B\uC73C\uB85C \uC801\uC744 \uB178\uB824\uBCF4\uACE0 \uC788\uC2B5\uB2C8\uB2E4... (HP: ${Math.round(t)}%)`,"status");let n=e>30?.6:.2;if(Math.random()<n&&this.enemyCharacter.skills.length>0){let o=this.enemyCharacter.skills.filter(c=>c.mpCost<=this.enemyCharacter.currentMp);if(o.length>0){let c=o[Math.floor(Math.random()*o.length)];if(this.addBattleLog(`${this.enemyCharacter.name}\uC774 \uC5B4\uB460 \uC18D\uC5D0\uC11C \uD2B9\uC218\uD55C \uAE30\uC220\uC744 \uC900\uBE44\uD569\uB2C8\uB2E4!`,"status"),this.enemyCharacter.currentMp-=c.mpCost,c.type==="attack"){let d=this.calculateDamage(this.enemyCharacter,this.playerCharacter,"skill",c);this.applyDamage(this.playerCharacter,d),this.addBattleLog(`${this.enemyCharacter.name}\uC774 ${c.name}\uB85C \uAC15\uB825\uD55C \uACF5\uACA9\uC744 \uAC00\uD574 ${d}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`,"action",this.enemyCharacter.name)}}else{this.addBattleLog(`${this.enemyCharacter.name}\uC774 \uB9C8\uB825\uC774 \uBD80\uC871\uD574 \uAE30\uBCF8 \uACF5\uACA9\uC73C\uB85C \uB300\uC2E0\uD569\uB2C8\uB2E4.`,"status");let c=this.calculateDamage(this.enemyCharacter,this.playerCharacter,"normal");this.applyDamage(this.playerCharacter,c),this.addBattleLog(`${this.enemyCharacter.name}\uC758 \uC77C\uBC18 \uACF5\uACA9\uC774 ${c}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4.`,"action",this.enemyCharacter.name)}}else{let o=[`${this.enemyCharacter.name}\uC774 \uAC70\uCE60\uAC8C \uB2EC\uB824\uB4ED\uB2C8\uB2E4!`,`${this.enemyCharacter.name}\uC774 \uB0A0\uCE74\uB85C\uC6B4 \uBC1C\uD1B1\uC73C\uB85C \uACF5\uACA9\uD569\uB2C8\uB2E4!`,`${this.enemyCharacter.name}\uC774 \uD798\uCC2C \uC8FC\uBA39\uC744 \uD718\uB450\uB985\uB2C8\uB2E4!`],c=o[Math.floor(Math.random()*o.length)];this.addBattleLog(c,"status");let d=this.calculateDamage(this.enemyCharacter,this.playerCharacter,"normal");this.applyDamage(this.playerCharacter,d),this.addBattleLog(`\uACF5\uACA9\uC774 \uC131\uACF5\uD574 ${d}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`,"action",this.enemyCharacter.name)}this.checkBattleEnd(),this.battleEnded||this.switchTurn()}calculateDamage(t,e,n,o){let c=t.attack;n==="skill"&&o&&(c+=o.damage);let d=e.defense,g=Math.max(1,c-d),m=.8+Math.random()*.4;g=Math.floor(g*m),Math.random()<.1&&(g=Math.floor(g*1.5),this.addBattleLog("\uD06C\uB9AC\uD2F0\uCEEC \uD788\uD2B8!","status"));let b=Math.min(.3,d/100);return Math.random()<b&&(g=Math.floor(g*.5),this.addBattleLog(`${e.name}\uC774(\uAC00) \uBC29\uC5B4\uC5D0 \uC131\uACF5\uD588\uC2B5\uB2C8\uB2E4! (\uBC29\uC5B4\uB825: ${d})`,"status")),Math.max(1,g)}applyDamage(t,e){t.currentHp=Math.max(0,t.currentHp-e)}switchTurn(){this.currentTurn=this.currentTurn==="player"?"enemy":"player",this.currentTurn==="enemy"&&!this.isAutoBattle&&setTimeout(()=>{this.enemyTurn()},1e3)}checkBattleEnd(){this.playerCharacter.currentHp<=0?(this.battleEnded=!0,this.isAutoBattle=!1,this.winner=this.enemyCharacter.name,this.addBattleLog(`${this.enemyCharacter.name}\uC774(\uAC00) \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!`,"system")):this.enemyCharacter.currentHp<=0&&(this.battleEnded=!0,this.isAutoBattle=!1,this.winner=this.playerCharacter.name,this.addBattleLog(`${this.playerCharacter.name}\uC774(\uAC00) \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!`,"system"))}addBattleLog(t,e,n){let o={id:Date.now().toString(),timestamp:new Date,message:t,type:e,character:n};this.battleLogs.push(o),setTimeout(()=>{let c=document.querySelector(".battle-log-container");c&&(c.scrollTop=c.scrollHeight)},100)}getHpPercentage(t){return t.currentHp/t.maxHp*100}getMpPercentage(t){return t.currentMp/t.maxMp*100}restartBattle(){this.battleEnded=!1,this.winner="",this.currentTurn="player",this.battleLogs=[],this.isProcessing=!1,this.isAutoBattle=!1,this.initializeBattle()}startAutoBattle(){this.battleEnded||this.isProcessing||(this.isAutoBattle=!0,this.addBattleLog("\uC790\uB3D9 \uC804\uD22C\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4!","system"),this.processBattleTurn())}processBattleTurn(){this.battleEnded||!this.isAutoBattle||(this.addBattleLog(`--- ${this.currentTurn==="player"?this.playerCharacter.name:this.enemyCharacter.name}\uC758 \uD134 ---`,"system"),setTimeout(()=>{this.currentTurn==="player"?this.autoPlayerAction():this.enemyTurn(),!this.battleEnded&&this.isAutoBattle&&setTimeout(()=>{this.processBattleTurn()},2e3)},500))}autoPlayerAction(){let t=this.playerCharacter.currentHp/this.playerCharacter.maxHp*100,e=this.playerCharacter.currentMp/this.playerCharacter.maxMp*100;if(this.addBattleLog(`${this.playerCharacter.name}\uC774 \uC804\uC220\uC744 \uACE0\uBBFC\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4... (HP: ${Math.round(t)}%, MP: ${Math.round(e)}%)`,"status"),t<30){let n=this.playerCharacter.skills.find(o=>o.type==="heal"&&o.mpCost<=this.playerCharacter.currentMp);if(n){this.addBattleLog(`${this.playerCharacter.name}\uC774 \uC704\uD5D8\uC744 \uB290\uB07C\uACE0 \uD68C\uBCF5\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4!`,"status"),this.playerUseSkill(n);return}}if(Math.random()<.5&&this.playerCharacter.skills.length>0){let n=this.playerCharacter.skills.filter(o=>o.mpCost<=this.playerCharacter.currentMp&&o.type==="attack");if(n.length>0){let o=n[Math.floor(Math.random()*n.length)];this.addBattleLog(`${this.playerCharacter.name}\uC774 \uB2E4\uC591\uD55C \uAE30\uC220 \uC911 ${o.name}\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4!`,"status"),this.playerUseSkill(o);return}}this.addBattleLog(`${this.playerCharacter.name}\uC774 \uAE30\uBCF8 \uACF5\uACA9\uC73C\uB85C \uC2B9\uBD80\uB97C \uAC78\uACA0\uC2B5\uB2C8\uB2E4!`,"status"),this.playerAttack()}stopAutoBattle(){this.isAutoBattle=!1,this.isProcessing=!1,this.addBattleLog("\uC790\uB3D9 \uC804\uD22C\uAC00 \uC911\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4.","system")}closeBattle(){this.battleEnded?this.dialogRef.close({winner:this.winner,logs:this.battleLogs,playerCharacter:this.playerCharacter,enemyCharacter:this.enemyCharacter}):this.dialogRef.close()}static \u0275fac=function(e){return new(e||i)(T(Jt),T(en))};static \u0275cmp=U({type:i,selectors:[["app-battle-modal"]],standalone:!1,decls:78,vars:34,consts:[[1,"battle-modal"],[1,"battle-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"battle-content"],[1,"characters-status"],[1,"character-panel","player"],[1,"character-info"],[1,"character-avatar","player-avatar"],[1,"status-bars"],[1,"status-bar","hp"],[1,"bar-container"],[1,"bar-fill","hp-bar"],[1,"bar-text"],[1,"status-bar","mp"],[1,"bar-fill","mp-bar"],[1,"character-stats"],[1,"vs-indicator"],["class","turn-indicator",4,"ngIf"],["class","battle-result",4,"ngIf"],[1,"character-panel","enemy"],[1,"character-avatar","enemy-avatar"],[1,"battle-log-section"],[1,"battle-log-container"],["class","log-entry",3,"ngClass",4,"ngFor","ngForOf"],["class","action-buttons",4,"ngIf"],["class","auto-battle-status",4,"ngIf"],["class","battle-end-actions",4,"ngIf"],[1,"turn-indicator"],[4,"ngIf"],[1,"battle-result"],[1,"winner"],[1,"log-entry",3,"ngClass"],[1,"log-time"],[1,"log-message"],[1,"action-buttons"],[1,"action-section"],[1,"auto-battle-section"],["mat-raised-button","","color","primary",3,"click"],["class","manual-actions",4,"ngIf"],[1,"manual-actions"],[1,"button-row"],["mat-raised-button","","color","warn",3,"click"],["class","skills-section",4,"ngIf"],[1,"skills-section"],[1,"skills-grid"],["mat-stroked-button","","class","skill-button",3,"color","disabled","title","click",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"skill-button",3,"click","color","disabled","title"],[1,"skill-info"],[1,"skill-name"],[1,"skill-cost"],[1,"auto-battle-status"],[1,"auto-battle-info"],["diameter","30"],["mat-button","","color","warn",3,"click"],[1,"battle-end-actions"],["mat-raised-button","",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),s(3,"\uC804\uD22C \uC2DC\uBBAC\uB808\uC774\uC158"),a(),r(4,"button",2),h("click",function(){return n.closeBattle()}),r(5,"mat-icon"),s(6,"close"),a()()(),r(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"h3"),s(12),a(),r(13,"div",7),s(14,"\u{1F464}"),a()(),r(15,"div",8)(16,"div",9)(17,"label"),s(18,"HP"),a(),r(19,"div",10),z(20,"div",11),r(21,"span",12),s(22),a()()(),r(23,"div",13)(24,"label"),s(25,"MP"),a(),r(26,"div",10),z(27,"div",14),r(28,"span",12),s(29),a()()()(),r(30,"div",15)(31,"span"),s(32),a(),r(33,"span"),s(34),a(),r(35,"span"),s(36),a()()(),r(37,"div",16)(38,"span"),s(39,"VS"),a(),v(40,to,3,2,"div",17)(41,no,3,1,"div",18),a(),r(42,"div",19)(43,"div",6)(44,"h3"),s(45),a(),r(46,"div",20),s(47,"\u{1F479}"),a()(),r(48,"div",8)(49,"div",9)(50,"label"),s(51,"HP"),a(),r(52,"div",10),z(53,"div",11),r(54,"span",12),s(55),a()()(),r(56,"div",13)(57,"label"),s(58,"MP"),a(),r(59,"div",10),z(60,"div",14),r(61,"span",12),s(62),a()()()(),r(63,"div",15)(64,"span"),s(65),a(),r(66,"span"),s(67),a(),r(68,"span"),s(69),a()()()(),r(70,"div",21)(71,"h4"),s(72,"\uC804\uD22C \uB85C\uADF8"),a(),r(73,"div",22),v(74,oo,6,6,"div",23),a()(),v(75,so,8,1,"div",24)(76,co,7,1,"div",25)(77,lo,5,0,"div",26),a()()),e&2&&(l(9),E("active",n.currentTurn==="player"),l(3),f(n.playerCharacter.name),l(8),$("width",n.getHpPercentage(n.playerCharacter),"%"),l(2),R("",n.playerCharacter.currentHp,"/",n.playerCharacter.maxHp),l(5),$("width",n.getMpPercentage(n.playerCharacter),"%"),l(2),R("",n.playerCharacter.currentMp,"/",n.playerCharacter.maxMp),l(3),P("\uACF5\uACA9\uB825: ",n.playerCharacter.attack),l(2),P("\uBC29\uC5B4\uB825: ",n.playerCharacter.defense),l(2),P("\uBBFC\uCCA9\uC131: ",n.playerCharacter.agility),l(4),_("ngIf",!n.battleEnded),l(),_("ngIf",n.battleEnded),l(),E("active",n.currentTurn==="enemy"),l(3),f(n.enemyCharacter.name),l(8),$("width",n.getHpPercentage(n.enemyCharacter),"%"),l(2),R("",n.enemyCharacter.currentHp,"/",n.enemyCharacter.maxHp),l(5),$("width",n.getMpPercentage(n.enemyCharacter),"%"),l(2),R("",n.enemyCharacter.currentMp,"/",n.enemyCharacter.maxMp),l(3),P("\uACF5\uACA9\uB825: ",n.enemyCharacter.attack),l(2),P("\uBC29\uC5B4\uB825: ",n.enemyCharacter.defense),l(2),P("\uBBFC\uCCA9\uC131: ",n.enemyCharacter.agility),l(5),_("ngForOf",n.battleLogs),l(),_("ngIf",!n.battleEnded&&!n.isAutoBattle),l(),_("ngIf",n.isAutoBattle&&!n.battleEnded),l(),_("ngIf",n.battleEnded))},dependencies:[xe,Me,J,Yt,Wt,Se,on,St],styles:[".battle-modal[_ngcontent-%COMP%]{width:100%;max-width:900px;height:80vh;max-height:700px;display:flex;flex-direction:column;background:var(--bg-primary);color:var(--text-primary);border-radius:12px;overflow:hidden}.battle-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:var(--bg-secondary);color:var(--text-primary);border-bottom:2px solid var(--border-color)}.battle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:var(--text-primary)}.battle-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:var(--text-secondary);transition:color .2s ease}.battle-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.battle-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;gap:20px;overflow-y:auto;position:relative}.characters-status[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:20px;margin-bottom:20px}.character-panel[_ngcontent-%COMP%]{flex:1;padding:16px;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-secondary);transition:all .3s ease}.character-panel.active[_ngcontent-%COMP%]{border-color:var(--primary-color);box-shadow:0 0 20px #667eea4d;transform:scale(1.02)}.character-panel.player.active[_ngcontent-%COMP%]{border-color:#4caf50;box-shadow:0 0 20px #4caf504d}.character-panel.enemy.active[_ngcontent-%COMP%]{border-color:#f44336;box-shadow:0 0 20px #f443364d}.character-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.character-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.character-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px}.character-avatar.player-avatar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#8bc34a)}.character-avatar.enemy-avatar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#ff9800)}.status-bars[_ngcontent-%COMP%]{margin-bottom:12px}.status-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.status-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;width:30px}.bar-container[_ngcontent-%COMP%]{flex:1;position:relative;height:20px;background:var(--bg-tertiary);border-radius:10px;overflow:hidden;border:1px solid var(--border-color)}.bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .5s ease;border-radius:10px}.bar-fill.hp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf50,#8bc34a)}.bar-fill.mp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#2196f3,#03a9f4)}.bar-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:11px;font-weight:600;color:var(--text-primary);text-shadow:1px 1px 2px rgba(0,0,0,.5)}.character-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:var(--text-secondary)}.character-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--bg-tertiary);padding:4px 8px;border-radius:6px;border:1px solid var(--border-color)}.vs-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;min-width:80px}.vs-indicator[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--primary-color);text-shadow:2px 2px 4px rgba(0,0,0,.3)}.turn-indicator[_ngcontent-%COMP%]{padding:6px 12px;background:var(--primary-color);color:#fff;border-radius:16px;font-size:12px;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}.battle-result[_ngcontent-%COMP%]   .winner[_ngcontent-%COMP%]{padding:8px 16px;background:linear-gradient(135deg,#4caf50,#8bc34a);color:#fff;border-radius:20px;font-size:14px;font-weight:600;animation:_ngcontent-%COMP%_bounce 1s ease-in-out}.battle-log-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:var(--text-primary)}.battle-log-container[_ngcontent-%COMP%]{height:200px;overflow-y:auto;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-secondary);padding:12px}.log-entry[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;padding:6px 8px;border-radius:6px;font-size:13px;line-height:1.4}.log-entry.log-action[_ngcontent-%COMP%]{background:#667eea1a;border-left:3px solid #667eea}.log-entry.log-damage[_ngcontent-%COMP%]{background:#f443361a;border-left:3px solid #f44336}.log-entry.log-heal[_ngcontent-%COMP%]{background:#4caf501a;border-left:3px solid #4caf50}.log-entry.log-status[_ngcontent-%COMP%]{background:#ffc1071a;border-left:3px solid #ffc107}.log-entry.log-system[_ngcontent-%COMP%]{background:#9e9e9e1a;border-left:3px solid #9e9e9e;font-weight:600}.log-time[_ngcontent-%COMP%]{color:var(--text-muted);font-size:11px;min-width:60px}.log-message[_ngcontent-%COMP%]{flex:1}.action-buttons[_ngcontent-%COMP%]{border-top:1px solid var(--border-color);padding-top:16px}.action-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px}.action-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:16px 0 8px;font-size:14px;color:var(--text-secondary)}.auto-battle-section[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--border-color)}.auto-battle-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:12px 24px}.manual-actions[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%], .button-row[_ngcontent-%COMP%]{margin-bottom:16px}.skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}.skill-button[_ngcontent-%COMP%]{height:auto!important;padding:8px 12px!important}.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:2px}.skill-button[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600}.skill-button[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]{font-size:11px;opacity:.8}.auto-battle-status[_ngcontent-%COMP%]{border-top:1px solid var(--border-color);padding:20px;background:var(--bg-tertiary);border-radius:8px;margin-top:16px}.auto-battle-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px}.auto-battle-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary)}.auto-battle-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}.battle-end-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;padding-top:16px;border-top:1px solid var(--border-color)}.processing-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.processing-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;background:var(--bg-primary);padding:24px;border-radius:12px;box-shadow:0 8px 32px #0000004d}.processing-spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary);border-radius:3px}.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--primary-color);border-radius:3px}.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary-color-dark)}@media (max-width: 768px){.battle-modal[_ngcontent-%COMP%]{width:95vw;height:90vh}.characters-status[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.character-panel[_ngcontent-%COMP%]{width:100%}.vs-indicator[_ngcontent-%COMP%]{transform:rotate(90deg);margin:8px 0}.skills-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Be=class i{constructor(t){this.http=t;this.initApiKey()}apiKey="AIzaSyCSnZMkpalf4--NxFAAac19pY16V9qcQjM";apiUrl="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent";initApiKey(){let t=localStorage.getItem("gemini_api_key");t&&(this.apiKey=t)}setApiKey(t){this.apiKey=t,localStorage.setItem("gemini_api_key",t)}getApiKey(){return this.apiKey}hasApiKey(){return!!this.apiKey&&this.apiKey.length>0}generateScenario(t){if(!this.hasApiKey())return F(()=>new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."));let n={contents:[{parts:[{text:this.buildScenarioPrompt(t)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:2048}},o=new Z({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,n,{headers:o}).pipe(j(c=>{if(c?.candidates?.[0]?.content?.parts?.[0]?.text){let d=c.candidates[0].content.parts[0].text;return this.parseScenarioResponse(d)}throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),K(c=>{console.error("Gemini API \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:c.status,statusText:c.statusText,message:c.message,error:c.error,fullError:c});let d="AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return c.status===400?d="API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":c.status===429?d="API \uD638\uCD9C \uD55C\uB3C4\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.":c.error?.error?.message&&(d=c.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",d),F(()=>new Error(d))}))}generateCharacter(t){if(!this.hasApiKey())return F(()=>new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let n={contents:[{parts:[{text:this.buildCharacterPrompt(t)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:1024}},o=new Z({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,n,{headers:o}).pipe(j(c=>{if(c?.candidates?.[0]?.content?.parts?.[0]?.text){let d=c.candidates[0].content.parts[0].text;return this.parseCharacterResponse(d)}throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),K(c=>{console.error("Gemini API \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:c.status,statusText:c.statusText,message:c.message,error:c.error,fullError:c});let d="AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return c.error?.error?.message&&(d+=" - "+c.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",d),F(()=>new Error(d))}))}buildScenarioPrompt(t){let e=t.genre||"\uBB34\uD611",n=t.style||"\uC804\uD1B5\uC801\uC778",o=t.mood||"\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294",c=t.additionalContext||"",g=t.isAdult||!1?`
- \u{1F51E} \uC131\uC778 \uCF58\uD150\uCE20: \uC608 (19+) - \uD3ED\uB825\uC801\uC774\uACE0 \uC120\uC815\uC801\uC778 \uC694\uC18C \uD3EC\uD568 \uAC00\uB2A5`:`
- \uC131\uC778 \uCF58\uD150\uCE20: \uC544\uB2C8\uC624 (\uC804\uC5F0\uB839)`;return`\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB34\uD611 \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uC870\uAC74\uC5D0 \uB9DE\uB294 \uBB34\uD611 \uC18C\uC124 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.

**\uC870\uAC74:**
- \uC7A5\uB974: ${e}
- \uC2A4\uD0C0\uC77C: ${n}
- \uBD84\uC704\uAE30: ${o}
${c?`- \uCD94\uAC00 \uC694\uAD6C\uC0AC\uD56D: ${c}`:""}${g}

**\uC0DD\uC131 \uD615\uC2DD (\uC815\uD655\uD788 \uC774 \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5):**

\uC81C\uBAA9: [\uD765\uBBF8\uC9C4\uC9C4\uD55C \uC2DC\uB098\uB9AC\uC624 \uC81C\uBAA9]

\uC124\uBA85: [\uC2DC\uB098\uB9AC\uC624\uC5D0 \uB300\uD55C 2-3\uBB38\uC7A5\uC758 \uAC04\uB7B5\uD55C \uC124\uBA85]

\uB4F1\uC7A5\uC778\uBB3C:
- [\uC778\uBB3C1 \uC774\uB984/\uC5ED\uD560]
- [\uC778\uBB3C2 \uC774\uB984/\uC5ED\uD560]
- [\uC778\uBB3C3 \uC774\uB984/\uC5ED\uD560]
- [\uC778\uBB3C4 \uC774\uB984/\uC5ED\uD560]

\uBC30\uACBD: [\uC2DC\uAC04\uACFC \uC7A5\uC18C\uB97C \uD3EC\uD568\uD55C \uC0C1\uC138\uD55C \uBC30\uACBD \uC124\uBA85]

\uAC08\uB4F1: [\uC774\uC57C\uAE30\uC758 \uD575\uC2EC \uAC08\uB4F1\uC774\uB098 \uBB38\uC81C \uC0C1\uD669]

\uBAA9\uD45C: [\uC8FC\uC778\uACF5\uC774 \uB2EC\uC131\uD558\uACE0\uC790 \uD558\uB294 \uBAA9\uD45C]

\uBD84\uC704\uAE30: [\uC774\uC57C\uAE30\uC758 \uC804\uBC18\uC801\uC778 \uBD84\uC704\uAE30\uB098 \uD1A4]

\uD0DC\uADF8: [\uD0DC\uADF81, \uD0DC\uADF82, \uD0DC\uADF83, \uD0DC\uADF84, \uD0DC\uADF85]

**\uC911\uC694: \uC704 \uD615\uC2DD\uC744 \uC815\uD655\uD788 \uC9C0\uCF1C\uC11C \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uAC01 \uC139\uC158\uC740 \uC815\uD655\uD55C \uB808\uC774\uBE14\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4.**`}buildCharacterPrompt(t){return`\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB34\uD611 \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. ${t||"\uC8FC\uC778\uACF5"} \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.

**\uC0DD\uC131 \uD615\uC2DD:**

\uC774\uB984: [\uBB34\uD611\uD48D\uC758 \uC774\uB984]
\uB098\uC774: [\uC22B\uC790\uB9CC]
\uC131\uBCC4: [\uB0A8\uC131/\uC5EC\uC131]
\uC5ED\uD560: [\uC8FC\uC778\uACF5/\uC801\uB300\uC790/\uC870\uC5F0/\uB2E8\uC5ED]
\uC678\uBAA8: [\uC0C1\uC138\uD55C \uC678\uBAA8 \uBB18\uC0AC]
\uC131\uACA9: [\uC131\uACA9 \uD2B9\uC9D5]
\uBC30\uACBD: [\uCE90\uB9AD\uD130\uC758 \uBC30\uACBD \uC2A4\uD1A0\uB9AC]
\uB2A5\uB825: [\uBB34\uACF5/\uB2A5\uB8251, \uBB34\uACF5/\uB2A5\uB8252, \uBB34\uACF5/\uB2A5\uB8253]
\uBAA9\uD45C: [\uCE90\uB9AD\uD130\uC758 \uBAA9\uD45C\uB098 \uB3D9\uAE30]
\uD2B9\uC131: [\uD2B9\uC1311, \uD2B9\uC1312, \uD2B9\uC1313]

**\uC911\uC694: \uC704 \uD615\uC2DD\uC744 \uC815\uD655\uD788 \uC9C0\uCF1C\uC11C \uC751\uB2F5\uD574\uC8FC\uC138\uC694.**`}parseScenarioResponse(t){try{let e={},n=t.match(/:\s*(.+)/);n&&(e.title=n[1].trim());let o=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);o&&(e.description=o[1].trim());let c=t.match(/:\s*([\s\S]+?)(?=\n\n|:|$)/);c&&(e.characters=c[1].split(`
`).filter(w=>w.trim().startsWith("-")).map(w=>w.replace(/^-\s*/,"").trim()));let d=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);d&&(e.setting=d[1].trim());let g=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);g&&(e.conflict=g[1].trim());let m=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);m&&(e.goal=m[1].trim());let b=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);b&&(e.mood=b[1].trim());let O=t.match(/:\s*(.+?)$/s);return O&&(e.tags=O[1].split(",").map(w=>w.trim()).filter(w=>w.length>0)),console.log("\uD30C\uC2F1\uB41C \uC2DC\uB098\uB9AC\uC624:",e),e}catch(e){throw console.error("\uC2DC\uB098\uB9AC\uC624 \uD30C\uC2F1 \uC624\uB958:",e),new Error("AI \uC751\uB2F5\uC744 \uD30C\uC2F1\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}parseCharacterResponse(t){try{let e={},n=t.match(/:\s*(.+)/);n&&(e.name=n[1].trim());let o=t.match(/:\s*(\d+)/);o&&(e.age=parseInt(o[1]));let c=t.match(/:\s*(.+?)(?=\n|$)/);if(c){let S=c[1].trim();S.includes("\uB0A8")?e.gender="male":S.includes("\uC5EC")?e.gender="female":e.gender="other"}let d=t.match(/:\s*(.+?)(?=\n|$)/);if(d){let S=d[1].trim();S.includes("\uC8FC\uC778\uACF5")?e.role="protagonist":S.includes("\uC801\uB300")||S.includes("\uC545\uC5ED")?e.role="antagonist":S.includes("\uC870\uC5F0")?e.role="supporting":e.role="minor"}let g=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);g&&(e.appearance=g[1].trim());let m=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);m&&(e.personality=m[1].trim());let b=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);b&&(e.background=b[1].trim());let O=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);O&&(e.abilities=O[1].split(",").map(S=>S.trim()).filter(S=>S.length>0));let w=t.match(/:\s*(.+?)(?=\n\n|:|$)/s);w&&(e.goals=w[1].trim());let I=t.match(/:\s*(.+?)$/s);return I&&(e.traits=I[1].split(",").map(S=>S.trim()).filter(S=>S.length>0)),console.log("\uD30C\uC2F1\uB41C \uCE90\uB9AD\uD130:",e),e}catch(e){throw console.error("\uCE90\uB9AD\uD130 \uD30C\uC2F1 \uC624\uB958:",e),new Error("AI \uC751\uB2F5\uC744 \uD30C\uC2F1\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}generateItem(t="\uBB34\uAE30",e="\uACE0\uAE09"){if(!this.hasApiKey())return F(()=>new Error("API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let o={contents:[{parts:[{text:this.buildItemPrompt(t,e)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:1024}},c=new Z({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,o,{headers:c}).pipe(j(d=>{let g=d?.candidates?.[0]?.content?.parts?.[0]?.text;if(!g)throw new Error("AI \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.");return console.log("AI \uC544\uC774\uD15C \uC751\uB2F5:",g),this.parseItemResponse(g)}),K(d=>{console.error("Gemini API \uC544\uC774\uD15C \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:d.status,statusText:d.statusText,message:d.message,error:d.error,fullError:d});let g="AI \uC544\uC774\uD15C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return d.status===400?g="API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":d.status===429?g="API \uD638\uCD9C \uD55C\uB3C4\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.":d.error?.error?.message&&(g=d.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",g),F(()=>new Error(g))}))}buildItemPrompt(t,e){return`\uB2F9\uC2E0\uC740 \uBB34\uD611 \uC18C\uC124\uC758 \uC544\uC774\uD15C \uB514\uC790\uC774\uB108\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uC870\uAC74\uC5D0 \uB9DE\uB294 ${t}\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694.

\uB4F1\uAE09: ${e}
\uD0C0\uC785: ${t}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC751\uB2F5\uD574\uC8FC\uC138\uC694:
{
  "name": "\uC544\uC774\uD15C \uC774\uB984 (\uD55C\uC790 \uD3EC\uD568 \uAC00\uB2A5, \uC608: \uCC9C\uB9C8\uAC80(\u5929\u9B54\u528D))",
  "description": "\uC544\uC774\uD15C\uC5D0 \uB300\uD55C \uC0C1\uC138\uD55C \uC124\uBA85 (2-3\uBB38\uC7A5)",
  "type": "${t}",
  "grade": "${e}",
  "effects": ["\uD6A8\uACFC1", "\uD6A8\uACFC2", "\uD6A8\uACFC3"],
  "stats": {
    "attack": \uACF5\uACA9\uB825 \uC218\uCE58 (\uBB34\uAE30\uC758 \uACBD\uC6B0),
    "defense": \uBC29\uC5B4\uB825 \uC218\uCE58 (\uBC29\uC5B4\uAD6C\uC758 \uACBD\uC6B0),
    "hp": HP \uBCF4\uB108\uC2A4,
    "mp": MP \uBCF4\uB108\uC2A4
  },
  "requirements": "\uC0AC\uC6A9 \uC870\uAC74 (\uC608: \uB0B4\uACF5 500 \uC774\uC0C1, \uAC80\uBC95 \uC219\uB828\uB3C4 \uC0C1\uAE09)",
  "lore": "\uC544\uC774\uD15C\uC758 \uC804\uC124\uC774\uB098 \uC720\uB798 (1-2\uBB38\uC7A5)",
  "tags": ["\uD0DC\uADF81", "\uD0DC\uADF82", "\uD0DC\uADF83"]
}

\uADDC\uCE59:
1. \uC544\uC774\uD15C\uBA85\uC740 \uBB34\uD611 \uC138\uACC4\uAD00\uC5D0 \uC5B4\uC6B8\uB9AC\uAC8C \uBA4B\uC9C0\uACE0 \uC6C5\uC7A5\uD558\uAC8C
2. \uB4F1\uAE09\uC5D0 \uB9DE\uB294 \uB2A5\uB825\uCE58 \uC124\uC815 (\uC77C\uBC18: 10-30, \uACE0\uAE09: 40-70, \uD76C\uADC0: 80-120, \uC804\uC124: 130-200, \uC2E0\uD654: 250+)
3. \uD6A8\uACFC\uB294 \uAD6C\uCCB4\uC801\uC774\uACE0 \uAC8C\uC784\uC5D0\uC11C \uC0AC\uC6A9 \uAC00\uB2A5\uD558\uB3C4\uB85D
4. \uC804\uC124\uC774\uB098 \uC720\uB798\uB294 \uC2E0\uBE44\uB86D\uACE0 \uD765\uBBF8\uB86D\uAC8C
5. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5
6. JSON \uC678\uC758 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9D0 \uAC83`}parseItemResponse(t){try{let e=t.match(/\{[\s\S]*\}/);if(!e)throw new Error("JSON \uD615\uC2DD\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let n=JSON.parse(e[0]);if(!n.name||!n.description||!n.type)throw new Error("\uD544\uC218 \uD544\uB4DC\uAC00 \uB204\uB77D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");return n.effects&&!Array.isArray(n.effects)&&(n.effects=[n.effects]),n.tags&&!Array.isArray(n.tags)&&(n.tags=[n.tags]),n}catch(e){throw console.error("\uC544\uC774\uD15C \uD30C\uC2F1 \uC624\uB958:",e),console.error("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:",t),new Error("\uC544\uC774\uD15C \uC815\uBCF4\uB97C \uD30C\uC2F1\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}generateNovel(t){if(!this.hasApiKey())return F(()=>new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let n={contents:[{parts:[{text:this.buildNovelPrompt(t)}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:8192}},o=new Z({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,n,{headers:o}).pipe(j(c=>{if(c?.candidates?.[0]?.content?.parts?.[0]?.text)return{content:c.candidates[0].content.parts[0].text};throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),K(c=>{console.error("Gemini API \uC18C\uC124 \uC0DD\uC131 \uC624\uB958 \uC0C1\uC138:",{status:c.status,statusText:c.statusText,message:c.message,error:c.error,fullError:c});let d="AI \uC18C\uC124 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";return c.status===400?d="API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":c.status===429?d="API \uD638\uCD9C \uD55C\uB3C4\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.":c.error?.error?.message&&(d+=" - "+c.error.error.message),console.error("\uCD5C\uC885 \uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",d),F(()=>new Error(d))}))}buildNovelPrompt(t){let{characters:e,scenarios:n,items:o,settings:c}=t,d="";e&&e.length>0&&(d=`

**\uB4F1\uC7A5\uC778\uBB3C:**
`,e.slice(0,5).forEach(y=>{d+=`- ${y.name}`,y.age&&(d+=` (${y.age}\uC138)`),y.role&&(d+=` - ${y.role==="protagonist"?"\uC8FC\uC778\uACF5":y.role==="antagonist"?"\uC801\uB300\uC790":"\uC870\uC5F0"}`),y.personality&&(d+=`
  \uC131\uACA9: ${y.personality}`),y.abilities&&y.abilities.length>0&&(d+=`
  \uBB34\uACF5/\uB2A5\uB825: ${y.abilities.join(", ")}`),d+=`
`}));let g="";if(n&&n.length>0){let y=n[0];g=`

**\uC0C1\uD669 \uC124\uC815:**
`,y.title&&(g+=`\uC81C\uBAA9: ${y.title}
`),y.description&&(g+=`\uC124\uBA85: ${y.description}
`),y.setting&&(g+=`\uBC30\uACBD: ${y.setting}
`),y.conflict&&(g+=`\uAC08\uB4F1: ${y.conflict}
`),y.goal&&(g+=`\uBAA9\uD45C: ${y.goal}
`),y.mood&&(g+=`\uBD84\uC704\uAE30: ${y.mood}
`)}let m="";o&&o.length>0&&(m=`

**\uC911\uC694 \uC544\uC774\uD15C:**
`,o.slice(0,3).forEach(y=>{m+=`- ${y.name}`,y.type&&(m+=` (${y.type})`),y.description&&(m+=`: ${y.description}`),m+=`
`}));let b=c.genre||"traditional",O=c.protagonist||"\uAC80\uC131",w=c.theme||"revenge",I=c.violence||"moderate",S=c.romance||"none",A=c.adult||!1;return`\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB34\uD611 \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uC815\uBCF4\uB97C \uBC14\uD0D5\uC73C\uB85C \uD765\uBBF8\uC9C4\uC9C4\uD55C \uBB34\uD611\uC9C0 3\uD398\uC774\uC9C0 \uBD84\uB7C9(\uC57D 3000-4000\uC790)\uC744 \uC791\uC131\uD574\uC8FC\uC138\uC694.

**\uC18C\uC124 \uC124\uC815:**
- \uC7A5\uB974: ${b}
- \uC8FC\uC778\uACF5: ${O}
- \uC8FC\uC81C: ${w}
- \uD3ED\uB825 \uC218\uC704: ${I}
- \uB85C\uB9E8\uC2A4 \uC218\uC704: ${S}
- \uC131\uC778 \uCF58\uD150\uCE20: ${A?"\u{1F51E} \uC608 (19+)":"\uC544\uB2C8\uC624 (\uC804\uC5F0\uB839)"}
${A?`

**\u{1F51E} \uC131\uC778 \uCF58\uD150\uCE20 \uBC18\uC601 (19+):**
- \uC131\uC778 \uB3C5\uC790\uB97C \uB300\uC0C1\uC73C\uB85C \uD55C \uC218\uC704 \uB192\uC740 \uD45C\uD604 \uC0AC\uC6A9 \uAC00\uB2A5
- \uD3ED\uB825: \uB354 \uC9C1\uC811\uC801\uC774\uACE0 \uC0AC\uC2E4\uC801\uC778 \uC804\uD22C \uBC0F \uD3ED\uB825 \uBB18\uC0AC
- \uB85C\uB9E8\uC2A4/\uAD00\uB2A5: \uC740\uC720\uC801\uC774\uC9C0 \uC54A\uC740 \uC9C1\uC811\uC801\uC774\uACE0 \uB178\uACE8\uC801\uC778 \uD45C\uD604 \uD5C8\uC6A9
- \uC5B8\uC5B4: \uAC70\uCE5C \uC5B8\uC5B4, \uC695\uC124, \uC131\uC778\uC6A9 \uD45C\uD604 \uC0AC\uC6A9 \uAC00\uB2A5
- \uC8FC\uC81C: \uBCF5\uC218, \uBC30\uC2E0, \uC695\uB9DD \uB4F1 \uC5B4\uB450\uC6B4 \uC8FC\uC81C\uB97C \uB354\uC6B1 \uAE4A\uC774 \uC788\uAC8C \uB2E4\uB8F8
- \uC2EC\uB9AC: \uC778\uAC04\uC758 \uC5B4\uB450\uC6B4 \uBA74\uACFC \uC695\uB9DD\uC744 \uC194\uC9C1\uD558\uAC8C \uD45C\uD604`:`

**\uC77C\uBC18 \uB3C5\uC790\uC6A9 \uCF58\uD150\uCE20:**
- \uC804\uC5F0\uB839 \uB610\uB294 \uCCAD\uC18C\uB144 \uC774\uC0C1 \uB3C5\uC790 \uB300\uC0C1
- \uD3ED\uB825\uACFC \uB85C\uB9E8\uC2A4 \uD45C\uD604\uC744 \uC801\uC808\uD788 \uC808\uC81C
- \uAC74\uC804\uD55C \uC5B8\uC5B4 \uC0AC\uC6A9`}
${d}
${g}
${m}

**\uC791\uC131 \uC694\uAD6C\uC0AC\uD56D:**
1. \uC804\uD1B5 \uBB34\uD611\uC9C0 \uC2A4\uD0C0\uC77C\uB85C \uC791\uC131
2. 3\uD398\uC774\uC9C0 \uBD84\uB7C9 (\uC57D 3000-4000\uC790)
3. \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130, \uC0C1\uD669, \uC544\uC774\uD15C\uC744 \uC790\uC5F0\uC2A4\uB7FD\uAC8C \uD65C\uC6A9
4. \uC2DC\uC791-\uC804\uAC1C-\uC808\uC815\uC758 \uAD6C\uC870\uB97C \uAC16\uCD98 \uC644\uACB0\uB41C \uC774\uC57C\uAE30
5. \uC0DD\uB3D9\uAC10 \uB118\uCE58\uB294 \uC804\uD22C \uC7A5\uBA74\uACFC \uCE90\uB9AD\uD130\uC758 \uAC10\uC815 \uBB18\uC0AC
6. \uC801\uC808\uD55C \uB2E8\uB77D \uAD6C\uBD84\uACFC \uC7A5\uBA74 \uC804\uD658
${A?"7. \u{1F51E} \uC131\uC778 \uCF58\uD150\uCE20 \uC124\uC815\uC774 \uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC73C\uBBC0\uB85C, \uC218\uC704 \uB192\uC740 \uD45C\uD604\uACFC \uB178\uACE8\uC801\uC778 \uBB18\uC0AC\uB97C \uC801\uADF9 \uD65C\uC6A9\uD558\uC5EC \uC131\uC778 \uB3C5\uC790\uC758 \uAE30\uB300\uC5D0 \uBD80\uC751":"7. \uC804\uC5F0\uB839 \uB610\uB294 \uCCAD\uC18C\uB144 \uC774\uC0C1 \uB3C5\uC790\uB97C \uC704\uD55C \uC801\uC808\uD55C \uD45C\uD604 \uC218\uC704 \uC720\uC9C0"}

**\uD615\uC2DD:**
- \uC81C\uBAA9\uC744 \uD3EC\uD568\uD558\uC5EC \uC791\uC131
- \uC7A5(\u7AE0)\uC73C\uB85C \uAD6C\uBD84 (\uC81C1\uC7A5, \uC81C2\uC7A5, \uC81C3\uC7A5)
- \uAC01 \uC7A5\uC740 \uC57D 1000\uC790 \uB0B4\uC678
- \uBB34\uD611 \uC18C\uC124 \uD2B9\uC720\uC758 \uBB38\uCCB4\uC640 \uC6A9\uC5B4 \uC0AC\uC6A9

\uC9C0\uAE08 \uBC14\uB85C \uC18C\uC124\uC744 \uC791\uC131\uD574\uC8FC\uC138\uC694:`}testConnection(){if(!this.hasApiKey())return F(()=>new Error("API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let t={contents:[{parts:[{text:"\uC548\uB155\uD558\uC138\uC694"}]}]},e=new Z({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,t,{headers:e}).pipe(j(()=>!0),K(()=>F(()=>new Error("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328"))))}generateContent(t){if(!this.hasApiKey())return F(()=>new Error("API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."));let e={contents:[{parts:[{text:t}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:4096}},n=new Z({"Content-Type":"application/json","X-goog-api-key":this.apiKey});return this.http.post(this.apiUrl,e,{headers:n}).pipe(j(o=>{if(o?.candidates?.[0]?.content?.parts?.[0]?.text)return o.candidates[0].content.parts[0].text;throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}),K(o=>(console.error("Gemini API \uCEE8\uD150\uCE20 \uC0DD\uC131 \uC624\uB958:",o),F(()=>new Error("\uCEE8\uD150\uCE20 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")))))}static \u0275fac=function(e){return new(e||i)(oe(Et))};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ae=class i{dbName="NovelScenarioDB";dbVersion=1;storeName="scenarios";db=null;constructor(){this.initDB()}initDB(){return x(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{console.error("IndexedDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),e(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("\u2705 IndexedDB \uCD08\uAE30\uD654 \uC644\uB8CC"),t()},n.onupgradeneeded=o=>{let c=o.target.result;if(!c.objectStoreNames.contains(this.storeName)){let d=c.createObjectStore(this.storeName,{keyPath:"id"});d.createIndex("title","title",{unique:!1}),d.createIndex("genre","genre",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),console.log("\u{1F4E6} IndexedDB \uC2A4\uD1A0\uC5B4 \uC0DD\uC131 \uC644\uB8CC")}}})})}ensureDB(){return x(this,null,function*(){return this.db||(yield this.initDB()),this.db})}saveScenario(t){return x(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,o)=>{let g=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t);g.onsuccess=()=>{console.log("\u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC644\uB8CC:",t.title),n()},g.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC2E4\uD328:",g.error),o(g.error)}})})}getAllScenarios(){return x(this,null,function*(){let t=yield this.ensureDB();return new Promise((e,n)=>{let d=t.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();d.onsuccess=()=>{let g=d.result;g.sort((m,b)=>new Date(b.createdAt).getTime()-new Date(m.createdAt).getTime()),console.log("\u{1F4DA} \uC2DC\uB098\uB9AC\uC624 \uBAA9\uB85D \uB85C\uB4DC:",g.length,"\uAC1C"),e(g)},d.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328:",d.error),n(d.error)}})})}getScenario(t){return x(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,o)=>{let g=e.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);g.onsuccess=()=>{n(g.result||null)},g.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uB85C\uB4DC \uC2E4\uD328:",g.error),o(g.error)}})})}deleteScenario(t){return x(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,o)=>{let g=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);g.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC644\uB8CC:",t),n()},g.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC2E4\uD328:",g.error),o(g.error)}})})}getScenariosByGenre(t){return x(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,o)=>{let m=e.transaction([this.storeName],"readonly").objectStore(this.storeName).index("genre").getAll(t);m.onsuccess=()=>{let b=m.result;b.sort((O,w)=>new Date(w.createdAt).getTime()-new Date(O.createdAt).getTime()),n(b)},m.onerror=()=>{console.error("\u274C \uC7A5\uB974\uBCC4 \uC2DC\uB098\uB9AC\uC624 \uB85C\uB4DC \uC2E4\uD328:",m.error),o(m.error)}})})}clearAllScenarios(){return x(this,null,function*(){let t=yield this.ensureDB();return new Promise((e,n)=>{let d=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();d.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uBAA8\uB4E0 \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC644\uB8CC"),e()},d.onerror=()=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC804\uCCB4 \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ne=class i{dbName="NovelItemDB";storeName="items";db=null;constructor(){this.initDB()}initDB(){return x(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{console.error("ItemDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),e(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("ItemDB \uC5F4\uAE30 \uC131\uACF5"),t()},n.onupgradeneeded=o=>{let c=o.target.result;if(!c.objectStoreNames.contains(this.storeName)){let d=c.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});d.createIndex("name","name",{unique:!1}),d.createIndex("type","type",{unique:!1}),d.createIndex("grade","grade",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),console.log("ItemDB object store \uC0DD\uC131 \uC644\uB8CC")}}})})}saveItem(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(t);d.onsuccess=()=>{console.log("\uC544\uC774\uD15C \uC800\uC7A5 \uC131\uACF5:",d.result),e(d.result)},d.onerror=()=>{console.error("\uC544\uC774\uD15C \uC800\uC7A5 \uC2E4\uD328:",d.error),n(d.error)}})})}getAllItems(){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let c=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();c.onsuccess=()=>{let d=c.result;d.sort((g,m)=>new Date(m.createdAt).getTime()-new Date(g.createdAt).getTime()),t(d)},c.onerror=()=>{console.error("\uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",c.error),e(c.error)}})})}getItem(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);d.onsuccess=()=>{e(d.result)},d.onerror=()=>{console.error("\uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",d.error),n(d.error)}})})}deleteItem(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);d.onsuccess=()=>{console.log("\uC544\uC774\uD15C \uC0AD\uC81C \uC131\uACF5"),e()},d.onerror=()=>{console.error("\uC544\uC774\uD15C \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}getItemsByType(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let g=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("type").getAll(t);g.onsuccess=()=>{e(g.result)},g.onerror=()=>{console.error("\uD0C0\uC785\uBCC4 \uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",g.error),n(g.error)}})})}getItemsByGrade(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let g=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("grade").getAll(t);g.onsuccess=()=>{e(g.result)},g.onerror=()=>{console.error("\uB4F1\uAE09\uBCC4 \uC544\uC774\uD15C \uC870\uD68C \uC2E4\uD328:",g.error),n(g.error)}})})}clearAllItems(){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let c=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();c.onsuccess=()=>{console.log("\uBAA8\uB4E0 \uC544\uC774\uD15C \uC0AD\uC81C \uC131\uACF5"),t()},c.onerror=()=>{console.error("\uBAA8\uB4E0 \uC544\uC774\uD15C \uC0AD\uC81C \uC2E4\uD328:",c.error),e(c.error)}})})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Re=class i{dbName="NovelCharacterDB";storeName="characters";db=null;constructor(){this.initDB()}initDB(){return x(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{console.error("CharacterDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),e(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("CharacterDB \uC5F4\uAE30 \uC131\uACF5"),t()},n.onupgradeneeded=o=>{let c=o.target.result;if(!c.objectStoreNames.contains(this.storeName)){let d=c.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});d.createIndex("name","name",{unique:!1}),d.createIndex("occupation","occupation",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),console.log("CharacterDB object store \uC0DD\uC131 \uC644\uB8CC")}}})})}saveCharacter(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(t);d.onsuccess=()=>{console.log("\uCE90\uB9AD\uD130 \uC800\uC7A5 \uC131\uACF5:",d.result),e(d.result)},d.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC800\uC7A5 \uC2E4\uD328:",d.error),n(d.error)}})})}getAllCharacters(){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let c=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();c.onsuccess=()=>{let d=c.result;d.sort((g,m)=>new Date(m.createdAt).getTime()-new Date(g.createdAt).getTime()),t(d)},c.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC870\uD68C \uC2E4\uD328:",c.error),e(c.error)}})})}getCharacter(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);d.onsuccess=()=>{e(d.result)},d.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC870\uD68C \uC2E4\uD328:",d.error),n(d.error)}})})}deleteCharacter(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);d.onsuccess=()=>{console.log("\uCE90\uB9AD\uD130 \uC0AD\uC81C \uC131\uACF5"),e()},d.onerror=()=>{console.error("\uCE90\uB9AD\uD130 \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}clearAllCharacters(){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let c=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();c.onsuccess=()=>{console.log("\uBAA8\uB4E0 \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC131\uACF5"),t()},c.onerror=()=>{console.error("\uBAA8\uB4E0 \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC2E4\uD328:",c.error),e(c.error)}})})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Y=class i{STORAGE_KEY="novel_auth_user";ADMIN_USERNAME="admin";ADMIN_PASSWORD="9920";currentUserSubject;currentUser$;constructor(){let t=this.loadUserFromStorage();this.currentUserSubject=new ue(t),this.currentUser$=this.currentUserSubject.asObservable()}loadUserFromStorage(){try{let t=localStorage.getItem(this.STORAGE_KEY);if(t){let e=JSON.parse(t);return e.loginTime=new Date(e.loginTime),e}}catch(t){console.error("Failed to load user from storage:",t)}return null}saveUserToStorage(t){try{t?localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)):localStorage.removeItem(this.STORAGE_KEY)}catch(e){console.error("Failed to save user to storage:",e)}}login(t,e){if(t===this.ADMIN_USERNAME&&e===this.ADMIN_PASSWORD){let n={username:this.ADMIN_USERNAME,loginTime:new Date};return this.currentUserSubject.next(n),this.saveUserToStorage(n),!0}return!1}logout(){this.currentUserSubject.next(null),this.saveUserToStorage(null)}isLoggedIn(){return this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}getCurrentUsername(){let t=this.getCurrentUser();return t?t.username:null}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ge=class i{dbName="NovelStoryDB";storeName="stories";db=null;constructor(){this.initDB()}initDB(){return x(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{console.error("StoryDB \uC5F4\uAE30 \uC2E4\uD328:",n.error),e(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("\u2705 StoryDB \uC5F4\uAE30 \uC131\uACF5"),t()},n.onupgradeneeded=o=>{let c=o.target.result;if(!c.objectStoreNames.contains(this.storeName)){let d=c.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!1});d.createIndex("title","title",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),d.createIndex("genre","genre",{unique:!1}),console.log("\u2705 StoryDB \uC624\uBE0C\uC81D\uD2B8 \uC2A4\uD1A0\uC5B4 \uC0DD\uC131 \uC644\uB8CC")}}})})}saveStory(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t);d.onsuccess=()=>{console.log("\u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC131\uACF5:",t.title),e()},d.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC2E4\uD328:",d.error),n(d.error)}})})}getAllStories(){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let c=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();c.onsuccess=()=>{let d=c.result;d.sort((g,m)=>new Date(m.createdAt).getTime()-new Date(g.createdAt).getTime()),console.log("\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D:",d.length),t(d)},c.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328:",c.error),e(c.error)}})})}getStory(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);d.onsuccess=()=>{e(d.result||null)},d.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC \uC2E4\uD328:",d.error),n(d.error)}})})}deleteStory(t){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);d.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC131\uACF5:",t),e()},d.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC2E4\uD328:",d.error),n(d.error)}})})}clearAllStories(){return x(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let c=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();c.onsuccess=()=>{console.log("\u{1F5D1}\uFE0F \uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC644\uB8CC"),t()},c.onerror=()=>{console.error("\u274C \uC2A4\uD1A0\uB9AC \uC804\uCCB4 \uC0AD\uC81C \uC2E4\uD328:",c.error),e(c.error)}})})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Co=["battleLogContainer"],vo=(i,t,e,n)=>({"node-start":i,"node-story":t,"node-choice":e,"node-current":n});function fo(i,t){if(i&1&&(r(0,"div",45)(1,"span",46),s(2),a()()),i&2){let e=p(2);l(2),P("\u{1F464} ",e.getCurrentUsername())}}function bo(i,t){if(i&1&&(r(0,"div",27),s(1),a()),i&2){let e=p(2);l(),f(e.savedGames.length)}}function Po(i,t){if(i&1&&(r(0,"div",70),s(1),a()),i&2){let e=p(3);l(),P(" ",e.storyGenerationError," ")}}function xo(i,t){if(i&1){let e=M();r(0,"div",71),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.selectCharacterForStory(o))}),r(1,"div",72),s(2),a(),r(3,"div",73),s(4),a()()}if(i&2){let e=t.$implicit,n=p(3);E("selected",n.isCharacterSelected(e)),l(2),f(e.name),l(2),f(e.occupation)}}function Mo(i,t){i&1&&(r(0,"p",74),s(1," \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),a())}function Oo(i,t){if(i&1){let e=M();r(0,"div",71),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.selectItemForStory(o))}),r(1,"div",72),s(2),a(),r(3,"div",73),s(4),a()()}if(i&2){let e=t.$implicit,n=p(3);E("selected",n.isItemSelected(e)),l(2),f(e.name),l(2),R("",e.type," \xB7 ",e.grade)}}function yo(i,t){i&1&&(r(0,"p",74),s(1," \uC800\uC7A5\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC544\uC774\uD15C \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),a())}function wo(i,t){if(i&1){let e=M();r(0,"div",71),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.selectScenarioForStory(o))}),r(1,"div",72),s(2),a(),r(3,"div",73),s(4),a()()}if(i&2){let e=t.$implicit,n=p(3);E("selected",n.isScenarioSelected(e)),l(2),f(e.title),l(2),f(e.genre)}}function ko(i,t){i&1&&(r(0,"p",74),s(1," \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),a())}function So(i,t){i&1&&(r(0,"span"),s(1,"\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131"),a())}function Do(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Eo(i,t){if(i&1&&(r(0,"p"),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Io(i,t){if(i&1){let e=M();r(0,"div",75)(1,"h4"),s(2,"\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",76)(4,"div",77)(5,"span",78),s(6),a(),r(7,"h3"),s(8),a()(),r(9,"p",79),s(10),a(),r(11,"div",80)(12,"span",81),s(13),a(),r(14,"span",81),s(15),a(),r(16,"span",81),s(17),a()(),r(18,"div",82)(19,"h5"),s(20,"\uCCAB \uBC88\uC9F8 \uC7A5\uBA74"),a(),v(21,Eo,2,1,"p",83),a()(),r(22,"div",84)(23,"button",85),h("click",function(){u(e);let o=p(3);return C(o.saveGeneratedStory())}),s(24," \u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 "),a(),r(25,"button",86),h("click",function(){u(e);let o=p(3);return C(o.addGeneratedStoryToList())}),s(26," \u{1F3AE} \uAC8C\uC784 \uC2DC\uC791 "),a(),r(27,"button",87),h("click",function(){u(e);let o=p(3);return C(o.clearGeneratedStory())}),s(28," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131 "),a()()()}if(i&2){let e=p(3);l(6),f(e.generatedStory.icon),l(2),f(e.generatedStory.title),l(2),f(e.generatedStory.description),l(3),P("\u{1F4DA} ",e.generatedStory.genre),l(2),P("\u2694\uFE0F ",e.generatedStory.difficulty==="easy"?"\uC26C\uC6C0":e.generatedStory.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"),l(2),P("\u{1F4B0} ",e.generatedStory.startingGold,"G"),l(4),_("ngForOf",e.generatedStory.firstStory)}}function To(i,t){if(i&1){let e=M();r(0,"div",47)(1,"div",48)(2,"div",49)(3,"h3"),s(4,"\u2728 \uC2A4\uD1A0\uB9AC \uC0DD\uC131\uAE30"),a(),r(5,"button",50),h("click",function(){u(e);let o=p(2);return C(o.toggleStoryCreatorPanel())}),s(6,"\u2715"),a()(),r(7,"div",51)(8,"h4"),s(9,"\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694"),a(),r(10,"p"),s(11,"\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uBA74 Loworld AI\uAC00 \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4."),a()(),v(12,Po,2,1,"div",52),r(13,"div",53)(14,"label",54)(15,"span",55),s(16,"\u{1F4D6}"),a(),r(17,"span",56),s(18,"\uC2A4\uD1A0\uB9AC \uC81C\uBAA9"),a(),r(19,"span",57),s(20,"*"),a()(),r(21,"input",58),se("ngModelChange",function(o){u(e);let c=p(2);return ae(c.storyTitle,o)||(c.storyTitle=o),C(o)}),a(),r(22,"div",59),s(23),a()(),r(24,"div",60)(25,"div",61)(26,"h5"),s(27,"\u{1F3AD} \uC8FC\uC778\uACF5 \uC120\uD0DD "),r(28,"span",62),s(29),a()(),r(30,"div",63),v(31,xo,5,4,"div",64),a(),v(32,Mo,2,0,"p",65),a(),r(33,"div",61)(34,"h5"),s(35,"\u{1F48E} \uD575\uC2EC \uC544\uC774\uD15C \uC120\uD0DD "),r(36,"span",62),s(37),a()(),r(38,"div",63),v(39,Oo,5,5,"div",64),a(),v(40,yo,2,0,"p",65),a(),r(41,"div",61)(42,"h5"),s(43,"\u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC120\uD0DD "),r(44,"span",62),s(45),a()(),r(46,"div",63),v(47,wo,5,4,"div",64),a(),v(48,ko,2,0,"p",65),a()(),r(49,"div",66)(50,"button",67),h("click",function(){u(e);let o=p(2);return C(o.generateStoryFromSavedContent())}),v(51,So,2,0,"span",68)(52,Do,2,0,"span",68),a()(),v(53,Io,29,7,"div",69),a()()}if(i&2){let e=p(2);l(12),_("ngIf",e.storyGenerationError),l(9),re("ngModel",e.storyTitle),l(2),P("",e.storyTitle.length,"/50"),l(6),P("(",e.selectedCharactersForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),l(2),_("ngForOf",e.savedCharacters),l(),_("ngIf",e.savedCharacters.length===0),l(5),P("(",e.selectedItemsForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),l(2),_("ngForOf",e.savedItems),l(),_("ngIf",e.savedItems.length===0),l(5),P("(",e.selectedScenariosForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),l(2),_("ngForOf",e.savedScenarios),l(),_("ngIf",e.savedScenarios.length===0),l(2),_("disabled",e.isGeneratingStory||!e.storyTitle||e.storyTitle.trim()===""||e.selectedCharactersForStory.length===0||e.selectedItemsForStory.length===0||e.selectedScenariosForStory.length===0),l(),_("ngIf",!e.isGeneratingStory),l(),_("ngIf",e.isGeneratingStory),l(),_("ngIf",e.generatedStory)}}function Bo(i,t){if(i&1){let e=M();r(0,"div",91),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.loadSavedStoryForGame(o))}),r(1,"div",92)(2,"div",93)(3,"span",78),s(4),a(),r(5,"h4"),s(6),a()(),r(7,"button",94),h("click",function(o){let c=u(e).$implicit,d=p(3);return C(d.deleteSavedStory(c.id,o))}),s(8," \u{1F5D1}\uFE0F "),a()(),r(9,"div",80)(10,"span",81),s(11),a(),r(12,"span",81),s(13),a(),r(14,"span",81),s(15),a()(),r(16,"p",95),s(17),a(),r(18,"div",96)(19,"span",97),s(20),a(),r(21,"span",98),s(22,"\u{1F916} AI \uC0DD\uC131"),a()()()}if(i&2){let e=t.$implicit,n=p(3);l(4),f(e.icon),l(2),f(e.title),l(5),P("\u{1F4DA} ",e.genre),l(2),P("\u2694\uFE0F ",e.difficulty==="easy"?"\uC26C\uC6C0":e.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"),l(2),P("\u{1F4B0} ",e.startingGold,"G"),l(2),f(e.description),l(3),f(n.formatSaveDate(e.createdAt))}}function Ao(i,t){if(i&1&&(r(0,"div",88)(1,"div",41)(2,"h3"),s(3,"\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC"),a(),r(4,"p",42),s(5,"AI\uAC00 \uC0DD\uC131\uD55C \uB098\uB9CC\uC758 \uC774\uC57C\uAE30\uB4E4"),a()(),r(6,"div",89),v(7,Bo,23,7,"div",90),a()()),i&2){let e=p(2);l(7),_("ngForOf",e.savedStories)}}function No(i,t){if(i&1&&(r(0,"span",110),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Ro(i,t){if(i&1&&(r(0,"div",108),v(1,No,2,1,"span",109),a()),i&2){let e=p().$implicit;l(),_("ngForOf",e.personality.slice(0,3))}}function Go(i,t){if(i&1&&(r(0,"div",108)(1,"span",110),s(2),a()()),i&2){let e=p().$implicit;l(2),f(e.personality)}}function Fo(i,t){if(i&1){let e=M();r(0,"div",102),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.loadCharacter(o))}),r(1,"div",103)(2,"h4"),s(3),a(),r(4,"button",94),h("click",function(o){let c=u(e).$implicit,d=p(3);return C(c.id&&d.deleteCharacter(c.id,o))}),s(5," \u{1F5D1}\uFE0F "),a()(),r(6,"div",104)(7,"span",81),s(8),a(),r(9,"span",81),s(10),a(),r(11,"span",81),s(12),a()(),r(13,"p",105),s(14),a(),v(15,Ro,2,1,"div",106)(16,Go,3,1,"div",106),r(17,"div",107)(18,"span",97),s(19),a()()()}if(i&2){let e=t.$implicit,n=p(3);l(3),f(e.name),l(5),P("\u{1F464} ",e.gender),l(2),P("\u{1F4C5} ",e.age,"\uC138"),l(2),P("\u{1F4BC} ",e.occupation),l(2),f(e.backstory),l(),_("ngIf",n.isArray(e.personality)),l(),_("ngIf",!n.isArray(e.personality)&&e.personality),l(3),f(n.formatSaveDate(e.createdAt))}}function Vo(i,t){if(i&1&&(r(0,"div",99)(1,"div",41)(2,"h3"),s(3,"\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130"),a(),r(4,"p",42),s(5,"AI\uAC00 \uC0DD\uC131\uD55C \uCE90\uB9AD\uD130\uB4E4"),a()(),r(6,"div",100),v(7,Fo,20,8,"div",101),a()()),i&2){let e=p(2);l(7),_("ngForOf",e.savedCharacters)}}function zo(i,t){if(i&1&&(r(0,"span",121),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Lo(i,t){if(i&1){let e=M();r(0,"div",114),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.loadScenario(o))}),r(1,"div",115)(2,"h4"),s(3),a(),r(4,"button",94),h("click",function(o){let c=u(e).$implicit;return p(3).deleteScenario(c.id),C(o.stopPropagation())}),s(5," \u{1F5D1}\uFE0F "),a()(),r(6,"p",116),s(7),a(),r(8,"div",117),v(9,zo,2,1,"span",118),a(),r(10,"div",119)(11,"span",120),s(12),a(),r(13,"span",97),s(14),a()()()}if(i&2){let e=t.$implicit,n=p(3);l(3),f(e.title),l(4),f(e.description),l(2),_("ngForOf",e.tags.slice(0,3)),l(3),f(e.genre),l(2),f(n.formatSaveDate(e.createdAt))}}function $o(i,t){if(i&1&&(r(0,"div",111)(1,"div",41)(2,"h3"),s(3,"\u{1F3AC} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624"),a(),r(4,"p",42),s(5,"AI\uAC00 \uC0DD\uC131\uD55C \uC2DC\uB098\uB9AC\uC624\uB4E4"),a()(),r(6,"div",112),v(7,Lo,15,5,"div",113),a()()),i&2){let e=p(2);l(7),_("ngForOf",e.savedScenarios)}}function jo(i,t){if(i&1&&(r(0,"span",134),s(1),a()),i&2){let e=p(2).$implicit;l(),P("\u2694\uFE0F ",e.stats.attack)}}function Uo(i,t){if(i&1&&(r(0,"span",134),s(1),a()),i&2){let e=p(2).$implicit;l(),P("\u{1F6E1}\uFE0F ",e.stats.defense)}}function Ho(i,t){if(i&1&&(r(0,"span",134),s(1),a()),i&2){let e=p(2).$implicit;l(),P("\u2764\uFE0F ",e.stats.hp)}}function qo(i,t){if(i&1&&(r(0,"span",134),s(1),a()),i&2){let e=p(2).$implicit;l(),P("\u{1F499} ",e.stats.mp)}}function Wo(i,t){if(i&1&&(r(0,"div",132),v(1,jo,2,1,"span",133)(2,Uo,2,1,"span",133)(3,Ho,2,1,"span",133)(4,qo,2,1,"span",133),a()),i&2){let e=p().$implicit;l(),_("ngIf",e.stats.attack),l(),_("ngIf",e.stats.defense),l(),_("ngIf",e.stats.hp),l(),_("ngIf",e.stats.mp)}}function Yo(i,t){if(i&1&&(r(0,"span",121),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Ko(i,t){if(i&1){let e=M();r(0,"div",125),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.loadItem(o))}),r(1,"div",126)(2,"h4"),s(3),a(),r(4,"button",94),h("click",function(o){let c=u(e).$implicit,d=p(3);return C(c.id&&d.deleteItem(c.id,o))}),s(5," \u{1F5D1}\uFE0F "),a()(),r(6,"p",73),s(7),a(),v(8,Wo,5,4,"div",127),r(9,"div",128)(10,"span",129),s(11),a(),r(12,"span",130),s(13),a(),v(14,Yo,2,1,"span",118),a(),r(15,"div",131)(16,"span",97),s(17),a()()()}if(i&2){let e=t.$implicit,n=p(3);E("grade-legendary",e.grade==="\uC2E0\uD654"||e.grade==="\uC804\uC124")("grade-rare",e.grade==="\uD76C\uADC0")("grade-uncommon",e.grade==="\uACE0\uAE09"),l(3),f(e.name),l(4),f(e.description),l(),_("ngIf",e.stats),l(3),f(e.type),l(2),f(e.grade),l(),_("ngForOf",e.tags.slice(0,2)),l(3),f(n.formatSaveDate(e.createdAt))}}function Xo(i,t){if(i&1&&(r(0,"div",122)(1,"div",41)(2,"h3"),s(3,"\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C"),a(),r(4,"p",42),s(5,"AI\uAC00 \uC0DD\uC131\uD55C \uBB34\uAE30\uC640 \uC544\uC774\uD15C\uB4E4"),a()(),r(6,"div",123),v(7,Ko,18,13,"div",124),a()()),i&2){let e=p(2);l(7),_("ngForOf",e.savedItems)}}function Zo(i,t){if(i&1){let e=M();r(0,"div",138),h("click",function(){let o=u(e).$implicit,c=p(3);return C(c.loadGameFromSave(o))}),r(1,"div",139)(2,"div",140),s(3),a(),r(4,"div",141),s(5),a()(),r(6,"div",142)(7,"h4"),s(8),a(),r(9,"div",143)(10,"span",144)(11,"mat-icon"),s(12,"person"),a(),s(13),a(),r(14,"span",145)(15,"mat-icon"),s(16,"book"),a(),s(17),a(),r(18,"span",146)(19,"mat-icon"),s(20,"monetization_on"),a(),s(21),a()()(),r(22,"div",147)(23,"button",148),h("click",function(o){let c=u(e).$implicit;return p(3).loadGameFromSave(c),C(o.stopPropagation())}),s(24," \uC774\uC5B4\uD558\uAE30 "),a(),r(25,"button",94),h("click",function(o){let c=u(e).$implicit;return p(3).deleteSave(c.id),C(o.stopPropagation())}),r(26,"mat-icon"),s(27,"delete"),a()()()()}if(i&2){let e=t.$implicit,n=p(3);l(3),f(n.getNovelIcon(e.novelId)),l(2),f(n.formatSaveDate(e.saveDate)),l(3),f(e.novelTitle),l(5),P(" Lv.",e.playerCharacter.level," "),l(4),P(" ",e.currentChapter,"\uC7A5 "),l(4),P(" ",e.gold,"G ")}}function Qo(i,t){if(i&1&&(r(0,"div",135)(1,"div",41)(2,"h3"),s(3,"\u{1F4BE} \uC800\uC7A5\uB41C \uAC8C\uC784"),a(),r(4,"p",42),s(5,"\uC774\uC5B4\uC11C \uD50C\uB808\uC774\uD558\uC138\uC694"),a()(),r(6,"div",136),v(7,Zo,28,6,"div",137),a()()),i&2){let e=p(2);l(7),_("ngForOf",e.savedGames)}}function Jo(i,t){if(i&1){let e=M();r(0,"div",149),h("click",function(){let o=u(e).$implicit,c=p(2);return C(c.selectNovel(o))}),r(1,"div",150)(2,"div",151),s(3),a(),r(4,"div",152),s(5),a()(),r(6,"div",153)(7,"h4"),s(8),a(),r(9,"div",154),s(10),a(),r(11,"p",155),s(12),a(),r(13,"div",156)(14,"div",157)(15,"span",158),s(16,"\u{1F4B0}"),a(),r(17,"span",159),s(18),a()(),r(19,"div",157)(20,"span",158),s(21,"\u{1F392}"),a(),r(22,"span",159),s(23),a()()()()()}if(i&2){let e=t.$implicit;l(3),f(e.icon),l(),ie("difficulty-"+e.difficulty),l(),P(" ",e.difficulty==="easy"?"\uC26C\uC6C0":e.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"," "),l(3),f(e.title),l(2),f(e.genre),l(2),f(e.description),l(6),P("",e.startingGold,"G"),l(5),P("",e.startingItems.length,"\uAC1C")}}function ei(i,t){if(i&1){let e=M();r(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"h2"),s(6,"\u{1F4D6} \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uB77C\uC774\uBE0C\uB7EC\uB9AC"),a(),r(7,"p",19),s(8,"\uB2F9\uC2E0\uC758 \uC120\uD0DD\uC774 \uB9CC\uB4E4\uC5B4\uAC00\uB294 \uC774\uC57C\uAE30"),a()(),r(9,"div",20),v(10,fo,3,1,"div",21),r(11,"button",22),h("click",function(){u(e);let o=p();return C(o.logout())}),s(12," \u{1F6AA} \uB85C\uADF8\uC544\uC6C3 "),a(),r(13,"button",23),h("click",function(){u(e);let o=p();return C(o.toggleTheme())}),s(14),a()()(),r(15,"div",24)(16,"div",25),h("click",function(){u(e);let o=p();return C(o.scrollToNovels())}),r(17,"div",26),s(18,"\u{1F3AE}"),a(),r(19,"h3"),s(20,"\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8"),a(),r(21,"p"),s(22,"\uB2E4\uC591\uD55C \uC7A5\uB974\uC758 \uC18C\uC124 \uC120\uD0DD"),a(),r(23,"div",27),s(24),a()(),r(25,"div",28),h("click",function(){u(e);let o=p();return C(o.openCharacterCreator())}),r(26,"div",26),s(27,"\u{1F3AD}"),a(),r(28,"h3"),s(29,"AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),a(),r(30,"p"),s(31,"Loworld AI\uB85C \uCE90\uB9AD\uD130 \uB9CC\uB4E4\uAE30"),a(),r(32,"div",29),s(33,"AI"),a()(),r(34,"div",28),h("click",function(){u(e);let o=p();return C(o.openScenarioCreator())}),r(35,"div",26),s(36,"\u{1F3AC}"),a(),r(37,"h3"),s(38,"AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131"),a(),r(39,"p"),s(40,"Loworld AI\uB85C \uC0C1\uD669 \uB9CC\uB4E4\uAE30"),a(),r(41,"div",29),s(42,"AI"),a()(),r(43,"div",28),h("click",function(){u(e);let o=p();return C(o.openItemCreator())}),r(44,"div",26),s(45,"\u{1F48E}"),a(),r(46,"h3"),s(47,"AI \uC544\uC774\uD15C \uC0DD\uC131"),a(),r(48,"p"),s(49,"Loworld AI\uB85C \uBB34\uAE30/\uC544\uC774\uD15C \uB9CC\uB4E4\uAE30"),a(),r(50,"div",29),s(51,"AI"),a()(),r(52,"div",30),h("click",function(){u(e);let o=p();return C(o.toggleStoryCreatorPanel())}),r(53,"div",26),s(54,"\u2728"),a(),r(55,"h3"),s(56,"\uC2A4\uD1A0\uB9AC \uC0DD\uC131"),a(),r(57,"p"),s(58,"\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8 \uC774\uC57C\uAE30 \uB9CC\uB4E4\uAE30"),a(),r(59,"div",31),s(60,"NEW"),a()(),r(61,"div",32),h("click",function(){u(e);let o=p();return C(o.scrollToSavedGames())}),r(62,"div",26),s(63,"\u{1F4BE}"),a(),r(64,"h3"),s(65,"\uC800\uC7A5\uB41C \uAC8C\uC784"),a(),r(66,"p"),s(67,"\uC774\uC5B4\uD558\uAE30"),a(),v(68,bo,2,1,"div",33),a()(),v(69,To,54,16,"div",34)(70,Ao,8,1,"div",35)(71,Vo,8,1,"div",36)(72,$o,8,1,"div",37)(73,Xo,8,1,"div",38),a(),v(74,Qo,8,1,"div",39),r(75,"div",40)(76,"div",41)(77,"h3"),s(78,"\u{1F4DA} \uC18C\uC124 \uC120\uD0DD"),a(),r(79,"p",42),s(80,"\uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uC2DC\uC791\uD558\uC138\uC694"),a()(),r(81,"div",43),v(82,Jo,24,9,"div",44),a()()()()}if(i&2){let e=p();l(10),_("ngIf",e.getCurrentUsername()),l(3),_("title",e.isDarkTheme?"\uB77C\uC774\uD2B8 \uBAA8\uB4DC\uB85C \uC804\uD658":"\uB2E4\uD06C \uBAA8\uB4DC\uB85C \uC804\uD658"),l(),P(" ",e.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"," "),l(10),P("",e.novelTemplates.length,"\uAC1C"),l(44),_("ngIf",e.savedGames.length>0),l(),_("ngIf",e.showStoryCreatorPanel),l(),_("ngIf",e.savedStories.length>0),l(),_("ngIf",e.savedCharacters.length>0),l(),_("ngIf",e.savedScenarios.length>0),l(),_("ngIf",e.savedItems.length>0),l(),_("ngIf",e.savedGames.length>0),l(8),_("ngForOf",e.novelTemplates)}}function ti(i,t){if(i&1){let e=M();r(0,"div",160)(1,"div",161)(2,"div",162),s(3),a(),r(4,"h1",163),s(5),a(),r(6,"div",164),s(7),a(),r(8,"p",165),s(9),a(),r(10,"div",166)(11,"div",167)(12,"span",168),s(13,"\uC2DC\uC791 \uACE8\uB4DC:"),a(),r(14,"span",169),s(15),a()(),r(16,"div",167)(17,"span",168),s(18,"\uC2DC\uC791 \uC544\uC774\uD15C:"),a(),r(19,"span",169),s(20),a()(),r(21,"div",167)(22,"span",168),s(23,"\uB09C\uC774\uB3C4:"),a(),r(24,"span",169),s(25),a()()(),r(26,"div",170)(27,"button",171),h("click",function(){u(e);let o=p();return C(o.backToNovelSelection())}),s(28,"\u2190 \uB2E4\uB978 \uC18C\uC124 \uC120\uD0DD"),a(),r(29,"button",172),h("click",function(){u(e);let o=p();return C(o.startStory())}),s(30,"\u{1F4DA} \uBAA8\uD5D8 \uC2DC\uC791"),a()()()()}if(i&2){let e=p();l(3),f(e.selectedNovel==null?null:e.selectedNovel.icon),l(2),f(e.selectedNovel==null?null:e.selectedNovel.title),l(2),f(e.selectedNovel==null?null:e.selectedNovel.genre),l(2),f(e.selectedNovel==null?null:e.selectedNovel.description),l(6),P("\u{1F4B0} ",e.selectedNovel==null?null:e.selectedNovel.startingGold,"G"),l(5),P("\u{1F392} ",(e.selectedNovel==null||e.selectedNovel.startingItems==null?null:e.selectedNovel.startingItems.length)||0,"\uAC1C"),l(4),ie("difficulty-badge-"+(e.selectedNovel==null?null:e.selectedNovel.difficulty)),l(),P(" ",(e.selectedNovel==null?null:e.selectedNovel.difficulty)==="easy"?"\u2B50 \uC26C\uC6C0":(e.selectedNovel==null?null:e.selectedNovel.difficulty)==="normal"?"\u2B50\u2B50 \uBCF4\uD1B5":"\u2B50\u2B50\u2B50 \uC5B4\uB824\uC6C0"," ")}}function ni(i,t){if(i&1){let e=M();r(0,"div",194),h("click",function(){u(e);let o=p(2);return C(o.expandLeftPanel())}),r(1,"div",195),s(2,"\u{1F4DA}"),a(),r(3,"div",196),s(4,"\uBA54\uB274"),a()()}}function oi(i,t){if(i&1){let e=M();r(0,"div",197)(1,"div",198)(2,"h3"),s(3,"\u{1F3AE} \uAC8C\uC784 \uBA54\uB274"),a(),r(4,"button",50),h("click",function(){u(e);let o=p(2);return C(o.closeLeftPanel())}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"button",200),h("click",function(){u(e);let o=p(2);return C(o.saveGame())}),s(8,"\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5"),a(),r(9,"button",200),h("click",function(){u(e);let o=p(2);return C(o.loadGame())}),s(10,"\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30"),a(),r(11,"button",200),h("click",function(){u(e);let o=p(2);return C(o.toggleCharacterPanel())}),s(12,"\u{1F464} \uCE90\uB9AD\uD130 \uC815\uBCF4"),a(),r(13,"button",200),h("click",function(){u(e);let o=p(2);return C(o.openCharacterCreator())}),s(14,"\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),a(),r(15,"button",200),h("click",function(){u(e);let o=p(2);return C(o.toggleInventoryPanel())}),s(16),a(),r(17,"button",200),h("click",function(){u(e);let o=p(2);return C(o.toggleShopPanel())}),s(18,"\u{1F6D2} \uC0C1\uC810"),a(),r(19,"button",200),h("click",function(){u(e);let o=p(2);return C(o.startBattle())}),s(20,"\u2694\uFE0F \uC804\uD22C\uD558\uAE30"),a()()()}if(i&2){let e=p(2);l(16),P("\u{1F392} \uC778\uBCA4\uD1A0\uB9AC (",e.inventory.length,")")}}function ii(i,t){if(i&1&&(r(0,"p"),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function ri(i,t){if(i&1&&(r(0,"div"),v(1,ii,2,1,"p",83),a()),i&2){let e=p().$implicit;l(),_("ngForOf",e.lines)}}function ai(i,t){if(i&1&&(r(0,"div"),s(1),a()),i&2){let e=p().$implicit;l(),P("\u2B50 ",e.choiceText)}}function si(i,t){if(i&1&&(r(0,"div",201),v(1,ri,2,1,"div",68)(2,ai,2,1,"div",68),a()),i&2){let e=t.$implicit;l(),_("ngIf",e.type==="story"),l(),_("ngIf",e.type==="choice")}}function ci(i,t){if(i&1&&(r(0,"div",221),s(1),a()),i&2){let e=t.$implicit;E("damage",e.includes("\uD53C\uD574"))("heal",e.includes("\uD68C\uBCF5")),l(),P(" ",e," ")}}function li(i,t){i&1&&(r(0,"h3"),s(1,"\u{1F3C6} \uC2B9\uB9AC!"),a())}function di(i,t){i&1&&(r(0,"h3"),s(1,"\u{1F480} \uD328\uBC30..."),a())}function gi(i,t){if(i&1&&(r(0,"div",222),v(1,li,2,0,"h3",68)(2,di,2,0,"h3",68),r(3,"p",223),s(4,"\uC7A0\uC2DC \uD6C4 \uC790\uB3D9\uC73C\uB85C \uACC4\uC18D\uB429\uB2C8\uB2E4..."),a()()),i&2){let e=p(3);l(),_("ngIf",e.battleVictory),l(),_("ngIf",!e.battleVictory)}}function pi(i,t){if(i&1&&(r(0,"div",202)(1,"div",203)(2,"h3"),s(3,"\u2694\uFE0F \uC804\uD22C \uC911 (\uC790\uB3D9 \uC9C4\uD589)"),a()(),r(4,"div",204)(5,"div",205)(6,"div",206),s(7),a(),r(8,"div",207),s(9,"\u{1F9D9}\u200D\u2642\uFE0F"),a(),r(10,"div",208)(11,"div",209)(12,"span",210),s(13,"HP"),a(),r(14,"span",211),s(15),a()(),r(16,"div",212),z(17,"div",213),a()(),r(18,"div",214)(19,"div",209)(20,"span",210),s(21,"MP"),a(),r(22,"span",211),s(23),a()(),r(24,"div",212),z(25,"div",215),a()()(),r(26,"div",216),s(27,"VS"),a(),r(28,"div",217)(29,"div",206),s(30),a(),r(31,"div",207),s(32,"\u{1F479}"),a(),r(33,"div",208)(34,"div",209)(35,"span",210),s(36,"HP"),a(),r(37,"span",211),s(38),a()(),r(39,"div",212),z(40,"div",213),a()()()(),r(41,"div",218,0),v(43,ci,2,5,"div",219),a(),v(44,gi,5,2,"div",220),a()),i&2){let e=p(2);l(5),E("active",e.battleTurn==="player")("taking-damage",e.playerTakingDamage),l(2),f(e.playerCharacter.name),l(8),R("",e.playerCharacter.hp,"/",e.playerCharacter.maxHp),l(2),$("width",e.playerCharacter.hp/e.playerCharacter.maxHp*100,"%"),E("low",e.playerCharacter.hp/e.playerCharacter.maxHp<.3),l(6),R("",e.playerCharacter.mp,"/",e.playerCharacter.maxMp),l(2),$("width",e.playerCharacter.mp/e.playerCharacter.maxMp*100,"%"),l(3),E("active",e.battleTurn==="enemy")("taking-damage",e.enemyTakingDamage),l(2),f(e.battleEnemy.name),l(8),R("",e.battleEnemy.hp,"/",e.battleEnemy.maxHp),l(2),$("width",e.battleEnemy.hp/e.battleEnemy.maxHp*100,"%"),E("low",e.battleEnemy.hp/e.battleEnemy.maxHp<.3),l(3),_("ngForOf",e.battleLog),l(),_("ngIf",e.battleEnded)}}function _i(i,t){if(i&1){let e=M();r(0,"div",226)(1,"button",227),h("click",function(){let o=u(e).index,c=p(3);return C(c.selectChoice(o))}),r(2,"span",228),s(3),a(),r(4,"span",229),s(5),a()(),r(6,"button",230),h("click",function(){let o=u(e).index,c=p(3);return C(c.openScenarioLinkPanel(o))}),s(7," \u{1F517} "),a()()}if(i&2){let e=t.$implicit,n=t.index;l(3),f(n+1),l(2),f(e)}}function mi(i,t){if(i&1&&(r(0,"div")(1,"h3"),s(2,"\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"),a(),r(3,"div",224),v(4,_i,8,2,"div",225),a()()),i&2){let e=p(2);l(4),_("ngForOf",e.choices)}}function hi(i,t){if(i&1){let e=M();r(0,"div",194),h("click",function(){u(e);let o=p(2);return C(o.expandRightPanel())}),r(1,"div",195),s(2,"\u{1F4CA}"),a(),r(3,"div",196),s(4,"\uC815\uBCF4"),a()()}}function ui(i,t){if(i&1){let e=M();r(0,"div",197)(1,"div",198)(2,"h3"),s(3,"\u{1F4CA} \uAC8C\uC784 \uC815\uBCF4"),a(),r(4,"button",50),h("click",function(){u(e);let o=p(2);return C(o.closeRightPanel())}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"div"),s(8),a(),r(9,"div"),s(10),a(),r(11,"div"),s(12),a()()()}if(i&2){let e=p(2);l(8),P("\uC120\uD0DD \uD69F\uC218: ",e.currentPath.length),l(2),P("\uC2A4\uD1A0\uB9AC \uBE14\uB85D: ",e.storyBlocks.length),l(2),R("\uACBD\uD5D8\uCE58: ",e.playerCharacter.exp,"/",e.playerCharacter.maxExp)}}function Ci(i,t){if(i&1){let e=M();r(0,"div",173)(1,"div",174)(2,"div",175),v(3,ni,5,0,"div",176)(4,oi,21,1,"div",177),a()(),r(5,"div",178)(6,"div",179)(7,"button",180),h("click",function(){u(e);let o=p();return C(o.toggleLeftPanel())}),s(8,"\u2630"),a(),r(9,"button",181),h("click",function(){u(e);let o=p();return C(o.backToNovelSelection())}),s(10,"\u{1F3E0} \uD648"),a(),r(11,"div",182)(12,"div"),s(13),a(),r(14,"div"),s(15),a(),r(16,"div"),s(17),a()(),r(18,"div",183)(19,"button",184),h("click",function(){u(e);let o=p();return C(o.toggleStoryFlowPanel())}),s(20," \u{1F5FA}\uFE0F "),a(),r(21,"button",185),h("click",function(){u(e);let o=p();return C(o.logout())}),s(22," \u{1F6AA} "),a(),r(23,"button",180),h("click",function(){u(e);let o=p();return C(o.toggleRightPanel())}),s(24,"\u{1F4CA}"),a(),r(25,"button",186),h("click",function(){u(e);let o=p();return C(o.toggleTheme())}),s(26),a()()(),r(27,"div",187)(28,"div",188)(29,"h2"),s(30,"\uC81C1\uC7A5 - \uC6B4\uBA85\uC758 \uC2DC\uC791"),a()(),r(31,"div",189),v(32,si,3,2,"div",190),a(),v(33,pi,45,28,"div",191)(34,mi,5,1,"div",68),a()(),r(35,"div",192)(36,"div",193),v(37,hi,5,0,"div",176)(38,ui,13,4,"div",177),a()()()}if(i&2){let e=p();l(),E("collapsed",e.isLeftPanelCollapsed),l(2),_("ngIf",e.isLeftPanelCollapsed),l(),_("ngIf",!e.isLeftPanelCollapsed),l(9),R("",e.playerCharacter.name," Lv.",e.playerCharacter.level),l(2),R("HP: ",e.playerCharacter.hp,"/",e.playerCharacter.maxHp),l(2),P("\u{1F4B0} ",e.gold,"G"),l(8),_("title",e.isDarkTheme?"\uB77C\uC774\uD2B8 \uBAA8\uB4DC\uB85C \uC804\uD658":"\uB2E4\uD06C \uBAA8\uB4DC\uB85C \uC804\uD658"),l(),P(" ",e.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"," "),l(6),_("ngForOf",e.storyBlocks),l(),_("ngIf",e.inBattle),l(),_("ngIf",e.choices.length>0&&!e.inBattle),l(),E("collapsed",e.isRightPanelCollapsed),l(2),_("ngIf",e.isRightPanelCollapsed),l(),_("ngIf",!e.isRightPanelCollapsed)}}function vi(i,t){if(i&1){let e=M();r(0,"div",231),h("click",function(){u(e);let o=p();return C(o.closeAllPanels())}),a()}}function fi(i,t){if(i&1){let e=M();r(0,"div",232)(1,"div",198)(2,"h3"),s(3,"\u{1F4CA} \uCE90\uB9AD\uD130 \uC815\uBCF4"),a(),r(4,"button",50),h("click",function(){u(e);let o=p();return C(o.showCharacterPanel=!1)}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"div"),s(8),a(),r(9,"div"),s(10),a(),r(11,"div"),s(12),a(),r(13,"div"),s(14),a()()()}if(i&2){let e=p();l(8),P("\uC774\uB984: ",e.playerCharacter.name),l(2),P("\uB808\uBCA8: ",e.playerCharacter.level),l(2),P("\uACF5\uACA9\uB825: ",e.playerCharacter.attack),l(2),P("\uBC29\uC5B4\uB825: ",e.playerCharacter.defense)}}function bi(i,t){if(i&1){let e=M();r(0,"button",235),h("click",function(){u(e);let o=p().$implicit,c=p(2);return C(c.useItem(o))}),s(1,"\uC0AC\uC6A9"),a()}}function Pi(i,t){if(i&1){let e=M();r(0,"button",235),h("click",function(){u(e);let o=p().$implicit,c=p(2);return C(c.equipItem(o))}),s(1),a()}if(i&2){let e=p().$implicit;l(),P(" ",e.isEquipped?"\uD574\uC81C":"\uCC29\uC6A9"," ")}}function xi(i,t){if(i&1){let e=M();r(0,"div"),s(1),v(2,bi,2,0,"button",234)(3,Pi,2,1,"button",234),r(4,"button",235),h("click",function(){let o=u(e).$implicit,c=p(2);return C(c.sellItem(o))}),s(5),a()()}if(i&2){let e=t.$implicit;l(),R(" ",e.name," - ",e.description," "),l(),_("ngIf",e.type==="consumable"),l(),_("ngIf",e.type==="weapon"||e.type==="armor"),l(2),P("\uD310\uB9E4 (",e.sellPrice,"G)")}}function Mi(i,t){if(i&1){let e=M();r(0,"div",233)(1,"div",198)(2,"h3"),s(3,"\u{1F392} \uC778\uBCA4\uD1A0\uB9AC"),a(),r(4,"button",50),h("click",function(){u(e);let o=p();return C(o.showInventoryPanel=!1)}),s(5,"\xD7"),a()(),r(6,"div",199),v(7,xi,6,5,"div",83),a()()}if(i&2){let e=p();l(7),_("ngForOf",e.inventory)}}function Oi(i,t){if(i&1){let e=M();r(0,"div"),s(1),r(2,"button",237),h("click",function(){let o=u(e).$implicit,c=p(2);return C(c.buyItem(o))}),s(3,"\uAD6C\uB9E4"),a()()}if(i&2){let e=t.$implicit,n=p(2);l(),Mt(" ",e.name," - ",e.price,"G (\uC7AC\uACE0: ",e.stock,") "),l(),_("disabled",n.gold<e.price||e.stock<=0)}}function yi(i,t){if(i&1){let e=M();r(0,"div",236)(1,"div",198)(2,"h3"),s(3,"\u{1F6D2} \uC0C1\uC810"),a(),r(4,"button",50),h("click",function(){u(e);let o=p();return C(o.showShopPanel=!1)}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"div"),s(8),a(),v(9,Oi,4,4,"div",83),a()()}if(i&2){let e=p();l(8),P("\uBCF4\uC720 \uACE8\uB4DC: ",e.gold,"G"),l(),_("ngForOf",e.shopItems)}}function wi(i,t){i&1&&(r(0,"span"),s(1,"\u{1F9B8} \uC8FC\uC778\uACF5 \uC0DD\uC131"),a())}function ki(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Si(i,t){i&1&&(r(0,"span"),s(1,"\u2694\uFE0F \uBB34\uB9BC \uACE0\uC218 \uC0DD\uC131"),a())}function Di(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Ei(i,t){i&1&&(r(0,"span"),s(1,"\u{1F525} \uC801\uB300\uC790 \uC0DD\uC131"),a())}function Ii(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Ti(i,t){i&1&&(r(0,"span"),s(1,"\u{1F465} \uC870\uC5F0 \uC0DD\uC131"),a())}function Bi(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Ai(i,t){if(i&1&&(r(0,"div",70),s(1),a()),i&2){let e=p(2);l(),P(" \u26A0\uFE0F ",e.characterGenerationError," ")}}function Ni(i,t){if(i&1&&(r(0,"span",255),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Ri(i,t){if(i&1&&(r(0,"div",252)(1,"h5"),s(2,"\u2694\uFE0F \uB2A5\uB825"),a(),r(3,"div",253),v(4,Ni,2,1,"span",254),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.generatedCharacter.abilities)}}function Gi(i,t){if(i&1&&(r(0,"span",258),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Fi(i,t){if(i&1&&(r(0,"div",108)(1,"h5"),s(2,"\u2B50 \uD2B9\uC131"),a(),r(3,"div",256),v(4,Gi,2,1,"span",257),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.generatedCharacter.traits)}}function Vi(i,t){if(i&1){let e=M();r(0,"div",244)(1,"h4"),s(2,"\u{1F389} \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",245)(4,"div",246)(5,"span",247),s(6,"\uC774\uB984:"),a(),r(7,"span",248),s(8),a()(),r(9,"div",246)(10,"span",247),s(11,"\uB098\uC774:"),a(),r(12,"span",248),s(13),a()(),r(14,"div",246)(15,"span",247),s(16,"\uC131\uBCC4:"),a(),r(17,"span",248),s(18),a()(),r(19,"div",246)(20,"span",247),s(21,"\uC5ED\uD560:"),a(),r(22,"span",248),s(23),a()()(),r(24,"div",249)(25,"h5"),s(26,"\u{1F4D6} \uC678\uBAA8"),a(),r(27,"p"),s(28),a()(),r(29,"div",249)(30,"h5"),s(31,"\u{1F4AD} \uC131\uACA9"),a(),r(32,"p"),s(33),a()(),r(34,"div",249)(35,"h5"),s(36,"\u{1F4DC} \uBC30\uACBD"),a(),r(37,"p"),s(38),a()(),v(39,Ri,5,1,"div",250),r(40,"div",249)(41,"h5"),s(42,"\u{1F3AF} \uBAA9\uD45C"),a(),r(43,"p"),s(44),a()(),v(45,Fi,5,1,"div",106),r(46,"div",170)(47,"button",85),h("click",function(){u(e);let o=p(2);return C(o.saveGeneratedCharacter())}),s(48," \u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5\uD558\uAE30 "),a(),r(49,"button",251),h("click",function(){u(e);let o=p(2);return C(o.applyGeneratedCharacter())}),s(50," \u2705 \uC774 \uCE90\uB9AD\uD130\uB85C \uD50C\uB808\uC774\uD558\uAE30 "),a(),r(51,"button",87),h("click",function(){u(e);let o=p(2);return C(o.generateAiCharacter())}),s(52," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),a()()()}if(i&2){let e=p(2);l(8),f(e.generatedCharacter.name),l(5),P("",e.generatedCharacter.age,"\uC138"),l(5),f(e.generatedCharacter.gender==="male"?"\uB0A8\uC131":"\uC5EC\uC131"),l(5),f(e.generatedCharacter.role),l(5),f(e.generatedCharacter.appearance),l(5),f(e.generatedCharacter.personality),l(5),f(e.generatedCharacter.background),l(),_("ngIf",e.generatedCharacter.abilities),l(5),f(e.generatedCharacter.goals),l(),_("ngIf",e.generatedCharacter.traits)}}function zi(i,t){if(i&1){let e=M();r(0,"div",238)(1,"div",198)(2,"h3"),s(3,"\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),a(),r(4,"button",50),h("click",function(){u(e);let o=p();return C(o.showCharacterCreatorPanel=!1)}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"div",239)(8,"div",51)(9,"h4"),s(10,"\u2728 Loworld AI\uB85C \uCE90\uB9AD\uD130 \uC0DD\uC131\uD558\uAE30"),a(),r(11,"p"),s(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),a()(),r(13,"div",240)(14,"button",241),h("click",function(){u(e);let o=p();return C(o.generateAiCharacter("\uC8FC\uC778\uACF5"))}),v(15,wi,2,0,"span",68)(16,ki,2,0,"span",68),a(),r(17,"button",242),h("click",function(){u(e);let o=p();return C(o.generateAiCharacter("\uBB34\uB9BC \uACE0\uC218"))}),v(18,Si,2,0,"span",68)(19,Di,2,0,"span",68),a(),r(20,"button",242),h("click",function(){u(e);let o=p();return C(o.generateAiCharacter("\uC801\uB300\uC790"))}),v(21,Ei,2,0,"span",68)(22,Ii,2,0,"span",68),a(),r(23,"button",242),h("click",function(){u(e);let o=p();return C(o.generateAiCharacter("\uC870\uC5F0"))}),v(24,Ti,2,0,"span",68)(25,Bi,2,0,"span",68),a()(),v(26,Ai,2,1,"div",52)(27,Vi,53,10,"div",243),a()()()}if(i&2){let e=p();l(14),_("disabled",e.isGeneratingCharacter),l(),_("ngIf",!e.isGeneratingCharacter),l(),_("ngIf",e.isGeneratingCharacter),l(),_("disabled",e.isGeneratingCharacter),l(),_("ngIf",!e.isGeneratingCharacter),l(),_("ngIf",e.isGeneratingCharacter),l(),_("disabled",e.isGeneratingCharacter),l(),_("ngIf",!e.isGeneratingCharacter),l(),_("ngIf",e.isGeneratingCharacter),l(),_("disabled",e.isGeneratingCharacter),l(),_("ngIf",!e.isGeneratingCharacter),l(),_("ngIf",e.isGeneratingCharacter),l(),_("ngIf",e.characterGenerationError),l(),_("ngIf",e.generatedCharacter)}}function Li(i,t){i&1&&(r(0,"span"),s(1,"\u2694\uFE0F \uC804\uD1B5 \uBB34\uD611"),a())}function $i(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ji(i,t){i&1&&(r(0,"span"),s(1,"\u{1F31F} \uD604\uB300 \uD310\uD0C0\uC9C0"),a())}function Ui(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Hi(i,t){i&1&&(r(0,"span"),s(1,"\u{1F311} \uC554\uD751 \uBB34\uD611"),a())}function qi(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Wi(i,t){i&1&&(r(0,"span"),s(1,"\u{1F49D} \uB85C\uB9E8\uC2A4"),a())}function Yi(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function Ki(i,t){if(i&1&&(r(0,"div",70),s(1),a()),i&2){let e=p(2);l(),P(" \u26A0\uFE0F ",e.scenarioGenerationError," ")}}function Xi(i,t){if(i&1&&(r(0,"li"),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Zi(i,t){if(i&1&&(r(0,"div",268)(1,"h5"),s(2,"\u{1F465} \uB4F1\uC7A5\uC778\uBB3C"),a(),r(3,"ul"),v(4,Xi,2,1,"li",83),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.generatedScenario.characters)}}function Qi(i,t){if(i&1&&(r(0,"span",271),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Ji(i,t){if(i&1&&(r(0,"div",117)(1,"h5"),s(2,"\u{1F3F7}\uFE0F \uD0DC\uADF8"),a(),r(3,"div",269),v(4,Qi,2,1,"span",270),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.generatedScenario.tags)}}function er(i,t){if(i&1){let e=M();r(0,"div",263)(1,"h4"),s(2,"\u{1F389} \uC2DC\uB098\uB9AC\uC624\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",264)(4,"h2"),s(5),a()(),r(6,"div",265)(7,"h5"),s(8,"\u{1F4D6} \uC124\uBA85"),a(),r(9,"p"),s(10),a()(),r(11,"div",265)(12,"h5"),s(13,"\u{1F4CD} \uBC30\uACBD"),a(),r(14,"p"),s(15),a()(),v(16,Zi,5,1,"div",266),r(17,"div",265)(18,"h5"),s(19,"\u2694\uFE0F \uAC08\uB4F1"),a(),r(20,"p"),s(21),a()(),r(22,"div",265)(23,"h5"),s(24,"\u{1F3AF} \uBAA9\uD45C"),a(),r(25,"p"),s(26),a()(),r(27,"div",265)(28,"h5"),s(29,"\u{1F4AD} \uBD84\uC704\uAE30"),a(),r(30,"p"),s(31),a()(),v(32,Ji,5,1,"div",267),r(33,"div",170)(34,"button",251),h("click",function(){u(e);let o=p(2);return C(o.saveGeneratedScenario())}),s(35," \u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uD558\uAE30 "),a(),r(36,"button",86),h("click",function(){u(e);let o=p(2);return C(o.startGameWithScenario())}),s(37," \u{1F3AE} \uC774 \uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791 "),a(),r(38,"button",87),h("click",function(){u(e);let o=p(2);return C(o.generateAiScenario())}),s(39," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),a()()()}if(i&2){let e=p(2);l(5),f(e.generatedScenario.title),l(5),f(e.generatedScenario.description),l(5),f(e.generatedScenario.setting),l(),_("ngIf",e.generatedScenario.characters),l(5),f(e.generatedScenario.conflict),l(5),f(e.generatedScenario.goal),l(5),f(e.generatedScenario.mood),l(),_("ngIf",e.generatedScenario.tags)}}function tr(i,t){if(i&1){let e=M();r(0,"div",259)(1,"div",198)(2,"h3"),s(3,"\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131"),a(),r(4,"button",50),h("click",function(){u(e);let o=p();return C(o.showScenarioCreatorPanel=!1)}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"div",260)(8,"div",51)(9,"h4"),s(10,"\u2728 Loworld AI\uB85C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30"),a(),r(11,"p"),s(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),a()(),r(13,"div",261)(14,"button",241),h("click",function(){u(e);let o=p();return C(o.generateAiScenario("\uBB34\uD611","\uC804\uD1B5\uC801\uC778","\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294"))}),v(15,Li,2,0,"span",68)(16,$i,2,0,"span",68),a(),r(17,"button",242),h("click",function(){u(e);let o=p();return C(o.generateAiScenario("\uD310\uD0C0\uC9C0","\uD604\uB300\uC801\uC778","\uC2E0\uBE44\uB85C\uC6B4"))}),v(18,ji,2,0,"span",68)(19,Ui,2,0,"span",68),a(),r(20,"button",242),h("click",function(){u(e);let o=p();return C(o.generateAiScenario("\uBB34\uD611","\uC554\uD751","\uC5B4\uB450\uC6B4"))}),v(21,Hi,2,0,"span",68)(22,qi,2,0,"span",68),a(),r(23,"button",242),h("click",function(){u(e);let o=p();return C(o.generateAiScenario("\uB85C\uB9E8\uC2A4","\uAC10\uC131\uC801\uC778","\uB2EC\uCF64\uD55C"))}),v(24,Wi,2,0,"span",68)(25,Yi,2,0,"span",68),a()(),v(26,Ki,2,1,"div",52)(27,er,40,8,"div",262),a()()()}if(i&2){let e=p();l(14),_("disabled",e.isGeneratingScenario),l(),_("ngIf",!e.isGeneratingScenario),l(),_("ngIf",e.isGeneratingScenario),l(),_("disabled",e.isGeneratingScenario),l(),_("ngIf",!e.isGeneratingScenario),l(),_("ngIf",e.isGeneratingScenario),l(),_("disabled",e.isGeneratingScenario),l(),_("ngIf",!e.isGeneratingScenario),l(),_("ngIf",e.isGeneratingScenario),l(),_("disabled",e.isGeneratingScenario),l(),_("ngIf",!e.isGeneratingScenario),l(),_("ngIf",e.isGeneratingScenario),l(),_("ngIf",e.scenarioGenerationError),l(),_("ngIf",e.generatedScenario)}}function nr(i,t){i&1&&(r(0,"span"),s(1,"\u2694\uFE0F \uACE0\uAE09 \uBB34\uAE30"),a())}function or(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ir(i,t){i&1&&(r(0,"span"),s(1,"\u{1F6E1}\uFE0F \uACE0\uAE09 \uBC29\uC5B4\uAD6C"),a())}function rr(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function ar(i,t){i&1&&(r(0,"span"),s(1,"\u2B50 \uD76C\uADC0 \uBB34\uAE30"),a())}function sr(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function cr(i,t){i&1&&(r(0,"span"),s(1,"\u{1F31F} \uC804\uC124 \uBB34\uAE30"),a())}function lr(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function dr(i,t){i&1&&(r(0,"span"),s(1,"\u{1F9EA} \uACE0\uAE09 \uC18C\uBE44\uD488"),a())}function gr(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function pr(i,t){i&1&&(r(0,"span"),s(1,"\u{1F4AB} \uD2B9\uC218 \uC544\uC774\uD15C"),a())}function _r(i,t){i&1&&(r(0,"span"),s(1,"\u23F3 \uC0DD\uC131 \uC911..."),a())}function mr(i,t){if(i&1&&(r(0,"div",70),s(1),a()),i&2){let e=p(2);l(),P(" \u26A0\uFE0F ",e.itemGenerationError," ")}}function hr(i,t){if(i&1&&(r(0,"div",157)(1,"span",295),s(2,"\u2694\uFE0F \uACF5\uACA9\uB825"),a(),r(3,"span",159),s(4),a()()),i&2){let e=p(4);l(4),P("+",e.generatedItem.stats.attack)}}function ur(i,t){if(i&1&&(r(0,"div",157)(1,"span",295),s(2,"\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825"),a(),r(3,"span",159),s(4),a()()),i&2){let e=p(4);l(4),P("+",e.generatedItem.stats.defense)}}function Cr(i,t){if(i&1&&(r(0,"div",157)(1,"span",295),s(2,"\u2764\uFE0F HP"),a(),r(3,"span",159),s(4),a()()),i&2){let e=p(4);l(4),P("+",e.generatedItem.stats.hp)}}function vr(i,t){if(i&1&&(r(0,"div",157)(1,"span",295),s(2,"\u{1F499} MP"),a(),r(3,"span",159),s(4),a()()),i&2){let e=p(4);l(4),P("+",e.generatedItem.stats.mp)}}function fr(i,t){if(i&1&&(r(0,"div",132)(1,"h5"),s(2,"\u{1F4CA} \uB2A5\uB825\uCE58"),a(),r(3,"div",293),v(4,hr,5,1,"div",294)(5,ur,5,1,"div",294)(6,Cr,5,1,"div",294)(7,vr,5,1,"div",294),a()()),i&2){let e=p(3);l(4),_("ngIf",e.generatedItem.stats.attack),l(),_("ngIf",e.generatedItem.stats.defense),l(),_("ngIf",e.generatedItem.stats.hp),l(),_("ngIf",e.generatedItem.stats.mp)}}function br(i,t){if(i&1&&(r(0,"li"),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Pr(i,t){if(i&1&&(r(0,"div",296)(1,"h5"),s(2,"\u2728 \uD6A8\uACFC"),a(),r(3,"ul"),v(4,br,2,1,"li",83),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.generatedItem.effects)}}function xr(i,t){if(i&1&&(r(0,"div",297)(1,"h5"),s(2,"\u26A0\uFE0F \uC0AC\uC6A9 \uC870\uAC74"),a(),r(3,"p"),s(4),a()()),i&2){let e=p(3);l(4),f(e.generatedItem.requirements)}}function Mr(i,t){if(i&1&&(r(0,"div",298)(1,"h5"),s(2,"\u{1F4DC} \uC804\uC124"),a(),r(3,"p",299),s(4),a()()),i&2){let e=p(3);l(4),f(e.generatedItem.lore)}}function Or(i,t){if(i&1&&(r(0,"span",271),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function yr(i,t){if(i&1&&(r(0,"div",128)(1,"h5"),s(2,"\u{1F3F7}\uFE0F \uD0DC\uADF8"),a(),r(3,"div",269),v(4,Or,2,1,"span",270),a()()),i&2){let e=p(3);l(4),_("ngForOf",e.generatedItem.tags)}}function wr(i,t){if(i&1){let e=M();r(0,"div",282)(1,"h4"),s(2,"\u{1F389} \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),a(),r(3,"div",283)(4,"h2"),s(5),a(),r(6,"div",284),s(7),a()(),r(8,"div",285)(9,"span",286),s(10),a()(),r(11,"div",287)(12,"h5"),s(13,"\u{1F4D6} \uC124\uBA85"),a(),r(14,"p"),s(15),a()(),v(16,fr,8,4,"div",127)(17,Pr,5,1,"div",288)(18,xr,5,1,"div",289)(19,Mr,5,1,"div",290)(20,yr,5,1,"div",291),r(21,"div",170)(22,"button",85),h("click",function(){u(e);let o=p(2);return C(o.saveGeneratedItem())}),s(23," \u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5\uD558\uAE30 "),a(),r(24,"button",292),h("click",function(){u(e);let o=p(2);return C(o.addGeneratedItemToInventory())}),s(25," \u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 "),a(),r(26,"button",87),h("click",function(){u(e);let o=p(2);return C(o.generateAiItem())}),s(27," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),a()()()}if(i&2){let e=p(2);l(3),E("grade-legendary",e.generatedItem.grade==="\uC2E0\uD654"||e.generatedItem.grade==="\uC804\uC124"),l(2),f(e.generatedItem.name),l(),ie("grade-"+e.generatedItem.grade),l(),P(" ",e.generatedItem.grade," "),l(3),P("\u{1F4E6} ",e.generatedItem.type),l(5),f(e.generatedItem.description),l(),_("ngIf",e.generatedItem.stats),l(),_("ngIf",e.generatedItem.effects&&e.generatedItem.effects.length>0),l(),_("ngIf",e.generatedItem.requirements),l(),_("ngIf",e.generatedItem.lore),l(),_("ngIf",e.generatedItem.tags&&e.generatedItem.tags.length>0)}}function kr(i,t){if(i&1){let e=M();r(0,"div",272)(1,"div",198)(2,"h3"),s(3,"\u{1F48E} AI \uC544\uC774\uD15C \uC0DD\uC131"),a(),r(4,"button",50),h("click",function(){u(e);let o=p();return C(o.showItemCreatorPanel=!1)}),s(5,"\xD7"),a()(),r(6,"div",199)(7,"div",273)(8,"div",51)(9,"h4"),s(10,"\u2728 Loworld AI\uB85C \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30"),a(),r(11,"p"),s(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),a()(),r(13,"div",274)(14,"button",275),h("click",function(){u(e);let o=p();return C(o.generateAiItem("\uBB34\uAE30","\uACE0\uAE09"))}),v(15,nr,2,0,"span",68)(16,or,2,0,"span",68),a(),r(17,"button",276),h("click",function(){u(e);let o=p();return C(o.generateAiItem("\uBC29\uC5B4\uAD6C","\uACE0\uAE09"))}),v(18,ir,2,0,"span",68)(19,rr,2,0,"span",68),a(),r(20,"button",277),h("click",function(){u(e);let o=p();return C(o.generateAiItem("\uBB34\uAE30","\uD76C\uADC0"))}),v(21,ar,2,0,"span",68)(22,sr,2,0,"span",68),a(),r(23,"button",278),h("click",function(){u(e);let o=p();return C(o.generateAiItem("\uBB34\uAE30","\uC804\uC124"))}),v(24,cr,2,0,"span",68)(25,lr,2,0,"span",68),a(),r(26,"button",279),h("click",function(){u(e);let o=p();return C(o.generateAiItem("\uC18C\uBE44\uD488","\uACE0\uAE09"))}),v(27,dr,2,0,"span",68)(28,gr,2,0,"span",68),a(),r(29,"button",280),h("click",function(){u(e);let o=p();return C(o.generateAiItem("\uD2B9\uC218","\uD76C\uADC0"))}),v(30,pr,2,0,"span",68)(31,_r,2,0,"span",68),a()(),v(32,mr,2,1,"div",52)(33,wr,28,13,"div",281),a()()()}if(i&2){let e=p();l(14),_("disabled",e.isGeneratingItem),l(),_("ngIf",!e.isGeneratingItem),l(),_("ngIf",e.isGeneratingItem),l(),_("disabled",e.isGeneratingItem),l(),_("ngIf",!e.isGeneratingItem),l(),_("ngIf",e.isGeneratingItem),l(),_("disabled",e.isGeneratingItem),l(),_("ngIf",!e.isGeneratingItem),l(),_("ngIf",e.isGeneratingItem),l(),_("disabled",e.isGeneratingItem),l(),_("ngIf",!e.isGeneratingItem),l(),_("ngIf",e.isGeneratingItem),l(),_("disabled",e.isGeneratingItem),l(),_("ngIf",!e.isGeneratingItem),l(),_("ngIf",e.isGeneratingItem),l(),_("disabled",e.isGeneratingItem),l(),_("ngIf",!e.isGeneratingItem),l(),_("ngIf",e.isGeneratingItem),l(),_("ngIf",e.itemGenerationError),l(),_("ngIf",e.generatedItem)}}function Sr(i,t){i&1&&(r(0,"span"),s(1,"\u{1F3AC}"),a())}function Dr(i,t){i&1&&(r(0,"span"),s(1,"\u{1F4D6}"),a())}function Er(i,t){i&1&&(r(0,"span"),s(1,"\u{1F500}"),a())}function Ir(i,t){i&1&&(r(0,"span"),s(1,"\u{1F4CD}"),a())}function Tr(i,t){if(i&1&&(r(0,"div",326),s(1),a()),i&2){let e=t.$implicit;l(),R(" \u2192 ",e.substring(0,30),"",e.length>30?"...":""," ")}}function Br(i,t){if(i&1&&(r(0,"div",324),v(1,Tr,2,2,"div",325),a()),i&2){let e=p().$implicit;l(),_("ngForOf",e.choices)}}function Ar(i,t){i&1&&z(0,"div",327)}function Nr(i,t){if(i&1&&(r(0,"div",317)(1,"div",318),v(2,Sr,2,0,"span",68)(3,Dr,2,0,"span",68)(4,Er,2,0,"span",68)(5,Ir,2,0,"span",68),a(),r(6,"div",319)(7,"div",320),s(8),a(),r(9,"div",321),s(10),a(),v(11,Br,2,1,"div",322),a(),v(12,Ar,1,0,"div",323),a()),i&2){let e=t.$implicit,n=t.index,o=p(2);$("margin-left",e.level*40,"px"),_("ngClass",Ot(11,vo,e.type==="start",e.type==="story",e.type==="choice",e.type==="current")),l(2),_("ngIf",e.type==="start"),l(),_("ngIf",e.type==="story"),l(),_("ngIf",e.type==="choice"),l(),_("ngIf",e.type==="current"),l(3),f(e.label),l(2),P("\uB808\uBCA8 ",e.level),l(),_("ngIf",e.type==="current"&&e.choices),l(),_("ngIf",n<o.storyFlowNodes.length-1)}}function Rr(i,t){if(i&1){let e=M();r(0,"div",300)(1,"div",301)(2,"div",302)(3,"div",303)(4,"span",304),s(5,"\u22EE\u22EE"),a(),r(6,"h3"),s(7,"\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0"),a()(),r(8,"button",50),h("click",function(){u(e);let o=p();return C(o.toggleStoryFlowPanel())}),s(9,"\u2715"),a()(),r(10,"div",305)(11,"p"),s(12,"\uD604\uC7AC\uAE4C\uC9C0\uC758 \uC120\uD0DD\uACFC \uC55E\uC73C\uB85C\uC758 \uAC00\uB2A5\uD55C \uACBD\uB85C\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4. "),r(13,"strong"),s(14,"\uD5E4\uB354\uB97C \uB4DC\uB798\uADF8"),a(),s(15,"\uD558\uC5EC \uC774\uB3D9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),a(),r(16,"div",306)(17,"span",157),s(18),a(),r(19,"span",157),s(20),a(),r(21,"span",157),s(22),a()()(),r(23,"div",307)(24,"div",308),v(25,Nr,13,16,"div",309),a(),r(26,"div",310)(27,"h4"),s(28,"\uBC94\uB840"),a(),r(29,"div",311)(30,"div",312)(31,"span",313),s(32,"\u{1F3AC}"),a(),s(33," \uC2DC\uC791"),a(),r(34,"div",312)(35,"span",314),s(36,"\u{1F4D6}"),a(),s(37," \uC2A4\uD1A0\uB9AC"),a(),r(38,"div",312)(39,"span",315),s(40,"\u{1F500}"),a(),s(41," \uC120\uD0DD"),a(),r(42,"div",312)(43,"span",316),s(44,"\u{1F4CD}"),a(),s(45," \uD604\uC7AC \uC704\uCE58"),a()()()()()()}if(i&2){let e=p();l(18),P("\u{1F4CA} \uC9C4\uD589 \uB2E8\uACC4: ",e.storyBlocks.length),l(2),P("\u{1F500} \uC120\uD0DD \uD69F\uC218: ",e.currentPath.length),l(2),P("\u{1F3AF} \uD604\uC7AC \uC120\uD0DD\uC9C0: ",e.choices.length),l(3),_("ngForOf",e.storyFlowNodes)}}function Gr(i,t){if(i&1&&(r(0,"span",121),s(1),a()),i&2){let e=t.$implicit;l(),f(e)}}function Fr(i,t){if(i&1&&(r(0,"div",117),v(1,Gr,2,1,"span",118),a()),i&2){let e=p().$implicit;l(),_("ngForOf",e.tags.slice(0,3))}}function Vr(i,t){if(i&1){let e=M();r(0,"div",114),h("click",function(){let o=u(e).$implicit,c=p(2);return C(c.linkScenarioToChoice(c.currentLinkingChoiceIndex,o.id))}),r(1,"div",115)(2,"h4"),s(3),a(),r(4,"span",336),s(5),a()(),r(6,"div",337)(7,"p",265),s(8),a(),r(9,"div",119)(10,"span",81),s(11),a(),r(12,"span",81),s(13),a()(),v(14,Fr,2,1,"div",267),a()()}if(i&2){let e=t.$implicit;l(3),f(e.title),l(2),f(e.genre),l(3),f(e.description),l(3),P("\u{1F4CD} ",e.setting),l(2),P("\u{1F3AD} ",e.mood),l(),_("ngIf",e.tags&&e.tags.length>0)}}function zr(i,t){if(i&1){let e=M();r(0,"div",338)(1,"p"),s(2,"\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),a(),r(3,"button",339),h("click",function(){u(e);let o=p(2);return o.openScenarioCreator(),C(o.closeScenarioLinkPanel())}),s(4," \u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 "),a()()}}function Lr(i,t){if(i&1){let e=M();r(0,"div",328)(1,"div",329)(2,"div",330)(3,"div",303)(4,"span",304),s(5,"\u22EE\u22EE"),a(),r(6,"h3"),s(7,"\u{1F517} \uC120\uD0DD\uC9C0\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0"),a()(),r(8,"button",50),h("click",function(){u(e);let o=p();return C(o.closeScenarioLinkPanel())}),s(9,"\u2715"),a()(),r(10,"div",331)(11,"p"),s(12,"\uC120\uD0DD\uC9C0 "),r(13,"strong"),s(14),a(),s(15,"\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694."),a(),r(16,"p",332),s(17,"\u{1F4A1} \uC120\uD0DD\uD558\uBA74 \uD574\uB2F9 \uC120\uD0DD\uC9C0\uB97C \uACE0\uB97C \uB54C \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC804\uAC1C\uB429\uB2C8\uB2E4."),a()(),r(18,"div",333)(19,"div",334),v(20,Vr,15,6,"div",113),a(),v(21,zr,5,0,"div",335),a()()()}if(i&2){let e=p();l(14),P("#",e.currentLinkingChoiceIndex+1),l(6),_("ngForOf",e.savedScenarios),l(),_("ngIf",e.savedScenarios.length===0)}}var _e=class i{constructor(t,e,n,o,c,d,g,m,b,O,w){this.cdr=t;this.dialog=e;this.router=n;this.route=o;this.geminiAiService=c;this.scenarioDbService=d;this.itemDbService=g;this.characterDbService=m;this.novelAuthService=b;this.storyDbService=O;this.notification=w;this.initializePlayer(),this.loadThemePreference(),this.loadSavedGames(),this.loadSavedScenarios(),this.loadSavedItems(),this.loadSavedCharacters(),this.loadSavedStories()}battleLogContainer;shouldScrollBattleLog=!1;gameStarted=!1;novelSelected=!1;selectedNovel=null;storyBlocks=[];choices=[];currentPath=[];currentGameId=null;savedGames=[];playerCharacter;gold=100;inventory=[];showCharacterPanel=!1;showInventoryPanel=!1;showShopPanel=!1;showCharacterCreatorPanel=!1;isGeneratingCharacter=!1;generatedCharacter=null;characterGenerationError="";savedCharacters=[];showScenarioCreatorPanel=!1;isGeneratingScenario=!1;generatedScenario=null;scenarioGenerationError="";savedScenarios=[];showItemCreatorPanel=!1;isGeneratingItem=!1;generatedItem=null;itemGenerationError="";savedItems=[];showStoryCreatorPanel=!1;isGeneratingStory=!1;storyTitle="";selectedCharactersForStory=[];selectedItemsForStory=[];selectedScenariosForStory=[];generatedStory=null;storyGenerationError="";savedStories=[];showScenarioLinkPanel=!1;currentLinkingChoiceIndex=-1;isLeftPanelCollapsed=!0;isRightPanelCollapsed=!0;showStoryFlowPanel=!1;storyFlowNodes=[];isDarkTheme=!1;inBattle=!1;battleEnded=!1;battleVictory=!1;battleTurn="player";battleLog=[];battleEnemy={name:"\uACE0\uBE14\uB9B0",hp:50,maxHp:50,attack:8,defense:3};playerDefenseBonus=0;playerTakingDamage=!1;enemyTakingDamage=!1;shopItems=[{id:"sword_basic",name:"\uAE30\uBCF8 \uAC80",description:"\uD3C9\uBC94\uD55C \uCCA0\uAC80\uC785\uB2C8\uB2E4. \uACF5\uACA9\uB825 +5",price:50,type:"weapon",rarity:"common",stock:5,stats:{attack:5}},{id:"potion_hp",name:"\uCCB4\uB825 \uBB3C\uC57D",description:"HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:20,type:"consumable",rarity:"common",stock:10},{id:"potion_mp",name:"\uB9C8\uB098 \uBB3C\uC57D",description:"MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:25,type:"consumable",rarity:"common",stock:8},{id:"armor_leather",name:"\uAC00\uC8FD \uAC11\uC637",description:"\uD2BC\uD2BC\uD55C \uAC00\uC8FD \uAC11\uC637. \uBC29\uC5B4\uB825 +3",price:80,type:"armor",rarity:"common",stock:3,stats:{defense:3}},{id:"sword_silver",name:"\uC740\uBE5B \uAC80",description:"\uC740\uC73C\uB85C \uC81C\uC791\uB41C \uACE0\uAE09 \uAC80. \uACF5\uACA9\uB825 +12",price:200,type:"weapon",rarity:"uncommon",stock:2,stats:{attack:12}},{id:"armor_chain",name:"\uC0AC\uC2AC \uAC11\uC637",description:"\uACAC\uACE0\uD55C \uC0AC\uC2AC \uAC11\uC637. \uBC29\uC5B4\uB825 +8",price:250,type:"armor",rarity:"uncommon",stock:2,stats:{defense:8}}];novelTemplates=[];ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("gameId");if(e){this.currentGameId=e;let o=this.router.getCurrentNavigation()?.extras?.state||window.history.state;o?.isNewGame&&o?.novel?(console.log("\u{1F3AE} \uC0C8 \uAC8C\uC784 \uC2DC\uC791:",o.novel.title),this.initializeNewGame(e,o.novel)):this.loadGameById(e)}else this.currentGameId=null})}ngAfterViewChecked(){this.shouldScrollBattleLog&&this.battleLogContainer&&(this.scrollToBattleLogBottom(),this.shouldScrollBattleLog=!1)}loadThemePreference(){localStorage.getItem("novel-theme")==="dark"?(this.isDarkTheme=!0,document.body.classList.add("dark-theme")):(this.isDarkTheme=!1,document.body.classList.remove("dark-theme"))}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.isDarkTheme?(document.body.classList.add("dark-theme"),localStorage.setItem("novel-theme","dark")):(document.body.classList.remove("dark-theme"),localStorage.setItem("novel-theme","light"))}logout(){confirm("\uB85C\uADF8\uC544\uC6C3\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(this.novelAuthService.logout(),this.router.navigate(["/novel/login"]))}getCurrentUsername(){return this.novelAuthService.getCurrentUsername()}initializePlayer(){this.playerCharacter={name:"\uBAA8\uD5D8\uAC00",level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:50,maxMp:50,attack:10,defense:5,agility:8,strength:10,intelligence:7,skillPoints:0,skills:[{id:"basic_attack",name:"\uAE30\uBCF8 \uACF5\uACA9",description:"\uAE30\uBCF8\uC801\uC778 \uACF5\uACA9 \uAE30\uC220",level:1,maxLevel:5,type:"combat"}]},this.inventory=[{id:"wooden_sword",name:"\uB098\uBB34 \uAC80",description:"\uCD08\uBCF4\uC790\uC6A9 \uB098\uBB34 \uAC80",type:"weapon",quantity:1,buyPrice:10,sellPrice:5,rarity:"common",stats:{attack:2},isEquipped:!0}]}scrollToNovels(){let t=document.getElementById("novelsSection");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}scrollToSavedGames(){let t=document.getElementById("savedGamesSection");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}selectNovel(t){let e=`${t.id}_${Date.now()}`;console.log("\u{1F4DA} \uC18C\uC124 \uC120\uD0DD:",t.title,"| \uAC8C\uC784 ID:",e),this.router.navigate(["/novel",e],{state:{isNewGame:!0,novel:t}})}backToNovelSelection(){this.novelSelected=!1,this.selectedNovel=null,this.currentGameId=null,this.router.navigate(["/novel"])}initializeNewGame(t,e){this.currentGameId=t,this.selectedNovel=e,this.novelSelected=!0,this.gold=e.startingGold,this.inventory=[...e.startingItems],this.storyBlocks=[],this.choices=[],this.currentPath=[],this.gameStarted=!1,console.log("\u2728 \uC0C8 \uAC8C\uC784 \uCD08\uAE30\uD654 \uC644\uB8CC:",e.title,"| ID:",t)}startStory(){if(!this.selectedNovel){console.error("\uC18C\uC124\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");return}console.log("\u{1F4D6} \uC18C\uC124 \uC77D\uAE30 \uC2DC\uC791!",this.selectedNovel.title),this.gameStarted=!0,this.addStoryBlock(this.selectedNovel.firstStory),this.setChoices(this.selectedNovel.firstChoices),this.scrollToBottom()}selectChoice(t){let e=this.choices[t];if(console.log("\u{1F3AF} \uC120\uD0DD:",e),e.includes("\uC804\uD22C\uD558\uAE30")){this.addChoiceBlock(`\u2B50 \uC120\uD0DD: ${e}`),this.startBattleFromChoice(),this.choices=[];return}let n=[...this.currentPath,t.toString()].join("-"),o=this.getLinkedScenario(n);if(o){console.log("\u{1F4CB} \uC5F0\uACB0\uB41C \uC2DC\uB098\uB9AC\uC624 \uBC1C\uACAC:",o.title),this.addChoiceBlock(`\u2B50 \uC120\uD0DD: ${e}`),this.applyLinkedScenario(o),this.currentPath.push(t.toString()),this.saveGame("autosave");return}this.addChoiceBlock(`\u2B50 \uC120\uD0DD: ${e}`),this.currentPath.push(t.toString()),console.log("\u{1F5FA}\uFE0F \uD604\uC7AC \uACBD\uB85C \uBC30\uC5F4:",this.currentPath);let c=this.currentPath.join("-");console.log("\u{1F511} \uACBD\uB85C \uD0A4:",c),this.choices=[],this.processStoryPath(c,t),this.saveGame("autosave")}processStoryPath(t,e){switch(console.log("\u{1F5FA}\uFE0F \uD604\uC7AC \uACBD\uB85C:",t),t){case"0":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uBC1D\uC740 \uAE38\uC744 \uC120\uD0DD\uD588\uC2B5\uB2C8\uB2E4.","\uBC1C\uAC78\uC74C\uC744 \uC62E\uAE38 \uB54C\uB9C8\uB2E4 \uB530\uB73B\uD55C \uAE30\uC6B4\uC774 \uBC1C\uB05D\uC5D0\uC11C \uC62C\uB77C\uC635\uB2C8\uB2E4.","\uC5BC\uB9C8 \uC9C0\uB098\uC9C0 \uC54A\uC544 \uC544\uB984\uB2E4\uC6B4 \uC815\uC6D0\uC774 \uB208\uC55E\uC5D0 \uD3BC\uCCD0\uC84C\uC2B5\uB2C8\uB2E4.","\uC0C9\uC0C9\uC758 \uAF43\uB4E4\uC774 \uB9CC\uAC1C\uD558\uACE0 \uC788\uACE0, \uB098\uBE44\uB4E4\uC774 \uC6B0\uC544\uD558\uAC8C \uCDA4\uC744 \uCD94\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uC815\uC6D0 \uC911\uC559\uC5D0\uB294 \uC218\uC815\uCC98\uB7FC \uB9D1\uC740 \uC5F0\uBABB\uC774 \uC788\uC5B4 \uB2EC\uBE5B\uC744 \uBC18\uC0AC\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4."]),this.setChoices(["\u{1F338} \uC815\uC6D0\uC744 \uCC9C\uCC9C\uD788 \uAC70\uB2D0\uBA70 \uAF43\uD5A5\uAE30\uB97C \uB9E1\uB294\uB2E4","\u{1F48E} \uC2E0\uBE44\uB85C\uC6B4 \uC5F0\uBABB\uC5D0 \uB2E4\uAC00\uAC00 \uBCF8\uB2E4","\u{1F3C3} \uC544\uB984\uB2F5\uC9C0\uB9CC \uBE60\uB974\uAC8C \uC9C0\uB098\uAC04\uB2E4"]);break;case"1":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC5B4\uB450\uC6B4 \uAE38\uC744 \uC120\uD0DD\uD588\uC2B5\uB2C8\uB2E4.","\uBC1C\uC744 \uB0B4\uB514\uB51C \uB54C\uB9C8\uB2E4 \uB099\uC5FD\uC774 \uBC14\uC2A4\uB77D\uAC70\uB9AC\uBA70 \uC18C\uB9AC\uB97C \uB0C5\uB2C8\uB2E4.","\uCC28\uAC00\uC6B4 \uBC14\uB78C\uC774 \uC637\uAE43\uC744 \uD30C\uACE0\uB4E4\uBA70 \uC628\uBAB8\uC5D0 \uC18C\uB984\uC774 \uB3CB\uC2B5\uB2C8\uB2E4.","\uBA40\uB9AC\uC11C \uB291\uB300\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB824\uC624\uACE0, \uC5B4\uB518\uAC00\uC5D0\uC11C \uB098\uBB47\uAC00\uC9C0 \uBD80\uB7EC\uC9C0\uB294 \uC18C\uB9AC\uAC00 \uB0A9\uB2C8\uB2E4.","\uD558\uC9C0\uB9CC \uC774\uC0C1\uD558\uAC8C\uB3C4 \uC774 \uAE38\uC5D0\uC11C\uB294 \uBB18\uD55C \uD798\uC774 \uB290\uAEF4\uC9D1\uB2C8\uB2E4."]),this.setChoices(["\u2694\uFE0F \uC6A9\uAC10\uD558\uAC8C \uC5B4\uB460 \uC18D\uC73C\uB85C \uB354 \uAE4A\uC774 \uB4E4\uC5B4\uAC04\uB2E4","\u{1F6E1}\uFE0F \uC870\uC2EC\uC2A4\uB7FD\uAC8C \uC8FC\uBCC0\uC744 \uC0B4\uD53C\uBA70 \uCC9C\uCC9C\uD788 \uC9C4\uD589\uD55C\uB2E4","\u{1F525} \uD683\uBD88\uC744 \uCF1C\uC11C \uC8FC\uBCC0\uC744 \uBC1D\uD78C\uB2E4"]);break;case"0-0":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC815\uC6D0\uC744 \uCC9C\uCC9C\uD788 \uAC70\uB2D0\uAE30 \uC2DC\uC791\uD588\uC2B5\uB2C8\uB2E4.","\uC7A5\uBBF8, \uBC31\uD569, \uB77C\uBCA4\uB354\uC758 \uD5A5\uAE30\uAC00 \uCF54\uB05D\uC744 \uAC04\uC9C8\uC785\uB2C8\uB2E4.","\uAC11\uC790\uAE30 \uD55C \uB9C8\uB9AC\uC758 \uD558\uC580 \uD1A0\uB07C\uAC00 \uB098\uD0C0\uB098 \uB2F9\uC2E0\uC744 \uBC14\uB77C\uBD05\uB2C8\uB2E4.",'"\uC548\uB155\uD558\uC138\uC694, \uC5EC\uD589\uC790\uB2D8. \uC774\uACF3\uC740 \uB9C8\uBC95\uC758 \uC815\uC6D0\uC785\uB2C8\uB2E4."',"\uD1A0\uB07C\uAC00 \uB9D0\uC744 \uD558\uC790 \uB2F9\uC2E0\uC740 \uAE5C\uC9DD \uB180\uB790\uC2B5\uB2C8\uB2E4."]),this.setChoices(["\u{1F430} \uD1A0\uB07C\uC640 \uB300\uD654\uB97C \uB098\uB208\uB2E4","\u{1F3AD} \uC774\uAC83\uC774 \uAFC8\uC778\uC9C0 \uD655\uC778\uD574\uBCF8\uB2E4","\u{1F33F} \uB354 \uAE4A\uC740 \uC815\uC6D0\uC73C\uB85C \uB4E4\uC5B4\uAC04\uB2E4"]);break;case"0-1":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC2E0\uBE44\uB85C\uC6B4 \uC5F0\uBABB\uC5D0 \uB2E4\uAC00\uAC14\uC2B5\uB2C8\uB2E4.","\uC218\uBA74\uC774 \uAC70\uC6B8\uCC98\uB7FC \uB9D1\uC544 \uB2EC\uACFC \uBCC4\uB4E4\uC774 \uC644\uBCBD\uD558\uAC8C \uBC18\uC0AC\uB418\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uC5F0\uBABB \uAC00\uC7A5\uC790\uB9AC\uC5D0 \uC549\uC544 \uBB3C\uC5D0 \uC190\uC744 \uB2F4\uADF8\uC790, \uB530\uB73B\uD55C \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9D1\uB2C8\uB2E4.","\uAC11\uC790\uAE30 \uC218\uBA74\uC5D0\uC11C \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC758 \uBAA8\uC2B5\uC774 \uB098\uD0C0\uB0AC\uC2B5\uB2C8\uB2E4.",'"\uB2F9\uC2E0\uC758 \uB9C8\uC74C\uC18D \uC18C\uC6D0\uC744 \uB9D0\uD574\uBCF4\uC138\uC694." \uADF8\uB140\uAC00 \uBD80\uB4DC\uB7FD\uAC8C \uB9D0\uD588\uC2B5\uB2C8\uB2E4.']),this.setChoices(["\u{1F4AB} \uD3C9\uD654\uB85C\uC6B4 \uC138\uC0C1\uC744 \uC6D0\uD55C\uB2E4\uACE0 \uB9D0\uD55C\uB2E4","\u{1F4B0} \uBD80\uC640 \uAD8C\uB825\uC744 \uC6D0\uD55C\uB2E4\uACE0 \uB9D0\uD55C\uB2E4","\u2764\uFE0F \uC9C4\uC2E4\uD55C \uC0AC\uB791\uC744 \uC6D0\uD55C\uB2E4\uACE0 \uB9D0\uD55C\uB2E4"]);break;case"0-2":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC544\uB984\uB2E4\uC6B4 \uC815\uC6D0\uC744 \uBE60\uB974\uAC8C \uC9C0\uB098\uCCE4\uC2B5\uB2C8\uB2E4.","\uC11C\uB458\uB7EC \uAC77\uB2E4 \uBCF4\uB2C8 \uC815\uC6D0 \uB05D\uC5D0 \uC6C5\uC7A5\uD55C \uC131\uC774 \uBCF4\uC785\uB2C8\uB2E4.","\uC131\uBB38 \uC55E\uC5D0\uB294 \uD669\uAE08 \uAC11\uC637\uC744 \uC785\uC740 \uAE30\uC0AC\uAC00 \uC11C \uC788\uC2B5\uB2C8\uB2E4.",'"\uBA48\uCDB0\uB77C! \uC774\uACF3\uC740 \uC2E0\uC131\uD55C \uC131\uC5ED\uC774\uB2E4."','"\uC5EC\uAE30\uB97C \uC9C0\uB098\uB824\uBA74 \uC2DC\uD5D8\uC744 \uD1B5\uACFC\uD574\uC57C \uD55C\uB2E4."']),this.setChoices(["\u2694\uFE0F \uC6A9\uAE30\uC758 \uC2DC\uD5D8\uC5D0 \uB3C4\uC804\uD55C\uB2E4","\u{1F9E0} \uC9C0\uD61C\uC758 \uC2DC\uD5D8\uC5D0 \uB3C4\uC804\uD55C\uB2E4","\u{1F496} \uC790\uBE44\uC758 \uC2DC\uD5D8\uC5D0 \uB3C4\uC804\uD55C\uB2E4"]);break;case"1-0":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC6A9\uAC10\uD558\uAC8C \uC5B4\uB460 \uC18D\uC73C\uB85C \uB354 \uAE4A\uC774 \uB4E4\uC5B4\uAC14\uC2B5\uB2C8\uB2E4.","\uAC11\uC790\uAE30 \uC55E\uC5D0\uC11C \uBD89\uC740 \uB208\uC774 \uBE5B\uB098\uB294 \uAC70\uB300\uD55C \uB291\uB300\uAC00 \uB098\uD0C0\uB0AC\uC2B5\uB2C8\uB2E4.","\uD558\uC9C0\uB9CC \uC774\uC0C1\uD558\uAC8C\uB3C4 \uB291\uB300\uB294 \uC801\uB300\uC801\uC774\uC9C0 \uC54A\uC544 \uBCF4\uC785\uB2C8\uB2E4.",'"\uB450\uB824\uC6CC\uD558\uC9C0 \uB9C8\uB77C, \uC6A9\uAC10\uD55C \uC790\uC5EC." \uB291\uB300\uAC00 \uB9D0\uD588\uC2B5\uB2C8\uB2E4.','"\uB098\uB294 \uC774 \uC232\uC758 \uC218\uD638\uC790\uB2E4. \uB108\uC5D0\uAC8C \uC120\uBB3C\uC744 \uC8FC\uACA0\uB2E4."']),this.setChoices(["\u{1F52E} \uB9C8\uBC95\uC758 \uD06C\uB9AC\uC2A4\uD0C8\uC744 \uBC1B\uB294\uB2E4","\u{1F5E1}\uFE0F \uC804\uC124\uC758 \uAC80\uC744 \uBC1B\uB294\uB2E4","\u{1F4DC} \uACE0\uB300\uC758 \uC9C0\uC2DD\uC744 \uBC1B\uB294\uB2E4"]);break;case"1-1":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uC870\uC2EC\uC2A4\uB7FD\uAC8C \uC8FC\uBCC0\uC744 \uC0B4\uD53C\uBA70 \uCC9C\uCC9C\uD788 \uC9C4\uD589\uD588\uC2B5\uB2C8\uB2E4.","\uB364\uBD88 \uC0AC\uC774\uB85C \uC624\uB798\uB41C \uC624\uB450\uB9C9\uC774 \uBCF4\uC785\uB2C8\uB2E4.","\uCC3D\uBB38\uC5D0\uC11C \uB530\uB73B\uD55C \uBD88\uBE5B\uC774 \uC0C8\uC5B4 \uB098\uC624\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uBB38\uC744 \uB450\uB4DC\uB9AC\uC790 \uD560\uBA38\uB2C8\uAC00 \uB098\uC640 \uBC18\uAC11\uAC8C \uB9DE\uC544\uC90D\uB2C8\uB2E4.",'"\uC5B4\uBA38, \uC774\uB7F0 \uBC24\uC5D0 \uC5B4\uCA50 \uC77C\uC774\uB2C8? \uB4E4\uC5B4\uC640\uC11C \uCC28\uB77C\uB3C4 \uD55C \uC794 \uD558\uB834."']),this.setChoices(["\u{1F375} \uD560\uBA38\uB2C8\uC640 \uD568\uAED8 \uCC28\uB97C \uB9C8\uC2E0\uB2E4","\u{1F4D6} \uD560\uBA38\uB2C8\uC5D0\uAC8C \uC774\uACF3\uC5D0 \uB300\uD574 \uBB3B\uB294\uB2E4","\u{1F381} \uD560\uBA38\uB2C8\uC5D0\uAC8C \uC120\uBB3C\uC744 \uC900\uB2E4"]);break;case"1-2":this.addStoryBlock(["\uB2F9\uC2E0\uC740 \uD683\uBD88\uC744 \uCF1C\uC11C \uC8FC\uBCC0\uC744 \uBC1D\uD614\uC2B5\uB2C8\uB2E4.","\uBD88\uBE5B\uC774 \uC5B4\uB460\uC744 \uBC00\uC5B4\uB0B4\uC790 \uB180\uB77C\uC6B4 \uAD11\uACBD\uC774 \uD3BC\uCCD0\uC84C\uC2B5\uB2C8\uB2E4.","\uACE0\uB300 \uC720\uC801\uC758 \uC785\uAD6C\uAC00 \uBAA8\uC2B5\uC744 \uB4DC\uB7EC\uB0C8\uC2B5\uB2C8\uB2E4.","\uB3CC\uBB38\uC5D0\uB294 \uC2E0\uBE44\uD55C \uBB38\uC591\uC774 \uC0C8\uACA8\uC838 \uC788\uACE0, \uC138 \uAC1C\uC758 \uBCF4\uC11D \uD648\uC774 \uC788\uC2B5\uB2C8\uB2E4.","\uAC01\uAC01 \uBE68\uAC04\uC0C9, \uD30C\uB780\uC0C9, \uB179\uC0C9\uC758 \uBCF4\uC11D\uC774 \uD544\uC694\uD574 \uBCF4\uC785\uB2C8\uB2E4."]),this.setChoices(["\u{1F534} \uBE68\uAC04 \uBCF4\uC11D\uC744 \uCC3E\uC544\uBCF8\uB2E4","\u{1F535} \uD30C\uB780 \uBCF4\uC11D\uC744 \uCC3E\uC544\uBCF8\uB2E4","\u{1F7E2} \uB179\uC0C9 \uBCF4\uC11D\uC744 \uCC3E\uC544\uBCF8\uB2E4"]);break;case"0-0-0":this.addStoryBlock(['"\uD1A0\uB07C\uB2D8, \uC774\uACF3\uC740 \uC815\uB9D0 \uB9C8\uBC95\uC758 \uC815\uC6D0\uC778\uAC00\uC694?"','"\uADF8\uB807\uC2B5\uB2C8\uB2E4. \uC774\uACF3\uC740 \uC120\uD55C \uB9C8\uC74C\uC744 \uAC00\uC9C4 \uC774\uB4E4\uB9CC \uBCFC \uC218 \uC788\uB294 \uACF3\uC774\uC5D0\uC694."','"\uB2F9\uC2E0\uC740 \uD2B9\uBCC4\uD55C \uC6B4\uBA85\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."',"\uD1A0\uB07C\uAC00 \uC791\uC740 \uD669\uAE08 \uC5F4\uC1E0\uB97C \uAC74\uB124\uC90D\uB2C8\uB2E4.",'"\uC774 \uC5F4\uC1E0\uB85C \uC228\uACA8\uC9C4 \uBCF4\uBB3C\uC744 \uCC3E\uC744 \uC218 \uC788\uC744 \uAC70\uC608\uC694."']),this.gainExp(25),this.gold+=30,this.addToInventory("key_golden",1),this.addStoryBlock(["\u{1F4B0} \uACBD\uD5D8\uCE58 25\uC640 \uACE8\uB4DC 30\uC744 \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!","\u{1F5DD}\uFE0F \uD669\uAE08 \uC5F4\uC1E0\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!"]),this.setChoices(["\u{1F5DD}\uFE0F \uBCF4\uBB3C\uC744 \uCC3E\uC73C\uB7EC \uAC04\uB2E4","\u2753 \uC6B4\uBA85\uC5D0 \uB300\uD574 \uB354 \uBB3B\uB294\uB2E4","\u{1F3E0} \uC9D1\uC73C\uB85C \uB3CC\uC544\uAC00\uB824 \uD55C\uB2E4"]);break;case"0-1-0":this.addStoryBlock(['"\uD3C9\uD654\uB85C\uC6B4 \uC138\uC0C1\uC744 \uC6D0\uD569\uB2C8\uB2E4."',"\uC5F0\uBABB\uC758 \uC815\uB839\uC774 \uBBF8\uC18C\uB97C \uC9C0\uC5C8\uC2B5\uB2C8\uB2E4.",'"\uC544\uB984\uB2E4\uC6B4 \uC18C\uC6D0\uC774\uAD70\uC694. \uB2F9\uC2E0\uC758 \uB9C8\uC74C\uC774 \uC138\uC0C1\uC744 \uBC14\uAFC0 \uAC83\uC785\uB2C8\uB2E4."',"\uC5F0\uBABB\uC5D0\uC11C \uBE5B\uB098\uB294 \uAD6C\uC2AC\uC774 \uB5A0\uC62C\uB77C \uB2F9\uC2E0\uC758 \uC190\uC5D0 \uB193\uC785\uB2C8\uB2E4.",'"\uC774 \uD3C9\uD654\uC758 \uAD6C\uC2AC\uC740 \uB2F9\uC2E0\uC5D0\uAC8C \uD2B9\uBCC4\uD55C \uD798\uC744 \uC904 \uAC83\uC785\uB2C8\uB2E4."']),this.gainExp(40),this.gold+=50,this.addToInventory("orb_peace",1),this.addStoryBlock(["\u{1F4B0} \uACBD\uD5D8\uCE58 40\uACFC \uACE8\uB4DC 50\uC744 \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!","\u{1F52E} \uD3C9\uD654\uC758 \uAD6C\uC2AC\uC744 \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!"]),this.setChoices(["\u{1F30D} \uC138\uC0C1\uC744 \uAD6C\uD558\uB7EC \uB5A0\uB09C\uB2E4","\u{1F3D8}\uFE0F \uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC0AC\uB78C\uB4E4\uC744 \uB3D5\uB294\uB2E4","\u{1F4DA} \uB354 \uB9CE\uC740 \uC9C0\uD61C\uB97C \uC5BB\uC73C\uB7EC \uAC04\uB2E4"]);break;default:this.addStoryBlock(["\uB2F9\uC2E0\uC758 \uBAA8\uD5D8\uC774 \uACC4\uC18D\uB429\uB2C8\uB2E4...","\uC774 \uC120\uD0DD\uC774 \uC5B4\uB5A4 \uACB0\uACFC\uB97C \uAC00\uC838\uC62C\uC9C0 \uC544\uBB34\uB3C4 \uBAA8\uB985\uB2C8\uB2E4.","\uC0C8\uB85C\uC6B4 \uC7A5\uC774 \uC2DC\uC791\uB418\uB824 \uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4.","\uB2F9\uC2E0\uC758 \uC774\uC57C\uAE30\uB294 \uC5EC\uAE30\uC11C \uB05D\uB098\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.","\uACC4\uC18D\uD574\uC11C \uBAA8\uD5D8\uC744 \uC774\uC5B4\uAC00 \uBCF4\uC138\uC694!"]),this.setChoices(["\u{1F504} \uC0C8\uB85C\uC6B4 \uBAA8\uD5D8\uC744 \uC2DC\uC791\uD55C\uB2E4","\u{1F4DD} \uC774\uC57C\uAE30\uB97C \uAE30\uB85D\uD55C\uB2E4","\u{1F3AF} \uB2E4\uB978 \uC120\uD0DD\uC744 \uD574\uBCF8\uB2E4"]);break}}addStoryBlock(t){this.storyBlocks.push({type:"story",lines:t})}addChoiceBlock(t){this.storyBlocks.push({type:"choice",choiceText:t})}setChoices(t){if(Math.random()<.3&&t.length>0){let n=["\u2694\uFE0F \uC218\uC0C1\uD55C \uC801\uACFC \uB9C8\uC8FC\uCCE4\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F43A} \uC57C\uC0DD \uB291\uB300\uAC00 \uB098\uD0C0\uB0AC\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F9D9} \uC0AC\uC545\uD55C \uB9C8\uBC95\uC0AC\uAC00 \uB098\uD0C0\uB0AC\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F479} \uAC11\uC790\uAE30 \uAD34\uBB3C\uC774 \uC2B5\uACA9\uD574\uC654\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F480} \uD574\uACE8 \uC804\uC0AC\uAC00 \uAE38\uC744 \uB9C9\uB294\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F409} \uB4DC\uB798\uACE4\uC774 \uB0A0\uC544\uC624\uACE0 \uC788\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F9DB} \uC624\uD06C \uC804\uC0AC\uB4E4\uC774 \uB098\uD0C0\uB0AC\uB2E4 - \uC804\uD22C\uD558\uAE30","\u{1F47E} \uACE0\uBE14\uB9B0 \uBB34\uB9AC\uB97C \uBC1C\uACAC\uD588\uB2E4 - \uC804\uD22C\uD558\uAE30"],o=n[Math.floor(Math.random()*n.length)],c=Math.floor(Math.random()*(t.length+1));t.splice(c,0,o)}this.choices=t,this.scrollToBottom()}scrollToBottom(){this.cdr.detectChanges(),this.attemptScroll(),setTimeout(()=>{this.attemptScroll()},100),setTimeout(()=>{this.attemptScroll()},500)}attemptScroll(){let t=document.querySelector(".novel-scroll-area"),e=document.querySelector(".scroll-target");t&&e?(console.log("\u{1F53D} \uC2A4\uD06C\uB864 \uD0C0\uAC9F\uC73C\uB85C \uC774\uB3D9:",e),e.scrollIntoView({behavior:"smooth",block:"end"})):t?(console.log("\u{1F53D} \uC2A4\uD06C\uB864 \uC601\uC5ED \uB9E8 \uC544\uB798\uB85C:",t.scrollHeight),t.scrollTo({top:t.scrollHeight,behavior:"smooth"})):console.warn("\u274C \uC2A4\uD06C\uB864 \uC601\uC5ED\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}scrollToBattleLog(){this.shouldScrollBattleLog=!0,this.cdr.detectChanges()}scrollToBattleLogBottom(){if(this.battleLogContainer){let t=this.battleLogContainer.nativeElement;t.scrollTop=t.scrollHeight}}saveGame(t="autosave"){if(!this.selectedNovel){console.warn("\u274C \uC120\uD0DD\uB41C \uC18C\uC124\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");return}this.currentGameId||(this.currentGameId=`${this.selectedNovel.id}_${Date.now()}`);let e={id:this.currentGameId,novelId:this.selectedNovel.id,novelTitle:this.selectedNovel.title,novelTemplate:this.selectedNovel,playerCharacter:this.playerCharacter,storyBlocks:this.storyBlocks,currentPath:this.currentPath,choices:this.choices,gameStarted:this.gameStarted,gold:this.gold,inventory:this.inventory,completedQuests:[],currentChapter:1,saveDate:new Date};localStorage.setItem(`novel_game_${this.currentGameId}`,JSON.stringify(e)),this.updateSavedGamesList(),console.log("\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC:",this.currentGameId)}loadSavedGames(){this.savedGames=[];let t=Object.keys(localStorage);for(let e of t)if(e.startsWith("novel_game_"))try{let n=localStorage.getItem(e);if(n){let o=JSON.parse(n);this.savedGames.push(o)}}catch(n){console.error("\uC800\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",e,n)}this.savedGames.sort((e,n)=>new Date(n.saveDate).getTime()-new Date(e.saveDate).getTime()),console.log("\u{1F4C2} \uC800\uC7A5\uB41C \uAC8C\uC784 \uBAA9\uB85D:",this.savedGames.length)}updateSavedGamesList(){this.loadSavedGames()}loadGameFromSave(t){try{let e=t.novelTemplate;if(e||(e=this.novelTemplates.find(n=>n.id===t.novelId)),!e){console.error("\u274C \uC18C\uC124\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t.novelId),this.notification.show("\uC800\uC7A5\uB41C \uAC8C\uC784\uC758 \uC18C\uC124 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/novel",t.id]),console.log("\u{1F4DC} \uC800\uC7A5\uB41C \uAC8C\uC784 \uB85C\uB4DC \uC2DC\uC791:",t.novelTitle)}catch(e){console.error("\u274C \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e),this.notification.show("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}loadGameById(t){try{let e=`novel_game_${t}`,n=localStorage.getItem(e);if(!n){console.error("\u274C \uC800\uC7A5\uB41C \uAC8C\uC784\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t),this.router.navigate(["/novel"]);return}let o=JSON.parse(n),c=o.novelTemplate;if(c||(c=this.novelTemplates.find(d=>d.id===o.novelId)),!c){console.error("\u274C \uC18C\uC124\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",o.novelId),this.notification.show("\uC800\uC7A5\uB41C \uAC8C\uC784\uC758 \uC18C\uC124 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/novel"]);return}this.selectedNovel=c,this.novelSelected=!0,this.playerCharacter=o.playerCharacter,this.storyBlocks=o.storyBlocks,this.currentPath=o.currentPath,this.choices=o.choices,this.gameStarted=o.gameStarted,this.gold=o.gold,this.inventory=o.inventory,console.log("\uFFFD \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC131\uACF5:",o.novelTitle),setTimeout(()=>this.scrollToBottom(),100)}catch(e){console.error("\u274C \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e),this.router.navigate(["/novel"])}}deleteSave(t){let e=Object.keys(localStorage);for(let n of e)if(n.startsWith("novel_game_"))try{let o=localStorage.getItem(n);if(o&&JSON.parse(o).id===t){localStorage.removeItem(n),this.loadSavedGames(),console.log("\u{1F5D1}\uFE0F \uC800\uC7A5 \uC0AD\uC81C:",t);break}}catch(o){console.error("\uC800\uC7A5 \uC0AD\uC81C \uC2E4\uD328:",n,o)}}getNovelIcon(t){return this.novelTemplates.find(n=>n.id===t)?.icon||"\u{1F4D6}"}formatSaveDate(t){let e=new Date(t),o=new Date().getTime()-e.getTime(),c=Math.floor(o/(1e3*60*60)),d=Math.floor(o/(1e3*60));return d<1?"\uBC29\uAE08 \uC804":d<60?`${d}\uBD84 \uC804`:c<24?`${c}\uC2DC\uAC04 \uC804`:e.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}isArray(t){return Array.isArray(t)}loadGame(t="autosave"){let e=localStorage.getItem(`novel_game_${t}`);if(!e)return console.warn("\u274C \uC800\uC7A5\uB41C \uAC8C\uC784\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t),!1;try{let n=JSON.parse(e);return this.playerCharacter=n.playerCharacter,this.storyBlocks=n.storyBlocks,this.currentPath=n.currentPath,this.choices=n.choices,this.gameStarted=n.gameStarted,this.gold=n.gold,this.inventory=n.inventory,console.log("\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC644\uB8CC:",t),this.scrollToBottom(),!0}catch(n){return console.error("\u274C \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",n),!1}}getSaveList(){let t=[];for(let e=0;e<localStorage.length;e++){let n=localStorage.key(e);n&&n.startsWith("novel_game_")&&t.push(n.replace("novel_game_",""))}return t}toggleCharacterPanel(){this.showCharacterPanel=!this.showCharacterPanel,this.showInventoryPanel=!1,this.showShopPanel=!1}gainExp(t){this.playerCharacter.exp+=t,this.playerCharacter.exp>=this.playerCharacter.maxExp&&this.levelUp()}levelUp(){this.playerCharacter.level++,this.playerCharacter.exp=0,this.playerCharacter.maxExp=Math.floor(this.playerCharacter.maxExp*1.5),this.playerCharacter.maxHp+=20,this.playerCharacter.hp=this.playerCharacter.maxHp,this.playerCharacter.maxMp+=10,this.playerCharacter.mp=this.playerCharacter.maxMp,this.playerCharacter.attack+=2,this.playerCharacter.defense+=1,this.playerCharacter.skillPoints+=2,this.addStoryBlock([`\u{1F389} \uB808\uBCA8 \uC5C5! \uB808\uBCA8 ${this.playerCharacter.level}\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,"\uCCB4\uB825\uACFC \uB9C8\uB098\uAC00 \uD68C\uBCF5\uB418\uACE0 \uB2A5\uB825\uCE58\uAC00 \uC0C1\uC2B9\uD588\uC2B5\uB2C8\uB2E4.","\uC2A4\uD0AC \uD3EC\uC778\uD2B8 2\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4."])}toggleInventoryPanel(){this.showInventoryPanel=!this.showInventoryPanel,this.showCharacterPanel=!1,this.showShopPanel=!1}useItem(t){if(t.type==="consumable"){switch(t.id){case"potion_hp":this.playerCharacter.hp=Math.min(this.playerCharacter.hp+50,this.playerCharacter.maxHp),this.removeFromInventory(t.id,1),this.addStoryBlock(["\u{1F49A} \uCCB4\uB825 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD558\uC5EC HP\uAC00 50 \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."]);break;case"potion_mp":this.playerCharacter.mp=Math.min(this.playerCharacter.mp+30,this.playerCharacter.maxMp),this.removeFromInventory(t.id,1),this.addStoryBlock(["\u{1F499} \uB9C8\uB098 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD558\uC5EC MP\uAC00 30 \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."]);break}this.saveGame()}}equipItem(t){(t.type==="weapon"||t.type==="armor")&&(this.inventory.forEach(e=>{e.type===t.type&&e.isEquipped&&(e.isEquipped=!1)}),t.isEquipped=!0,this.updatePlayerStats(),this.addStoryBlock([`\u2694\uFE0F ${t.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4.`]))}updatePlayerStats(){this.initializePlayer(),this.inventory.forEach(t=>{t.isEquipped&&t.stats&&Object.keys(t.stats).forEach(e=>{e in this.playerCharacter&&(this.playerCharacter[e]+=t.stats[e])})})}addToInventory(t,e=1){let n=this.inventory.find(o=>o.id===t);if(n)n.quantity+=e;else{let o=this.shopItems.find(c=>c.id===t);o||(o={key_golden:{id:"key_golden",name:"\uD669\uAE08 \uC5F4\uC1E0",description:"\uC2E0\uBE44\uD55C \uBCF4\uBB3C\uC0C1\uC790\uB97C \uC5F4 \uC218 \uC788\uB294 \uD669\uAE08 \uC5F4\uC1E0",type:"quest",rarity:"rare",price:0},orb_peace:{id:"orb_peace",name:"\uD3C9\uD654\uC758 \uAD6C\uC2AC",description:"\uD3C9\uD654\uB85C\uC6B4 \uB9C8\uC74C\uC744 \uB2F4\uC740 \uC2E0\uC131\uD55C \uAD6C\uC2AC. \uC9C0\uB2A5 +5",type:"misc",rarity:"epic",price:0,stats:{intelligence:5}},crystal_magic:{id:"crystal_magic",name:"\uB9C8\uBC95 \uD06C\uB9AC\uC2A4\uD0C8",description:"\uB9C8\uBC95\uC758 \uD798\uC774 \uAE43\uB4E0 \uD06C\uB9AC\uC2A4\uD0C8. MP +20",type:"misc",rarity:"rare",price:0,stats:{maxMp:20}}}[t]),o&&this.inventory.push({id:o.id,name:o.name,description:o.description,type:o.type,quantity:e,buyPrice:o.price||0,sellPrice:Math.floor((o.price||0)*.7),rarity:o.rarity,stats:o.stats,isEquipped:!1})}}removeFromInventory(t,e=1){let n=this.inventory.find(o=>o.id===t);n&&(n.quantity-=e,n.quantity<=0&&(this.inventory=this.inventory.filter(o=>o.id!==t)))}toggleShopPanel(){this.showShopPanel=!this.showShopPanel,this.showCharacterPanel=!1,this.showInventoryPanel=!1}buyItem(t){this.gold>=t.price&&t.stock>0?(this.gold-=t.price,t.stock--,this.addToInventory(t.id),this.addStoryBlock([`\u{1F4B0} ${t.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${t.price} \uACE8\uB4DC)`])):this.gold<t.price?this.addStoryBlock([`\u274C \uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. (${t.price} \uACE8\uB4DC \uD544\uC694)`]):this.addStoryBlock(["\u274C \uC0C1\uD488\uC774 \uD488\uC808\uB418\uC5C8\uC2B5\uB2C8\uB2E4."])}sellItem(t){t.quantity>0&&(this.gold+=t.sellPrice,this.removeFromInventory(t.id,1),this.addStoryBlock([`\u{1F4B0} ${t.name}\uC744(\uB97C) \uD310\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${t.sellPrice} \uACE8\uB4DC \uD68D\uB4DD)`]))}toggleLeftPanel(){this.isLeftPanelCollapsed=!this.isLeftPanelCollapsed}toggleRightPanel(){this.isRightPanelCollapsed=!this.isRightPanelCollapsed}closeLeftPanel(){this.isLeftPanelCollapsed=!0}closeRightPanel(){this.isRightPanelCollapsed=!0}expandLeftPanel(){this.isLeftPanelCollapsed=!1}expandRightPanel(){this.isRightPanelCollapsed=!1}closeAllPanels(){this.showCharacterPanel=!1,this.showInventoryPanel=!1,this.showShopPanel=!1,this.showCharacterCreatorPanel=!1,this.showScenarioCreatorPanel=!1,this.showItemCreatorPanel=!1}openCharacterCreator(){this.showCharacterCreatorPanel=!0,this.generatedCharacter=null,this.characterGenerationError=""}generateAiCharacter(t="\uC8FC\uC778\uACF5"){if(!this.geminiAiService.hasApiKey()){this.characterGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.isGeneratingCharacter=!0,this.characterGenerationError="",this.generatedCharacter=null,console.log("\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC2DC\uC791:",t),this.geminiAiService.generateCharacter(t).subscribe({next:e=>{console.log("\u2705 \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC644\uB8CC:",e),this.generatedCharacter=e,this.isGeneratingCharacter=!1},error:e=>{console.error("\u274C \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC2E4\uD328:",e),this.characterGenerationError=e.message||"AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",this.isGeneratingCharacter=!1}})}applyGeneratedCharacter(){if(!this.generatedCharacter)return;let t=this.generatedCharacter;this.playerCharacter.name=t.name||"\uBB34\uBA85";let e=Math.floor((t.age||20)/10);this.playerCharacter.level=1+e,this.playerCharacter.attack=10+e*2,this.playerCharacter.defense=5+e,this.playerCharacter.agility=8+e,t.abilities&&t.abilities.length>0&&(this.playerCharacter.skills=t.abilities.slice(0,3).map((n,o)=>({id:`skill_${o+1}`,name:n,description:`${t.name}\uC758 \uD2B9\uAE30 \uBB34\uACF5`,level:1,maxLevel:5,type:"combat"}))),this.addStoryBlock(["\u2728 \uC0C8\uB85C\uC6B4 \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!","",`\uC774\uB984: ${t.name}`,`\uB098\uC774: ${t.age}\uC138`,`\uC5ED\uD560: ${this.getRoleKorean(t.role)}`,"",`\u{1F4D6} ${t.appearance||"\uC218\uB824\uD55C \uC678\uBAA8\uB97C \uC9C0\uB2C8\uACE0 \uC788\uC2B5\uB2C8\uB2E4."}`,"",`\u{1F4AD} ${t.personality||"\uB0C9\uCCA0\uD558\uACE0 \uCE68\uCC29\uD55C \uC131\uACA9\uC785\uB2C8\uB2E4."}`,"",`\u{1F3AF} \uBAA9\uD45C: ${t.goals||"\uBB34\uB9BC\uC758 \uC815\uC810\uC744 \uD5A5\uD574 \uB098\uC544\uAC11\uB2C8\uB2E4."}`,""]),t.background&&this.addStoryBlock(["\u{1F4DC} \uBC30\uACBD \uC2A4\uD1A0\uB9AC:",t.background]),t.traits&&t.traits.length>0&&this.addStoryBlock([`\u2B50 \uD2B9\uC131: ${t.traits.join(", ")}`]),this.showCharacterCreatorPanel=!1,this.scrollToBottom(),console.log("\uCE90\uB9AD\uD130 \uC801\uC6A9 \uC644\uB8CC:",this.playerCharacter)}loadSavedCharacters(){return x(this,null,function*(){try{this.savedCharacters=yield this.characterDbService.getAllCharacters(),console.log("\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130 \uB85C\uB4DC:",this.savedCharacters.length)}catch(t){console.error("\u274C \uCE90\uB9AD\uD130 \uB85C\uB4DC \uC2E4\uD328:",t),this.savedCharacters=[]}})}saveGeneratedCharacter(){return x(this,null,function*(){if(!this.generatedCharacter)return;let t={name:this.generatedCharacter.name||"\uC774\uB984 \uC5C6\uC74C",gender:this.generatedCharacter.gender||"\uBBF8\uC815",age:this.generatedCharacter.age||20,occupation:this.generatedCharacter.occupation||"\uBAA8\uD5D8\uAC00",personality:this.generatedCharacter.personality||[],backstory:this.generatedCharacter.background||this.generatedCharacter.backstory||"",skills:this.generatedCharacter.skills||[],appearance:this.generatedCharacter.appearance||"",goal:this.generatedCharacter.goal||"",weakness:this.generatedCharacter.weakness||"",tags:this.generatedCharacter.traits||this.generatedCharacter.tags||[],createdAt:new Date};try{let e=yield this.characterDbService.saveCharacter(t);console.log("\u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5 \uC131\uACF5. ID:",e),this.notification.show("\uCE90\uB9AD\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),yield this.loadSavedCharacters(),this.showCharacterCreatorPanel=!1}catch(e){console.error("\u274C \uCE90\uB9AD\uD130 \uC800\uC7A5 \uC2E4\uD328:",e),this.notification.show("\uCE90\uB9AD\uD130 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteCharacter(t,e){return x(this,null,function*(){if(e&&e.stopPropagation(),!!confirm("\uC774 \uCE90\uB9AD\uD130\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{yield this.characterDbService.deleteCharacter(t),console.log("\u{1F5D1}\uFE0F \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC131\uACF5"),yield this.loadSavedCharacters()}catch(n){console.error("\u274C \uCE90\uB9AD\uD130 \uC0AD\uC81C \uC2E4\uD328:",n),this.notification.show("\uCE90\uB9AD\uD130 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadCharacter(t){return x(this,null,function*(){this.generatedCharacter=t,this.showCharacterCreatorPanel=!0,console.log("\u{1F3AD} \uCE90\uB9AD\uD130 \uBD88\uB7EC\uC624\uAE30:",t.name)})}getRoleKorean(t){return{protagonist:"\uC8FC\uC778\uACF5",antagonist:"\uC801\uB300\uC790",supporting:"\uC870\uC5F0",minor:"\uB2E8\uC5ED"}[t]||"\uC54C \uC218 \uC5C6\uC74C"}loadSavedScenarios(){return x(this,null,function*(){try{this.savedScenarios=yield this.scenarioDbService.getAllScenarios(),console.log("\u{1F4DA} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624:",this.savedScenarios.length,"\uAC1C")}catch(t){console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uB85C\uB4DC \uC2E4\uD328:",t),this.savedScenarios=[]}})}openScenarioCreator(){this.showScenarioCreatorPanel=!0,this.generatedScenario=null,this.scenarioGenerationError=""}generateAiScenario(t="\uBB34\uD611",e="\uC804\uD1B5\uC801\uC778",n="\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294",o=!1){if(!this.geminiAiService.hasApiKey()){this.scenarioGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.isGeneratingScenario=!0,this.scenarioGenerationError="",this.generatedScenario=null,console.log("\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC2DC\uC791:",{genre:t,style:e,mood:n,isAdult:o}),this.geminiAiService.generateScenario({genre:t,style:e,mood:n,isAdult:o}).subscribe({next:c=>{console.log("\u2705 \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC644\uB8CC:",c),this.generatedScenario=c,this.isGeneratingScenario=!1},error:c=>{console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC2E4\uD328:",c),this.scenarioGenerationError=c.message||"AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",this.isGeneratingScenario=!1}})}saveGeneratedScenario(){return x(this,null,function*(){if(!this.generatedScenario)return;let t={id:`scenario_${Date.now()}`,title:this.generatedScenario.title||"\uC81C\uBAA9 \uC5C6\uC74C",description:this.generatedScenario.description||"",characters:this.generatedScenario.characters||[],setting:this.generatedScenario.setting||"",conflict:this.generatedScenario.conflict||"",goal:this.generatedScenario.goal||"",mood:this.generatedScenario.mood||"",tags:this.generatedScenario.tags||[],genre:this.generatedScenario.genre||"\uBB34\uD611",style:this.generatedScenario.style||"\uC804\uD1B5\uC801\uC778",createdAt:new Date,isAdult:this.generatedScenario.isAdult||!1};try{yield this.scenarioDbService.saveScenario(t),yield this.loadSavedScenarios(),this.notification.show("\u2705 \uC2DC\uB098\uB9AC\uC624\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),console.log("\u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC644\uB8CC:",t.title)}catch(e){console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5 \uC2E4\uD328:",e),this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteScenario(t){return x(this,null,function*(){if(confirm("\uC774 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{yield this.scenarioDbService.deleteScenario(t),yield this.loadSavedScenarios(),console.log("\u{1F5D1}\uFE0F \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC644\uB8CC:",t)}catch(e){console.error("\u274C \uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C \uC2E4\uD328:",e),this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadScenario(t){return x(this,null,function*(){this.generatedScenario=t,this.showScenarioCreatorPanel=!0,console.log("\u{1F4D6} \uC2DC\uB098\uB9AC\uC624 \uBD88\uB7EC\uC624\uAE30:",t.title)})}startGameWithScenario(){if(!this.generatedScenario)return;let t=this.generatedScenario;this.addStoryBlock([`\u{1F3AC} ${t.title}`,"",`${t.description}`,"",`\u{1F4CD} \uBC30\uACBD: ${t.setting}`,"",`\u2694\uFE0F \uAC08\uB4F1: ${t.conflict}`,"",`\u{1F3AF} \uBAA9\uD45C: ${t.goal}`,"",`\u{1F4AD} \uBD84\uC704\uAE30: ${t.mood}`,""]),t.characters&&t.characters.length>0&&this.addStoryBlock(["\u{1F465} \uB4F1\uC7A5\uC778\uBB3C:",...t.characters.map(e=>`  \u2022 ${e}`)]),t.tags&&t.tags.length>0&&this.addStoryBlock([`\u{1F3F7}\uFE0F \uD0DC\uADF8: ${t.tags.join(", ")}`]),this.showScenarioCreatorPanel=!1,this.scrollToBottom(),console.log("\uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791:",t.title)}startBattleFromChoice(){this.addStoryBlock(["\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4!","\uC801\uC774 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uACE0 \uACF5\uACA9 \uC790\uC138\uB97C \uCDE8\uD588\uC2B5\uB2C8\uB2E4."]),this.initializeBattle(),this.inBattle=!0,this.battleEnded=!1,this.battleVictory=!1,this.battleTurn="player",this.battleLog=["\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!"],this.playerDefenseBonus=0,this.generateRandomEnemy(),this.scrollToBottom(),setTimeout(()=>this.autoBattle(),1e3)}generateRandomEnemy(){let t=[{name:"\uACE0\uBE14\uB9B0",hp:50,attack:8,defense:3},{name:"\uC624\uD06C",hp:80,attack:12,defense:5},{name:"\uB291\uB300",hp:60,attack:10,defense:2},{name:"\uD574\uACE8 \uC804\uC0AC",hp:70,attack:11,defense:4},{name:"\uB9C8\uBC95\uC0AC",hp:45,attack:15,defense:2},{name:"\uB4DC\uB798\uACE4",hp:150,attack:20,defense:10}],e=t[Math.floor(Math.random()*t.length)];this.battleEnemy={name:e.name,hp:e.hp,maxHp:e.hp,attack:e.attack,defense:e.defense},this.battleLog.push(`${this.battleEnemy.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`)}initializeBattle(){this.playerDefenseBonus=0}autoBattle(){this.battleEnded||this.battleTurn==="player"&&this.playerAutoAction()}playerAutoAction(){if(this.battleEnded)return;if(this.playerCharacter.hp/this.playerCharacter.maxHp*100<=30&&this.hasPotion()){this.usePotion();return}if(this.playerCharacter.mp>=10&&Math.random()<.3){this.playerSkill();return}if(Math.random()<.2){this.playerDefend();return}this.playerAttack()}playerAttack(){if(this.battleTurn!=="player"||this.battleEnded)return;let t=Math.max(1,this.playerCharacter.attack-this.battleEnemy.defense);this.triggerEnemyDamage(),this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-t),this.battleLog.push(`\uB2F9\uC2E0\uC740 ${this.battleEnemy.name}\uC5D0\uAC8C ${t} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`),this.battleEnemy.hp<=0?this.winBattle():(this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500)),this.scrollToBattleLog()}playerSkill(){if(this.battleTurn!=="player"||this.battleEnded||this.playerCharacter.mp<10)return;this.playerCharacter.mp-=10;let t=Math.max(1,Math.floor(this.playerCharacter.attack*1.5)-this.battleEnemy.defense);this.triggerEnemyDamage(),this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-t),this.battleLog.push(`\u2728 \uAC15\uB825\uD55C \uC2A4\uD0AC \uACF5\uACA9! ${this.battleEnemy.name}\uC5D0\uAC8C ${t} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`),this.battleEnemy.hp<=0?this.winBattle():(this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500)),this.scrollToBattleLog()}playerDefend(){this.battleTurn!=="player"||this.battleEnded||(this.playerDefenseBonus=Math.floor(this.playerCharacter.defense*.5),this.battleLog.push(`\u{1F6E1}\uFE0F \uBC29\uC5B4 \uC790\uC138\uB97C \uCDE8\uD588\uB2E4! (\uBC29\uC5B4\uB825 +${this.playerDefenseBonus})`),this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500),this.scrollToBattleLog())}usePotion(){if(this.battleTurn!=="player"||this.battleEnded||!this.hasPotion())return;let t=50;this.playerCharacter.hp=Math.min(this.playerCharacter.maxHp,this.playerCharacter.hp+t);let e=this.inventory.find(n=>n.type==="consumable"&&n.name.includes("\uBB3C\uC57D"));e&&e.quantity>0&&(e.quantity--,e.quantity===0&&(this.inventory=this.inventory.filter(n=>n.id!==e.id))),this.battleLog.push(`\u{1F9EA} \uD3EC\uC158\uC744 \uC0AC\uC6A9\uD588\uB2E4! HP ${t} \uD68C\uBCF5!`),this.battleTurn="enemy",setTimeout(()=>this.enemyTurn(),500),this.scrollToBattleLog()}hasPotion(){return this.inventory.some(t=>t.type==="consumable"&&t.name.includes("\uBB3C\uC57D")&&t.quantity>0)}enemyTurn(){if(this.battleEnded)return;let t=this.playerCharacter.defense+this.playerDefenseBonus,e=Math.max(1,this.battleEnemy.attack-t);this.triggerPlayerDamage(),this.playerCharacter.hp=Math.max(0,this.playerCharacter.hp-e),this.battleLog.push(`${this.battleEnemy.name}\uC758 \uACF5\uACA9! \uB2F9\uC2E0\uC740 ${e} \uD53C\uD574\uB97C \uBC1B\uC558\uB2E4!`),this.playerDefenseBonus>0&&(this.battleLog.push("\uBC29\uC5B4 \uC790\uC138\uAC00 \uD480\uB838\uB2E4."),this.playerDefenseBonus=0),this.playerCharacter.hp<=0?this.loseBattle():(this.battleTurn="player",setTimeout(()=>this.autoBattle(),500)),this.scrollToBattleLog()}winBattle(){this.battleEnded=!0,this.battleVictory=!0;let t=Math.floor(this.battleEnemy.maxHp*.8),e=Math.floor(this.battleEnemy.maxHp*.6);this.gainExp(t),this.gold+=e,this.battleLog.push(""),this.battleLog.push("\u{1F3C6} \uC2B9\uB9AC!"),this.battleLog.push(`\u{1F4AB} \uACBD\uD5D8\uCE58 ${t} \uD68D\uB4DD!`),this.battleLog.push(`\u{1F4B0} \uACE8\uB4DC ${e} \uD68D\uB4DD!`),this.scrollToBattleLog(),setTimeout(()=>this.endBattle(),2e3)}loseBattle(){this.battleEnded=!0,this.battleVictory=!1,this.playerCharacter.hp=Math.floor(this.playerCharacter.maxHp/2),this.battleLog.push(""),this.battleLog.push("\u{1F480} \uD328\uBC30..."),this.battleLog.push("\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD558\uB2E4."),this.scrollToBattleLog(),setTimeout(()=>this.endBattle(),2e3)}endBattle(){this.inBattle=!1,this.battleVictory?(this.addStoryBlock(["","\u2694\uFE0F \uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!","\u{1F4AB} \uACBD\uD5D8\uCE58\uC640 \uACE8\uB4DC\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4.",""]),this.setChoices(["\u{1F6B6} \uC5EC\uD589\uC744 \uACC4\uC18D\uD55C\uB2E4","\u{1F6D1} \uC7A0\uC2DC \uD734\uC2DD\uC744 \uCDE8\uD55C\uB2E4","\u{1F50D} \uC804\uB9AC\uD488\uC744 \uB354 \uCC3E\uC544\uBCF8\uB2E4"])):(this.addStoryBlock(["","\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.",""]),this.setChoices(["\u{1F3E0} \uB9C8\uC744\uB85C \uB3CC\uC544\uAC04\uB2E4","\u{1F48A} \uD68C\uBCF5 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD55C\uB2E4","\u26FA \uADF8 \uC790\uB9AC\uC5D0\uC11C \uC57C\uC601\uD55C\uB2E4"])),this.scrollToBottom()}triggerPlayerDamage(){this.playerTakingDamage=!0,setTimeout(()=>{this.playerTakingDamage=!1},500)}triggerEnemyDamage(){this.enemyTakingDamage=!0,setTimeout(()=>{this.enemyTakingDamage=!1},500)}startBattle(){this.dialog.open(Te,{width:"90vw",height:"90vh",maxWidth:"1400px",maxHeight:"900px",disableClose:!0,panelClass:"battle-modal-panel",data:{player:{id:"player",name:this.playerCharacter.name,type:"player",maxHp:this.playerCharacter.maxHp,currentHp:this.playerCharacter.hp,maxMp:this.playerCharacter.maxMp,currentMp:this.playerCharacter.mp,attack:this.playerCharacter.attack,defense:this.playerCharacter.defense,agility:this.playerCharacter.agility,skills:this.playerCharacter.skills.map(e=>({id:e.id,name:e.name,description:e.description,mpCost:10,damage:this.playerCharacter.attack*1.5,type:"attack"})),items:this.inventory.filter(e=>e.type==="consumable").map(e=>({id:e.id,name:e.name,description:e.description,type:e.type,effect:50}))}}}).afterClosed().subscribe(e=>{if(e){if(console.log("\uC804\uD22C \uACB0\uACFC:",e),e.victory){let n=e.expGain||50,o=e.goldGain||30;this.gainExp(n),this.gold+=o,this.addStoryBlock(["\u2694\uFE0F \uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!",`\u{1F4AB} \uACBD\uD5D8\uCE58 ${n}\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4.`,`\u{1F4B0} \uACE8\uB4DC ${o}\uB97C \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4.`]),e.loot&&e.loot.length>0&&e.loot.forEach(c=>{this.addToInventory(c.id,c.quantity||1),this.addStoryBlock([`\u{1F381} ${c.name}\uC744(\uB97C) \uD68D\uB4DD\uD588\uC2B5\uB2C8\uB2E4!`])})}else this.addStoryBlock(["\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4."]),this.playerCharacter.hp=Math.floor(this.playerCharacter.maxHp/2);e.playerHp!==void 0&&(this.playerCharacter.hp=Math.max(1,e.playerHp)),e.playerMp!==void 0&&(this.playerCharacter.mp=Math.max(0,e.playerMp))}})}loadSavedItems(){return x(this,null,function*(){try{this.savedItems=yield this.itemDbService.getAllItems(),console.log("\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C \uB85C\uB4DC:",this.savedItems.length)}catch(t){console.error("\u274C \uC544\uC774\uD15C \uB85C\uB4DC \uC2E4\uD328:",t),this.savedItems=[]}})}openItemCreator(){this.showItemCreatorPanel=!0,this.generatedItem=null,this.itemGenerationError="",this.geminiAiService.hasApiKey()||(this.itemGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.")}generateAiItem(t,e){this.itemGenerationError="",this.generatedItem=null,this.isGeneratingItem=!0,console.log("\u{1F3A8} AI \uC544\uC774\uD15C \uC0DD\uC131 \uC2DC\uC791:",t,e),this.geminiAiService.generateItem(t,e).subscribe({next:n=>{console.log("\u2705 AI \uC544\uC774\uD15C \uC0DD\uC131 \uC131\uACF5:",n),this.isGeneratingItem=!1,this.generatedItem=n},error:n=>{console.error("\u274C AI \uC544\uC774\uD15C \uC0DD\uC131 \uC2E4\uD328:",n),this.isGeneratingItem=!1,this.itemGenerationError=n.message||"AI \uC544\uC774\uD15C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}})}saveGeneratedItem(){return x(this,null,function*(){if(!this.generatedItem)return;let t={name:this.generatedItem.name||"\uC774\uB984 \uC5C6\uC74C",description:this.generatedItem.description||"",type:this.generatedItem.type||"\uAE30\uD0C0",grade:this.generatedItem.grade||"\uC77C\uBC18",effects:this.generatedItem.effects||[],stats:this.generatedItem.stats||{},requirements:this.generatedItem.requirements||"",lore:this.generatedItem.lore||"",tags:this.generatedItem.tags||[],createdAt:new Date};try{let e=yield this.itemDbService.saveItem(t);console.log("\u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5 \uC131\uACF5. ID:",e),this.notification.show("\uC544\uC774\uD15C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),yield this.loadSavedItems(),this.showItemCreatorPanel=!1}catch(e){console.error("\u274C \uC544\uC774\uD15C \uC800\uC7A5 \uC2E4\uD328:",e),this.notification.show("\uC544\uC774\uD15C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}addGeneratedItemToInventory(){if(!this.generatedItem)return;let t={id:`ai_item_${Date.now()}`,name:this.generatedItem.name||"\uC544\uC774\uD15C",description:this.generatedItem.description||"",type:this.mapItemType(this.generatedItem.type),quantity:1,buyPrice:this.calculateItemPrice(this.generatedItem.grade),sellPrice:Math.floor(this.calculateItemPrice(this.generatedItem.grade)*.6),rarity:this.mapItemGrade(this.generatedItem.grade),stats:this.generatedItem.stats||{}};this.addToInventory(t.id,1),this.addStoryBlock([`\u{1F48E} ${t.name}\uC744(\uB97C) \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4!`,`${t.description}`]),this.showItemCreatorPanel=!1,this.scrollToBottom(),console.log("\uC544\uC774\uD15C \uCD94\uAC00:",t)}deleteItem(t,e){return x(this,null,function*(){if(e&&e.stopPropagation(),!!confirm("\uC774 \uC544\uC774\uD15C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{yield this.itemDbService.deleteItem(t),console.log("\u{1F5D1}\uFE0F \uC544\uC774\uD15C \uC0AD\uC81C \uC131\uACF5"),yield this.loadSavedItems()}catch(n){console.error("\u274C \uC544\uC774\uD15C \uC0AD\uC81C \uC2E4\uD328:",n),this.notification.show("\uC544\uC774\uD15C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadItem(t){return x(this,null,function*(){this.generatedItem=t,this.showItemCreatorPanel=!0,console.log("\u{1F48E} \uC544\uC774\uD15C \uBD88\uB7EC\uC624\uAE30:",t.name)})}mapItemType(t){return t==="\uBB34\uAE30"?"weapon":t==="\uBC29\uC5B4\uAD6C"?"armor":t==="\uC18C\uBE44\uD488"?"consumable":"misc"}mapItemGrade(t){return t==="\uC77C\uBC18"?"common":t==="\uACE0\uAE09"?"uncommon":t==="\uD76C\uADC0"?"rare":t==="\uC804\uC124"?"epic":t==="\uC2E0\uD654"?"legendary":"common"}calculateItemPrice(t){return{\uC77C\uBC18:100,\uACE0\uAE09:500,\uD76C\uADC0:2e3,\uC804\uC124:1e4,\uC2E0\uD654:5e4}[t]||100}toggleStoryCreatorPanel(){this.showStoryCreatorPanel=!this.showStoryCreatorPanel,this.showStoryCreatorPanel&&(this.showCharacterCreatorPanel=!1,this.showScenarioCreatorPanel=!1,this.showItemCreatorPanel=!1,this.storyTitle="",this.selectedCharactersForStory=[],this.selectedItemsForStory=[],this.selectedScenariosForStory=[],this.generatedStory=null,this.storyGenerationError="")}selectCharacterForStory(t){let e=this.selectedCharactersForStory.findIndex(n=>n.id===t.id);e>-1?this.selectedCharactersForStory.splice(e,1):this.selectedCharactersForStory.push(t)}isCharacterSelected(t){return this.selectedCharactersForStory.some(e=>e.id===t.id)}selectItemForStory(t){let e=this.selectedItemsForStory.findIndex(n=>n.id===t.id);e>-1?this.selectedItemsForStory.splice(e,1):this.selectedItemsForStory.push(t)}isItemSelected(t){return this.selectedItemsForStory.some(e=>e.id===t.id)}selectScenarioForStory(t){let e=this.selectedScenariosForStory.findIndex(n=>n.id===t.id);e>-1?this.selectedScenariosForStory.splice(e,1):this.selectedScenariosForStory.push(t)}isScenarioSelected(t){return this.selectedScenariosForStory.some(e=>e.id===t.id)}generateStoryFromSavedContent(){return x(this,null,function*(){if(!this.storyTitle||this.storyTitle.trim()===""){this.storyGenerationError="\uC2A4\uD1A0\uB9AC \uC81C\uBAA9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}if(this.selectedCharactersForStory.length===0||this.selectedItemsForStory.length===0||this.selectedScenariosForStory.length===0){this.storyGenerationError="\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uAC01\uAC01 \uCD5C\uC18C 1\uAC1C \uC774\uC0C1 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.";return}this.isGeneratingStory=!0,this.storyGenerationError="",this.generatedStory=null;let t=this.selectedCharactersForStory[0],e=this.selectedItemsForStory[0],n=this.selectedScenariosForStory[0],o=this.selectedCharactersForStory.map((m,b)=>`
${b+1}. ${m.name} (${m.age}\uC138, ${m.gender}, ${m.occupation})
   - \uBC30\uACBD: ${m.backstory}
   - \uC131\uACA9: ${Array.isArray(m.personality)?m.personality.join(", "):m.personality}
   - \uC678\uBAA8: ${m.appearance}
   - \uBAA9\uD45C: ${m.goal}`).join(""),c=this.selectedItemsForStory.map((m,b)=>`
${b+1}. ${m.name} (${m.type}, ${m.grade})
   - \uC124\uBA85: ${m.description}
   - \uD2B9\uC218 \uD6A8\uACFC: ${m.effects}`).join(""),d=this.selectedScenariosForStory.map((m,b)=>`
${b+1}. ${m.title} (${m.genre})
   - \uBC30\uACBD: ${m.setting}
   - \uC8FC\uC694 \uAC08\uB4F1: ${m.conflict}
   - \uBAA9\uD45C: ${m.goal}
   - \uBD84\uC704\uAE30: ${m.mood}`).join(""),g=`\uB2E4\uC74C \uC694\uC18C\uB4E4\uC744 \uBC14\uD0D5\uC73C\uB85C \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uC2A4\uD1A0\uB9AC\uB97C \uB9CC\uB4E4\uC5B4\uC8FC\uC138\uC694:

**\uC2A4\uD1A0\uB9AC \uC81C\uBAA9:** ${this.storyTitle}

**\uB4F1\uC7A5\uC778\uBB3C\uB4E4:**${o}

\uC8FC\uC778\uACF5: ${t.name}

**\uD575\uC2EC \uC544\uC774\uD15C\uB4E4:**${c}

\uC2DC\uC791 \uC544\uC774\uD15C: ${e.name}

**\uC2DC\uB098\uB9AC\uC624 \uC694\uC18C\uB4E4:**${d}

\uBA54\uC778 \uC2DC\uB098\uB9AC\uC624: ${n.title}

\uB2E4\uC74C \uD615\uC2DD\uC758 JSON\uC73C\uB85C \uC751\uB2F5\uD574\uC8FC\uC138\uC694:
{
  "title": "\uC18C\uC124 \uC81C\uBAA9 (\uC774\uBAA8\uC9C0 \uD3EC\uD568)",
  "genre": "\uC7A5\uB974 (\uC601\uBB38)",
  "description": "\uC18C\uC124 \uC124\uBA85 (\uD55C \uC904 \uC694\uC57D)",
  "icon": "\uB300\uD45C \uC774\uBAA8\uC9C0 (\uD558\uB098\uB9CC)",
  "difficulty": "easy, normal, hard \uC911 \uD558\uB098",
  "startingGold": \uC2DC\uC791 \uACE8\uB4DC (\uC22B\uC790),
  "startingItemName": "\uC2DC\uC791 \uC544\uC774\uD15C \uC774\uB984",
  "startingItemDescription": "\uC2DC\uC791 \uC544\uC774\uD15C \uC124\uBA85",
  "firstStory": [
    "\uCCAB \uBC88\uC9F8 \uC2A4\uD1A0\uB9AC \uBB38\uC7A5",
    "\uB450 \uBC88\uC9F8 \uC2A4\uD1A0\uB9AC \uBB38\uC7A5",
    "\uC138 \uBC88\uC9F8 \uC2A4\uD1A0\uB9AC \uBB38\uC7A5"
  ],
  "firstChoices": [
    "\uCCAB \uBC88\uC9F8 \uC120\uD0DD\uC9C0",
    "\uB450 \uBC88\uC9F8 \uC120\uD0DD\uC9C0",
    "\uC138 \uBC88\uC9F8 \uC120\uD0DD\uC9C0"
  ]
}

\uC8FC\uC758\uC0AC\uD56D:
- \uC8FC\uC778\uACF5\uC758 \uC131\uACA9\uACFC \uBC30\uACBD\uC744 \uC798 \uC0B4\uB824\uC8FC\uC138\uC694
- \uD575\uC2EC \uC544\uC774\uD15C\uC774 \uC2A4\uD1A0\uB9AC\uC5D0\uC11C \uC911\uC694\uD55C \uC5ED\uD560\uC744 \uD558\uB3C4\uB85D \uD574\uC8FC\uC138\uC694
- \uC2DC\uB098\uB9AC\uC624\uC758 \uAC08\uB4F1\uACFC \uC0AC\uAC74\uC744 \uC2A4\uD1A0\uB9AC\uC5D0 \uC790\uC5F0\uC2A4\uB7FD\uAC8C \uB179\uC5EC\uC8FC\uC138\uC694
- \uC120\uD0DD\uC9C0\uB294 \uD50C\uB808\uC774\uC5B4\uAC00 \uD765\uBBF8\uB97C \uB290\uB084 \uC218 \uC788\uB3C4\uB85D \uB2E4\uC591\uD558\uAC8C \uAD6C\uC131\uD574\uC8FC\uC138\uC694
- \uC21C\uC218 JSON\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694`;try{console.log("\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC2DC\uC791...");let m=this.geminiAiService.getApiKey(),b="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent",O={contents:[{parts:[{text:g}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:2048}},I=(yield fetch(`${b}?key=${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)}).then(y=>y.json()))?.candidates?.[0]?.content?.parts?.[0]?.text;if(!I)throw new Error("AI \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.");console.log("\u{1F4DD} AI \uC751\uB2F5:",I);let S=I.match(/\{[\s\S]*\}/);if(!S)throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let A=JSON.parse(S[0]),he=`story_${Date.now()}`,N=`item_${Date.now()}`;this.generatedStory={id:he,title:this.storyTitle,genre:A.genre,description:A.description,icon:A.icon,difficulty:A.difficulty||"normal",startingGold:A.startingGold||100,startingItems:[{id:N,name:A.startingItemName,description:A.startingItemDescription,type:this.mapItemType(e.type),quantity:1,buyPrice:this.calculateItemPrice(e.grade),sellPrice:Math.floor(this.calculateItemPrice(e.grade)/2),rarity:this.mapItemGrade(e.grade),stats:e.type==="\uBB34\uAE30"?{attack:5}:e.type==="\uBC29\uC5B4\uAD6C"?{defense:5}:void 0}],firstStory:A.firstStory,firstChoices:A.firstChoices},console.log("\u2705 \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC131\uACF5:",this.generatedStory)}catch(m){console.error("\u274C \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC2E4\uD328:",m),this.storyGenerationError=m instanceof Error?m.message:"\uC2A4\uD1A0\uB9AC \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}finally{this.isGeneratingStory=!1}})}addGeneratedStoryToList(){this.generatedStory&&(this.novelTemplates.push(this.generatedStory),console.log("\u{1F4DA} \uC0DD\uC131\uB41C \uC2A4\uD1A0\uB9AC\uB97C \uBAA9\uB85D\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4:",this.generatedStory.title),this.selectNovel(this.generatedStory),this.showStoryCreatorPanel=!1,this.storyTitle="",this.selectedCharactersForStory=[],this.selectedItemsForStory=[],this.selectedScenariosForStory=[],this.generatedStory=null,this.storyGenerationError="")}clearGeneratedStory(){this.generatedStory=null,this.storyGenerationError=""}loadSavedStories(){return x(this,null,function*(){try{this.savedStories=yield this.storyDbService.getAllStories(),this.novelTemplates=this.savedStories.map(t=>({id:t.id,title:t.title,genre:t.genre,description:t.description,icon:t.icon,difficulty:t.difficulty,startingGold:t.startingGold,startingItems:t.startingItems,firstStory:t.firstStory,firstChoices:t.firstChoices})),console.log("\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC \uC644\uB8CC:",this.savedStories.length)}catch(t){console.error("\u274C \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC \uC2E4\uD328:",t)}})}saveGeneratedStory(){return x(this,null,function*(){if(this.generatedStory)try{let t={id:this.generatedStory.id,title:this.generatedStory.title,genre:this.generatedStory.genre,description:this.generatedStory.description,icon:this.generatedStory.icon,difficulty:this.generatedStory.difficulty,startingGold:this.generatedStory.startingGold,startingItems:this.generatedStory.startingItems,firstStory:this.generatedStory.firstStory,firstChoices:this.generatedStory.firstChoices,createdAt:new Date,createdBy:"AI"};yield this.storyDbService.saveStory(t),yield this.loadSavedStories(),this.notification.show("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),console.log("\u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC644\uB8CC:",t.title)}catch(t){console.error("\u274C \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC2E4\uD328:",t),this.notification.show("\uC2A4\uD1A0\uB9AC \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteSavedStory(t,e){return x(this,null,function*(){if(e&&e.stopPropagation(),!!confirm("\uC774 \uC2A4\uD1A0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{yield this.storyDbService.deleteStory(t),yield this.loadSavedStories(),console.log("\u{1F5D1}\uFE0F \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC644\uB8CC:",t)}catch(n){console.error("\u274C \uC2A4\uD1A0\uB9AC \uC0AD\uC81C \uC2E4\uD328:",n),this.notification.show("\uC2A4\uD1A0\uB9AC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadSavedStoryForGame(t){let e={id:t.id,title:t.title,genre:t.genre,description:t.description,icon:t.icon,difficulty:t.difficulty,startingGold:t.startingGold,startingItems:t.startingItems,firstStory:t.firstStory,firstChoices:t.firstChoices};this.selectNovel(e)}toggleStoryFlowPanel(){console.log("\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0 \uD328\uB110 \uD1A0\uAE00 \uD074\uB9AD\uB428"),console.log("\uD604\uC7AC \uC0C1\uD0DC:",this.showStoryFlowPanel),console.log("\uC2A4\uD1A0\uB9AC \uBE14\uB85D \uC218:",this.storyBlocks.length),console.log("\uD604\uC7AC \uACBD\uB85C:",this.currentPath),console.log("\uD604\uC7AC \uC120\uD0DD\uC9C0:",this.choices),this.showStoryFlowPanel=!this.showStoryFlowPanel,this.showStoryFlowPanel&&(console.log("\uD50C\uB85C\uC6B0 \uC0DD\uC131 \uC2DC\uC791..."),this.generateStoryFlow(),console.log("\uC0DD\uC131\uB41C \uB178\uB4DC \uC218:",this.storyFlowNodes.length))}generateStoryFlow(){console.log("\u{1F4CA} \uD50C\uB85C\uC6B0 \uC0DD\uC131 \uC2DC\uC791"),this.storyFlowNodes=[];let t=0,e=0;this.storyFlowNodes.push({id:`node-${t++}`,label:"\uC2DC\uC791",type:"start",level:e++}),console.log("\uC2DC\uC791 \uB178\uB4DC \uCD94\uAC00\uB428"),console.log("\uC2A4\uD1A0\uB9AC \uBE14\uB85D \uC21C\uD68C \uC2DC\uC791, \uCD1D:",this.storyBlocks.length);for(let n=0;n<this.storyBlocks.length;n++){let o=this.storyBlocks[n];if(console.log(`\uBE14\uB85D ${n}:`,o.type,o),o.type==="story"&&o.lines&&o.lines.length>0){let c=o.lines[0].substring(0,30)+(o.lines[0].length>30?"...":"");this.storyFlowNodes.push({id:`node-${t++}`,label:c,type:"story",level:e}),console.log("\uC2A4\uD1A0\uB9AC \uB178\uB4DC \uCD94\uAC00:",c)}else o.type==="choice"&&o.choiceText&&(this.storyFlowNodes.push({id:`node-${t++}`,label:`\uC120\uD0DD: ${o.choiceText.substring(0,25)}...`,type:"choice",level:e++}),console.log("\uC120\uD0DD \uB178\uB4DC \uCD94\uAC00:",o.choiceText))}if(console.log("\uD604\uC7AC \uC120\uD0DD\uC9C0 \uC218:",this.choices.length),this.choices.length>0){let n={id:`node-${t++}`,label:"\uD604\uC7AC \uC704\uCE58",type:"current",choices:this.choices,level:e};this.storyFlowNodes.push(n),console.log("\uD604\uC7AC \uC704\uCE58 \uB178\uB4DC \uCD94\uAC00\uB428"),this.choices.forEach((o,c)=>{this.storyFlowNodes.push({id:`node-${t++}`,label:`? ${o.substring(0,25)}${o.length>25?"...":""}`,type:"story",level:e+1}),console.log(`\uBBF8\uB798 \uC120\uD0DD\uC9C0 ${c} \uCD94\uAC00:`,o)})}console.log("\u2705 \uD50C\uB85C\uC6B0 \uC0DD\uC131 \uC644\uB8CC, \uCD1D \uB178\uB4DC \uC218:",this.storyFlowNodes.length),console.log("\uC0DD\uC131\uB41C \uB178\uB4DC\uB4E4:",this.storyFlowNodes)}getLinkedScenario(t){let e=`scenario_link_${this.selectedNovel?.id}_${t}`,n=localStorage.getItem(e);return n&&this.savedScenarios.find(o=>o.id===n)||null}applyLinkedScenario(t){console.log("\u{1F4CB} \uC2DC\uB098\uB9AC\uC624 \uC801\uC6A9:",t.title);let e=[`
=== ${t.title} ===`,`${t.description}`,""];t.setting&&(e.push(`\u{1F4CD} \uBC30\uACBD: ${t.setting}`),e.push("")),t.conflict&&(e.push(`\u26A1 \uAC08\uB4F1: ${t.conflict}`),e.push("")),t.goal&&(e.push(`\u{1F3AF} \uBAA9\uD45C: ${t.goal}`),e.push("")),t.characters&&t.characters.length>0&&(e.push("\u{1F465} \uB4F1\uC7A5 \uC778\uBB3C:"),t.characters.forEach(o=>{e.push(`\u2022 ${o}`)}),e.push("")),t.mood&&(e.push(`\u{1F31F} \uBD84\uC704\uAE30: ${t.mood}`),e.push("")),this.addStoryBlock(e);let n=[`\u{1F6B6} ${t.goal||"\uC55E\uC73C\uB85C \uB098\uC544\uAC04\uB2E4"}`,"\u{1F50D} \uC8FC\uBCC0\uC744 \uC790\uC138\uD788 \uC0B4\uD540\uB2E4","\u{1F4AD} \uC0C1\uD669\uC744 \uBD84\uC11D\uD574\uBCF8\uB2E4","\u2694\uFE0F \uC804\uD22C\uD558\uAE30"];this.setChoices(n)}linkScenarioToChoice(t,e){let n=[...this.currentPath,t.toString()].join("-"),o=`scenario_link_${this.selectedNovel?.id}_${n}`;localStorage.setItem(o,e),console.log(`\u2705 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0\uB428: ${n} -> ${e}`),alert("\uC2DC\uB098\uB9AC\uC624\uAC00 \uC120\uD0DD\uC9C0\uC5D0 \uC5F0\uACB0\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),this.showScenarioLinkPanel=!1}openScenarioLinkPanel(t){this.currentLinkingChoiceIndex=t,this.showScenarioLinkPanel=!0}closeScenarioLinkPanel(){this.showScenarioLinkPanel=!1,this.currentLinkingChoiceIndex=-1}static \u0275fac=function(e){return new(e||i)(T(Pe),T(tn),T(ee),T(Tt),T(Be),T(Ae),T(Ne),T(Re),T(Y),T(Ge),T(an))};static \u0275cmp=U({type:i,selectors:[["app-novel-generator"]],viewQuery:function(e,n){if(e&1&&We(Co,5),e&2){let o;Ye(o=Ke())&&(n.battleLogContainer=o.first)}},standalone:!1,decls:13,vars:12,consts:[["battleLogContainer",""],[1,"novel-book-container"],["class","novel-home-screen",4,"ngIf"],["class","book-cover",4,"ngIf"],["class","game-layout",4,"ngIf"],["class","panel-backdrop",3,"click",4,"ngIf"],["class","game-panel character-panel",4,"ngIf"],["class","game-panel inventory-panel",4,"ngIf"],["class","game-panel shop-panel",4,"ngIf"],["class","game-panel character-creator-panel",4,"ngIf"],["class","game-panel scenario-creator-panel",4,"ngIf"],["class","game-panel item-creator-panel",4,"ngIf"],["class","story-flow-overlay",4,"ngIf"],["class","scenario-link-overlay",4,"ngIf"],[1,"novel-home-screen"],[1,"home-container"],[1,"welcome-section"],[1,"welcome-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["class","user-info",4,"ngIf"],["title","\uB85C\uADF8\uC544\uC6C3",1,"logout-btn",3,"click"],[1,"home-theme-toggle-btn",3,"click","title"],[1,"quick-actions"],[1,"action-card","featured",3,"click"],[1,"card-icon"],[1,"card-badge"],[1,"action-card","ai-special",3,"click"],[1,"card-badge","ai-badge"],[1,"action-card","premium",3,"click"],[1,"card-badge","premium-badge"],[1,"action-card",3,"click"],["class","card-badge",4,"ngIf"],["class","story-creator-panel",4,"ngIf"],["class","saved-stories-section",4,"ngIf"],["class","saved-characters-section",4,"ngIf"],["class","saved-scenarios-section",4,"ngIf"],["class","saved-items-section",4,"ngIf"],["class","saved-games-section","id","savedGamesSection",4,"ngIf"],["id","novelsSection",1,"novels-section"],[1,"section-header"],[1,"section-desc"],[1,"novel-grid"],["class","novel-card",3,"click",4,"ngFor","ngForOf"],[1,"user-info"],[1,"user-name"],[1,"story-creator-panel"],[1,"creator-container"],[1,"creator-header"],[1,"close-btn",3,"click"],[1,"creator-intro"],["class","error-message",4,"ngIf"],[1,"title-input-section"],["for","storyTitle"],[1,"label-icon"],[1,"label-text"],[1,"required"],["type","text","id","storyTitle","placeholder","\uC608: \uAC80\uC740 \uC6A9\uC758 \uC804\uC124, \uB9C8\uBC95\uC0AC\uC758 \uC5EC\uC815, \uBE44\uBC00\uC758 \uC232...","maxlength","50",1,"title-input",3,"ngModelChange","ngModel"],[1,"char-count"],[1,"selection-section"],[1,"select-group"],[1,"selection-count"],[1,"select-grid"],["class","select-item",3,"selected","click",4,"ngFor","ngForOf"],["class","no-content",4,"ngIf"],[1,"creator-actions"],[1,"generate-story-btn",3,"click","disabled"],[4,"ngIf"],["class","generated-story-result",4,"ngIf"],[1,"error-message"],[1,"select-item",3,"click"],[1,"item-name"],[1,"item-desc"],[1,"no-content"],[1,"generated-story-result"],[1,"story-preview"],[1,"story-title"],[1,"story-icon"],[1,"story-desc"],[1,"story-meta"],[1,"meta-item"],[1,"story-intro"],[4,"ngFor","ngForOf"],[1,"story-actions"],[1,"save-btn",3,"click"],[1,"start-btn",3,"click"],[1,"regenerate-btn",3,"click"],[1,"saved-stories-section"],[1,"stories-grid"],["class","story-card",3,"click",4,"ngFor","ngForOf"],[1,"story-card",3,"click"],[1,"story-header"],[1,"story-icon-title"],[1,"delete-btn",3,"click"],[1,"story-description"],[1,"story-footer"],[1,"date"],[1,"created-by"],[1,"saved-characters-section"],[1,"characters-grid"],["class","character-card",3,"click",4,"ngFor","ngForOf"],[1,"character-card",3,"click"],[1,"character-header"],[1,"character-meta"],[1,"character-desc"],["class","character-traits",4,"ngIf"],[1,"character-footer"],[1,"character-traits"],["class","trait",4,"ngFor","ngForOf"],[1,"trait"],[1,"saved-scenarios-section"],[1,"scenarios-grid"],["class","scenario-card",3,"click",4,"ngFor","ngForOf"],[1,"scenario-card",3,"click"],[1,"scenario-header"],[1,"scenario-desc"],[1,"scenario-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"scenario-meta"],[1,"genre"],[1,"tag"],[1,"saved-items-section"],[1,"items-grid"],["class","item-card",3,"grade-legendary","grade-rare","grade-uncommon","click",4,"ngFor","ngForOf"],[1,"item-card",3,"click"],[1,"item-header"],["class","item-stats",4,"ngIf"],[1,"item-tags"],[1,"tag","type-tag"],[1,"tag","grade-tag"],[1,"item-meta"],[1,"item-stats"],["class","stat",4,"ngIf"],[1,"stat"],["id","savedGamesSection",1,"saved-games-section"],[1,"saved-games-grid"],["class","saved-game-card",3,"click",4,"ngFor","ngForOf"],[1,"saved-game-card",3,"click"],[1,"save-header"],[1,"save-icon"],[1,"save-date"],[1,"save-info"],[1,"save-meta"],[1,"player-level"],[1,"chapter"],[1,"gold"],[1,"save-actions"],[1,"load-btn",3,"click"],[1,"novel-card",3,"click"],[1,"novel-card-header"],[1,"novel-icon"],[1,"novel-difficulty"],[1,"novel-info"],[1,"novel-genre"],[1,"novel-description"],[1,"novel-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-value"],[1,"book-cover"],[1,"cover-content","novel-start-screen"],[1,"selected-novel-icon"],[1,"book-title"],[1,"book-subtitle"],[1,"novel-intro"],[1,"start-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"action-buttons"],[1,"back-btn",3,"click"],[1,"start-reading-btn",3,"click"],[1,"game-layout"],[1,"left-panel-container"],[1,"side-panel","left-panel"],["class","collapsed-view",3,"click",4,"ngIf"],["class","expanded-view",4,"ngIf"],[1,"main-content-area"],[1,"game-status-bar"],[1,"toggle-btn",3,"click"],["title","\uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30",1,"back-home-btn",3,"click"],[1,"player-info"],[1,"status-bar-actions"],["title","\uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0",1,"flow-btn",3,"click"],["title","\uB85C\uADF8\uC544\uC6C3",1,"logout-btn-game",3,"click"],[1,"theme-toggle-btn",3,"click","title"],[1,"novel-scroll-area"],[1,"novel-header"],[1,"story-blocks"],["class","story-block",4,"ngFor","ngForOf"],["class","battle-section",4,"ngIf"],[1,"right-panel-container"],[1,"side-panel","right-panel"],[1,"collapsed-view",3,"click"],[1,"collapse-icon"],[1,"collapse-text"],[1,"expanded-view"],[1,"panel-header"],[1,"panel-content"],[1,"menu-item",3,"click"],[1,"story-block"],[1,"battle-section"],[1,"battle-header"],[1,"battle-characters"],[1,"battle-character","player"],[1,"character-name"],[1,"character-avatar"],[1,"hp-bar"],[1,"bar-label"],[1,"bar-name"],[1,"bar-text"],[1,"bar-container"],[1,"bar-fill","hp"],[1,"mp-bar"],[1,"bar-fill","mp"],[1,"vs-text"],[1,"battle-character","enemy"],[1,"battle-log"],["class","log-entry",3,"damage","heal",4,"ngFor","ngForOf"],["class","battle-result",4,"ngIf"],[1,"log-entry"],[1,"battle-result"],[1,"auto-continue"],[1,"choice-container"],["class","choice-item",4,"ngFor","ngForOf"],[1,"choice-item"],[1,"choice-button",3,"click"],[1,"choice-number"],[1,"choice-text"],["title","\uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0",1,"link-scenario-btn",3,"click"],[1,"panel-backdrop",3,"click"],[1,"game-panel","character-panel"],[1,"game-panel","inventory-panel"],[3,"click",4,"ngIf"],[3,"click"],[1,"game-panel","shop-panel"],[3,"click","disabled"],[1,"game-panel","character-creator-panel"],[1,"character-creator-container"],[1,"character-type-buttons"],[1,"generate-btn","primary",3,"click","disabled"],[1,"generate-btn",3,"click","disabled"],["class","generated-character-info",4,"ngIf"],[1,"generated-character-info"],[1,"character-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"character-description"],["class","character-abilities",4,"ngIf"],[1,"apply-btn",3,"click"],[1,"character-abilities"],[1,"abilities-list"],["class","ability-tag",4,"ngFor","ngForOf"],[1,"ability-tag"],[1,"traits-list"],["class","trait-tag",4,"ngFor","ngForOf"],[1,"trait-tag"],[1,"game-panel","scenario-creator-panel"],[1,"scenario-creator-container"],[1,"scenario-type-buttons"],["class","generated-scenario-info",4,"ngIf"],[1,"generated-scenario-info"],[1,"scenario-title"],[1,"scenario-description"],["class","scenario-characters",4,"ngIf"],["class","scenario-tags",4,"ngIf"],[1,"scenario-characters"],[1,"tags-list"],["class","tag-item",4,"ngFor","ngForOf"],[1,"tag-item"],[1,"game-panel","item-creator-panel"],[1,"item-creator-container"],[1,"item-type-buttons"],[1,"generate-btn","weapon",3,"click","disabled"],[1,"generate-btn","armor",3,"click","disabled"],[1,"generate-btn","rare",3,"click","disabled"],[1,"generate-btn","legendary",3,"click","disabled"],[1,"generate-btn","consumable",3,"click","disabled"],[1,"generate-btn","special",3,"click","disabled"],["class","generated-item-info",4,"ngIf"],[1,"generated-item-info"],[1,"item-title"],[1,"item-grade-badge"],[1,"item-type-info"],[1,"type-badge"],[1,"item-description"],["class","item-effects",4,"ngIf"],["class","item-requirements",4,"ngIf"],["class","item-lore",4,"ngIf"],["class","item-tags",4,"ngIf"],[1,"add-btn",3,"click"],[1,"stats-grid"],["class","stat-item",4,"ngIf"],[1,"stat-label"],[1,"item-effects"],[1,"item-requirements"],[1,"item-lore"],[1,"lore-text"],[1,"story-flow-overlay"],["cdkDrag","","cdkDragBoundary",".story-flow-overlay",1,"story-flow-panel"],["cdkDragHandle","",1,"flow-header"],[1,"header-left"],[1,"drag-indicator"],[1,"flow-info"],[1,"flow-stats"],[1,"flow-canvas"],[1,"flow-nodes"],["class","flow-node",3,"ngClass","margin-left",4,"ngFor","ngForOf"],[1,"flow-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","start"],[1,"legend-icon","story"],[1,"legend-icon","choice"],[1,"legend-icon","current"],[1,"flow-node",3,"ngClass"],[1,"node-icon"],[1,"node-content"],[1,"node-label"],[1,"node-level"],["class","node-choices",4,"ngIf"],["class","flow-connector",4,"ngIf"],[1,"node-choices"],["class","choice-preview",4,"ngFor","ngForOf"],[1,"choice-preview"],[1,"flow-connector"],[1,"scenario-link-overlay"],["cdkDrag","","cdkDragBoundary",".scenario-link-overlay",1,"scenario-link-panel"],["cdkDragHandle","",1,"link-header"],[1,"link-info"],[1,"hint"],[1,"scenario-list"],[1,"scenario-grid"],["class","no-scenarios",4,"ngIf"],[1,"scenario-genre"],[1,"scenario-body"],[1,"no-scenarios"],[1,"create-scenario-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",1),v(1,ei,83,12,"div",2)(2,ti,31,9,"div",3)(3,Ci,39,18,"div",4)(4,vi,1,0,"div",5)(5,fi,15,4,"div",6)(6,Mi,8,1,"div",7)(7,yi,10,2,"div",8)(8,zi,28,14,"div",9)(9,tr,28,14,"div",10)(10,kr,34,20,"div",11),a(),v(11,Rr,46,4,"div",12)(12,Lr,22,3,"div",13)),e&2&&(l(),_("ngIf",!n.novelSelected&&!n.gameStarted),l(),_("ngIf",n.novelSelected&&!n.gameStarted),l(),_("ngIf",n.gameStarted),l(),_("ngIf",n.showCharacterPanel||n.showInventoryPanel||n.showShopPanel||n.showCharacterCreatorPanel||n.showScenarioCreatorPanel||n.showItemCreatorPanel),l(),_("ngIf",n.showCharacterPanel),l(),_("ngIf",n.showInventoryPanel),l(),_("ngIf",n.showShopPanel),l(),_("ngIf",n.showCharacterCreatorPanel),l(),_("ngIf",n.showScenarioCreatorPanel),l(),_("ngIf",n.showItemCreatorPanel),l(),_("ngIf",n.showStoryFlowPanel),l(),_("ngIf",n.showScenarioLinkPanel))},dependencies:[xe,Me,J,Oe,ye,It,we,Se,En,Dn],styles:['@charset "UTF-8";.novel-book-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-secondary);font-family:Inter,Segoe UI,system-ui,-apple-system,sans-serif;color:var(--text-primary);transition:background-color .3s ease}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--bg-primary)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]{text-align:center;max-width:800px;padding:60px 50px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;box-shadow:0 8px 24px var(--shadow);position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:20px;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-subtitle[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:16px;color:var(--text-secondary);font-weight:400}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:50px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:2px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .select-guide[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin-bottom:30px;font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]{padding:16px 48px;font-size:1.1rem;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;box-shadow:0 4px 12px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 6px 16px #00000026}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{padding:12px 32px;font-size:1rem;background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;margin-right:16px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--accent-primary);transform:translateY(-2px)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]{max-width:700px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .selected-novel-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .novel-intro[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:24px 0;line-height:1.6}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:12px;padding:24px;margin:32px 0;border:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);font-size:1rem}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);font-size:1.1rem}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-easy[_ngcontent-%COMP%]{color:#10b981}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-normal[_ngcontent-%COMP%]{color:#f59e0b}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-hard[_ngcontent-%COMP%]{color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]{min-height:100vh;height:100vh;overflow-y:auto;overflow-x:hidden;background:var(--bg-secondary);padding:40px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b5cf64d;border-radius:5px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b5cf680}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]{margin-bottom:60px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]{position:relative;text-align:center;margin-bottom:40px;display:flex;justify-content:center;align-items:center;gap:20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1;text-align:center}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;margin-bottom:16px;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-secondary);font-weight:400}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;align-items:center;gap:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:10px 18px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:12px;display:flex;align-items:center;gap:6px;box-shadow:0 2px 8px var(--shadow);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow);border-color:var(--accent-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;background:var(--gradient-primary);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .home-theme-toggle-btn[_ngcontent-%COMP%]{padding:12px 18px;font-size:1.5rem;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:12px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow);min-width:52px;min-height:52px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .home-theme-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);border-color:var(--accent-secondary);transform:translateY(-2px) rotate(15deg);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .home-theme-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) rotate(0)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{padding:12px 20px;font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);color:var(--text-primary);border:2px solid var(--accent-primary);border-radius:12px;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px var(--shadow);display:flex;align-items:center;gap:6px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px}@media (min-width: 1400px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width: 1000px) and (max-width: 1399px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:32px 28px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.featured[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,#3b82f60d,#8b5cf60d)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]{border-color:#8b5cf6;background:linear-gradient(135deg,#8b5cf614,#ec489914)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b5cf6,#ec4899)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover{border-color:#8b5cf6;box-shadow:0 8px 32px #8b5cf64d}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aiGlow 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]   .card-badge.ai-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{transform:scale(1.15)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;background:var(--accent-primary);color:#fff;border-radius:20px;font-size:.85rem;font-weight:700}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]{margin-bottom:60px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:12px;padding:24px;cursor:pointer;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-header[_ngcontent-%COMP%]   .save-icon[_ngcontent-%COMP%]{font-size:2.5rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-header[_ngcontent-%COMP%]   .save-date[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-info[_ngcontent-%COMP%]{margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:12px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-info[_ngcontent-%COMP%]   .save-meta[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-info[_ngcontent-%COMP%]   .save-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.9rem;color:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-info[_ngcontent-%COMP%]   .save-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-actions[_ngcontent-%COMP%]   .load-btn[_ngcontent-%COMP%]{flex:1;padding:10px 20px;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-actions[_ngcontent-%COMP%]   .load-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:10px 14px;background:transparent;color:var(--text-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .saved-games-section[_ngcontent-%COMP%]   .saved-games-grid[_ngcontent-%COMP%]   .saved-game-card[_ngcontent-%COMP%]   .save-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff;border-color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:24px;cursor:pointer;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover   .novel-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-icon[_ngcontent-%COMP%]{font-size:3rem;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:700;text-transform:uppercase}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-easy[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-normal[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-hard[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-genre[_ngcontent-%COMP%]{font-size:.85rem;color:var(--accent-primary);font-weight:600;text-transform:uppercase;margin-bottom:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-description[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);line-height:1.5;margin-bottom:16px;min-height:44px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]{display:flex;gap:12px;padding-top:12px;border-top:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:var(--text-secondary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.1rem}.novel-book-container[_ngcontent-%COMP%]   .game-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:100vh;position:relative;background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]{position:fixed;top:62px;height:calc(100vh - 62px);background:var(--bg-primary);border:1px solid var(--border-color);z-index:999;transition:transform .3s ease,box-shadow .3s ease;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]:hover{transform:translate(0)!important;box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]{left:0;width:280px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]{right:0;width:280px}.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]{transform:translate(100%)}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]{padding:30px 15px;cursor:pointer;text-align:center;height:100%;display:flex;flex-direction:column;align-items:center;transition:background .2s ease}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px;color:var(--accent-primary);transition:transform .2s ease}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-text[_ngcontent-%COMP%]{font-size:.9rem;writing-mode:vertical-rl;letter-spacing:2px;color:var(--text-secondary);font-weight:600;text-transform:uppercase}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover   .collapse-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-secondary);color:var(--text-primary);display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:1.3rem;cursor:pointer;padding:0;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:20px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;padding:14px 16px;margin-bottom:10px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;text-align:left;font-size:1rem;font-weight:500;color:var(--text-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--accent-primary);transform:translate(4px)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]{margin-top:14px;padding:14px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(148,163,184,.05)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%]{color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:700;margin:24px 0 12px;padding-bottom:8px;border-bottom:1px solid var(--border-color);text-transform:uppercase;letter-spacing:1px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{margin-bottom:20px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 14px;margin-bottom:8px;background:var(--bg-secondary);border-radius:6px;border-left:2px solid var(--accent-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:3px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--text-secondary);margin-bottom:8px;font-weight:500;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:20px;background:var(--bg-secondary);border-radius:10px;overflow:hidden;border:1px solid var(--border-color);margin-bottom:6px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-primary);transition:width .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{text-align:right;color:var(--text-secondary);font-size:.85rem;font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 14px;margin-bottom:8px;background:var(--bg-secondary);border-radius:6px;border-left:2px solid var(--accent-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:3px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:10px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{flex:1;color:var(--text-primary);font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:24px;font-style:italic;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{width:100%;padding:12px 18px;margin-bottom:10px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;color:var(--text-primary);font-weight:500;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]{flex:1;position:relative;transition:all .3s ease;margin-left:0;margin-right:0;margin-top:62px;overflow-y:auto;height:calc(100vh - 62px);background:var(--bg-primary)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;width:100%;height:62px;z-index:1001;background:var(--bg-primary);padding:14px 28px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);box-shadow:0 2px 8px var(--shadow);gap:12px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:10px 14px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:6px;cursor:pointer;font-size:1.2rem;transition:all .3s ease;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]{padding:10px 18px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:6px;cursor:pointer;font-size:.95rem;font-weight:600;transition:all .3s ease;color:var(--text-primary);white-space:nowrap}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translate(-2px)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex:1;justify-content:center}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 20px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);font-weight:600;color:var(--text-primary);white-space:nowrap;font-size:.95rem;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .theme-toggle-btn[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:8px;cursor:pointer;font-size:1.3rem;transition:all .3s ease;color:var(--text-primary);min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .theme-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);border-color:var(--accent-secondary);transform:translateY(-2px) rotate(15deg);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .theme-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) rotate(0)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:8px;cursor:pointer;font-size:1.3rem;transition:all .3s ease;color:var(--text-primary);min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:8px;cursor:pointer;font-size:1.3rem;transition:all .3s ease;color:var(--text-primary);min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:40px 40px 100px;min-height:calc(100vh - 62px)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]{text-align:center;padding:32px 0 40px;margin-bottom:40px;border-bottom:2px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{margin-bottom:28px;padding:28px;background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);transition:all .3s ease;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;color:var(--text-primary);margin:14px 0;text-align:justify}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--accent-primary);border-left-width:4px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600;font-size:1.05rem;display:flex;align-items:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:1.6rem;font-weight:700;margin:40px 0 28px;text-transform:uppercase;letter-spacing:1.5px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:20px 28px;margin:14px 0;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:10px;color:var(--text-primary);font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;text-align:left;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--accent-primary);transform:scaleY(0);transition:transform .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--accent-primary);transform:translate(8px);box-shadow:0 4px 12px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(8px) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .panel-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1999;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out;cursor:pointer}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:1100px;max-height:85vh;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;z-index:2000;box-shadow:0 20px 60px var(--shadow);overflow:hidden;animation:_ngcontent-%COMP%_slideInUp .3s ease-out}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:24px 28px;background:var(--bg-secondary);color:var(--text-primary);display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:1.6rem;cursor:pointer;width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:28px;max-height:calc(80vh - 90px);overflow-y:auto}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:16px 20px;margin:12px 0;background:var(--bg-secondary);border-radius:8px;border-left:3px solid var(--accent-primary);color:var(--text-primary);font-size:1rem;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:4px;transform:translate(4px);box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background:var(--accent-primary);border:none;border-radius:6px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease;margin-left:10px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 8px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.battle-section[_ngcontent-%COMP%]{width:100%;padding:32px 24px;margin:24px 0;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);box-shadow:0 2px 8px #0000000d}.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:50px;gap:50px;flex-wrap:wrap;position:relative;z-index:1}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]{flex:1;min-width:280px;max-width:340px;padding:24px 20px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 2px 8px #00000014;transition:all .3s ease;position:relative;overflow:visible}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_damageShakeStrong .5s ease-in-out}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ff00004d;border-radius:12px;animation:_ngcontent-%COMP%_damageFlash .5s ease-out;pointer-events:none;z-index:10}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.player.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 4px 20px #3b82f64d,inset 0 0 0 1px #3b82f633}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.enemy.active[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 4px 20px #ef44444d,inset 0 0 0 1px #ef444433}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{display:none}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;margin-bottom:20px;text-align:center;color:var(--text-primary);letter-spacing:.5px}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]{margin-bottom:16px}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:.95rem;color:var(--text-secondary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:600}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]{margin-bottom:12px;position:relative;background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;padding:2px 8px;border-radius:4px;background:transparent;color:var(--accent-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-primary);font-weight:700;font-family:Courier New,monospace}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:20px;background:transparent;border-radius:10px;overflow:hidden;border:2px solid rgba(255,255,255,.1);box-shadow:inset 0 2px 4px #0000004d,0 2px 8px #0000001a;position:relative}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]:before, .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.2),transparent);border-radius:10px 10px 0 0;pointer-events:none;z-index:2}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .6s cubic-bezier(.34,1.56,.64,1);border-radius:8px;position:relative;overflow:hidden;box-shadow:inset 0 -2px 4px #0000004d}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]:before, .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:40%;background:linear-gradient(to bottom,rgba(255,255,255,.4),transparent);border-radius:8px 8px 0 0;z-index:1}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626,#ef4444);box-shadow:inset 0 1px #fff3,inset 0 -1px #0000001a}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c,#dc2626);animation:_ngcontent-%COMP%_hpPulseLow .8s ease-in-out infinite}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb,#3b82f6);box-shadow:inset 0 1px #fff3,inset 0 -1px #0000001a}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .vs-indicator[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-secondary);opacity:.6}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto;padding:16px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);margin-bottom:24px;font-family:Inter,-apple-system,sans-serif;scroll-behavior:smooth;box-shadow:inset 0 1px 2px #0000000d}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:3px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]{padding:6px 10px;color:var(--text-secondary);font-size:.9rem;line-height:1.5;border-radius:4px;margin-bottom:2px;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]{color:#ef4444;font-weight:600;background:#ef444414}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]{color:#10b981;font-weight:600;background:#10b98114}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.victory[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700;font-size:1rem;background:#fbbf241a;padding:8px;text-align:center;border-radius:6px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.defeat[_ngcontent-%COMP%]{color:#6b7280;font-weight:700;font-size:1rem;background:#6b72801a;padding:8px;text-align:center;border-radius:6px;opacity:.8}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:.95rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;color:#fff}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]{background:#ef4444}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]{background:#3b82f6}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]{background:#10b981}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]{background:#8b5cf6}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]:hover:not(:disabled){background:#7c3aed}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]{text-align:center;padding:32px 24px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);margin-top:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.victory[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.victory[_ngcontent-%COMP%]{color:#fbbf24}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.defeat[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.defeat[_ngcontent-%COMP%]{color:#6b7280}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);margin-bottom:12px;line-height:1.6}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .auto-continue[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);opacity:.7;margin-top:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]{margin-top:20px;padding:10px 24px;font-size:1rem;font-weight:600;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary)}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_battlePulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:.5}50%{transform:translate(-50%,-50%) scale(1.2);opacity:.3}}@keyframes _ngcontent-%COMP%_playerGlow{0%,to{box-shadow:0 15px 40px #3b82f699,0 0 30px #3b82f666}50%{box-shadow:0 15px 40px #3b82f6cc,0 0 40px #3b82f699}}@keyframes _ngcontent-%COMP%_enemyGlow{0%,to{box-shadow:0 15px 40px #ef444499,0 0 30px #ef444466}50%{box-shadow:0 15px 40px #ef4444cc,0 0 40px #ef444499}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes _ngcontent-%COMP%_hpPulseLow{0%,to{opacity:1}50%{opacity:.7}}@keyframes _ngcontent-%COMP%_shimmerFlow{0%{transform:translate(-100%)}to{transform:translate(200%)}}@keyframes _ngcontent-%COMP%_damageShakeStrong{0%,to{transform:translate(0) rotate(0)}10%{transform:translate(-10px) rotate(-2deg)}20%{transform:translate(10px) rotate(2deg)}30%{transform:translate(-10px) rotate(-2deg)}40%{transform:translate(10px) rotate(2deg)}50%{transform:translate(-8px) rotate(-1deg)}60%{transform:translate(8px) rotate(1deg)}70%{transform:translate(-5px) rotate(-.5deg)}80%{transform:translate(5px) rotate(.5deg)}90%{transform:translate(-2px) rotate(0)}}@keyframes _ngcontent-%COMP%_damageFlash{0%{opacity:0}10%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_damageNumber{0%{transform:translateY(0) scale(.5);opacity:0}20%{transform:translateY(-20px) scale(1.2);opacity:1}80%{transform:translateY(-60px) scale(1);opacity:1}to{transform:translateY(-80px) scale(.8);opacity:0}}@keyframes _ngcontent-%COMP%_vsGlow{0%,to{filter:drop-shadow(0 0 20px rgba(59,130,246,.6));transform:scale(1)}50%{filter:drop-shadow(0 0 30px rgba(59,130,246,.9));transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.5;transform:rotate(0) scale(1)}50%{opacity:1;transform:rotate(180deg) scale(1.2)}}@keyframes _ngcontent-%COMP%_damageShake{0%,to{transform:translate(0)}25%{transform:translate(-3px)}75%{transform:translate(3px)}}@keyframes _ngcontent-%COMP%_healPulse{0%,to{transform:scale(1);box-shadow:0 0 #10b98100}50%{transform:scale(1.05);box-shadow:0 0 10px #10b98180}}@keyframes _ngcontent-%COMP%_victoryFlash{0%,to{opacity:1;box-shadow:0 0 10px #fbbf2480}50%{opacity:.8;box-shadow:0 0 20px #fbbf24cc}}@keyframes _ngcontent-%COMP%_resultGlow{0%,to{opacity:.3}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_victoryBounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(1.05)}}@keyframes _ngcontent-%COMP%_celebrate{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-15px) rotate(360deg)}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.4}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translate(-50%,-45%)}to{opacity:1;transform:translate(-50%,-50%)}}  .battle-modal-backdrop{background-color:#000000bf!important;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}  .cdk-overlay-dark-backdrop{background-color:#000000bf!important;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;padding:20px;background:var(--bg-secondary);border-radius:12px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent-secondary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{padding:16px;background:var(--danger);color:#fff;border-radius:8px;margin-bottom:20px;text-align:center;font-weight:600}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);padding:28px;border-radius:12px;border:2px solid var(--accent-primary);animation:_ngcontent-%COMP%_slideInUp .4s ease-out;width:100%;box-sizing:border-box}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;margin-bottom:24px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;background:var(--bg-primary);border-radius:8px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);margin-right:12px;min-width:60px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-primary);font-weight:500}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]{margin-bottom:20px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:16px;background:var(--bg-primary);border-radius:8px;line-height:1.6;color:var(--text-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]{margin-bottom:20px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%]{padding:8px 16px;background:var(--bg-primary);border:2px solid var(--accent-primary);border-radius:20px;font-weight:600;color:var(--accent-primary);font-size:.95rem}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:30px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:16px 24px;font-size:1.1rem;font-weight:600;border-radius:12px;cursor:pointer;transition:all .3s ease}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border:none}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:var(--bg-primary);color:var(--text-primary);border:2px solid var(--border-color)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}@keyframes _ngcontent-%COMP%_aiGlow{0%,to{filter:drop-shadow(0 0 8px rgba(139,92,246,.4))}50%{filter:drop-shadow(0 0 16px rgba(236,72,153,.6))}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.85;transform:scale(1.05)}}.saved-characters-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:linear-gradient(135deg,#8b5cf60d,#3b82f60d);border-radius:20px;border:1px solid rgba(139,92,246,.1)}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:8px;font-weight:700;background:linear-gradient(135deg,#8b5cf6,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #8b5cf64d;border-color:#8b5cf680}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:24px;cursor:pointer;padding:4px 8px;transition:all .2s ease}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait[_ngcontent-%COMP%]{background:#3b82f626;color:#60a5fa;padding:4px 12px;border-radius:10px;font-size:11px;font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-footer[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding-top:8px;border-top:1px solid var(--border-color)}.saved-scenarios-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:20px;border:1px solid rgba(139,92,246,.1)}.saved-scenarios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:24px;font-weight:700;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #8b5cf64d;border-color:#8b5cf680}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:24px;cursor:pointer;padding:4px 8px;transition:all .2s ease}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:var(--text-secondary);padding-top:12px;border-top:1px solid var(--border-color)}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{font-weight:600;color:#a78bfa}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:16px;border:2px solid rgba(139,92,246,.1)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:12px;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px;width:100%}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;border:2px solid var(--border-color);background:var(--bg-secondary);border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);border-color:transparent;color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf64d;border-color:#8b5cf6}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid #fcc;text-align:center;font-weight:500}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);border-radius:20px;padding:32px;box-shadow:0 8px 32px var(--shadow);border:2px solid var(--border-color);width:100%;box-sizing:border-box}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:24px;text-align:center;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;padding:24px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:16px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-primary);margin:0}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{margin-bottom:20px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;font-size:15px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]{margin-bottom:20px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;background:#8b5cf60d;border-left:3px solid #8b5cf6;margin-bottom:8px;border-radius:8px;color:var(--text-secondary)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{margin-bottom:24px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:12px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf61a,#ec48991a);color:#8b5cf6;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:500}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(139,92,246,.1)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf666}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #f59e0b66}.saved-items-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:linear-gradient(135deg,#ffd7000d,#ec48990d);border-radius:20px;border:1px solid rgba(255,215,0,.2)}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:8px;font-weight:700;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:20px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-legendary[_ngcontent-%COMP%]{border-color:gold;background:linear-gradient(135deg,#ffd7001a,#ffa5001a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-rare[_ngcontent-%COMP%]{border-color:#a855f7;background:linear-gradient(135deg,#a855f71a,#8b5cf61a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#3b82f61a,#2563eb1a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #ffd7004d}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:20px;cursor:pointer;padding:4px;transition:all .2s ease}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:13px;line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981;padding:4px 10px;border-radius:8px;font-size:12px;font-weight:600}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6;padding:3px 10px;border-radius:10px;font-size:11px;font-weight:500}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.type-tag[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.grade-tag[_ngcontent-%COMP%]{background:#ffd70033;color:#d97706;font-weight:600}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding-top:8px;border-top:1px solid rgba(0,0,0,.05)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#ffd7000d,#ec48990d);border-radius:16px;border:2px solid rgba(255,215,0,.2)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:12px;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;border:2px solid rgba(255,215,0,.3);background:var(--bg-secondary);border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]{border-color:#ef4444}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ef44441a,#dc26261a);border-color:#dc2626}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]{border-color:#3b82f6}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#3b82f61a,#2563eb1a);border-color:#2563eb}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]{border-color:#a855f7}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#a855f71a,#8b5cf61a);border-color:#8b5cf6}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);border-color:transparent;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ffd70080}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]{border-color:#10b981}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#10b9811a,#0596691a);border-color:#059669}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]{border-color:#ec4899}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ec48991a,#db27771a);border-color:#db2777}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid #fcc;text-align:center;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);border-radius:20px;padding:32px;box-shadow:var(--shadow);border:2px solid var(--border-color);width:100%}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:24px;text-align:center;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;padding:24px;background:linear-gradient(135deg,#ffd7001a,#ec48991a);border-radius:16px;position:relative}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title.grade-legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd70026,#ffa50026);border:2px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_legendaryGlow 2s ease-in-out infinite}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:600}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c77c\\bc18[_ngcontent-%COMP%] {background:#9ca3af;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\ace0\\ae09[_ngcontent-%COMP%] {background:#3b82f6;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\d76c\\adc0[_ngcontent-%COMP%] {background:#a855f7;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c804\\c124[_ngcontent-%COMP%] {background:linear-gradient(135deg,gold,#ff8c00);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c2e0\\d654[_ngcontent-%COMP%] {background:linear-gradient(135deg,#ff0080,#7928ca);color:#fff;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:8px 20px;background:#3b82f61a;color:#3b82f6;border-radius:20px;font-size:14px;font-weight:600}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;font-size:15px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#10b9810d;border-left:3px solid #10b981;border-radius:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981;font-size:16px;font-weight:700}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;background:#8b5cf60d;border-left:3px solid #8b5cf6;margin-bottom:8px;border-radius:8px;color:var(--text-secondary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ef4444;font-weight:500;padding:12px;background:#ef44440d;border-left:3px solid #ef4444;border-radius:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   .lore-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:italic;padding:16px;background:#8b5cf60d;border-radius:12px;border:2px dashed rgba(139,92,246,.3);line-height:1.8}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{margin-bottom:24px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd7001a,#ec48991a);color:#d97706;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(255,215,0,.2)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ffd70066}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #f59e0b66}.story-creator-panel[_ngcontent-%COMP%]{margin-top:40px;padding:32px;background:var(--bg-secondary);border-radius:24px;border:2px solid var(--border-color);box-shadow:var(--shadow)}.story-creator-panel[_ngcontent-%COMP%]   .creator-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:var(--bg-primary);border-radius:12px;font-size:24px;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{transform:rotate(90deg);background:#ef4444;color:#fff}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px solid rgba(102,126,234,.2)}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;color:var(--text-primary);margin-bottom:12px}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:15px;line-height:1.6}.story-creator-panel[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid rgba(239,68,68,.3);text-align:center;font-weight:500}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]{margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px solid rgba(102,126,234,.2)}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-size:16px;font-weight:600;color:var(--text-primary)}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%]{font-size:20px}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444;font-size:18px}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{width:100%;padding:14px 18px;font-size:16px;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-secondary);color:var(--text-primary);transition:all .3s ease;font-family:inherit}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.6}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{text-align:right;margin-top:8px;font-size:13px;color:var(--text-secondary)}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]{display:grid;gap:24px;margin-bottom:32px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;color:var(--text-primary);margin-bottom:16px;font-weight:600;display:flex;align-items:center;gap:8px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   .selection-count[_ngcontent-%COMP%]{font-size:14px;color:#667eea;font-weight:500;padding:4px 12px;background:#667eea1a;border-radius:12px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{padding:16px;background:var(--bg-primary);border:2px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s ease}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea26,#764ba226);border-color:#667eea;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary)}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:24px;background:var(--bg-primary);border-radius:12px;font-size:14px}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:32px}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]{padding:18px 48px;font-size:18px;font-weight:600;border:none;border-radius:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #667eea80}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]{margin-top:32px;padding:32px;background:linear-gradient(135deg,#667eea14,#764ba214);border-radius:20px;border:2px solid rgba(102,126,234,.3)}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#667eea;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:24px;border-radius:16px;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%]{font-size:36px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--text-primary);margin:0}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px;line-height:1.6;margin-bottom:16px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{padding:8px 16px;background:#667eea1a;border-radius:20px;font-size:14px;color:#667eea;font-weight:500}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;color:var(--text-primary);margin-bottom:12px;font-weight:600}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;margin-bottom:8px;font-size:15px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 32px;font-size:16px;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 16px #10b9814d}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98180}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:2px solid var(--border-color)}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.saved-stories-section[_ngcontent-%COMP%]{margin-top:48px;padding:32px;background:var(--bg-secondary);border-radius:24px;border:2px solid var(--border-color);box-shadow:var(--shadow)}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--text-primary);margin-bottom:8px}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:15px}.saved-stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;padding:24px;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026;border-color:#667eea}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%]{font-size:32px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;color:var(--text-primary);margin:0;font-weight:700}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;opacity:.6;transition:all .3s ease;padding:4px 8px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.2)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{padding:6px 12px;background:#667eea1a;border-radius:12px;font-size:13px;color:#667eea;font-weight:500}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:16px;border-top:1px solid var(--border-color)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .created-by[_ngcontent-%COMP%]{font-size:12px;color:#667eea;font-weight:500}.action-card.premium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd7001a,#ffa5001a);border:2px solid rgba(255,215,0,.3)}.action-card.premium[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:48px;animation:_ngcontent-%COMP%_sparkle 2s ease-in-out infinite}.action-card.premium[_ngcontent-%COMP%]:hover{border-color:gold;box-shadow:0 8px 32px #ffd7004d}.action-card.premium[_ngcontent-%COMP%]   .premium-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#fff;font-weight:700;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_sparkle{0%,to{transform:scale(1) rotate(0)}50%{transform:scale(1.1) rotate(5deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}@keyframes _ngcontent-%COMP%_legendaryGlow{0%,to{box-shadow:0 0 20px #ffd7004d}50%{box-shadow:0 0 30px #ffd70099}}.story-flow-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:99999!important;animation:_ngcontent-%COMP%_fadeIn .3s ease;pointer-events:all}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]{width:90%;max-width:1200px;height:85vh;max-height:800px;background:var(--bg-primary);border:3px solid var(--accent-primary);border-radius:20px;box-shadow:0 20px 60px #00000080;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .3s ease;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 30px 80px #000000b3;opacity:.9}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]{padding:20px 32px;background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--border-color);cursor:move;-webkit-user-select:none;user-select:none}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]:active{cursor:grabbing}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff9;font-weight:700;line-height:1}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;font-weight:700;color:#fff}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:2px solid rgba(255,255,255,.3);color:#fff;padding:8px 16px;border-radius:8px;font-size:1.2rem;cursor:pointer;transition:all .3s ease}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]{padding:16px 32px;background:var(--bg-secondary);border-bottom:2px solid var(--border-color)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-secondary);font-size:.9rem}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:600}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:8px 16px;background:var(--bg-primary);border:2px solid var(--accent-primary);border-radius:8px;font-size:.9rem;font-weight:600;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]{flex:1;padding:32px;overflow-y:auto;background:var(--bg-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]{min-height:100%;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:16px;margin-bottom:24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;transition:all .3s ease;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:0 4px 16px var(--shadow);border-color:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(16,185,129,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(59,130,246,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(245,158,11,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(139,92,246,.2) 100%);box-shadow:0 0 20px #8b5cf64d;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:var(--gradient-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0;box-shadow:0 4px 12px var(--shadow)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]{flex:1}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin-bottom:6px;line-height:1.4}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-level[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);margin-bottom:8px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid var(--border-color)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]{padding:8px 12px;margin-bottom:8px;background:var(--bg-primary);border-left:3px solid var(--accent-primary);border-radius:6px;font-size:.9rem;color:var(--text-secondary);transition:all .2s ease}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;transform:translate(4px)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:last-child{margin-bottom:0}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]{position:absolute;left:40px;bottom:-24px;width:2px;height:24px;background:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);font-size:.6rem;color:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]{margin-top:32px;padding:20px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:1.1rem;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-primary);border-radius:8px;font-size:.9rem;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1rem}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.start[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.story[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.choice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.current[_ngcontent-%COMP%]{background:var(--gradient-primary)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 20px #8b5cf64d}50%{box-shadow:0 0 30px #8b5cf699}}.choice-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin:20px 0}.choice-item[_ngcontent-%COMP%]{display:flex;align-items:stretch;gap:8px}.choice-button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px;padding:16px 20px;background:#8b45ff1a;border:2px solid rgba(139,69,255,.3);border-radius:12px;transition:all .3s ease;cursor:pointer;text-align:left;min-width:0}.choice-button[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#8b45ff33;border-radius:50%;font-weight:700;color:#8b45ff;font-size:14px;flex-shrink:0}.choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{flex:1;color:var(--text-color);font-size:15px;line-height:1.5;overflow:hidden;text-overflow:ellipsis}.choice-button[_ngcontent-%COMP%]:hover{background:#8b45ff33;border-color:#8b45ff80;transform:translate(8px);box-shadow:0 4px 12px #8b45ff33}.choice-button[_ngcontent-%COMP%]:active{transform:translate(8px) scale(.98)}.link-scenario-btn[_ngcontent-%COMP%]{padding:0;background:transparent;border:2px solid rgba(139,69,255,.5);border-radius:8px;color:#8b45ff;cursor:pointer;transition:all .2s ease;font-size:16px;flex-shrink:0;width:40px;min-width:40px;max-width:40px;display:flex;align-items:center;justify-content:center}.link-scenario-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;border-color:#8b45ffb3;transform:scale(1.15);box-shadow:0 2px 8px #8b45ff4d}.link-scenario-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.scenario-link-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:99998;animation:_ngcontent-%COMP%_fadeIn .3s ease}.scenario-link-panel[_ngcontent-%COMP%]{background:#1a1a2e;border:2px solid rgba(139,69,255,.5);border-radius:16px;padding:24px;width:90%;max-width:1200px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 8px 32px #8b45ff80;position:relative}.light-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]{background:#f5f5f5;color:#1a1a2e}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(139,69,255,.2);cursor:move}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{color:#8b45ff80;font-size:18px;-webkit-user-select:none;user-select:none}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color);font-size:20px;font-weight:700;margin:0;display:flex;align-items:center;gap:8px}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#8b45ff33;border:1px solid rgba(139,69,255,.3);border-radius:8px;color:var(--text-color);cursor:pointer;transition:all .2s ease;font-size:18px;line-height:1}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;transform:scale(1.05)}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:#8b45ff0d;border-radius:8px;border-left:4px solid rgba(139,69,255,.5)}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-color);margin:0 0 8px;font-size:15px}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#8b45ff;font-weight:700}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:13px;opacity:.8}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#8b45ff1a;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b45ff4d;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b45ff80}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-color);font-size:16px;margin-bottom:20px;opacity:.7}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#8b45ff33;border:2px solid rgba(139,69,255,.5);border-radius:8px;color:var(--text-color);font-size:15px;cursor:pointer;transition:all .2s ease}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;transform:translateY(-2px);box-shadow:0 4px 12px #8b45ff4d}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(139,69,255,.2);cursor:move}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color);font-size:20px;font-weight:700;margin:0;display:flex;align-items:center;gap:8px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#8b45ff33;border:1px solid rgba(139,69,255,.3);border-radius:8px;color:var(--text-color);cursor:pointer;transition:all .2s ease}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;transform:scale(1.05)}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#8b45ff1a;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b45ff4d;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b45ff80}.scenario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.scenario-card[_ngcontent-%COMP%]{background:#8b45ff14;border:2px solid rgba(139,69,255,.3);border-radius:12px;padding:16px;cursor:pointer;transition:all .3s ease;position:relative}.scenario-card[_ngcontent-%COMP%]:hover{background:#8b45ff26;border-color:#8b45ff80;transform:translateY(-4px);box-shadow:0 6px 20px #8b45ff4d}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);font-size:16px;font-weight:700;margin:0}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{display:inline-block;align-self:flex-start;padding:4px 8px;background:#8b45ff33;border-radius:6px;font-size:12px;color:#8b45ff}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:var(--text-color);font-size:13px;line-height:1.5;margin-bottom:12px;opacity:.8;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{color:var(--text-color);font-size:12px;opacity:.7}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 8px;background:#8b45ff26;border-radius:4px;font-size:11px;color:var(--text-color)}.scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{color:var(--text-color);font-size:16px;font-weight:700;margin:0 0 8px;display:flex;align-items:center;gap:8px}.scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background:#8b45ff33;border-radius:6px;font-size:12px;color:#8b45ff;margin-bottom:8px}.scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:var(--text-color);font-size:13px;line-height:1.5;margin-bottom:12px;opacity:.8;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:12px;color:var(--text-color);opacity:.7}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;gap:4px}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#8b45ff}.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 8px;background:#8b45ff26;border-radius:4px;font-size:11px;color:var(--text-color)}.scenario-card[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:20px;opacity:0;transition:opacity .2s ease}.scenario-card[_ngcontent-%COMP%]:hover   .select-icon[_ngcontent-%COMP%]{opacity:1}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}']})};function $r(i,t){if(i&1&&(r(0,"div",14),s(1),a()),i&2){let e=p();l(),P(" \u26A0\uFE0F ",e.errorMessage," ")}}var Fe=class i{constructor(t,e){this.authService=t;this.router=e}username="";password="";errorMessage="";ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/novel"])}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="\uC0AC\uC6A9\uC790 \uC774\uB984\uACFC \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.authService.login(this.username,this.password)?(console.log("\uB85C\uADF8\uC778 \uC131\uACF5:",this.username),this.router.navigate(["/novel"])):(this.errorMessage="\uC0AC\uC6A9\uC790 \uC774\uB984 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.password="")}onKeyPress(t){t.key==="Enter"&&this.onLogin()}static \u0275fac=function(e){return new(e||i)(T(Y),T(ee))};static \u0275cmp=U({type:i,selectors:[["app-novel-login"]],standalone:!1,decls:32,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"login-form"],[1,"login-header"],[1,"subtitle"],[1,"form-group"],["for","username"],["type","text","id","username","placeholder","\uC0AC\uC6A9\uC790 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694","autocomplete","username",3,"ngModelChange","keypress","ngModel"],["for","password"],["type","password","id","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password",3,"ngModelChange","keypress","ngModel"],["class","error-message",4,"ngIf"],[1,"login-btn",3,"click"],[1,"background-animation"],[1,"floating-book"],[1,"error-message"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),s(5,"\u{1F4D6} \uC18C\uC124 \uB77C\uC774\uBE0C\uB7EC\uB9AC"),a(),r(6,"h2"),s(7,"\uB85C\uADF8\uC778"),a(),r(8,"p",4),s(9,"\uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uC138\uACC4\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4"),a()(),r(10,"div",5)(11,"label",6),s(12,"\uC0AC\uC6A9\uC790 \uC774\uB984"),a(),r(13,"input",7),se("ngModelChange",function(c){return ae(n.username,c)||(n.username=c),c}),h("keypress",function(c){return n.onKeyPress(c)}),a()(),r(14,"div",5)(15,"label",8),s(16,"\uBE44\uBC00\uBC88\uD638"),a(),r(17,"input",9),se("ngModelChange",function(c){return ae(n.password,c)||(n.password=c),c}),h("keypress",function(c){return n.onKeyPress(c)}),a()(),v(18,$r,2,1,"div",10),r(19,"button",11),h("click",function(){return n.onLogin()}),s(20," \u{1F510} \uB85C\uADF8\uC778 "),a()()(),r(21,"div",12)(22,"div",13),s(23,"\u{1F4D6}"),a(),r(24,"div",13),s(25,"\u{1F4DA}"),a(),r(26,"div",13),s(27,"\u2728"),a(),r(28,"div",13),s(29,"\u{1F3AD}"),a(),r(30,"div",13),s(31,"\u2694\uFE0F"),a()()()),e&2&&(l(13),re("ngModel",n.username),l(4),re("ngModel",n.password),l(),_("ngIf",n.errorMessage))},dependencies:[J,Oe,ye,we],styles:[".login-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);overflow:hidden}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:48px;width:90%;max-width:480px;box-shadow:0 20px 60px #0000004d;position:relative;z-index:10;animation:_ngcontent-%COMP%_slideIn .5s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:36px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:8px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin-bottom:8px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;font-weight:400}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.95rem;font-weight:600;color:#374151;margin-bottom:8px}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;font-size:1rem;border:2px solid #e5e7eb;border-radius:12px;transition:all .3s ease;box-sizing:border-box}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 4px #667eea1a}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.login-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;padding:12px 16px;border-radius:8px;font-size:.9rem;margin-bottom:20px;border-left:4px solid #dc2626;animation:_ngcontent-%COMP%_shake .3s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.login-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background:#d1fae5;color:#059669;padding:12px 16px;border-radius:8px;font-size:.9rem;margin-bottom:20px;border-left:4px solid #059669;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:1.1rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover, .login-container[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #667eea66}.login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:active, .login-container[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#6b7280}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;cursor:pointer;text-decoration:none;transition:all .2s ease}.login-container[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .login-container[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]{margin-top:30px;padding-top:24px;border-top:2px solid #e5e7eb}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]   .demo-title[_ngcontent-%COMP%]{text-align:center;font-size:.85rem;font-weight:600;color:#6b7280;margin-bottom:12px;text-transform:uppercase;letter-spacing:.5px}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]   .demo-account[_ngcontent-%COMP%]{background:#f3f4f6;padding:10px 16px;border-radius:8px;margin-bottom:8px;text-align:center;font-size:.9rem;color:#374151;font-family:Courier New,monospace}.login-container[_ngcontent-%COMP%]   .demo-accounts[_ngcontent-%COMP%]   .demo-account[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]{position:absolute;font-size:3rem;opacity:.15;animation:_ngcontent-%COMP%_float 20s infinite ease-in-out}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(1){top:10%;left:10%;animation-delay:0s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(2){top:20%;right:15%;animation-delay:2s;animation-duration:25s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(3){bottom:15%;left:20%;animation-delay:4s;animation-duration:22s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(4){bottom:25%;right:10%;animation-delay:6s;animation-duration:28s}.login-container[_ngcontent-%COMP%]   .background-animation[_ngcontent-%COMP%]   .floating-book[_ngcontent-%COMP%]:nth-child(5){top:50%;left:5%;animation-delay:8s;animation-duration:24s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-30px) rotate(5deg)}50%{transform:translateY(0) rotate(0)}75%{transform:translateY(30px) rotate(-5deg)}}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:32px 24px;width:95%}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var me=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.isLoggedIn()?!0:(console.warn("\uC778\uC99D\uB418\uC9C0 \uC54A\uC740 \uC811\uADFC \uC2DC\uB3C4:",e.url),this.router.navigate(["/novel/login"]),!1)}static \u0275fac=function(e){return new(e||i)(oe(Y),oe(ee))};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var jr=[{path:"login",component:Fe},{path:"",component:_e,canActivate:[me]},{path:":gameId",component:_e,canActivate:[me]}],Ve=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=q({type:i});static \u0275inj=H({imports:[Ze.forChild(jr),Ze]})};var Nn=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=q({type:i});static \u0275inj=H({imports:[Dt,Bt,Ve,Ut,Ht,jt,qt,Kt,sn,Xt,Zt,Qt,nn,rn,In]})};export{Nn as NovelModule};
