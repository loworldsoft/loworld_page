{"version":3,"sources":["node_modules/@babylonjs/core/Misc/devTools.js","node_modules/@babylonjs/core/Misc/andOrNotEvaluator.js","node_modules/@babylonjs/core/Misc/tags.js","node_modules/@babylonjs/core/Misc/decorators.serialization.js","node_modules/@babylonjs/core/Misc/guid.js","node_modules/@babylonjs/core/Misc/webRequest.js","node_modules/@babylonjs/core/Misc/domManagement.js","node_modules/@babylonjs/core/Misc/filesInputStore.js","node_modules/@babylonjs/core/Misc/retryStrategy.js","node_modules/@babylonjs/core/Misc/error.js","node_modules/@babylonjs/core/Misc/stringTools.js","node_modules/@babylonjs/core/Engines/Processors/shaderCodeNode.js","node_modules/@babylonjs/core/Engines/Processors/shaderCodeCursor.js","node_modules/@babylonjs/core/Engines/Processors/shaderCodeConditionNode.js","node_modules/@babylonjs/core/Engines/Processors/shaderCodeTestNode.js","node_modules/@babylonjs/core/Engines/Processors/Expressions/shaderDefineExpression.js","node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineIsDefinedOperator.js","node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineOrOperator.js","node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineAndOperator.js","node_modules/@babylonjs/core/Engines/Processors/Expressions/Operators/shaderDefineArithmeticOperator.js","node_modules/@babylonjs/core/Engines/abstractEngine.functions.js","node_modules/@babylonjs/core/Engines/Processors/shaderProcessor.js","node_modules/@babylonjs/core/Misc/timingTools.js","node_modules/@babylonjs/core/Engines/WebGL/webGLPipelineContext.js","node_modules/@babylonjs/core/Engines/thinEngine.functions.js","node_modules/@babylonjs/core/Materials/effect.functions.js","node_modules/@babylonjs/core/Materials/effect.js","node_modules/@babylonjs/core/Misc/precisionDate.js","node_modules/@babylonjs/core/States/depthCullingState.js","node_modules/@babylonjs/core/States/stencilStateComposer.js","node_modules/@babylonjs/core/States/stencilState.js","node_modules/@babylonjs/core/States/alphaCullingState.js","node_modules/@babylonjs/core/Materials/Textures/textureSampler.js","node_modules/@babylonjs/core/Materials/Textures/internalTexture.js","node_modules/@babylonjs/core/Engines/abstractEngine.js","node_modules/@babylonjs/core/Misc/fileTools.js","node_modules/@babylonjs/core/Maths/math.size.js","node_modules/@babylonjs/core/Materials/Textures/thinTexture.js","node_modules/@babylonjs/core/Materials/drawWrapper.functions.js","node_modules/@babylonjs/core/Engines/WebGL/webGLShaderProcessors.js","node_modules/@babylonjs/core/Engines/WebGL/webGL2ShaderProcessors.js","node_modules/@babylonjs/core/Meshes/WebGL/webGLDataBuffer.js","node_modules/@babylonjs/core/Misc/tools.functions.js","node_modules/@babylonjs/core/Engines/WebGL/webGLHardwareTexture.js","node_modules/@babylonjs/core/Engines/thinEngine.js","node_modules/@babylonjs/core/Engines/Extensions/engine.readTexture.js","node_modules/@babylonjs/core/Materials/Textures/baseTexture.js","node_modules/@babylonjs/core/Misc/instantiationTools.js","node_modules/@babylonjs/core/Maths/math.plane.js","node_modules/@babylonjs/core/Misc/copyTools.js","node_modules/@babylonjs/core/Compat/compatibilityOptions.js","node_modules/@babylonjs/core/Materials/Textures/texture.js","node_modules/@babylonjs/core/Misc/uniqueIdGenerator.js","node_modules/@babylonjs/core/Misc/perfCounter.js","node_modules/@babylonjs/core/Engines/WebGPU/webgpuPerfCounter.js","node_modules/@babylonjs/core/Compute/computeShader.js","node_modules/@babylonjs/core/Buffers/storageBuffer.js","node_modules/@babylonjs/core/Misc/deepCopier.js","node_modules/@babylonjs/core/Misc/tools.js","node_modules/@babylonjs/core/Engines/Extensions/engine.uniformBuffer.js","node_modules/@babylonjs/core/Materials/uniformBuffer.js","node_modules/@babylonjs/core/ShadersWGSL/boundingInfo.compute.js","node_modules/@babylonjs/core/Culling/Helper/computeShaderBoundingHelper.js"],"sourcesContent":["const warnedMap = {};\n/**\n * @internal\n */\nexport function _WarnImport(name, warnOnce = false) {\n    if (warnOnce && warnedMap[name]) {\n        return;\n    }\n    warnedMap[name] = true;\n    return `${name} needs to be imported before as it contains a side-effect required by your code.`;\n}\n","/**\n * Class used to evaluate queries containing `and` and `or` operators\n */\nexport class AndOrNotEvaluator {\n    /**\n     * Evaluate a query\n     * @param query defines the query to evaluate\n     * @param evaluateCallback defines the callback used to filter result\n     * @returns true if the query matches\n     */\n    static Eval(query, evaluateCallback) {\n        if (!query.match(/\\([^()]*\\)/g)) {\n            query = AndOrNotEvaluator._HandleParenthesisContent(query, evaluateCallback);\n        }\n        else {\n            query = query.replace(/\\([^()]*\\)/g, (r) => {\n                // remove parenthesis\n                r = r.slice(1, r.length - 1);\n                return AndOrNotEvaluator._HandleParenthesisContent(r, evaluateCallback);\n            });\n        }\n        if (query === \"true\") {\n            return true;\n        }\n        if (query === \"false\") {\n            return false;\n        }\n        return AndOrNotEvaluator.Eval(query, evaluateCallback);\n    }\n    static _HandleParenthesisContent(parenthesisContent, evaluateCallback) {\n        evaluateCallback =\n            evaluateCallback ||\n                ((r) => {\n                    return r === \"true\" ? true : false;\n                });\n        let result;\n        const or = parenthesisContent.split(\"||\");\n        for (const i in or) {\n            if (Object.prototype.hasOwnProperty.call(or, i)) {\n                let ori = AndOrNotEvaluator._SimplifyNegation(or[i].trim());\n                const and = ori.split(\"&&\");\n                if (and.length > 1) {\n                    for (let j = 0; j < and.length; ++j) {\n                        const andj = AndOrNotEvaluator._SimplifyNegation(and[j].trim());\n                        if (andj !== \"true\" && andj !== \"false\") {\n                            if (andj[0] === \"!\") {\n                                result = !evaluateCallback(andj.substring(1));\n                            }\n                            else {\n                                result = evaluateCallback(andj);\n                            }\n                        }\n                        else {\n                            result = andj === \"true\" ? true : false;\n                        }\n                        if (!result) {\n                            // no need to continue since 'false && ... && ...' will always return false\n                            ori = \"false\";\n                            break;\n                        }\n                    }\n                }\n                if (result || ori === \"true\") {\n                    // no need to continue since 'true || ... || ...' will always return true\n                    result = true;\n                    break;\n                }\n                // result equals false (or undefined)\n                if (ori !== \"true\" && ori !== \"false\") {\n                    if (ori[0] === \"!\") {\n                        result = !evaluateCallback(ori.substring(1));\n                    }\n                    else {\n                        result = evaluateCallback(ori);\n                    }\n                }\n                else {\n                    result = ori === \"true\" ? true : false;\n                }\n            }\n        }\n        // the whole parenthesis scope is replaced by 'true' or 'false'\n        return result ? \"true\" : \"false\";\n    }\n    static _SimplifyNegation(booleanString) {\n        booleanString = booleanString.replace(/^[\\s!]+/, (r) => {\n            // remove whitespaces\n            r = r.replace(/[\\s]/g, () => \"\");\n            return r.length % 2 ? \"!\" : \"\";\n        });\n        booleanString = booleanString.trim();\n        if (booleanString === \"!true\") {\n            booleanString = \"false\";\n        }\n        else if (booleanString === \"!false\") {\n            booleanString = \"true\";\n        }\n        return booleanString;\n    }\n}\n","import { AndOrNotEvaluator } from \"./andOrNotEvaluator.js\";\n/**\n * Class used to store custom tags\n */\nexport class Tags {\n    /**\n     * Adds support for tags on the given object\n     * @param obj defines the object to use\n     */\n    static EnableFor(obj) {\n        obj._tags = obj._tags || {};\n        obj.hasTags = () => {\n            return Tags.HasTags(obj);\n        };\n        obj.addTags = (tagsString) => {\n            return Tags.AddTagsTo(obj, tagsString);\n        };\n        obj.removeTags = (tagsString) => {\n            return Tags.RemoveTagsFrom(obj, tagsString);\n        };\n        obj.matchesTagsQuery = (tagsQuery) => {\n            return Tags.MatchesQuery(obj, tagsQuery);\n        };\n    }\n    /**\n     * Removes tags support\n     * @param obj defines the object to use\n     */\n    static DisableFor(obj) {\n        delete obj._tags;\n        delete obj.hasTags;\n        delete obj.addTags;\n        delete obj.removeTags;\n        delete obj.matchesTagsQuery;\n    }\n    /**\n     * Gets a boolean indicating if the given object has tags\n     * @param obj defines the object to use\n     * @returns a boolean\n     */\n    static HasTags(obj) {\n        if (!obj._tags) {\n            return false;\n        }\n        const tags = obj._tags;\n        for (const i in tags) {\n            if (Object.prototype.hasOwnProperty.call(tags, i)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Gets the tags available on a given object\n     * @param obj defines the object to use\n     * @param asString defines if the tags must be returned as a string instead of an array of strings\n     * @returns the tags\n     */\n    static GetTags(obj, asString = true) {\n        if (!obj._tags) {\n            return null;\n        }\n        if (asString) {\n            const tagsArray = [];\n            for (const tag in obj._tags) {\n                if (Object.prototype.hasOwnProperty.call(obj._tags, tag) && obj._tags[tag] === true) {\n                    tagsArray.push(tag);\n                }\n            }\n            return tagsArray.join(\" \");\n        }\n        else {\n            return obj._tags;\n        }\n    }\n    /**\n     * Adds tags to an object\n     * @param obj defines the object to use\n     * @param tagsString defines the tag string. The tags 'true' and 'false' are reserved and cannot be used as tags.\n     * A tag cannot start with '||', '&&', and '!'. It cannot contain whitespaces\n     */\n    static AddTagsTo(obj, tagsString) {\n        if (!tagsString) {\n            return;\n        }\n        if (typeof tagsString !== \"string\") {\n            return;\n        }\n        const tags = tagsString.split(\" \");\n        tags.forEach(function (tag) {\n            Tags._AddTagTo(obj, tag);\n        });\n    }\n    /**\n     * @internal\n     */\n    static _AddTagTo(obj, tag) {\n        tag = tag.trim();\n        if (tag === \"\" || tag === \"true\" || tag === \"false\") {\n            return;\n        }\n        if (tag.match(/[\\s]/) || tag.match(/^([!]|([|]|[&]){2})/)) {\n            return;\n        }\n        Tags.EnableFor(obj);\n        obj._tags[tag] = true;\n    }\n    /**\n     * Removes specific tags from a specific object\n     * @param obj defines the object to use\n     * @param tagsString defines the tags to remove\n     */\n    static RemoveTagsFrom(obj, tagsString) {\n        if (!Tags.HasTags(obj)) {\n            return;\n        }\n        const tags = tagsString.split(\" \");\n        for (const t in tags) {\n            Tags._RemoveTagFrom(obj, tags[t]);\n        }\n    }\n    /**\n     * @internal\n     */\n    static _RemoveTagFrom(obj, tag) {\n        delete obj._tags[tag];\n    }\n    /**\n     * Defines if tags hosted on an object match a given query\n     * @param obj defines the object to use\n     * @param tagsQuery defines the tag query\n     * @returns a boolean\n     */\n    static MatchesQuery(obj, tagsQuery) {\n        if (tagsQuery === undefined) {\n            return true;\n        }\n        if (tagsQuery === \"\") {\n            return Tags.HasTags(obj);\n        }\n        return AndOrNotEvaluator.Eval(tagsQuery, (r) => Tags.HasTags(obj) && obj._tags[r]);\n    }\n}\n","import { _WarnImport } from \"./devTools.js\";\nimport { Tags } from \"./tags.js\";\nimport { Color3, Color4 } from \"../Maths/math.color.js\";\nimport { Matrix, Quaternion, Vector2, Vector3 } from \"../Maths/math.vector.js\";\nimport { GetMergedStore } from \"./decorators.functions.js\";\nconst _copySource = function (creationFunction, source, instanciate, options = {}) {\n    const destination = creationFunction();\n    // Tags\n    if (Tags && Tags.HasTags(source)) {\n        Tags.AddTagsTo(destination, Tags.GetTags(source, true));\n    }\n    const classStore = GetMergedStore(destination);\n    // Map from source texture uniqueId to destination texture\n    const textureMap = {};\n    // Properties\n    for (const property in classStore) {\n        const propertyDescriptor = classStore[property];\n        const sourceProperty = source[property];\n        const propertyType = propertyDescriptor.type;\n        if (sourceProperty !== undefined && sourceProperty !== null && (property !== \"uniqueId\" || SerializationHelper.AllowLoadingUniqueId)) {\n            switch (propertyType) {\n                case 0: // Value\n                case 6: // Mesh reference\n                case 11: // Camera reference\n                    destination[property] = sourceProperty;\n                    break;\n                case 1: // Texture\n                    if (options.cloneTexturesOnlyOnce && textureMap[sourceProperty.uniqueId]) {\n                        destination[property] = textureMap[sourceProperty.uniqueId];\n                    }\n                    else {\n                        destination[property] = instanciate || sourceProperty.isRenderTarget ? sourceProperty : sourceProperty.clone();\n                        textureMap[sourceProperty.uniqueId] = destination[property];\n                    }\n                    break;\n                case 2: // Color3\n                case 3: // FresnelParameters\n                case 4: // Vector2\n                case 5: // Vector3\n                case 7: // Color Curves\n                case 10: // Quaternion\n                case 12: // Matrix\n                    destination[property] = instanciate ? sourceProperty : sourceProperty.clone();\n                    break;\n            }\n        }\n    }\n    return destination;\n};\n/**\n * Class used to help serialization objects\n */\nexport class SerializationHelper {\n    /**\n     * Appends the serialized animations from the source animations\n     * @param source Source containing the animations\n     * @param destination Target to store the animations\n     */\n    static AppendSerializedAnimations(source, destination) {\n        if (source.animations) {\n            destination.animations = [];\n            for (let animationIndex = 0; animationIndex < source.animations.length; animationIndex++) {\n                const animation = source.animations[animationIndex];\n                destination.animations.push(animation.serialize());\n            }\n        }\n    }\n    /**\n     * Static function used to serialized a specific entity\n     * @param entity defines the entity to serialize\n     * @param serializationObject defines the optional target object where serialization data will be stored\n     * @returns a JSON compatible object representing the serialization of the entity\n     */\n    static Serialize(entity, serializationObject) {\n        if (!serializationObject) {\n            serializationObject = {};\n        }\n        // Tags\n        if (Tags) {\n            serializationObject.tags = Tags.GetTags(entity);\n        }\n        const serializedProperties = GetMergedStore(entity);\n        // Properties\n        for (const property in serializedProperties) {\n            const propertyDescriptor = serializedProperties[property];\n            const targetPropertyName = propertyDescriptor.sourceName || property;\n            const propertyType = propertyDescriptor.type;\n            const sourceProperty = entity[property];\n            if (sourceProperty !== undefined && sourceProperty !== null && (property !== \"uniqueId\" || SerializationHelper.AllowLoadingUniqueId)) {\n                switch (propertyType) {\n                    case 0: // Value\n                        serializationObject[targetPropertyName] = sourceProperty;\n                        break;\n                    case 1: // Texture\n                        serializationObject[targetPropertyName] = sourceProperty.serialize();\n                        break;\n                    case 2: // Color3\n                        serializationObject[targetPropertyName] = sourceProperty.asArray();\n                        break;\n                    case 3: // FresnelParameters\n                        serializationObject[targetPropertyName] = sourceProperty.serialize();\n                        break;\n                    case 4: // Vector2\n                        serializationObject[targetPropertyName] = sourceProperty.asArray();\n                        break;\n                    case 5: // Vector3\n                        serializationObject[targetPropertyName] = sourceProperty.asArray();\n                        break;\n                    case 6: // Mesh reference\n                        serializationObject[targetPropertyName] = sourceProperty.id;\n                        break;\n                    case 7: // Color Curves\n                        serializationObject[targetPropertyName] = sourceProperty.serialize();\n                        break;\n                    case 8: // Color 4\n                        serializationObject[targetPropertyName] = sourceProperty.asArray();\n                        break;\n                    case 9: // Image Processing\n                        serializationObject[targetPropertyName] = sourceProperty.serialize();\n                        break;\n                    case 10: // Quaternion\n                        serializationObject[targetPropertyName] = sourceProperty.asArray();\n                        break;\n                    case 11: // Camera reference\n                        serializationObject[targetPropertyName] = sourceProperty.id;\n                        break;\n                    case 12: // Matrix\n                        serializationObject[targetPropertyName] = sourceProperty.asArray();\n                        break;\n                }\n            }\n        }\n        return serializationObject;\n    }\n    /**\n     * Given a source json and a destination object in a scene, this function will parse the source and will try to apply its content to the destination object\n     * @param source the source json data\n     * @param destination the destination object\n     * @param scene the scene where the object is\n     * @param rootUrl root url to use to load assets\n     */\n    static ParseProperties(source, destination, scene, rootUrl) {\n        if (!rootUrl) {\n            rootUrl = \"\";\n        }\n        const classStore = GetMergedStore(destination);\n        // Properties\n        for (const property in classStore) {\n            const propertyDescriptor = classStore[property];\n            const sourceProperty = source[propertyDescriptor.sourceName || property];\n            const propertyType = propertyDescriptor.type;\n            if (sourceProperty !== undefined && sourceProperty !== null && (property !== \"uniqueId\" || SerializationHelper.AllowLoadingUniqueId)) {\n                const dest = destination;\n                switch (propertyType) {\n                    case 0: // Value\n                        dest[property] = sourceProperty;\n                        break;\n                    case 1: // Texture\n                        if (scene) {\n                            dest[property] = SerializationHelper._TextureParser(sourceProperty, scene, rootUrl);\n                        }\n                        break;\n                    case 2: // Color3\n                        dest[property] = Color3.FromArray(sourceProperty);\n                        break;\n                    case 3: // FresnelParameters\n                        dest[property] = SerializationHelper._FresnelParametersParser(sourceProperty);\n                        break;\n                    case 4: // Vector2\n                        dest[property] = Vector2.FromArray(sourceProperty);\n                        break;\n                    case 5: // Vector3\n                        dest[property] = Vector3.FromArray(sourceProperty);\n                        break;\n                    case 6: // Mesh reference\n                        if (scene) {\n                            dest[property] = scene.getLastMeshById(sourceProperty);\n                        }\n                        break;\n                    case 7: // Color Curves\n                        dest[property] = SerializationHelper._ColorCurvesParser(sourceProperty);\n                        break;\n                    case 8: // Color 4\n                        dest[property] = Color4.FromArray(sourceProperty);\n                        break;\n                    case 9: // Image Processing\n                        dest[property] = SerializationHelper._ImageProcessingConfigurationParser(sourceProperty);\n                        break;\n                    case 10: // Quaternion\n                        dest[property] = Quaternion.FromArray(sourceProperty);\n                        break;\n                    case 11: // Camera reference\n                        if (scene) {\n                            dest[property] = scene.getCameraById(sourceProperty);\n                        }\n                        break;\n                    case 12: // Matrix\n                        dest[property] = Matrix.FromArray(sourceProperty);\n                        break;\n                }\n            }\n        }\n    }\n    /**\n     * Creates a new entity from a serialization data object\n     * @param creationFunction defines a function used to instanciated the new entity\n     * @param source defines the source serialization data\n     * @param scene defines the hosting scene\n     * @param rootUrl defines the root url for resources\n     * @returns a new entity\n     */\n    static Parse(creationFunction, source, scene, rootUrl = null) {\n        const destination = creationFunction();\n        // Tags\n        if (Tags) {\n            Tags.AddTagsTo(destination, source.tags);\n        }\n        SerializationHelper.ParseProperties(source, destination, scene, rootUrl);\n        return destination;\n    }\n    /**\n     * Clones an object\n     * @param creationFunction defines the function used to instanciate the new object\n     * @param source defines the source object\n     * @param options defines the options to use\n     * @returns the cloned object\n     */\n    static Clone(creationFunction, source, options = {}) {\n        return _copySource(creationFunction, source, false, options);\n    }\n    /**\n     * Instanciates a new object based on a source one (some data will be shared between both object)\n     * @param creationFunction defines the function used to instanciate the new object\n     * @param source defines the source object\n     * @returns the new object\n     */\n    static Instanciate(creationFunction, source) {\n        return _copySource(creationFunction, source, true);\n    }\n}\n/**\n * Gets or sets a boolean to indicate if the UniqueId property should be serialized\n */\nSerializationHelper.AllowLoadingUniqueId = false;\n/**\n * @internal\n */\nSerializationHelper._ImageProcessingConfigurationParser = (sourceProperty) => {\n    throw _WarnImport(\"ImageProcessingConfiguration\");\n};\n/**\n * @internal\n */\nSerializationHelper._FresnelParametersParser = (sourceProperty) => {\n    throw _WarnImport(\"FresnelParameters\");\n};\n/**\n * @internal\n */\nSerializationHelper._ColorCurvesParser = (sourceProperty) => {\n    throw _WarnImport(\"ColorCurves\");\n};\n/**\n * @internal\n */\nSerializationHelper._TextureParser = (sourceProperty, scene, rootUrl) => {\n    throw _WarnImport(\"Texture\");\n};\n","/**\n * Implementation from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#answer-2117523\n * Be aware Math.random() could cause collisions, but:\n * \"All but 6 of the 128 bits of the ID are randomly generated, which means that for any two ids, there's a 1 in 2^^122 (or 5.3x10^^36) chance they'll collide\"\n * @returns a pseudo random id\n */\nexport function RandomGUID() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0, v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n/**\n * Class used to manipulate GUIDs\n */\nexport const GUID = {\n    /**\n     * Implementation from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#answer-2117523\n     * Be aware Math.random() could cause collisions, but:\n     * \"All but 6 of the 128 bits of the ID are randomly generated, which means that for any two ids, there's a 1 in 2^^122 (or 5.3x10^^36) chance they'll collide\"\n     * @returns a pseudo random id\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    RandomId: RandomGUID,\n};\n","/** @internal */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction createXMLHttpRequest() {\n    // If running in Babylon Native, then defer to the native XMLHttpRequest, which has the same public contract\n    if (typeof _native !== \"undefined\" && _native.XMLHttpRequest) {\n        return new _native.XMLHttpRequest();\n    }\n    else {\n        return new XMLHttpRequest();\n    }\n}\n/**\n * Extended version of XMLHttpRequest with support for customizations (headers, ...)\n */\nexport class WebRequest {\n    constructor() {\n        this._xhr = createXMLHttpRequest();\n        this._requestURL = \"\";\n    }\n    /**\n     * This function can be called to check if there are request modifiers for network requests\n     * @returns true if there are any custom requests available\n     */\n    static get IsCustomRequestAvailable() {\n        return Object.keys(WebRequest.CustomRequestHeaders).length > 0 || WebRequest.CustomRequestModifiers.length > 0;\n    }\n    _injectCustomRequestHeaders() {\n        if (this._shouldSkipRequestModifications(this._requestURL)) {\n            return;\n        }\n        for (const key in WebRequest.CustomRequestHeaders) {\n            const val = WebRequest.CustomRequestHeaders[key];\n            if (val) {\n                this._xhr.setRequestHeader(key, val);\n            }\n        }\n    }\n    _shouldSkipRequestModifications(url) {\n        return WebRequest.SkipRequestModificationForBabylonCDN && (url.includes(\"preview.babylonjs.com\") || url.includes(\"cdn.babylonjs.com\"));\n    }\n    /**\n     * Gets or sets a function to be called when loading progress changes\n     */\n    get onprogress() {\n        return this._xhr.onprogress;\n    }\n    set onprogress(value) {\n        this._xhr.onprogress = value;\n    }\n    /**\n     * Returns client's state\n     */\n    get readyState() {\n        return this._xhr.readyState;\n    }\n    /**\n     * Returns client's status\n     */\n    get status() {\n        return this._xhr.status;\n    }\n    /**\n     * Returns client's status as a text\n     */\n    get statusText() {\n        return this._xhr.statusText;\n    }\n    /**\n     * Returns client's response\n     */\n    get response() {\n        return this._xhr.response;\n    }\n    /**\n     * Returns client's response url\n     */\n    get responseURL() {\n        return this._xhr.responseURL;\n    }\n    /**\n     * Returns client's response as text\n     */\n    get responseText() {\n        return this._xhr.responseText;\n    }\n    /**\n     * Gets or sets the expected response type\n     */\n    get responseType() {\n        return this._xhr.responseType;\n    }\n    set responseType(value) {\n        this._xhr.responseType = value;\n    }\n    /**\n     * Gets or sets the timeout value in milliseconds\n     */\n    get timeout() {\n        return this._xhr.timeout;\n    }\n    set timeout(value) {\n        this._xhr.timeout = value;\n    }\n    addEventListener(type, listener, options) {\n        this._xhr.addEventListener(type, listener, options);\n    }\n    removeEventListener(type, listener, options) {\n        this._xhr.removeEventListener(type, listener, options);\n    }\n    /**\n     * Cancels any network activity\n     */\n    abort() {\n        this._xhr.abort();\n    }\n    /**\n     * Initiates the request. The optional argument provides the request body. The argument is ignored if request method is GET or HEAD\n     * @param body defines an optional request body\n     */\n    send(body) {\n        if (WebRequest.CustomRequestHeaders) {\n            this._injectCustomRequestHeaders();\n        }\n        this._xhr.send(body);\n    }\n    /**\n     * Sets the request method, request URL\n     * @param method defines the method to use (GET, POST, etc..)\n     * @param url defines the url to connect with\n     */\n    open(method, url) {\n        for (const update of WebRequest.CustomRequestModifiers) {\n            if (this._shouldSkipRequestModifications(url)) {\n                return;\n            }\n            update(this._xhr, url);\n        }\n        // Clean url\n        url = url.replace(\"file:http:\", \"http:\");\n        url = url.replace(\"file:https:\", \"https:\");\n        this._requestURL = url;\n        this._xhr.open(method, url, true);\n    }\n    /**\n     * Sets the value of a request header.\n     * @param name The name of the header whose value is to be set\n     * @param value The value to set as the body of the header\n     */\n    setRequestHeader(name, value) {\n        this._xhr.setRequestHeader(name, value);\n    }\n    /**\n     * Get the string containing the text of a particular header's value.\n     * @param name The name of the header\n     * @returns The string containing the text of the given header name\n     */\n    getResponseHeader(name) {\n        return this._xhr.getResponseHeader(name);\n    }\n}\n/**\n * Custom HTTP Request Headers to be sent with XMLHttpRequests\n * i.e. when loading files, where the server/service expects an Authorization header\n */\nWebRequest.CustomRequestHeaders = {};\n/**\n * Add callback functions in this array to update all the requests before they get sent to the network\n */\nWebRequest.CustomRequestModifiers = new Array();\n/**\n * If set to true, requests to Babylon.js CDN requests will not be modified\n */\nWebRequest.SkipRequestModificationForBabylonCDN = true;\n","/* eslint-disable @typescript-eslint/naming-convention */\n/**\n * Checks if the window object exists\n * @returns true if the window object exists\n */\nexport function IsWindowObjectExist() {\n    return typeof window !== \"undefined\";\n}\n/**\n * Checks if the navigator object exists\n * @returns true if the navigator object exists\n */\nexport function IsNavigatorAvailable() {\n    return typeof navigator !== \"undefined\";\n}\n/**\n * Check if the document object exists\n * @returns true if the document object exists\n */\nexport function IsDocumentAvailable() {\n    return typeof document !== \"undefined\";\n}\n/**\n * Extracts text content from a DOM element hierarchy\n * @param element defines the root element\n * @returns a string\n */\nexport function GetDOMTextContent(element) {\n    let result = \"\";\n    let child = element.firstChild;\n    while (child) {\n        if (child.nodeType === 3) {\n            result += child.textContent;\n        }\n        child = child.nextSibling;\n    }\n    return result;\n}\n/**\n * Sets of helpers dealing with the DOM and some of the recurrent functions needed in\n * Babylon.js\n */\nexport const DomManagement = {\n    /**\n     * Checks if the window object exists\n     * @returns true if the window object exists\n     */\n    IsWindowObjectExist,\n    /**\n     * Checks if the navigator object exists\n     * @returns true if the navigator object exists\n     */\n    IsNavigatorAvailable,\n    /**\n     * Check if the document object exists\n     * @returns true if the document object exists\n     */\n    IsDocumentAvailable,\n    /**\n     * Extracts text content from a DOM element hierarchy\n     * @param element defines the root element\n     * @returns a string\n     */\n    GetDOMTextContent,\n};\n","/**\n * Class used to help managing file picking and drag'n'drop\n * File Storage\n */\nexport class FilesInputStore {\n}\n/**\n * List of files ready to be loaded\n */\nFilesInputStore.FilesToLoad = {};\n","/**\n * Class used to define a retry strategy when error happens while loading assets\n */\nexport class RetryStrategy {\n    /**\n     * Function used to defines an exponential back off strategy\n     * @param maxRetries defines the maximum number of retries (3 by default)\n     * @param baseInterval defines the interval between retries\n     * @returns the strategy function to use\n     */\n    static ExponentialBackoff(maxRetries = 3, baseInterval = 500) {\n        return (url, request, retryIndex) => {\n            if (request.status !== 0 || retryIndex >= maxRetries || url.indexOf(\"file:\") !== -1) {\n                return -1;\n            }\n            return Math.pow(2, retryIndex) * baseInterval;\n        };\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n/**\n * Base error. Due to limitations of typedoc-check and missing documentation\n * in lib.es5.d.ts, cannot extend Error directly for RuntimeError.\n * @ignore\n */\nexport class BaseError extends Error {\n}\n// See https://stackoverflow.com/questions/12915412/how-do-i-extend-a-host-object-e-g-error-in-typescript\n// and https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n// Polyfill for Object.setPrototypeOf if necessary.\nBaseError._setPrototypeOf = Object.setPrototypeOf ||\n    ((o, proto) => {\n        o.__proto__ = proto;\n        return o;\n    });\n/* IMP! DO NOT CHANGE THE NUMBERING OF EXISTING ERROR CODES */\n/**\n * Error codes for BaseError\n */\nexport const ErrorCodes = {\n    // Mesh errors 0-999\n    /** Invalid or empty mesh vertex positions. */\n    MeshInvalidPositionsError: 0,\n    // Texture errors 1000-1999\n    /** Unsupported texture found. */\n    UnsupportedTextureError: 1000,\n    // GLTFLoader errors 2000-2999\n    /** Unexpected magic number found in GLTF file header. */\n    GLTFLoaderUnexpectedMagicError: 2000,\n    // SceneLoader errors 3000-3999\n    /** SceneLoader generic error code. Ideally wraps the inner exception. */\n    SceneLoaderError: 3000,\n    // File related errors 4000-4999\n    /** Load file error */\n    LoadFileError: 4000,\n    /** Request file error */\n    RequestFileError: 4001,\n    /** Read file error */\n    ReadFileError: 4002,\n};\n/**\n * Application runtime error\n */\nexport class RuntimeError extends BaseError {\n    /**\n     * Creates a new RuntimeError\n     * @param message defines the message of the error\n     * @param errorCode the error code\n     * @param innerError the error that caused the outer error\n     */\n    constructor(message, errorCode, innerError) {\n        super(message);\n        this.errorCode = errorCode;\n        this.innerError = innerError;\n        this.name = \"RuntimeError\";\n        BaseError._setPrototypeOf(this, RuntimeError.prototype);\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n/**\n * Checks for a matching suffix at the end of a string (for ES5 and lower)\n * @param str Source string\n * @param suffix Suffix to search for in the source string\n * @returns Boolean indicating whether the suffix was found (true) or not (false)\n * @deprecated Please use native string function instead\n */\nexport const EndsWith = (str, suffix) => {\n    return str.endsWith(suffix);\n};\n/**\n * Checks for a matching suffix at the beginning of a string (for ES5 and lower)\n * @param str Source string\n * @param suffix Suffix to search for in the source string\n * @returns Boolean indicating whether the suffix was found (true) or not (false)\n * @deprecated Please use native string function instead\n */\nexport const StartsWith = (str, suffix) => {\n    if (!str) {\n        return false;\n    }\n    return str.startsWith(suffix);\n};\n/**\n * Decodes a buffer into a string\n * @param buffer The buffer to decode\n * @returns The decoded string\n */\nexport const Decode = (buffer) => {\n    if (typeof TextDecoder !== \"undefined\") {\n        return new TextDecoder().decode(buffer);\n    }\n    let result = \"\";\n    for (let i = 0; i < buffer.byteLength; i++) {\n        result += String.fromCharCode(buffer[i]);\n    }\n    return result;\n};\n/**\n * Encode a buffer to a base64 string\n * @param buffer defines the buffer to encode\n * @returns the encoded string\n */\nexport const EncodeArrayBufferToBase64 = (buffer) => {\n    const keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let output = \"\";\n    let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    let i = 0;\n    const bytes = ArrayBuffer.isView(buffer) ? new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength) : new Uint8Array(buffer);\n    while (i < bytes.length) {\n        chr1 = bytes[i++];\n        chr2 = i < bytes.length ? bytes[i++] : Number.NaN;\n        chr3 = i < bytes.length ? bytes[i++] : Number.NaN;\n        enc1 = chr1 >> 2;\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n        enc4 = chr3 & 63;\n        if (isNaN(chr2)) {\n            enc3 = enc4 = 64;\n        }\n        else if (isNaN(chr3)) {\n            enc4 = 64;\n        }\n        output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n    }\n    return output;\n};\n/**\n * Converts a given base64 string as an ASCII encoded stream of data\n * @param base64Data The base64 encoded string to decode\n * @returns Decoded ASCII string\n */\nexport const DecodeBase64ToString = (base64Data) => {\n    return atob(base64Data);\n};\n/**\n * Converts a given base64 string into an ArrayBuffer of raw byte data\n * @param base64Data The base64 encoded string to decode\n * @returns ArrayBuffer of byte data\n */\nexport const DecodeBase64ToBinary = (base64Data) => {\n    const decodedString = DecodeBase64ToString(base64Data);\n    const bufferLength = decodedString.length;\n    const bufferView = new Uint8Array(new ArrayBuffer(bufferLength));\n    for (let i = 0; i < bufferLength; i++) {\n        bufferView[i] = decodedString.charCodeAt(i);\n    }\n    return bufferView.buffer;\n};\n/**\n * Converts a number to string and pads with preceding zeroes until it is of specified length.\n * @param num the number to convert and pad\n * @param length the expected length of the string\n * @returns the padded string\n */\nexport const PadNumber = (num, length) => {\n    let str = String(num);\n    while (str.length < length) {\n        str = \"0\" + str;\n    }\n    return str;\n};\n/**\n * Helper to manipulate strings\n */\nexport const StringTools = {\n    EndsWith,\n    StartsWith,\n    Decode,\n    EncodeArrayBufferToBase64,\n    DecodeBase64ToString,\n    DecodeBase64ToBinary,\n    PadNumber,\n};\n","const defaultAttributeKeywordName = \"attribute\";\nconst defaultVaryingKeywordName = \"varying\";\n/** @internal */\nexport class ShaderCodeNode {\n    constructor() {\n        this.children = [];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    isValid(preprocessors) {\n        return true;\n    }\n    process(preprocessors, options) {\n        let result = \"\";\n        if (this.line) {\n            let value = this.line;\n            const processor = options.processor;\n            if (processor) {\n                // This must be done before other replacements to avoid mistakenly changing something that was already changed.\n                if (processor.lineProcessor) {\n                    value = processor.lineProcessor(value, options.isFragment, options.processingContext);\n                }\n                const attributeKeyword = options.processor?.attributeKeywordName ?? defaultAttributeKeywordName;\n                const varyingKeyword = options.isFragment && options.processor?.varyingFragmentKeywordName\n                    ? options.processor?.varyingFragmentKeywordName\n                    : !options.isFragment && options.processor?.varyingVertexKeywordName\n                        ? options.processor?.varyingVertexKeywordName\n                        : defaultVaryingKeywordName;\n                if (!options.isFragment && processor.attributeProcessor && this.line.startsWith(attributeKeyword)) {\n                    value = processor.attributeProcessor(this.line, preprocessors, options.processingContext);\n                }\n                else if (processor.varyingProcessor &&\n                    (processor.varyingCheck?.(this.line, options.isFragment) || (!processor.varyingCheck && this.line.startsWith(varyingKeyword)))) {\n                    value = processor.varyingProcessor(this.line, options.isFragment, preprocessors, options.processingContext);\n                }\n                else if (processor.uniformProcessor && processor.uniformRegexp && processor.uniformRegexp.test(this.line)) {\n                    if (!options.lookForClosingBracketForUniformBuffer) {\n                        value = processor.uniformProcessor(this.line, options.isFragment, preprocessors, options.processingContext);\n                    }\n                }\n                else if (processor.uniformBufferProcessor && processor.uniformBufferRegexp && processor.uniformBufferRegexp.test(this.line)) {\n                    if (!options.lookForClosingBracketForUniformBuffer) {\n                        value = processor.uniformBufferProcessor(this.line, options.isFragment, options.processingContext);\n                        options.lookForClosingBracketForUniformBuffer = true;\n                    }\n                }\n                else if (processor.textureProcessor && processor.textureRegexp && processor.textureRegexp.test(this.line)) {\n                    value = processor.textureProcessor(this.line, options.isFragment, preprocessors, options.processingContext);\n                }\n                else if ((processor.uniformProcessor || processor.uniformBufferProcessor) && this.line.startsWith(\"uniform\") && !options.lookForClosingBracketForUniformBuffer) {\n                    const regex = /uniform\\s+(?:(?:highp)?|(?:lowp)?)\\s*(\\S+)\\s+(\\S+)\\s*;/;\n                    if (regex.test(this.line)) {\n                        // uniform\n                        if (processor.uniformProcessor) {\n                            value = processor.uniformProcessor(this.line, options.isFragment, preprocessors, options.processingContext);\n                        }\n                    }\n                    else {\n                        // Uniform buffer\n                        if (processor.uniformBufferProcessor) {\n                            value = processor.uniformBufferProcessor(this.line, options.isFragment, options.processingContext);\n                            options.lookForClosingBracketForUniformBuffer = true;\n                        }\n                    }\n                }\n                if (options.lookForClosingBracketForUniformBuffer && this.line.indexOf(\"}\") !== -1) {\n                    options.lookForClosingBracketForUniformBuffer = false;\n                    if (processor.endOfUniformBufferProcessor) {\n                        value = processor.endOfUniformBufferProcessor(this.line, options.isFragment, options.processingContext);\n                    }\n                }\n            }\n            result += value + \"\\n\";\n        }\n        this.children.forEach((child) => {\n            result += child.process(preprocessors, options);\n        });\n        if (this.additionalDefineKey) {\n            preprocessors[this.additionalDefineKey] = this.additionalDefineValue || \"true\";\n        }\n        return result;\n    }\n}\n","/** @internal */\nexport class ShaderCodeCursor {\n    constructor() {\n        this._lines = [];\n    }\n    get currentLine() {\n        return this._lines[this.lineIndex];\n    }\n    get canRead() {\n        return this.lineIndex < this._lines.length - 1;\n    }\n    set lines(value) {\n        this._lines.length = 0;\n        for (const line of value) {\n            // Skip empty lines\n            if (!line || line === \"\\r\") {\n                continue;\n            }\n            // Prevent removing line break in macros.\n            if (line[0] === \"#\") {\n                this._lines.push(line);\n                continue;\n            }\n            // Do not split single line comments\n            const trimmedLine = line.trim();\n            if (!trimmedLine) {\n                continue;\n            }\n            if (trimmedLine.startsWith(\"//\")) {\n                this._lines.push(line);\n                continue;\n            }\n            // Work with semicolon in the line\n            const semicolonIndex = trimmedLine.indexOf(\";\");\n            if (semicolonIndex === -1) {\n                // No semicolon in the line\n                this._lines.push(trimmedLine);\n            }\n            else if (semicolonIndex === trimmedLine.length - 1) {\n                // Single semicolon at the end of the line\n                // If trimmedLine == \";\", we must not push, to be backward compatible with the old code!\n                if (trimmedLine.length > 1) {\n                    this._lines.push(trimmedLine);\n                }\n            }\n            else {\n                // Semicolon in the middle of the line\n                const split = line.split(\";\");\n                for (let index = 0; index < split.length; index++) {\n                    let subLine = split[index];\n                    if (!subLine) {\n                        continue;\n                    }\n                    subLine = subLine.trim();\n                    if (!subLine) {\n                        continue;\n                    }\n                    this._lines.push(subLine + (index !== split.length - 1 ? \";\" : \"\"));\n                }\n            }\n        }\n    }\n}\n","import { ShaderCodeNode } from \"./shaderCodeNode.js\";\n/** @internal */\nexport class ShaderCodeConditionNode extends ShaderCodeNode {\n    process(preprocessors, options) {\n        for (let index = 0; index < this.children.length; index++) {\n            const node = this.children[index];\n            if (node.isValid(preprocessors)) {\n                return node.process(preprocessors, options);\n            }\n        }\n        return \"\";\n    }\n}\n","import { ShaderCodeNode } from \"./shaderCodeNode.js\";\n/** @internal */\nexport class ShaderCodeTestNode extends ShaderCodeNode {\n    isValid(preprocessors) {\n        return this.testExpression.isTrue(preprocessors);\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n/** @internal */\nexport class ShaderDefineExpression {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    isTrue(preprocessors) {\n        return true;\n    }\n    static postfixToInfix(postfix) {\n        const stack = [];\n        for (const c of postfix) {\n            if (ShaderDefineExpression._OperatorPriority[c] === undefined) {\n                stack.push(c);\n            }\n            else {\n                const v1 = stack[stack.length - 1], v2 = stack[stack.length - 2];\n                stack.length -= 2;\n                stack.push(`(${v2}${c}${v1})`);\n            }\n        }\n        return stack[stack.length - 1];\n    }\n    /**\n     * Converts an infix expression to a postfix expression.\n     *\n     * This method is used to transform infix expressions, which are more human-readable,\n     * into postfix expressions, also known as Reverse Polish Notation (RPN), that can be\n     * evaluated more efficiently by a computer. The conversion is based on the operator\n     * priority defined in _OperatorPriority.\n     *\n     * The function employs a stack-based algorithm for the conversion and caches the result\n     * to improve performance. The cache keeps track of each converted expression's access time\n     * to manage the cache size and optimize memory usage. When the cache size exceeds a specified\n     * limit, the least recently accessed items in the cache are deleted.\n     *\n     * The cache mechanism is particularly helpful for shader compilation, where the same infix\n     * expressions might be encountered repeatedly, hence the caching can speed up the process.\n     *\n     * @param infix - The infix expression to be converted.\n     * @returns The postfix expression as an array of strings.\n     */\n    static infixToPostfix(infix) {\n        // Is infix already in cache\n        const cacheItem = ShaderDefineExpression._InfixToPostfixCache.get(infix);\n        if (cacheItem) {\n            cacheItem.accessTime = Date.now();\n            return cacheItem.result;\n        }\n        // Is infix contain any operator\n        if (!infix.includes(\"&&\") && !infix.includes(\"||\") && !infix.includes(\")\") && !infix.includes(\"(\")) {\n            return [infix];\n        }\n        const result = [];\n        let stackIdx = -1;\n        const pushOperand = () => {\n            operand = operand.trim();\n            if (operand !== \"\") {\n                result.push(operand);\n                operand = \"\";\n            }\n        };\n        const push = (s) => {\n            if (stackIdx < ShaderDefineExpression._Stack.length - 1) {\n                ShaderDefineExpression._Stack[++stackIdx] = s;\n            }\n        };\n        const peek = () => ShaderDefineExpression._Stack[stackIdx];\n        const pop = () => (stackIdx === -1 ? \"!!INVALID EXPRESSION!!\" : ShaderDefineExpression._Stack[stackIdx--]);\n        let idx = 0, operand = \"\";\n        while (idx < infix.length) {\n            const c = infix.charAt(idx), token = idx < infix.length - 1 ? infix.substr(idx, 2) : \"\";\n            if (c === \"(\") {\n                operand = \"\";\n                push(c);\n            }\n            else if (c === \")\") {\n                pushOperand();\n                while (stackIdx !== -1 && peek() !== \"(\") {\n                    result.push(pop());\n                }\n                pop();\n            }\n            else if (ShaderDefineExpression._OperatorPriority[token] > 1) {\n                pushOperand();\n                while (stackIdx !== -1 && ShaderDefineExpression._OperatorPriority[peek()] >= ShaderDefineExpression._OperatorPriority[token]) {\n                    result.push(pop());\n                }\n                push(token);\n                idx++;\n            }\n            else {\n                operand += c;\n            }\n            idx++;\n        }\n        pushOperand();\n        while (stackIdx !== -1) {\n            if (peek() === \"(\") {\n                pop();\n            }\n            else {\n                result.push(pop());\n            }\n        }\n        // If the cache is at capacity, clear it before adding a new item\n        if (ShaderDefineExpression._InfixToPostfixCache.size >= ShaderDefineExpression.InfixToPostfixCacheLimitSize) {\n            ShaderDefineExpression.ClearCache();\n        }\n        // Add the new item to the cache, including the current time as the last access time\n        ShaderDefineExpression._InfixToPostfixCache.set(infix, { result, accessTime: Date.now() });\n        return result;\n    }\n    static ClearCache() {\n        // Convert the cache to an array and sort by last access time\n        const sortedCache = Array.from(ShaderDefineExpression._InfixToPostfixCache.entries()).sort((a, b) => a[1].accessTime - b[1].accessTime);\n        // Remove the least recently accessed half of the cache\n        for (let i = 0; i < ShaderDefineExpression.InfixToPostfixCacheCleanupSize; i++) {\n            ShaderDefineExpression._InfixToPostfixCache.delete(sortedCache[i][0]);\n        }\n    }\n}\n/**\n * Cache items count limit for the InfixToPostfix cache.\n * It uses to improve the performance of the shader compilation.\n * For details see PR: https://github.com/BabylonJS/Babylon.js/pull/13936\n */\nShaderDefineExpression.InfixToPostfixCacheLimitSize = 50000;\n/**\n * When the cache size is exceeded, a cache cleanup will be triggered\n * and the cache will be reduced by the size specified\n * in the InfixToPostfixCacheCleanupSize variable, removing entries\n * that have not been accessed the longest.\n */\nShaderDefineExpression.InfixToPostfixCacheCleanupSize = 25000;\nShaderDefineExpression._InfixToPostfixCache = new Map();\nShaderDefineExpression._OperatorPriority = {\n    \")\": 0,\n    \"(\": 1,\n    \"||\": 2,\n    \"&&\": 3,\n};\nShaderDefineExpression._Stack = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n","import { ShaderDefineExpression } from \"../shaderDefineExpression.js\";\n/** @internal */\nexport class ShaderDefineIsDefinedOperator extends ShaderDefineExpression {\n    constructor(define, not = false) {\n        super();\n        this.define = define;\n        this.not = not;\n    }\n    isTrue(preprocessors) {\n        let condition = preprocessors[this.define] !== undefined;\n        if (this.not) {\n            condition = !condition;\n        }\n        return condition;\n    }\n}\n","import { ShaderDefineExpression } from \"../shaderDefineExpression.js\";\n/** @internal */\nexport class ShaderDefineOrOperator extends ShaderDefineExpression {\n    isTrue(preprocessors) {\n        return this.leftOperand.isTrue(preprocessors) || this.rightOperand.isTrue(preprocessors);\n    }\n}\n","import { ShaderDefineExpression } from \"../shaderDefineExpression.js\";\n/** @internal */\nexport class ShaderDefineAndOperator extends ShaderDefineExpression {\n    isTrue(preprocessors) {\n        return this.leftOperand.isTrue(preprocessors) && this.rightOperand.isTrue(preprocessors);\n    }\n}\n","import { ShaderDefineExpression } from \"../shaderDefineExpression.js\";\n/** @internal */\nexport class ShaderDefineArithmeticOperator extends ShaderDefineExpression {\n    constructor(define, operand, testValue) {\n        super();\n        this.define = define;\n        this.operand = operand;\n        this.testValue = testValue;\n    }\n    isTrue(preprocessors) {\n        let value = preprocessors[this.define];\n        if (value === undefined) {\n            value = this.define;\n        }\n        let condition = false;\n        const left = parseInt(value);\n        const right = parseInt(this.testValue);\n        switch (this.operand) {\n            case \">\":\n                condition = left > right;\n                break;\n            case \"<\":\n                condition = left < right;\n                break;\n            case \"<=\":\n                condition = left <= right;\n                break;\n            case \">=\":\n                condition = left >= right;\n                break;\n            case \"==\":\n                condition = left === right;\n                break;\n            case \"!=\":\n                condition = left !== right;\n                break;\n        }\n        return condition;\n    }\n}\n","import { _WarnImport } from \"../Misc/devTools.js\";\nimport { IsDocumentAvailable } from \"../Misc/domManagement.js\";\nexport const EngineFunctionContext = {};\n/**\n * @internal\n */\nexport function _ConcatenateShader(source, defines, shaderVersion = \"\") {\n    return shaderVersion + (defines ? defines + \"\\n\" : \"\") + source;\n}\n/**\n * @internal\n */\nexport function _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError, injectedLoadFile) {\n    const loadFile = injectedLoadFile || EngineFunctionContext.loadFile;\n    if (loadFile) {\n        const request = loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n        return request;\n    }\n    throw _WarnImport(\"FileTools\");\n}\n/**\n * Gets host document\n * @param renderingCanvas if provided, the canvas' owner document will be returned\n * @returns the host document object\n */\nexport function getHostDocument(renderingCanvas = null) {\n    if (renderingCanvas && renderingCanvas.ownerDocument) {\n        return renderingCanvas.ownerDocument;\n    }\n    return IsDocumentAvailable() ? document : null;\n}\n/** @internal */\nexport function _getGlobalDefines(defines, isNDCHalfZRange, useReverseDepthBuffer, useExactSrgbConversions) {\n    if (defines) {\n        if (isNDCHalfZRange) {\n            defines[\"IS_NDC_HALF_ZRANGE\"] = \"\";\n        }\n        else {\n            delete defines[\"IS_NDC_HALF_ZRANGE\"];\n        }\n        if (useReverseDepthBuffer) {\n            defines[\"USE_REVERSE_DEPTHBUFFER\"] = \"\";\n        }\n        else {\n            delete defines[\"USE_REVERSE_DEPTHBUFFER\"];\n        }\n        if (useExactSrgbConversions) {\n            defines[\"USE_EXACT_SRGB_CONVERSIONS\"] = \"\";\n        }\n        else {\n            delete defines[\"USE_EXACT_SRGB_CONVERSIONS\"];\n        }\n        return;\n    }\n    else {\n        let s = \"\";\n        if (isNDCHalfZRange) {\n            s += \"#define IS_NDC_HALF_ZRANGE\";\n        }\n        if (useReverseDepthBuffer) {\n            if (s) {\n                s += \"\\n\";\n            }\n            s += \"#define USE_REVERSE_DEPTHBUFFER\";\n        }\n        if (useExactSrgbConversions) {\n            if (s) {\n                s += \"\\n\";\n            }\n            s += \"#define USE_EXACT_SRGB_CONVERSIONS\";\n        }\n        return s;\n    }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { ShaderCodeNode } from \"./shaderCodeNode.js\";\nimport { ShaderCodeCursor } from \"./shaderCodeCursor.js\";\nimport { ShaderCodeConditionNode } from \"./shaderCodeConditionNode.js\";\nimport { ShaderCodeTestNode } from \"./shaderCodeTestNode.js\";\nimport { ShaderDefineIsDefinedOperator } from \"./Expressions/Operators/shaderDefineIsDefinedOperator.js\";\nimport { ShaderDefineOrOperator } from \"./Expressions/Operators/shaderDefineOrOperator.js\";\nimport { ShaderDefineAndOperator } from \"./Expressions/Operators/shaderDefineAndOperator.js\";\nimport { ShaderDefineExpression } from \"./Expressions/shaderDefineExpression.js\";\nimport { ShaderDefineArithmeticOperator } from \"./Expressions/Operators/shaderDefineArithmeticOperator.js\";\nimport { _WarnImport } from \"../../Misc/devTools.js\";\nimport { _getGlobalDefines } from \"../abstractEngine.functions.js\";\nconst regexSE = /defined\\s*?\\((.+?)\\)/g;\nconst regexSERevert = /defined\\s*?\\[(.+?)\\]/g;\nconst regexShaderInclude = /#include\\s?<(.+)>(\\((.*)\\))*(\\[(.*)\\])*/g;\nconst regexShaderDecl = /__decl__/;\nconst regexLightX = /light\\{X\\}.(\\w*)/g;\nconst regexX = /\\{X\\}/g;\nconst reusableMatches = [];\nconst _MoveCursorRegex = /(#ifdef)|(#else)|(#elif)|(#endif)|(#ifndef)|(#if)/;\nexport function Initialize(options) {\n    if (options.processor && options.processor.initializeShaders) {\n        options.processor.initializeShaders(options.processingContext);\n    }\n}\n/** @internal */\nexport function Process(sourceCode, options, callback, engine) {\n    if (options.processor?.preProcessShaderCode) {\n        sourceCode = options.processor.preProcessShaderCode(sourceCode, options.isFragment);\n    }\n    _ProcessIncludes(sourceCode, options, (codeWithIncludes) => {\n        if (options.processCodeAfterIncludes) {\n            codeWithIncludes = options.processCodeAfterIncludes(options.isFragment ? \"fragment\" : \"vertex\", codeWithIncludes, options.defines);\n        }\n        const migratedCode = _ProcessShaderConversion(codeWithIncludes, options, engine);\n        callback(migratedCode, codeWithIncludes);\n    });\n}\n/** @internal */\nexport function PreProcess(sourceCode, options, callback, engine) {\n    if (options.processor?.preProcessShaderCode) {\n        sourceCode = options.processor.preProcessShaderCode(sourceCode, options.isFragment);\n    }\n    _ProcessIncludes(sourceCode, options, (codeWithIncludes) => {\n        if (options.processCodeAfterIncludes) {\n            codeWithIncludes = options.processCodeAfterIncludes(options.isFragment ? \"fragment\" : \"vertex\", codeWithIncludes, options.defines);\n        }\n        const migratedCode = _ApplyPreProcessing(codeWithIncludes, options, engine);\n        callback(migratedCode, codeWithIncludes);\n    });\n}\n/** @internal */\nexport function Finalize(vertexCode, fragmentCode, options) {\n    if (!options.processor || !options.processor.finalizeShaders) {\n        return { vertexCode, fragmentCode };\n    }\n    return options.processor.finalizeShaders(vertexCode, fragmentCode, options.processingContext);\n}\nfunction _ProcessPrecision(source, options) {\n    if (options.processor?.noPrecision) {\n        return source;\n    }\n    const shouldUseHighPrecisionShader = options.shouldUseHighPrecisionShader;\n    if (source.indexOf(\"precision highp float\") === -1) {\n        if (!shouldUseHighPrecisionShader) {\n            source = \"precision mediump float;\\n\" + source;\n        }\n        else {\n            source = \"precision highp float;\\n\" + source;\n        }\n    }\n    else {\n        if (!shouldUseHighPrecisionShader) {\n            // Moving highp to mediump\n            source = source.replace(\"precision highp float\", \"precision mediump float\");\n        }\n    }\n    return source;\n}\nfunction _ExtractOperation(expression) {\n    const regex = /defined\\((.+)\\)/;\n    const match = regex.exec(expression);\n    if (match && match.length) {\n        return new ShaderDefineIsDefinedOperator(match[1].trim(), expression[0] === \"!\");\n    }\n    const operators = [\"==\", \"!=\", \">=\", \"<=\", \"<\", \">\"];\n    let operator = \"\";\n    let indexOperator = 0;\n    for (operator of operators) {\n        indexOperator = expression.indexOf(operator);\n        if (indexOperator > -1) {\n            break;\n        }\n    }\n    if (indexOperator === -1) {\n        return new ShaderDefineIsDefinedOperator(expression);\n    }\n    const define = expression.substring(0, indexOperator).trim();\n    const value = expression.substring(indexOperator + operator.length).trim();\n    return new ShaderDefineArithmeticOperator(define, operator, value);\n}\nfunction _BuildSubExpression(expression) {\n    expression = expression.replace(regexSE, \"defined[$1]\");\n    const postfix = ShaderDefineExpression.infixToPostfix(expression);\n    const stack = [];\n    for (const c of postfix) {\n        if (c !== \"||\" && c !== \"&&\") {\n            stack.push(c);\n        }\n        else if (stack.length >= 2) {\n            let v1 = stack[stack.length - 1], v2 = stack[stack.length - 2];\n            stack.length -= 2;\n            const operator = c == \"&&\" ? new ShaderDefineAndOperator() : new ShaderDefineOrOperator();\n            if (typeof v1 === \"string\") {\n                v1 = v1.replace(regexSERevert, \"defined($1)\");\n            }\n            if (typeof v2 === \"string\") {\n                v2 = v2.replace(regexSERevert, \"defined($1)\");\n            }\n            operator.leftOperand = typeof v2 === \"string\" ? _ExtractOperation(v2) : v2;\n            operator.rightOperand = typeof v1 === \"string\" ? _ExtractOperation(v1) : v1;\n            stack.push(operator);\n        }\n    }\n    let result = stack[stack.length - 1];\n    if (typeof result === \"string\") {\n        result = result.replace(regexSERevert, \"defined($1)\");\n    }\n    // note: stack.length !== 1 if there was an error in the parsing\n    return typeof result === \"string\" ? _ExtractOperation(result) : result;\n}\nfunction _BuildExpression(line, start) {\n    const node = new ShaderCodeTestNode();\n    const command = line.substring(0, start);\n    let expression = line.substring(start);\n    expression = expression.substring(0, (expression.indexOf(\"//\") + 1 || expression.length + 1) - 1).trim();\n    if (command === \"#ifdef\") {\n        node.testExpression = new ShaderDefineIsDefinedOperator(expression);\n    }\n    else if (command === \"#ifndef\") {\n        node.testExpression = new ShaderDefineIsDefinedOperator(expression, true);\n    }\n    else {\n        node.testExpression = _BuildSubExpression(expression);\n    }\n    return node;\n}\nfunction _MoveCursorWithinIf(cursor, rootNode, ifNode) {\n    let line = cursor.currentLine;\n    while (_MoveCursor(cursor, ifNode)) {\n        line = cursor.currentLine;\n        const first5 = line.substring(0, 5).toLowerCase();\n        if (first5 === \"#else\") {\n            const elseNode = new ShaderCodeNode();\n            rootNode.children.push(elseNode);\n            _MoveCursor(cursor, elseNode);\n            return;\n        }\n        else if (first5 === \"#elif\") {\n            const elifNode = _BuildExpression(line, 5);\n            rootNode.children.push(elifNode);\n            ifNode = elifNode;\n        }\n    }\n}\nfunction _MoveCursor(cursor, rootNode) {\n    while (cursor.canRead) {\n        cursor.lineIndex++;\n        const line = cursor.currentLine;\n        if (line.indexOf(\"#\") >= 0) {\n            const matches = _MoveCursorRegex.exec(line);\n            if (matches && matches.length) {\n                const keyword = matches[0];\n                switch (keyword) {\n                    case \"#ifdef\": {\n                        const newRootNode = new ShaderCodeConditionNode();\n                        rootNode.children.push(newRootNode);\n                        const ifNode = _BuildExpression(line, 6);\n                        newRootNode.children.push(ifNode);\n                        _MoveCursorWithinIf(cursor, newRootNode, ifNode);\n                        break;\n                    }\n                    case \"#else\":\n                    case \"#elif\":\n                        return true;\n                    case \"#endif\":\n                        return false;\n                    case \"#ifndef\": {\n                        const newRootNode = new ShaderCodeConditionNode();\n                        rootNode.children.push(newRootNode);\n                        const ifNode = _BuildExpression(line, 7);\n                        newRootNode.children.push(ifNode);\n                        _MoveCursorWithinIf(cursor, newRootNode, ifNode);\n                        break;\n                    }\n                    case \"#if\": {\n                        const newRootNode = new ShaderCodeConditionNode();\n                        const ifNode = _BuildExpression(line, 3);\n                        rootNode.children.push(newRootNode);\n                        newRootNode.children.push(ifNode);\n                        _MoveCursorWithinIf(cursor, newRootNode, ifNode);\n                        break;\n                    }\n                }\n                continue;\n            }\n        }\n        const newNode = new ShaderCodeNode();\n        newNode.line = line;\n        rootNode.children.push(newNode);\n        // Detect additional defines\n        if (line[0] === \"#\" && line[1] === \"d\") {\n            const split = line.replace(\";\", \"\").split(\" \");\n            newNode.additionalDefineKey = split[1];\n            if (split.length === 3) {\n                newNode.additionalDefineValue = split[2];\n            }\n        }\n    }\n    return false;\n}\nfunction _EvaluatePreProcessors(sourceCode, preprocessors, options) {\n    const rootNode = new ShaderCodeNode();\n    const cursor = new ShaderCodeCursor();\n    cursor.lineIndex = -1;\n    cursor.lines = sourceCode.split(\"\\n\");\n    // Decompose (We keep it in 2 steps so it is easier to maintain and perf hit is insignificant)\n    _MoveCursor(cursor, rootNode);\n    // Recompose\n    return rootNode.process(preprocessors, options);\n}\nfunction _PreparePreProcessors(options, engine) {\n    const defines = options.defines;\n    const preprocessors = {};\n    for (const define of defines) {\n        const keyValue = define.replace(\"#define\", \"\").replace(\";\", \"\").trim();\n        const split = keyValue.split(\" \");\n        preprocessors[split[0]] = split.length > 1 ? split[1] : \"\";\n    }\n    if (options.processor?.shaderLanguage === 0 /* ShaderLanguage.GLSL */) {\n        preprocessors[\"GL_ES\"] = \"true\";\n    }\n    preprocessors[\"__VERSION__\"] = options.version;\n    preprocessors[options.platformName] = \"true\";\n    _getGlobalDefines(preprocessors, engine?.isNDCHalfZRange, engine?.useReverseDepthBuffer, engine?.useExactSrgbConversions);\n    return preprocessors;\n}\nfunction _ProcessShaderConversion(sourceCode, options, engine) {\n    let preparedSourceCode = _ProcessPrecision(sourceCode, options);\n    if (!options.processor) {\n        return preparedSourceCode;\n    }\n    // Already converted\n    if (options.processor.shaderLanguage === 0 /* ShaderLanguage.GLSL */ && preparedSourceCode.indexOf(\"#version 3\") !== -1) {\n        preparedSourceCode = preparedSourceCode.replace(\"#version 300 es\", \"\");\n        if (!options.processor.parseGLES3) {\n            return preparedSourceCode;\n        }\n    }\n    const defines = options.defines;\n    const preprocessors = _PreparePreProcessors(options, engine);\n    // General pre processing\n    if (options.processor.preProcessor) {\n        preparedSourceCode = options.processor.preProcessor(preparedSourceCode, defines, preprocessors, options.isFragment, options.processingContext);\n    }\n    preparedSourceCode = _EvaluatePreProcessors(preparedSourceCode, preprocessors, options);\n    // Post processing\n    if (options.processor.postProcessor) {\n        preparedSourceCode = options.processor.postProcessor(preparedSourceCode, defines, options.isFragment, options.processingContext, engine\n            ? {\n                drawBuffersExtensionDisabled: engine.getCaps().drawBuffersExtension ? false : true,\n            }\n            : {});\n    }\n    // Inline functions tagged with #define inline\n    if (engine?._features.needShaderCodeInlining) {\n        preparedSourceCode = engine.inlineShaderCode(preparedSourceCode);\n    }\n    return preparedSourceCode;\n}\nfunction _ApplyPreProcessing(sourceCode, options, engine) {\n    let preparedSourceCode = sourceCode;\n    const defines = options.defines;\n    const preprocessors = _PreparePreProcessors(options, engine);\n    // General pre processing\n    if (options.processor?.preProcessor) {\n        preparedSourceCode = options.processor.preProcessor(preparedSourceCode, defines, preprocessors, options.isFragment, options.processingContext);\n    }\n    preparedSourceCode = _EvaluatePreProcessors(preparedSourceCode, preprocessors, options);\n    // Post processing\n    if (options.processor?.postProcessor) {\n        preparedSourceCode = options.processor.postProcessor(preparedSourceCode, defines, options.isFragment, options.processingContext, engine\n            ? {\n                drawBuffersExtensionDisabled: engine.getCaps().drawBuffersExtension ? false : true,\n            }\n            : {});\n    }\n    // Inline functions tagged with #define inline\n    if (engine._features.needShaderCodeInlining) {\n        preparedSourceCode = engine.inlineShaderCode(preparedSourceCode);\n    }\n    return preparedSourceCode;\n}\n/** @internal */\nexport function _ProcessIncludes(sourceCode, options, callback) {\n    reusableMatches.length = 0;\n    let match;\n    // stay back-compat to the old matchAll syntax\n    while ((match = regexShaderInclude.exec(sourceCode)) !== null) {\n        reusableMatches.push(match);\n    }\n    let returnValue = String(sourceCode);\n    let parts = [sourceCode];\n    let keepProcessing = false;\n    for (const match of reusableMatches) {\n        let includeFile = match[1];\n        // Uniform declaration\n        if (includeFile.indexOf(\"__decl__\") !== -1) {\n            includeFile = includeFile.replace(regexShaderDecl, \"\");\n            if (options.supportsUniformBuffers) {\n                includeFile = includeFile.replace(\"Vertex\", \"Ubo\").replace(\"Fragment\", \"Ubo\");\n            }\n            includeFile = includeFile + \"Declaration\";\n        }\n        if (options.includesShadersStore[includeFile]) {\n            // Substitution\n            let includeContent = options.includesShadersStore[includeFile];\n            if (match[2]) {\n                const splits = match[3].split(\",\");\n                for (let index = 0; index < splits.length; index += 2) {\n                    const source = new RegExp(splits[index], \"g\");\n                    const dest = splits[index + 1];\n                    includeContent = includeContent.replace(source, dest);\n                }\n            }\n            if (match[4]) {\n                const indexString = match[5];\n                if (indexString.indexOf(\"..\") !== -1) {\n                    const indexSplits = indexString.split(\"..\");\n                    const minIndex = parseInt(indexSplits[0]);\n                    let maxIndex = parseInt(indexSplits[1]);\n                    let sourceIncludeContent = includeContent.slice(0);\n                    includeContent = \"\";\n                    if (isNaN(maxIndex)) {\n                        maxIndex = options.indexParameters[indexSplits[1]];\n                    }\n                    for (let i = minIndex; i < maxIndex; i++) {\n                        if (!options.supportsUniformBuffers) {\n                            // Ubo replacement\n                            sourceIncludeContent = sourceIncludeContent.replace(regexLightX, (str, p1) => {\n                                return p1 + \"{X}\";\n                            });\n                        }\n                        includeContent += sourceIncludeContent.replace(regexX, i.toString()) + \"\\n\";\n                    }\n                }\n                else {\n                    if (!options.supportsUniformBuffers) {\n                        // Ubo replacement\n                        includeContent = includeContent.replace(regexLightX, (str, p1) => {\n                            return p1 + \"{X}\";\n                        });\n                    }\n                    includeContent = includeContent.replace(regexX, indexString);\n                }\n            }\n            // Replace\n            // Split all parts on match[0] and intersperse the parts with the include content\n            const newParts = [];\n            for (const part of parts) {\n                const splitPart = part.split(match[0]);\n                for (let i = 0; i < splitPart.length - 1; i++) {\n                    newParts.push(splitPart[i]);\n                    newParts.push(includeContent);\n                }\n                newParts.push(splitPart[splitPart.length - 1]);\n            }\n            parts = newParts;\n            keepProcessing = keepProcessing || includeContent.indexOf(\"#include<\") >= 0 || includeContent.indexOf(\"#include <\") >= 0;\n        }\n        else {\n            const includeShaderUrl = options.shadersRepository + \"ShadersInclude/\" + includeFile + \".fx\";\n            _functionContainer.loadFile(includeShaderUrl, (fileContent) => {\n                options.includesShadersStore[includeFile] = fileContent;\n                _ProcessIncludes(parts.join(\"\"), options, callback);\n            });\n            return;\n        }\n    }\n    reusableMatches.length = 0;\n    returnValue = parts.join(\"\");\n    if (keepProcessing) {\n        _ProcessIncludes(returnValue.toString(), options, callback);\n    }\n    else {\n        callback(returnValue);\n    }\n}\n/** @internal */\nexport const _functionContainer = {\n    /**\n     * Loads a file from a url\n     * @param url url to load\n     * @param onSuccess callback called when the file successfully loads\n     * @param onProgress callback called while file is loading (if the server supports this mode)\n     * @param offlineProvider defines the offline provider for caching\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @param onError callback called when the file fails to load\n     * @returns a file request object\n     * @internal\n     */\n    loadFile: (url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) => {\n        throw _WarnImport(\"FileTools\");\n    },\n};\n","import { IsWindowObjectExist } from \"./domManagement.js\";\n/**\n * Class used to provide helper for timing\n */\nexport class TimingTools {\n    /**\n     * Polyfill for setImmediate\n     * @param action defines the action to execute after the current execution block\n     */\n    static SetImmediate(action) {\n        if (IsWindowObjectExist() && window.setImmediate) {\n            window.setImmediate(action);\n        }\n        else {\n            setTimeout(action, 1);\n        }\n    }\n}\n","/** @internal */\nexport class WebGLPipelineContext {\n    constructor() {\n        this._valueCache = {};\n        this.vertexCompilationError = null;\n        this.fragmentCompilationError = null;\n        this.programLinkError = null;\n        this.programValidationError = null;\n        /** @internal */\n        this._isDisposed = false;\n    }\n    get isAsync() {\n        return this.isParallelCompiled;\n    }\n    get isReady() {\n        if (this.program) {\n            if (this.isParallelCompiled) {\n                return this.engine._isRenderingStateCompiled(this);\n            }\n            return true;\n        }\n        return false;\n    }\n    _handlesSpectorRebuildCallback(onCompiled) {\n        if (onCompiled && this.program) {\n            onCompiled(this.program);\n        }\n    }\n    setEngine(engine) {\n        this.engine = engine;\n    }\n    _fillEffectInformation(effect, uniformBuffersNames, uniformsNames, uniforms, samplerList, samplers, attributesNames, attributes) {\n        const engine = this.engine;\n        if (engine.supportsUniformBuffers) {\n            for (const name in uniformBuffersNames) {\n                effect.bindUniformBlock(name, uniformBuffersNames[name]);\n            }\n        }\n        const effectAvailableUniforms = this.engine.getUniforms(this, uniformsNames);\n        effectAvailableUniforms.forEach((uniform, index) => {\n            uniforms[uniformsNames[index]] = uniform;\n        });\n        this._uniforms = uniforms;\n        let index;\n        for (index = 0; index < samplerList.length; index++) {\n            const sampler = effect.getUniform(samplerList[index]);\n            if (sampler == null) {\n                samplerList.splice(index, 1);\n                index--;\n            }\n        }\n        samplerList.forEach((name, index) => {\n            samplers[name] = index;\n        });\n        for (const attr of engine.getAttributes(this, attributesNames)) {\n            attributes.push(attr);\n        }\n    }\n    /**\n     * Release all associated resources.\n     **/\n    dispose() {\n        this._uniforms = {};\n        this._isDisposed = true;\n    }\n    /**\n     * @internal\n     */\n    _cacheMatrix(uniformName, matrix) {\n        const cache = this._valueCache[uniformName];\n        const flag = matrix.updateFlag;\n        if (cache !== undefined && cache === flag) {\n            return false;\n        }\n        this._valueCache[uniformName] = flag;\n        return true;\n    }\n    /**\n     * @internal\n     */\n    _cacheFloat2(uniformName, x, y) {\n        let cache = this._valueCache[uniformName];\n        if (!cache || cache.length !== 2) {\n            cache = [x, y];\n            this._valueCache[uniformName] = cache;\n            return true;\n        }\n        let changed = false;\n        if (cache[0] !== x) {\n            cache[0] = x;\n            changed = true;\n        }\n        if (cache[1] !== y) {\n            cache[1] = y;\n            changed = true;\n        }\n        return changed;\n    }\n    /**\n     * @internal\n     */\n    _cacheFloat3(uniformName, x, y, z) {\n        let cache = this._valueCache[uniformName];\n        if (!cache || cache.length !== 3) {\n            cache = [x, y, z];\n            this._valueCache[uniformName] = cache;\n            return true;\n        }\n        let changed = false;\n        if (cache[0] !== x) {\n            cache[0] = x;\n            changed = true;\n        }\n        if (cache[1] !== y) {\n            cache[1] = y;\n            changed = true;\n        }\n        if (cache[2] !== z) {\n            cache[2] = z;\n            changed = true;\n        }\n        return changed;\n    }\n    /**\n     * @internal\n     */\n    _cacheFloat4(uniformName, x, y, z, w) {\n        let cache = this._valueCache[uniformName];\n        if (!cache || cache.length !== 4) {\n            cache = [x, y, z, w];\n            this._valueCache[uniformName] = cache;\n            return true;\n        }\n        let changed = false;\n        if (cache[0] !== x) {\n            cache[0] = x;\n            changed = true;\n        }\n        if (cache[1] !== y) {\n            cache[1] = y;\n            changed = true;\n        }\n        if (cache[2] !== z) {\n            cache[2] = z;\n            changed = true;\n        }\n        if (cache[3] !== w) {\n            cache[3] = w;\n            changed = true;\n        }\n        return changed;\n    }\n    /**\n     * Sets an integer value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param value Value to be set.\n     */\n    setInt(uniformName, value) {\n        const cache = this._valueCache[uniformName];\n        if (cache !== undefined && cache === value) {\n            return;\n        }\n        if (this.engine.setInt(this._uniforms[uniformName], value)) {\n            this._valueCache[uniformName] = value;\n        }\n    }\n    /**\n     * Sets a int2 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First int in int2.\n     * @param y Second int in int2.\n     */\n    setInt2(uniformName, x, y) {\n        if (this._cacheFloat2(uniformName, x, y)) {\n            if (!this.engine.setInt2(this._uniforms[uniformName], x, y)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a int3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First int in int3.\n     * @param y Second int in int3.\n     * @param z Third int in int3.\n     */\n    setInt3(uniformName, x, y, z) {\n        if (this._cacheFloat3(uniformName, x, y, z)) {\n            if (!this.engine.setInt3(this._uniforms[uniformName], x, y, z)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a int4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First int in int4.\n     * @param y Second int in int4.\n     * @param z Third int in int4.\n     * @param w Fourth int in int4.\n     */\n    setInt4(uniformName, x, y, z, w) {\n        if (this._cacheFloat4(uniformName, x, y, z, w)) {\n            if (!this.engine.setInt4(this._uniforms[uniformName], x, y, z, w)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets an int array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setIntArray(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setIntArray(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an int array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setIntArray2(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setIntArray2(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an int array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setIntArray3(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setIntArray3(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an int array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setIntArray4(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setIntArray4(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an unsigned integer value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param value Value to be set.\n     */\n    setUInt(uniformName, value) {\n        const cache = this._valueCache[uniformName];\n        if (cache !== undefined && cache === value) {\n            return;\n        }\n        if (this.engine.setUInt(this._uniforms[uniformName], value)) {\n            this._valueCache[uniformName] = value;\n        }\n    }\n    /**\n     * Sets an unsigned int2 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First unsigned int in uint2.\n     * @param y Second unsigned int in uint2.\n     */\n    setUInt2(uniformName, x, y) {\n        if (this._cacheFloat2(uniformName, x, y)) {\n            if (!this.engine.setUInt2(this._uniforms[uniformName], x, y)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets an unsigned int3 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First unsigned int in uint3.\n     * @param y Second unsigned int in uint3.\n     * @param z Third unsigned int in uint3.\n     */\n    setUInt3(uniformName, x, y, z) {\n        if (this._cacheFloat3(uniformName, x, y, z)) {\n            if (!this.engine.setUInt3(this._uniforms[uniformName], x, y, z)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets an unsigned int4 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First unsigned int in uint4.\n     * @param y Second unsigned int in uint4.\n     * @param z Third unsigned int in uint4.\n     * @param w Fourth unsigned int in uint4.\n     */\n    setUInt4(uniformName, x, y, z, w) {\n        if (this._cacheFloat4(uniformName, x, y, z, w)) {\n            if (!this.engine.setUInt4(this._uniforms[uniformName], x, y, z, w)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets an unsigned int array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setUIntArray(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setUIntArray(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an unsigned int array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setUIntArray2(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setUIntArray2(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an unsigned int array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setUIntArray3(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setUIntArray3(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an unsigned int array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setUIntArray4(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setUIntArray4(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setArray(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setArray(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setArray2(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setArray2(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setArray3(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setArray3(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets an array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     */\n    setArray4(uniformName, array) {\n        this._valueCache[uniformName] = null;\n        this.engine.setArray4(this._uniforms[uniformName], array);\n    }\n    /**\n     * Sets matrices on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param matrices matrices to be set.\n     */\n    setMatrices(uniformName, matrices) {\n        if (!matrices) {\n            return;\n        }\n        this._valueCache[uniformName] = null;\n        this.engine.setMatrices(this._uniforms[uniformName], matrices);\n    }\n    /**\n     * Sets matrix on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param matrix matrix to be set.\n     */\n    setMatrix(uniformName, matrix) {\n        if (this._cacheMatrix(uniformName, matrix)) {\n            if (!this.engine.setMatrices(this._uniforms[uniformName], matrix.asArray())) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a 3x3 matrix on a uniform variable. (Specified as [1,2,3,4,5,6,7,8,9] will result in [1,2,3][4,5,6][7,8,9] matrix)\n     * @param uniformName Name of the variable.\n     * @param matrix matrix to be set.\n     */\n    setMatrix3x3(uniformName, matrix) {\n        this._valueCache[uniformName] = null;\n        this.engine.setMatrix3x3(this._uniforms[uniformName], matrix);\n    }\n    /**\n     * Sets a 2x2 matrix on a uniform variable. (Specified as [1,2,3,4] will result in [1,2][3,4] matrix)\n     * @param uniformName Name of the variable.\n     * @param matrix matrix to be set.\n     */\n    setMatrix2x2(uniformName, matrix) {\n        this._valueCache[uniformName] = null;\n        this.engine.setMatrix2x2(this._uniforms[uniformName], matrix);\n    }\n    /**\n     * Sets a float on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param value value to be set.\n     */\n    setFloat(uniformName, value) {\n        const cache = this._valueCache[uniformName];\n        if (cache !== undefined && cache === value) {\n            return;\n        }\n        if (this.engine.setFloat(this._uniforms[uniformName], value)) {\n            this._valueCache[uniformName] = value;\n        }\n    }\n    /**\n     * Sets a Vector2 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param vector2 vector2 to be set.\n     */\n    setVector2(uniformName, vector2) {\n        if (this._cacheFloat2(uniformName, vector2.x, vector2.y)) {\n            if (!this.engine.setFloat2(this._uniforms[uniformName], vector2.x, vector2.y)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a float2 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First float in float2.\n     * @param y Second float in float2.\n     */\n    setFloat2(uniformName, x, y) {\n        if (this._cacheFloat2(uniformName, x, y)) {\n            if (!this.engine.setFloat2(this._uniforms[uniformName], x, y)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a Vector3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param vector3 Value to be set.\n     */\n    setVector3(uniformName, vector3) {\n        if (this._cacheFloat3(uniformName, vector3.x, vector3.y, vector3.z)) {\n            if (!this.engine.setFloat3(this._uniforms[uniformName], vector3.x, vector3.y, vector3.z)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a float3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First float in float3.\n     * @param y Second float in float3.\n     * @param z Third float in float3.\n     */\n    setFloat3(uniformName, x, y, z) {\n        if (this._cacheFloat3(uniformName, x, y, z)) {\n            if (!this.engine.setFloat3(this._uniforms[uniformName], x, y, z)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a Vector4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param vector4 Value to be set.\n     */\n    setVector4(uniformName, vector4) {\n        if (this._cacheFloat4(uniformName, vector4.x, vector4.y, vector4.z, vector4.w)) {\n            if (!this.engine.setFloat4(this._uniforms[uniformName], vector4.x, vector4.y, vector4.z, vector4.w)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a Quaternion on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param quaternion Value to be set.\n     */\n    setQuaternion(uniformName, quaternion) {\n        if (this._cacheFloat4(uniformName, quaternion.x, quaternion.y, quaternion.z, quaternion.w)) {\n            if (!this.engine.setFloat4(this._uniforms[uniformName], quaternion.x, quaternion.y, quaternion.z, quaternion.w)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a float4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First float in float4.\n     * @param y Second float in float4.\n     * @param z Third float in float4.\n     * @param w Fourth float in float4.\n     */\n    setFloat4(uniformName, x, y, z, w) {\n        if (this._cacheFloat4(uniformName, x, y, z, w)) {\n            if (!this.engine.setFloat4(this._uniforms[uniformName], x, y, z, w)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a Color3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param color3 Value to be set.\n     */\n    setColor3(uniformName, color3) {\n        if (this._cacheFloat3(uniformName, color3.r, color3.g, color3.b)) {\n            if (!this.engine.setFloat3(this._uniforms[uniformName], color3.r, color3.g, color3.b)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a Color4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param color3 Value to be set.\n     * @param alpha Alpha value to be set.\n     */\n    setColor4(uniformName, color3, alpha) {\n        if (this._cacheFloat4(uniformName, color3.r, color3.g, color3.b, alpha)) {\n            if (!this.engine.setFloat4(this._uniforms[uniformName], color3.r, color3.g, color3.b, alpha)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    /**\n     * Sets a Color4 on a uniform variable\n     * @param uniformName defines the name of the variable\n     * @param color4 defines the value to be set\n     */\n    setDirectColor4(uniformName, color4) {\n        if (this._cacheFloat4(uniformName, color4.r, color4.g, color4.b, color4.a)) {\n            if (!this.engine.setFloat4(this._uniforms[uniformName], color4.r, color4.g, color4.b, color4.a)) {\n                this._valueCache[uniformName] = null;\n            }\n        }\n    }\n    _getVertexShaderCode() {\n        return this.vertexShader ? this.engine._getShaderSource(this.vertexShader) : null;\n    }\n    _getFragmentShaderCode() {\n        return this.fragmentShader ? this.engine._getShaderSource(this.fragmentShader) : null;\n    }\n}\n","import { WebGLPipelineContext } from \"./WebGL/webGLPipelineContext.js\";\nimport { _ConcatenateShader } from \"./abstractEngine.functions.js\";\n/**\n * @internal\n */\nconst _stateObject = new WeakMap();\n/**\n * This will be used in cases where the engine doesn't have a context (like the nullengine)\n */\nconst singleStateObject = {\n    _webGLVersion: 2,\n    cachedPipelines: {},\n};\n/**\n * get or create a state object for the given context\n * Note - Used in WebGL only at the moment.\n * @param context The context to get the state object from\n * @returns the state object\n * @internal\n */\nexport function getStateObject(context) {\n    let state = _stateObject.get(context);\n    if (!state) {\n        if (!context) {\n            return singleStateObject;\n        }\n        state = {\n            // use feature detection. instanceof returns false. This only exists on WebGL2 context\n            _webGLVersion: context.TEXTURE_BINDING_3D ? 2 : 1,\n            _context: context,\n            cachedPipelines: {},\n        };\n        _stateObject.set(context, state);\n    }\n    return state;\n}\n/**\n * Remove the state object that belongs to the specific context\n * @param context the context that is being\n */\nexport function deleteStateObject(context) {\n    _stateObject.delete(context);\n}\n/**\n * Directly creates a webGL program\n * @param pipelineContext  defines the pipeline context to attach to\n * @param vertexCode defines the vertex shader code to use\n * @param fragmentCode defines the fragment shader code to use\n * @param context defines the webGL context to use (if not set, the current one will be used)\n * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n * @param _createShaderProgramInjection defines an optional injection to use to create the shader program\n * @returns the new webGL program\n */\nexport function createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context, transformFeedbackVaryings, _createShaderProgramInjection) {\n    const stateObject = getStateObject(context);\n    if (!_createShaderProgramInjection) {\n        _createShaderProgramInjection = stateObject._createShaderProgramInjection ?? _createShaderProgram;\n    }\n    const vertexShader = _compileRawShader(vertexCode, \"vertex\", context, stateObject._contextWasLost);\n    const fragmentShader = _compileRawShader(fragmentCode, \"fragment\", context, stateObject._contextWasLost);\n    return _createShaderProgramInjection(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings, stateObject.validateShaderPrograms);\n}\n/**\n * Creates a webGL program\n * @param pipelineContext  defines the pipeline context to attach to\n * @param vertexCode  defines the vertex shader code to use\n * @param fragmentCode defines the fragment shader code to use\n * @param defines defines the string containing the defines to use to compile the shaders\n * @param context defines the webGL context to use (if not set, the current one will be used)\n * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n * @param _createShaderProgramInjection defines an optional injection to use to create the shader program\n * @returns the new webGL program\n */\nexport function createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context, transformFeedbackVaryings = null, _createShaderProgramInjection) {\n    const stateObject = getStateObject(context);\n    if (!_createShaderProgramInjection) {\n        _createShaderProgramInjection = stateObject._createShaderProgramInjection ?? _createShaderProgram;\n    }\n    const shaderVersion = stateObject._webGLVersion > 1 ? \"#version 300 es\\n#define WEBGL2 \\n\" : \"\";\n    const vertexShader = _compileShader(vertexCode, \"vertex\", defines, shaderVersion, context, stateObject._contextWasLost);\n    const fragmentShader = _compileShader(fragmentCode, \"fragment\", defines, shaderVersion, context, stateObject._contextWasLost);\n    return _createShaderProgramInjection(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings, stateObject.validateShaderPrograms);\n}\n/**\n * Creates a new pipeline context. Note, make sure to attach an engine instance to the created context\n * @param context defines the webGL context to use (if not set, the current one will be used)\n * @param _shaderProcessingContext defines the shader processing context used during the processing if available\n * @returns the new pipeline\n */\nexport function createPipelineContext(context, _shaderProcessingContext) {\n    const pipelineContext = new WebGLPipelineContext();\n    const stateObject = getStateObject(context);\n    if (stateObject.parallelShaderCompile) {\n        pipelineContext.isParallelCompiled = true;\n    }\n    pipelineContext.context = stateObject._context;\n    return pipelineContext;\n}\n/**\n * @internal\n */\nexport function _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, _transformFeedbackVaryings = null, validateShaderPrograms) {\n    const shaderProgram = context.createProgram();\n    pipelineContext.program = shaderProgram;\n    if (!shaderProgram) {\n        throw new Error(\"Unable to create program\");\n    }\n    context.attachShader(shaderProgram, vertexShader);\n    context.attachShader(shaderProgram, fragmentShader);\n    context.linkProgram(shaderProgram);\n    pipelineContext.context = context;\n    pipelineContext.vertexShader = vertexShader;\n    pipelineContext.fragmentShader = fragmentShader;\n    if (!pipelineContext.isParallelCompiled) {\n        _finalizePipelineContext(pipelineContext, context, validateShaderPrograms);\n    }\n    return shaderProgram;\n}\n/**\n * @internal\n */\nexport function _finalizePipelineContext(pipelineContext, gl, validateShaderPrograms) {\n    const context = pipelineContext.context;\n    const vertexShader = pipelineContext.vertexShader;\n    const fragmentShader = pipelineContext.fragmentShader;\n    const program = pipelineContext.program;\n    const linked = context.getProgramParameter(program, context.LINK_STATUS);\n    if (!linked) {\n        // Get more info\n        // Vertex\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n            const log = gl.getShaderInfoLog(vertexShader);\n            if (log) {\n                pipelineContext.vertexCompilationError = log;\n                throw new Error(\"VERTEX SHADER \" + log);\n            }\n        }\n        // Fragment\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n            const log = gl.getShaderInfoLog(fragmentShader);\n            if (log) {\n                pipelineContext.fragmentCompilationError = log;\n                throw new Error(\"FRAGMENT SHADER \" + log);\n            }\n        }\n        const error = context.getProgramInfoLog(program);\n        if (error) {\n            pipelineContext.programLinkError = error;\n            throw new Error(error);\n        }\n    }\n    if ( /*this.*/validateShaderPrograms) {\n        context.validateProgram(program);\n        const validated = context.getProgramParameter(program, context.VALIDATE_STATUS);\n        if (!validated) {\n            const error = context.getProgramInfoLog(program);\n            if (error) {\n                pipelineContext.programValidationError = error;\n                throw new Error(error);\n            }\n        }\n    }\n    context.deleteShader(vertexShader);\n    context.deleteShader(fragmentShader);\n    pipelineContext.vertexShader = undefined;\n    pipelineContext.fragmentShader = undefined;\n    if (pipelineContext.onCompiled) {\n        pipelineContext.onCompiled();\n        pipelineContext.onCompiled = undefined;\n    }\n}\n/**\n * @internal\n */\nexport function _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, _rawVertexSourceCode, _rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, _key = \"\", createRawShaderProgramInjection, createShaderProgramInjection) {\n    const stateObject = getStateObject(pipelineContext.context);\n    if (!createRawShaderProgramInjection) {\n        createRawShaderProgramInjection = stateObject.createRawShaderProgramInjection ?? createRawShaderProgram;\n    }\n    if (!createShaderProgramInjection) {\n        createShaderProgramInjection = stateObject.createShaderProgramInjection ?? createShaderProgram;\n    }\n    const webGLRenderingState = pipelineContext;\n    if (createAsRaw) {\n        webGLRenderingState.program = createRawShaderProgramInjection(webGLRenderingState, vertexSourceCode, fragmentSourceCode, webGLRenderingState.context, transformFeedbackVaryings);\n    }\n    else {\n        webGLRenderingState.program = createShaderProgramInjection(webGLRenderingState, vertexSourceCode, fragmentSourceCode, defines, webGLRenderingState.context, transformFeedbackVaryings);\n    }\n    webGLRenderingState.program.__SPECTOR_rebuildProgram = rebuildRebind;\n}\nfunction _compileShader(source, type, defines, shaderVersion, gl, _contextWasLost) {\n    return _compileRawShader(_ConcatenateShader(source, defines, shaderVersion), type, gl, _contextWasLost);\n}\nfunction _compileRawShader(source, type, gl, _contextWasLost) {\n    const shader = gl.createShader(type === \"vertex\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n    if (!shader) {\n        let error = gl.NO_ERROR;\n        let tempError = gl.NO_ERROR;\n        while ((tempError = gl.getError()) !== gl.NO_ERROR) {\n            error = tempError;\n        }\n        throw new Error(`Something went wrong while creating a gl ${type} shader object. gl error=${error}, gl isContextLost=${gl.isContextLost()}, _contextWasLost=${_contextWasLost}`);\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    return shader;\n}\n/**\n * @internal\n */\nexport function _setProgram(program, gl) {\n    gl.useProgram(program);\n}\n/**\n * @internal\n */\nexport function _executeWhenRenderingStateIsCompiled(pipelineContext, action) {\n    const webGLPipelineContext = pipelineContext;\n    if (!webGLPipelineContext.isParallelCompiled) {\n        action(pipelineContext);\n        return;\n    }\n    const oldHandler = webGLPipelineContext.onCompiled;\n    webGLPipelineContext.onCompiled = () => {\n        oldHandler?.();\n        action(pipelineContext);\n    };\n}\n","import { GetDOMTextContent, IsWindowObjectExist } from \"../Misc/domManagement.js\";\nimport { getStateObject } from \"../Engines/thinEngine.functions.js\";\nimport { ShaderStore } from \"../Engines/shaderStore.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { Finalize, Initialize, Process } from \"../Engines/Processors/shaderProcessor.js\";\nimport { _loadFile } from \"../Engines/abstractEngine.functions.js\";\n/**\n * Get a cached pipeline context\n * @param name the pipeline name\n * @param context the context to be used when creating the pipeline\n * @returns the cached pipeline context if it exists\n * @internal\n */\nexport function getCachedPipeline(name, context) {\n    const stateObject = getStateObject(context);\n    return stateObject.cachedPipelines[name];\n}\n/**\n * @internal\n */\nexport function resetCachedPipeline(pipeline) {\n    const name = pipeline._name;\n    const context = pipeline.context;\n    if (name && context) {\n        const stateObject = getStateObject(context);\n        const cachedPipeline = stateObject.cachedPipelines[name];\n        cachedPipeline?.dispose();\n        delete stateObject.cachedPipelines[name];\n    }\n}\n/** @internal */\nexport function _processShaderCode(processorOptions, baseName, processFinalCode, onFinalCodeReady, shaderLanguage, engine, effectContext) {\n    let vertexSource;\n    let fragmentSource;\n    // const baseName = this.name;\n    const hostDocument = IsWindowObjectExist() ? engine?.getHostDocument() : null;\n    if (typeof baseName === \"string\") {\n        vertexSource = baseName;\n    }\n    else if (baseName.vertexSource) {\n        vertexSource = \"source:\" + baseName.vertexSource;\n    }\n    else if (baseName.vertexElement) {\n        vertexSource = hostDocument?.getElementById(baseName.vertexElement) || baseName.vertexElement;\n    }\n    else {\n        vertexSource = baseName.vertex || baseName;\n    }\n    if (typeof baseName === \"string\") {\n        fragmentSource = baseName;\n    }\n    else if (baseName.fragmentSource) {\n        fragmentSource = \"source:\" + baseName.fragmentSource;\n    }\n    else if (baseName.fragmentElement) {\n        fragmentSource = hostDocument?.getElementById(baseName.fragmentElement) || baseName.fragmentElement;\n    }\n    else {\n        fragmentSource = baseName.fragment || baseName;\n    }\n    const shaderCodes = [undefined, undefined];\n    const shadersLoaded = () => {\n        if (shaderCodes[0] && shaderCodes[1]) {\n            processorOptions.isFragment = true;\n            const [migratedVertexCode, fragmentCode] = shaderCodes;\n            Process(fragmentCode, processorOptions, (migratedFragmentCode, codeBeforeMigration) => {\n                if (effectContext) {\n                    effectContext._fragmentSourceCodeBeforeMigration = codeBeforeMigration;\n                }\n                if (processFinalCode) {\n                    migratedFragmentCode = processFinalCode(\"fragment\", migratedFragmentCode);\n                }\n                const finalShaders = Finalize(migratedVertexCode, migratedFragmentCode, processorOptions);\n                processorOptions = null;\n                const finalCode = _useFinalCode(finalShaders.vertexCode, finalShaders.fragmentCode, baseName, shaderLanguage);\n                onFinalCodeReady?.(finalCode.vertexSourceCode, finalCode.fragmentSourceCode);\n            }, engine);\n        }\n    };\n    _loadShader(vertexSource, \"Vertex\", \"\", (vertexCode) => {\n        Initialize(processorOptions);\n        Process(vertexCode, processorOptions, (migratedVertexCode, codeBeforeMigration) => {\n            if (effectContext) {\n                effectContext._rawVertexSourceCode = vertexCode;\n                effectContext._vertexSourceCodeBeforeMigration = codeBeforeMigration;\n            }\n            if (processFinalCode) {\n                migratedVertexCode = processFinalCode(\"vertex\", migratedVertexCode);\n            }\n            shaderCodes[0] = migratedVertexCode;\n            shadersLoaded();\n        }, engine);\n    }, shaderLanguage);\n    _loadShader(fragmentSource, \"Fragment\", \"Pixel\", (fragmentCode) => {\n        if (effectContext) {\n            effectContext._rawFragmentSourceCode = fragmentCode;\n        }\n        shaderCodes[1] = fragmentCode;\n        shadersLoaded();\n    }, shaderLanguage);\n}\nfunction _loadShader(shader, key, optionalKey, callback, shaderLanguage, _loadFileInjection) {\n    if (typeof HTMLElement !== \"undefined\") {\n        // DOM element ?\n        if (shader instanceof HTMLElement) {\n            const shaderCode = GetDOMTextContent(shader);\n            callback(shaderCode);\n            return;\n        }\n    }\n    // Direct source ?\n    if (shader.substr(0, 7) === \"source:\") {\n        callback(shader.substr(7));\n        return;\n    }\n    // Base64 encoded ?\n    if (shader.substr(0, 7) === \"base64:\") {\n        const shaderBinary = window.atob(shader.substr(7));\n        callback(shaderBinary);\n        return;\n    }\n    const shaderStore = ShaderStore.GetShadersStore(shaderLanguage);\n    // Is in local store ?\n    if (shaderStore[shader + key + \"Shader\"]) {\n        callback(shaderStore[shader + key + \"Shader\"]);\n        return;\n    }\n    if (optionalKey && shaderStore[shader + optionalKey + \"Shader\"]) {\n        callback(shaderStore[shader + optionalKey + \"Shader\"]);\n        return;\n    }\n    let shaderUrl;\n    if (shader[0] === \".\" || shader[0] === \"/\" || shader.indexOf(\"http\") > -1) {\n        shaderUrl = shader;\n    }\n    else {\n        shaderUrl = ShaderStore.GetShadersRepository(shaderLanguage) + shader;\n    }\n    _loadFileInjection = _loadFileInjection || _loadFile;\n    if (!_loadFileInjection) {\n        // we got to this point and loadFile was not injected - throw an error\n        throw new Error(\"loadFileInjection is not defined\");\n    }\n    // Vertex shader\n    _loadFileInjection(shaderUrl + \".\" + key.toLowerCase() + \".fx\", callback);\n}\nfunction _useFinalCode(migratedVertexCode, migratedFragmentCode, baseName, shaderLanguage) {\n    if (baseName) {\n        const vertex = baseName.vertexElement || baseName.vertex || baseName.spectorName || baseName;\n        const fragment = baseName.fragmentElement || baseName.fragment || baseName.spectorName || baseName;\n        return {\n            vertexSourceCode: (shaderLanguage === 1 /* ShaderLanguage.WGSL */ ? \"//\" : \"\") + \"#define SHADER_NAME vertex:\" + vertex + \"\\n\" + migratedVertexCode,\n            fragmentSourceCode: (shaderLanguage === 1 /* ShaderLanguage.WGSL */ ? \"//\" : \"\") + \"#define SHADER_NAME fragment:\" + fragment + \"\\n\" + migratedFragmentCode,\n        };\n    }\n    else {\n        return {\n            vertexSourceCode: migratedVertexCode,\n            fragmentSourceCode: migratedFragmentCode,\n        };\n    }\n}\n/**\n * Creates and prepares a pipeline context\n * @internal\n */\nexport const createAndPreparePipelineContext = (options, createPipelineContext, _preparePipelineContext, _executeWhenRenderingStateIsCompiled) => {\n    try {\n        const pipelineContext = options.existingPipelineContext || createPipelineContext(options.shaderProcessingContext);\n        pipelineContext._name = options.name;\n        if (options.name && options.context) {\n            const stateObject = getStateObject(options.context);\n            stateObject.cachedPipelines[options.name] = pipelineContext;\n        }\n        _preparePipelineContext(pipelineContext, options.vertex, options.fragment, !!options.createAsRaw, \"\", \"\", options.rebuildRebind, options.defines, options.transformFeedbackVaryings, \"\");\n        _executeWhenRenderingStateIsCompiled(pipelineContext, () => {\n            options.onRenderingStateCompiled?.(pipelineContext);\n        });\n        return pipelineContext;\n    }\n    catch (e) {\n        Logger.Error(\"Error compiling effect\");\n        throw e;\n    }\n};\n","import { Observable } from \"../Misc/observable.js\";\n\nimport { Logger } from \"../Misc/logger.js\";\nimport { ShaderStore as EngineShaderStore } from \"../Engines/shaderStore.js\";\nimport { _processShaderCode, getCachedPipeline, createAndPreparePipelineContext, resetCachedPipeline } from \"./effect.functions.js\";\n/**\n * Effect containing vertex and fragment shader that can be executed on an object.\n */\nexport class Effect {\n    /**\n     * Gets or sets the relative url used to load shaders if using the engine in non-minified mode\n     */\n    static get ShadersRepository() {\n        return EngineShaderStore.ShadersRepository;\n    }\n    static set ShadersRepository(repo) {\n        EngineShaderStore.ShadersRepository = repo;\n    }\n    /**\n     * Observable that will be called when effect is bound.\n     */\n    get onBindObservable() {\n        if (!this._onBindObservable) {\n            this._onBindObservable = new Observable();\n        }\n        return this._onBindObservable;\n    }\n    /**\n     * Gets the shader language type used to write vertex and fragment source code.\n     */\n    get shaderLanguage() {\n        return this._shaderLanguage;\n    }\n    /**\n     * Instantiates an effect.\n     * An effect can be used to create/manage/execute vertex and fragment shaders.\n     * @param baseName Name of the effect.\n     * @param attributesNamesOrOptions List of attribute names that will be passed to the shader or set of all options to create the effect.\n     * @param uniformsNamesOrEngine List of uniform variable names that will be passed to the shader or the engine that will be used to render effect.\n     * @param samplers List of sampler variables that will be passed to the shader.\n     * @param engine Engine to be used to render the effect\n     * @param defines Define statements to be added to the shader.\n     * @param fallbacks Possible fallbacks for this effect to improve performance when needed.\n     * @param onCompiled Callback that will be called when the shader is compiled.\n     * @param onError Callback that will be called if an error occurs during shader compilation.\n     * @param indexParameters Parameters to be used with Babylons include syntax to iterate over an array (eg. \\{lights: 10\\})\n     * @param key Effect Key identifying uniquely compiled shader variants\n     * @param shaderLanguage the language the shader is written in (default: GLSL)\n     */\n    constructor(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers = null, engine, defines = null, fallbacks = null, onCompiled = null, onError = null, indexParameters, key = \"\", shaderLanguage = 0 /* ShaderLanguage.GLSL */) {\n        /**\n         * String container all the define statements that should be set on the shader.\n         */\n        this.defines = \"\";\n        /**\n         * Callback that will be called when the shader is compiled.\n         */\n        this.onCompiled = null;\n        /**\n         * Callback that will be called if an error occurs during shader compilation.\n         */\n        this.onError = null;\n        /**\n         * Callback that will be called when effect is bound.\n         */\n        this.onBind = null;\n        /**\n         * Unique ID of the effect.\n         */\n        this.uniqueId = 0;\n        /**\n         * Observable that will be called when the shader is compiled.\n         * It is recommended to use executeWhenCompile() or to make sure that scene.isReady() is called to get this observable raised.\n         */\n        this.onCompileObservable = new Observable();\n        /**\n         * Observable that will be called if an error occurs during shader compilation.\n         */\n        this.onErrorObservable = new Observable();\n        /** @internal */\n        this._onBindObservable = null;\n        this._isDisposed = false;\n        /** @internal */\n        this._bonesComputationForcedToCPU = false;\n        /** @internal */\n        this._uniformBuffersNames = {};\n        /** @internal */\n        this._multiTarget = false;\n        /** @internal */\n        this._samplers = {};\n        this._isReady = false;\n        this._compilationError = \"\";\n        this._allFallbacksProcessed = false;\n        /** @internal */\n        this._uniforms = {};\n        /**\n         * Key for the effect.\n         * @internal\n         */\n        this._key = \"\";\n        this._fallbacks = null;\n        this._vertexSourceCodeOverride = \"\";\n        this._fragmentSourceCodeOverride = \"\";\n        this._transformFeedbackVaryings = null;\n        /**\n         * Compiled shader to webGL program.\n         * @internal\n         */\n        this._pipelineContext = null;\n        /** @internal */\n        this._vertexSourceCode = \"\";\n        /** @internal */\n        this._fragmentSourceCode = \"\";\n        /** @internal */\n        this._vertexSourceCodeBeforeMigration = \"\";\n        /** @internal */\n        this._fragmentSourceCodeBeforeMigration = \"\";\n        /** @internal */\n        this._rawVertexSourceCode = \"\";\n        /** @internal */\n        this._rawFragmentSourceCode = \"\";\n        this._processCodeAfterIncludes = undefined;\n        this._processFinalCode = null;\n        this.name = baseName;\n        this._key = key;\n        const pipelineName = this._key.replace(/\\r/g, \"\").replace(/\\n/g, \"|\");\n        let cachedPipeline = undefined;\n        if (attributesNamesOrOptions.attributes) {\n            const options = attributesNamesOrOptions;\n            this._engine = uniformsNamesOrEngine;\n            this._attributesNames = options.attributes;\n            this._uniformsNames = options.uniformsNames.concat(options.samplers);\n            this._samplerList = options.samplers.slice();\n            this.defines = options.defines;\n            this.onError = options.onError;\n            this.onCompiled = options.onCompiled;\n            this._fallbacks = options.fallbacks;\n            this._indexParameters = options.indexParameters;\n            this._transformFeedbackVaryings = options.transformFeedbackVaryings || null;\n            this._multiTarget = !!options.multiTarget;\n            this._shaderLanguage = options.shaderLanguage ?? 0 /* ShaderLanguage.GLSL */;\n            if (options.uniformBuffersNames) {\n                this._uniformBuffersNamesList = options.uniformBuffersNames.slice();\n                for (let i = 0; i < options.uniformBuffersNames.length; i++) {\n                    this._uniformBuffersNames[options.uniformBuffersNames[i]] = i;\n                }\n            }\n            this._processFinalCode = options.processFinalCode ?? null;\n            this._processCodeAfterIncludes = options.processCodeAfterIncludes ?? undefined;\n            cachedPipeline = options.existingPipelineContext;\n        }\n        else {\n            this._engine = engine;\n            this.defines = defines == null ? \"\" : defines;\n            this._uniformsNames = uniformsNamesOrEngine.concat(samplers);\n            this._samplerList = samplers ? samplers.slice() : [];\n            this._attributesNames = attributesNamesOrOptions;\n            this._uniformBuffersNamesList = [];\n            this._shaderLanguage = shaderLanguage;\n            this.onError = onError;\n            this.onCompiled = onCompiled;\n            this._indexParameters = indexParameters;\n            this._fallbacks = fallbacks;\n        }\n        // Use the cache if we can. For now, WebGL2 only.\n        if (this._engine.shaderPlatformName === \"WEBGL2\") {\n            cachedPipeline = getCachedPipeline(pipelineName, this._engine._gl) ?? cachedPipeline;\n        }\n        this._attributeLocationByName = {};\n        this.uniqueId = Effect._UniqueIdSeed++;\n        if (!cachedPipeline) {\n            this._processShaderCode();\n        }\n        else {\n            this._pipelineContext = cachedPipeline;\n            this._pipelineContext.setEngine(this._engine);\n            this._onRenderingStateCompiled(this._pipelineContext);\n            // rebuildRebind for spector\n            if (this._pipelineContext.program) {\n                this._pipelineContext.program.__SPECTOR_rebuildProgram = this._rebuildProgram.bind(this);\n            }\n        }\n    }\n    /** @internal */\n    _processShaderCode(shaderProcessor = null, keepExistingPipelineContext = false, shaderProcessingContext = null) {\n        this._processingContext = shaderProcessingContext || this._engine._getShaderProcessingContext(this._shaderLanguage);\n        const processorOptions = {\n            defines: this.defines.split(\"\\n\"),\n            indexParameters: this._indexParameters,\n            isFragment: false,\n            shouldUseHighPrecisionShader: this._engine._shouldUseHighPrecisionShader,\n            processor: shaderProcessor ?? this._engine._getShaderProcessor(this._shaderLanguage),\n            supportsUniformBuffers: this._engine.supportsUniformBuffers,\n            shadersRepository: EngineShaderStore.GetShadersRepository(this._shaderLanguage),\n            includesShadersStore: EngineShaderStore.GetIncludesShadersStore(this._shaderLanguage),\n            version: (this._engine.version * 100).toString(),\n            platformName: this._engine.shaderPlatformName,\n            processingContext: this._processingContext,\n            isNDCHalfZRange: this._engine.isNDCHalfZRange,\n            useReverseDepthBuffer: this._engine.useReverseDepthBuffer,\n            processCodeAfterIncludes: this._processCodeAfterIncludes,\n        };\n        _processShaderCode(processorOptions, this.name, this._processFinalCode, (migratedVertexCode, migratedFragmentCode) => {\n            this._vertexSourceCode = migratedVertexCode;\n            this._fragmentSourceCode = migratedFragmentCode;\n            this._prepareEffect(keepExistingPipelineContext);\n        }, this._shaderLanguage, this._engine, this);\n    }\n    /**\n     * Unique key for this effect\n     */\n    get key() {\n        return this._key;\n    }\n    /**\n     * If the effect has been compiled and prepared.\n     * @returns if the effect is compiled and prepared.\n     */\n    isReady() {\n        try {\n            return this._isReadyInternal();\n        }\n        catch {\n            return false;\n        }\n    }\n    _isReadyInternal() {\n        if (this._isReady) {\n            return true;\n        }\n        if (this._pipelineContext) {\n            return this._pipelineContext.isReady;\n        }\n        return false;\n    }\n    /**\n     * The engine the effect was initialized with.\n     * @returns the engine.\n     */\n    getEngine() {\n        return this._engine;\n    }\n    /**\n     * The pipeline context for this effect\n     * @returns the associated pipeline context\n     */\n    getPipelineContext() {\n        return this._pipelineContext;\n    }\n    /**\n     * The set of names of attribute variables for the shader.\n     * @returns An array of attribute names.\n     */\n    getAttributesNames() {\n        return this._attributesNames;\n    }\n    /**\n     * Returns the attribute at the given index.\n     * @param index The index of the attribute.\n     * @returns The location of the attribute.\n     */\n    getAttributeLocation(index) {\n        return this._attributes[index];\n    }\n    /**\n     * Returns the attribute based on the name of the variable.\n     * @param name of the attribute to look up.\n     * @returns the attribute location.\n     */\n    getAttributeLocationByName(name) {\n        return this._attributeLocationByName[name];\n    }\n    /**\n     * The number of attributes.\n     * @returns the number of attributes.\n     */\n    getAttributesCount() {\n        return this._attributes.length;\n    }\n    /**\n     * Gets the index of a uniform variable.\n     * @param uniformName of the uniform to look up.\n     * @returns the index.\n     */\n    getUniformIndex(uniformName) {\n        return this._uniformsNames.indexOf(uniformName);\n    }\n    /**\n     * Returns the attribute based on the name of the variable.\n     * @param uniformName of the uniform to look up.\n     * @returns the location of the uniform.\n     */\n    getUniform(uniformName) {\n        return this._uniforms[uniformName];\n    }\n    /**\n     * Returns an array of sampler variable names\n     * @returns The array of sampler variable names.\n     */\n    getSamplers() {\n        return this._samplerList;\n    }\n    /**\n     * Returns an array of uniform variable names\n     * @returns The array of uniform variable names.\n     */\n    getUniformNames() {\n        return this._uniformsNames;\n    }\n    /**\n     * Returns an array of uniform buffer variable names\n     * @returns The array of uniform buffer variable names.\n     */\n    getUniformBuffersNames() {\n        return this._uniformBuffersNamesList;\n    }\n    /**\n     * Returns the index parameters used to create the effect\n     * @returns The index parameters object\n     */\n    getIndexParameters() {\n        return this._indexParameters;\n    }\n    /**\n     * The error from the last compilation.\n     * @returns the error string.\n     */\n    getCompilationError() {\n        return this._compilationError;\n    }\n    /**\n     * Gets a boolean indicating that all fallbacks were used during compilation\n     * @returns true if all fallbacks were used\n     */\n    allFallbacksProcessed() {\n        return this._allFallbacksProcessed;\n    }\n    /**\n     * Adds a callback to the onCompiled observable and call the callback immediately if already ready.\n     * @param func The callback to be used.\n     */\n    executeWhenCompiled(func) {\n        if (this.isReady()) {\n            func(this);\n            return;\n        }\n        this.onCompileObservable.add((effect) => {\n            func(effect);\n        });\n        if (!this._pipelineContext || this._pipelineContext.isAsync) {\n            setTimeout(() => {\n                this._checkIsReady(null);\n            }, 16);\n        }\n    }\n    _checkIsReady(previousPipelineContext) {\n        try {\n            if (this._isReadyInternal()) {\n                return;\n            }\n        }\n        catch (e) {\n            this._processCompilationErrors(e, previousPipelineContext);\n            return;\n        }\n        if (this._isDisposed) {\n            return;\n        }\n        setTimeout(() => {\n            this._checkIsReady(previousPipelineContext);\n        }, 16);\n    }\n    /**\n     * Gets the vertex shader source code of this effect\n     * This is the final source code that will be compiled, after all the processing has been done (pre-processing applied, code injection/replacement, etc)\n     */\n    get vertexSourceCode() {\n        return this._vertexSourceCodeOverride && this._fragmentSourceCodeOverride\n            ? this._vertexSourceCodeOverride\n            : this._pipelineContext?._getVertexShaderCode() ?? this._vertexSourceCode;\n    }\n    /**\n     * Gets the fragment shader source code of this effect\n     * This is the final source code that will be compiled, after all the processing has been done (pre-processing applied, code injection/replacement, etc)\n     */\n    get fragmentSourceCode() {\n        return this._vertexSourceCodeOverride && this._fragmentSourceCodeOverride\n            ? this._fragmentSourceCodeOverride\n            : this._pipelineContext?._getFragmentShaderCode() ?? this._fragmentSourceCode;\n    }\n    /**\n     * Gets the vertex shader source code before migration.\n     * This is the source code after the include directives have been replaced by their contents but before the code is migrated, i.e. before ShaderProcess._ProcessShaderConversion is executed.\n     * This method is, among other things, responsible for parsing #if/#define directives as well as converting GLES2 syntax to GLES3 (in the case of WebGL).\n     */\n    get vertexSourceCodeBeforeMigration() {\n        return this._vertexSourceCodeBeforeMigration;\n    }\n    /**\n     * Gets the fragment shader source code before migration.\n     * This is the source code after the include directives have been replaced by their contents but before the code is migrated, i.e. before ShaderProcess._ProcessShaderConversion is executed.\n     * This method is, among other things, responsible for parsing #if/#define directives as well as converting GLES2 syntax to GLES3 (in the case of WebGL).\n     */\n    get fragmentSourceCodeBeforeMigration() {\n        return this._fragmentSourceCodeBeforeMigration;\n    }\n    /**\n     * Gets the vertex shader source code before it has been modified by any processing\n     */\n    get rawVertexSourceCode() {\n        return this._rawVertexSourceCode;\n    }\n    /**\n     * Gets the fragment shader source code before it has been modified by any processing\n     */\n    get rawFragmentSourceCode() {\n        return this._rawFragmentSourceCode;\n    }\n    getPipelineGenerationOptions() {\n        return {\n            platformName: this._engine.shaderPlatformName,\n            shaderLanguage: this._shaderLanguage,\n            shaderNameOrContent: this.name,\n            key: this._key,\n            defines: this.defines.split(\"\\n\"),\n            addGlobalDefines: false,\n            extendedProcessingOptions: {\n                indexParameters: this._indexParameters,\n                isNDCHalfZRange: this._engine.isNDCHalfZRange,\n                useReverseDepthBuffer: this._engine.useReverseDepthBuffer,\n                supportsUniformBuffers: this._engine.supportsUniformBuffers,\n            },\n            extendedCreatePipelineOptions: {\n                transformFeedbackVaryings: this._transformFeedbackVaryings,\n                createAsRaw: !!(this._vertexSourceCodeOverride && this._fragmentSourceCodeOverride),\n            },\n        };\n    }\n    /**\n     * Recompiles the webGL program\n     * @param vertexSourceCode The source code for the vertex shader.\n     * @param fragmentSourceCode The source code for the fragment shader.\n     * @param onCompiled Callback called when completed.\n     * @param onError Callback called on error.\n     * @internal\n     */\n    _rebuildProgram(vertexSourceCode, fragmentSourceCode, onCompiled, onError) {\n        this._isReady = false;\n        this._vertexSourceCodeOverride = vertexSourceCode;\n        this._fragmentSourceCodeOverride = fragmentSourceCode;\n        this.onError = (effect, error) => {\n            if (onError) {\n                onError(error);\n            }\n        };\n        this.onCompiled = () => {\n            const scenes = this.getEngine().scenes;\n            if (scenes) {\n                for (let i = 0; i < scenes.length; i++) {\n                    scenes[i].markAllMaterialsAsDirty(63);\n                }\n            }\n            this._pipelineContext._handlesSpectorRebuildCallback?.(onCompiled);\n        };\n        this._fallbacks = null;\n        this._prepareEffect();\n    }\n    _onRenderingStateCompiled(pipelineContext) {\n        this._pipelineContext = pipelineContext;\n        this._pipelineContext.setEngine(this._engine);\n        this._attributes = [];\n        this._pipelineContext._fillEffectInformation(this, this._uniformBuffersNames, this._uniformsNames, this._uniforms, this._samplerList, this._samplers, this._attributesNames, this._attributes);\n        // Caches attribute locations.\n        if (this._attributesNames) {\n            for (let i = 0; i < this._attributesNames.length; i++) {\n                const name = this._attributesNames[i];\n                this._attributeLocationByName[name] = this._attributes[i];\n            }\n        }\n        this._engine.bindSamplers(this);\n        this._compilationError = \"\";\n        this._isReady = true;\n        if (this.onCompiled) {\n            this.onCompiled(this);\n        }\n        this.onCompileObservable.notifyObservers(this);\n        this.onCompileObservable.clear();\n        // Unbind mesh reference in fallbacks\n        if (this._fallbacks) {\n            this._fallbacks.unBindMesh();\n        }\n    }\n    /**\n     * Prepares the effect\n     * @internal\n     */\n    _prepareEffect(keepExistingPipelineContext = false) {\n        const previousPipelineContext = this._pipelineContext;\n        this._isReady = false;\n        try {\n            const overrides = !!(this._vertexSourceCodeOverride && this._fragmentSourceCodeOverride);\n            const defines = overrides ? null : this.defines;\n            const vertex = overrides ? this._vertexSourceCodeOverride : this._vertexSourceCode;\n            const fragment = overrides ? this._fragmentSourceCodeOverride : this._fragmentSourceCode;\n            const engine = this._engine;\n            this._pipelineContext = createAndPreparePipelineContext({\n                existingPipelineContext: keepExistingPipelineContext ? previousPipelineContext : null,\n                vertex,\n                fragment,\n                context: engine.shaderPlatformName === \"WEBGL2\" ? engine._gl : undefined,\n                rebuildRebind: (vertexSourceCode, fragmentSourceCode, onCompiled, onError) => this._rebuildProgram(vertexSourceCode, fragmentSourceCode, onCompiled, onError),\n                defines,\n                transformFeedbackVaryings: this._transformFeedbackVaryings,\n                name: this._key.replace(/\\r/g, \"\").replace(/\\n/g, \"|\"),\n                createAsRaw: overrides,\n                parallelShaderCompile: engine._caps.parallelShaderCompile,\n                shaderProcessingContext: this._processingContext,\n                onRenderingStateCompiled: (pipelineContext) => {\n                    if (previousPipelineContext && !keepExistingPipelineContext) {\n                        this._engine._deletePipelineContext(previousPipelineContext);\n                    }\n                    if (pipelineContext) {\n                        this._onRenderingStateCompiled(pipelineContext);\n                    }\n                },\n            }, this._engine.createPipelineContext.bind(this._engine), this._engine._preparePipelineContext.bind(this._engine), this._engine._executeWhenRenderingStateIsCompiled.bind(this._engine));\n            if (this._pipelineContext.isAsync) {\n                this._checkIsReady(previousPipelineContext);\n            }\n        }\n        catch (e) {\n            this._processCompilationErrors(e, previousPipelineContext);\n        }\n    }\n    _getShaderCodeAndErrorLine(code, error, isFragment) {\n        const regexp = isFragment ? /FRAGMENT SHADER ERROR: 0:(\\d+?):/ : /VERTEX SHADER ERROR: 0:(\\d+?):/;\n        let errorLine = null;\n        if (error && code) {\n            const res = error.match(regexp);\n            if (res && res.length === 2) {\n                const lineNumber = parseInt(res[1]);\n                const lines = code.split(\"\\n\", -1);\n                if (lines.length >= lineNumber) {\n                    errorLine = `Offending line [${lineNumber}] in ${isFragment ? \"fragment\" : \"vertex\"} code: ${lines[lineNumber - 1]}`;\n                }\n            }\n        }\n        return [code, errorLine];\n    }\n    _processCompilationErrors(e, previousPipelineContext = null) {\n        this._compilationError = e.message;\n        const attributesNames = this._attributesNames;\n        const fallbacks = this._fallbacks;\n        // Let's go through fallbacks then\n        Logger.Error(\"Unable to compile effect:\");\n        Logger.Error(\"Uniforms: \" +\n            this._uniformsNames.map(function (uniform) {\n                return \" \" + uniform;\n            }));\n        Logger.Error(\"Attributes: \" +\n            attributesNames.map(function (attribute) {\n                return \" \" + attribute;\n            }));\n        Logger.Error(\"Defines:\\n\" + this.defines);\n        if (Effect.LogShaderCodeOnCompilationError) {\n            let lineErrorVertex = null, lineErrorFragment = null, code = null;\n            if (this._pipelineContext?._getVertexShaderCode()) {\n                [code, lineErrorVertex] = this._getShaderCodeAndErrorLine(this._pipelineContext._getVertexShaderCode(), this._compilationError, false);\n                if (code) {\n                    Logger.Error(\"Vertex code:\");\n                    Logger.Error(code);\n                }\n            }\n            if (this._pipelineContext?._getFragmentShaderCode()) {\n                [code, lineErrorFragment] = this._getShaderCodeAndErrorLine(this._pipelineContext?._getFragmentShaderCode(), this._compilationError, true);\n                if (code) {\n                    Logger.Error(\"Fragment code:\");\n                    Logger.Error(code);\n                }\n            }\n            if (lineErrorVertex) {\n                Logger.Error(lineErrorVertex);\n            }\n            if (lineErrorFragment) {\n                Logger.Error(lineErrorFragment);\n            }\n        }\n        Logger.Error(\"Error: \" + this._compilationError);\n        const notifyErrors = () => {\n            if (this.onError) {\n                this.onError(this, this._compilationError);\n            }\n            this.onErrorObservable.notifyObservers(this);\n        };\n        // In case a previous compilation was successful, we need to restore the previous pipeline context\n        if (previousPipelineContext) {\n            this._pipelineContext = previousPipelineContext;\n            this._isReady = true;\n            notifyErrors();\n        }\n        // Lets try to compile fallbacks as long as we have some.\n        if (fallbacks) {\n            this._pipelineContext = null;\n            if (fallbacks.hasMoreFallbacks) {\n                this._allFallbacksProcessed = false;\n                Logger.Error(\"Trying next fallback.\");\n                this.defines = fallbacks.reduce(this.defines, this);\n                this._prepareEffect();\n            }\n            else {\n                // Sorry we did everything we can\n                this._allFallbacksProcessed = true;\n                notifyErrors();\n                this.onErrorObservable.clear();\n                // Unbind mesh reference in fallbacks\n                if (this._fallbacks) {\n                    this._fallbacks.unBindMesh();\n                }\n            }\n        }\n        else {\n            this._allFallbacksProcessed = true;\n            // In case of error, without any prior successful compilation, let s notify observers\n            if (!previousPipelineContext) {\n                notifyErrors();\n            }\n        }\n    }\n    /**\n     * Checks if the effect is supported. (Must be called after compilation)\n     */\n    get isSupported() {\n        return this._compilationError === \"\";\n    }\n    /**\n     * Binds a texture to the engine to be used as output of the shader.\n     * @param channel Name of the output variable.\n     * @param texture Texture to bind.\n     * @internal\n     */\n    _bindTexture(channel, texture) {\n        this._engine._bindTexture(this._samplers[channel], texture, channel);\n    }\n    /**\n     * Sets a texture on the engine to be used in the shader.\n     * @param channel Name of the sampler variable.\n     * @param texture Texture to set.\n     */\n    setTexture(channel, texture) {\n        this._engine.setTexture(this._samplers[channel], this._uniforms[channel], texture, channel);\n    }\n    /**\n     * Sets an array of textures on the engine to be used in the shader.\n     * @param channel Name of the variable.\n     * @param textures Textures to set.\n     */\n    setTextureArray(channel, textures) {\n        const exName = channel + \"Ex\";\n        if (this._samplerList.indexOf(exName + \"0\") === -1) {\n            const initialPos = this._samplerList.indexOf(channel);\n            for (let index = 1; index < textures.length; index++) {\n                const currentExName = exName + (index - 1).toString();\n                this._samplerList.splice(initialPos + index, 0, currentExName);\n            }\n            // Reset every channels\n            let channelIndex = 0;\n            for (const key of this._samplerList) {\n                this._samplers[key] = channelIndex;\n                channelIndex += 1;\n            }\n        }\n        this._engine.setTextureArray(this._samplers[channel], this._uniforms[channel], textures, channel);\n    }\n    /**\n     * Binds a buffer to a uniform.\n     * @param buffer Buffer to bind.\n     * @param name Name of the uniform variable to bind to.\n     */\n    bindUniformBuffer(buffer, name) {\n        const bufferName = this._uniformBuffersNames[name];\n        if (bufferName === undefined || (Effect._BaseCache[bufferName] === buffer && this._engine._features.useUBOBindingCache)) {\n            return;\n        }\n        Effect._BaseCache[bufferName] = buffer;\n        this._engine.bindUniformBufferBase(buffer, bufferName, name);\n    }\n    /**\n     * Binds block to a uniform.\n     * @param blockName Name of the block to bind.\n     * @param index Index to bind.\n     */\n    bindUniformBlock(blockName, index) {\n        this._engine.bindUniformBlock(this._pipelineContext, blockName, index);\n    }\n    /**\n     * Sets an integer value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param value Value to be set.\n     * @returns this effect.\n     */\n    setInt(uniformName, value) {\n        this._pipelineContext.setInt(uniformName, value);\n        return this;\n    }\n    /**\n     * Sets an int2 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First int in int2.\n     * @param y Second int in int2.\n     * @returns this effect.\n     */\n    setInt2(uniformName, x, y) {\n        this._pipelineContext.setInt2(uniformName, x, y);\n        return this;\n    }\n    /**\n     * Sets an int3 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First int in int3.\n     * @param y Second int in int3.\n     * @param z Third int in int3.\n     * @returns this effect.\n     */\n    setInt3(uniformName, x, y, z) {\n        this._pipelineContext.setInt3(uniformName, x, y, z);\n        return this;\n    }\n    /**\n     * Sets an int4 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First int in int4.\n     * @param y Second int in int4.\n     * @param z Third int in int4.\n     * @param w Fourth int in int4.\n     * @returns this effect.\n     */\n    setInt4(uniformName, x, y, z, w) {\n        this._pipelineContext.setInt4(uniformName, x, y, z, w);\n        return this;\n    }\n    /**\n     * Sets an int array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setIntArray(uniformName, array) {\n        this._pipelineContext.setIntArray(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an int array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setIntArray2(uniformName, array) {\n        this._pipelineContext.setIntArray2(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an int array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setIntArray3(uniformName, array) {\n        this._pipelineContext.setIntArray3(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an int array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setIntArray4(uniformName, array) {\n        this._pipelineContext.setIntArray4(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an unsigned integer value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param value Value to be set.\n     * @returns this effect.\n     */\n    setUInt(uniformName, value) {\n        this._pipelineContext.setUInt(uniformName, value);\n        return this;\n    }\n    /**\n     * Sets an unsigned int2 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First unsigned int in uint2.\n     * @param y Second unsigned int in uint2.\n     * @returns this effect.\n     */\n    setUInt2(uniformName, x, y) {\n        this._pipelineContext.setUInt2(uniformName, x, y);\n        return this;\n    }\n    /**\n     * Sets an unsigned int3 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First unsigned int in uint3.\n     * @param y Second unsigned int in uint3.\n     * @param z Third unsigned int in uint3.\n     * @returns this effect.\n     */\n    setUInt3(uniformName, x, y, z) {\n        this._pipelineContext.setUInt3(uniformName, x, y, z);\n        return this;\n    }\n    /**\n     * Sets an unsigned int4 value on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First unsigned int in uint4.\n     * @param y Second unsigned int in uint4.\n     * @param z Third unsigned int in uint4.\n     * @param w Fourth unsigned int in uint4.\n     * @returns this effect.\n     */\n    setUInt4(uniformName, x, y, z, w) {\n        this._pipelineContext.setUInt4(uniformName, x, y, z, w);\n        return this;\n    }\n    /**\n     * Sets an unsigned int array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setUIntArray(uniformName, array) {\n        this._pipelineContext.setUIntArray(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an unsigned int array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setUIntArray2(uniformName, array) {\n        this._pipelineContext.setUIntArray2(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an unsigned int array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setUIntArray3(uniformName, array) {\n        this._pipelineContext.setUIntArray3(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an unsigned int array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setUIntArray4(uniformName, array) {\n        this._pipelineContext.setUIntArray4(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an float array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setFloatArray(uniformName, array) {\n        this._pipelineContext.setArray(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an float array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setFloatArray2(uniformName, array) {\n        this._pipelineContext.setArray2(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an float array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setFloatArray3(uniformName, array) {\n        this._pipelineContext.setArray3(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an float array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setFloatArray4(uniformName, array) {\n        this._pipelineContext.setArray4(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an array on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setArray(uniformName, array) {\n        this._pipelineContext.setArray(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an array 2 on a uniform variable. (Array is specified as single array eg. [1,2,3,4] will result in [[1,2],[3,4]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setArray2(uniformName, array) {\n        this._pipelineContext.setArray2(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an array 3 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6] will result in [[1,2,3],[4,5,6]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setArray3(uniformName, array) {\n        this._pipelineContext.setArray3(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets an array 4 on a uniform variable. (Array is specified as single array eg. [1,2,3,4,5,6,7,8] will result in [[1,2,3,4],[5,6,7,8]] in the shader)\n     * @param uniformName Name of the variable.\n     * @param array array to be set.\n     * @returns this effect.\n     */\n    setArray4(uniformName, array) {\n        this._pipelineContext.setArray4(uniformName, array);\n        return this;\n    }\n    /**\n     * Sets matrices on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param matrices matrices to be set.\n     * @returns this effect.\n     */\n    setMatrices(uniformName, matrices) {\n        this._pipelineContext.setMatrices(uniformName, matrices);\n        return this;\n    }\n    /**\n     * Sets matrix on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param matrix matrix to be set.\n     * @returns this effect.\n     */\n    setMatrix(uniformName, matrix) {\n        this._pipelineContext.setMatrix(uniformName, matrix);\n        return this;\n    }\n    /**\n     * Sets a 3x3 matrix on a uniform variable. (Specified as [1,2,3,4,5,6,7,8,9] will result in [1,2,3][4,5,6][7,8,9] matrix)\n     * @param uniformName Name of the variable.\n     * @param matrix matrix to be set.\n     * @returns this effect.\n     */\n    setMatrix3x3(uniformName, matrix) {\n        // the cast is ok because it is gl.uniformMatrix3fv() which is called at the end, and this function accepts Float32Array and Array<number>\n        this._pipelineContext.setMatrix3x3(uniformName, matrix);\n        return this;\n    }\n    /**\n     * Sets a 2x2 matrix on a uniform variable. (Specified as [1,2,3,4] will result in [1,2][3,4] matrix)\n     * @param uniformName Name of the variable.\n     * @param matrix matrix to be set.\n     * @returns this effect.\n     */\n    setMatrix2x2(uniformName, matrix) {\n        // the cast is ok because it is gl.uniformMatrix3fv() which is called at the end, and this function accepts Float32Array and Array<number>\n        this._pipelineContext.setMatrix2x2(uniformName, matrix);\n        return this;\n    }\n    /**\n     * Sets a float on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param value value to be set.\n     * @returns this effect.\n     */\n    setFloat(uniformName, value) {\n        this._pipelineContext.setFloat(uniformName, value);\n        return this;\n    }\n    /**\n     * Sets a boolean on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param bool value to be set.\n     * @returns this effect.\n     */\n    setBool(uniformName, bool) {\n        this._pipelineContext.setInt(uniformName, bool ? 1 : 0);\n        return this;\n    }\n    /**\n     * Sets a Vector2 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param vector2 vector2 to be set.\n     * @returns this effect.\n     */\n    setVector2(uniformName, vector2) {\n        this._pipelineContext.setVector2(uniformName, vector2);\n        return this;\n    }\n    /**\n     * Sets a float2 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First float in float2.\n     * @param y Second float in float2.\n     * @returns this effect.\n     */\n    setFloat2(uniformName, x, y) {\n        this._pipelineContext.setFloat2(uniformName, x, y);\n        return this;\n    }\n    /**\n     * Sets a Vector3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param vector3 Value to be set.\n     * @returns this effect.\n     */\n    setVector3(uniformName, vector3) {\n        this._pipelineContext.setVector3(uniformName, vector3);\n        return this;\n    }\n    /**\n     * Sets a float3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First float in float3.\n     * @param y Second float in float3.\n     * @param z Third float in float3.\n     * @returns this effect.\n     */\n    setFloat3(uniformName, x, y, z) {\n        this._pipelineContext.setFloat3(uniformName, x, y, z);\n        return this;\n    }\n    /**\n     * Sets a Vector4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param vector4 Value to be set.\n     * @returns this effect.\n     */\n    setVector4(uniformName, vector4) {\n        this._pipelineContext.setVector4(uniformName, vector4);\n        return this;\n    }\n    /**\n     * Sets a Quaternion on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param quaternion Value to be set.\n     * @returns this effect.\n     */\n    setQuaternion(uniformName, quaternion) {\n        this._pipelineContext.setQuaternion(uniformName, quaternion);\n        return this;\n    }\n    /**\n     * Sets a float4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param x First float in float4.\n     * @param y Second float in float4.\n     * @param z Third float in float4.\n     * @param w Fourth float in float4.\n     * @returns this effect.\n     */\n    setFloat4(uniformName, x, y, z, w) {\n        this._pipelineContext.setFloat4(uniformName, x, y, z, w);\n        return this;\n    }\n    /**\n     * Sets a Color3 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param color3 Value to be set.\n     * @returns this effect.\n     */\n    setColor3(uniformName, color3) {\n        this._pipelineContext.setColor3(uniformName, color3);\n        return this;\n    }\n    /**\n     * Sets a Color4 on a uniform variable.\n     * @param uniformName Name of the variable.\n     * @param color3 Value to be set.\n     * @param alpha Alpha value to be set.\n     * @returns this effect.\n     */\n    setColor4(uniformName, color3, alpha) {\n        this._pipelineContext.setColor4(uniformName, color3, alpha);\n        return this;\n    }\n    /**\n     * Sets a Color4 on a uniform variable\n     * @param uniformName defines the name of the variable\n     * @param color4 defines the value to be set\n     * @returns this effect.\n     */\n    setDirectColor4(uniformName, color4) {\n        this._pipelineContext.setDirectColor4(uniformName, color4);\n        return this;\n    }\n    /**\n     * Release all associated resources.\n     **/\n    dispose() {\n        if (this._pipelineContext) {\n            resetCachedPipeline(this._pipelineContext);\n        }\n        this._engine._releaseEffect(this);\n        this._isDisposed = true;\n    }\n    /**\n     * This function will add a new shader to the shader store\n     * @param name the name of the shader\n     * @param pixelShader optional pixel shader content\n     * @param vertexShader optional vertex shader content\n     * @param shaderLanguage the language the shader is written in (default: GLSL)\n     */\n    static RegisterShader(name, pixelShader, vertexShader, shaderLanguage = 0 /* ShaderLanguage.GLSL */) {\n        if (pixelShader) {\n            EngineShaderStore.GetShadersStore(shaderLanguage)[`${name}PixelShader`] = pixelShader;\n        }\n        if (vertexShader) {\n            EngineShaderStore.GetShadersStore(shaderLanguage)[`${name}VertexShader`] = vertexShader;\n        }\n    }\n    /**\n     * Resets the cache of effects.\n     */\n    static ResetCache() {\n        Effect._BaseCache = {};\n    }\n}\n/**\n * Enable logging of the shader code when a compilation error occurs\n */\nEffect.LogShaderCodeOnCompilationError = true;\nEffect._UniqueIdSeed = 0;\nEffect._BaseCache = {};\n/**\n * Store of each shader (The can be looked up using effect.key)\n */\nEffect.ShadersStore = EngineShaderStore.ShadersStore;\n/**\n * Store of each included file for a shader (The can be looked up using effect.key)\n */\nEffect.IncludesShadersStore = EngineShaderStore.IncludesShadersStore;\n","import { IsWindowObjectExist } from \"./domManagement.js\";\n/**\n * Class containing a set of static utilities functions for precision date\n */\nexport class PrecisionDate {\n    /**\n     * Gets either window.performance.now() if supported or Date.now() else\n     */\n    static get Now() {\n        if (IsWindowObjectExist() && window.performance && window.performance.now) {\n            return window.performance.now();\n        }\n        return Date.now();\n    }\n}\n","/**\n * @internal\n **/\nexport class DepthCullingState {\n    /**\n     * Initializes the state.\n     * @param reset\n     */\n    constructor(reset = true) {\n        this._isDepthTestDirty = false;\n        this._isDepthMaskDirty = false;\n        this._isDepthFuncDirty = false;\n        this._isCullFaceDirty = false;\n        this._isCullDirty = false;\n        this._isZOffsetDirty = false;\n        this._isFrontFaceDirty = false;\n        if (reset) {\n            this.reset();\n        }\n    }\n    get isDirty() {\n        return (this._isDepthFuncDirty ||\n            this._isDepthTestDirty ||\n            this._isDepthMaskDirty ||\n            this._isCullFaceDirty ||\n            this._isCullDirty ||\n            this._isZOffsetDirty ||\n            this._isFrontFaceDirty);\n    }\n    get zOffset() {\n        return this._zOffset;\n    }\n    set zOffset(value) {\n        if (this._zOffset === value) {\n            return;\n        }\n        this._zOffset = value;\n        this._isZOffsetDirty = true;\n    }\n    get zOffsetUnits() {\n        return this._zOffsetUnits;\n    }\n    set zOffsetUnits(value) {\n        if (this._zOffsetUnits === value) {\n            return;\n        }\n        this._zOffsetUnits = value;\n        this._isZOffsetDirty = true;\n    }\n    get cullFace() {\n        return this._cullFace;\n    }\n    set cullFace(value) {\n        if (this._cullFace === value) {\n            return;\n        }\n        this._cullFace = value;\n        this._isCullFaceDirty = true;\n    }\n    get cull() {\n        return this._cull;\n    }\n    set cull(value) {\n        if (this._cull === value) {\n            return;\n        }\n        this._cull = value;\n        this._isCullDirty = true;\n    }\n    get depthFunc() {\n        return this._depthFunc;\n    }\n    set depthFunc(value) {\n        if (this._depthFunc === value) {\n            return;\n        }\n        this._depthFunc = value;\n        this._isDepthFuncDirty = true;\n    }\n    get depthMask() {\n        return this._depthMask;\n    }\n    set depthMask(value) {\n        if (this._depthMask === value) {\n            return;\n        }\n        this._depthMask = value;\n        this._isDepthMaskDirty = true;\n    }\n    get depthTest() {\n        return this._depthTest;\n    }\n    set depthTest(value) {\n        if (this._depthTest === value) {\n            return;\n        }\n        this._depthTest = value;\n        this._isDepthTestDirty = true;\n    }\n    get frontFace() {\n        return this._frontFace;\n    }\n    set frontFace(value) {\n        if (this._frontFace === value) {\n            return;\n        }\n        this._frontFace = value;\n        this._isFrontFaceDirty = true;\n    }\n    reset() {\n        this._depthMask = true;\n        this._depthTest = true;\n        this._depthFunc = null;\n        this._cullFace = null;\n        this._cull = null;\n        this._zOffset = 0;\n        this._zOffsetUnits = 0;\n        this._frontFace = null;\n        this._isDepthTestDirty = true;\n        this._isDepthMaskDirty = true;\n        this._isDepthFuncDirty = false;\n        this._isCullFaceDirty = false;\n        this._isCullDirty = false;\n        this._isZOffsetDirty = true;\n        this._isFrontFaceDirty = false;\n    }\n    apply(gl) {\n        if (!this.isDirty) {\n            return;\n        }\n        // Cull\n        if (this._isCullDirty) {\n            if (this.cull) {\n                gl.enable(gl.CULL_FACE);\n            }\n            else {\n                gl.disable(gl.CULL_FACE);\n            }\n            this._isCullDirty = false;\n        }\n        // Cull face\n        if (this._isCullFaceDirty) {\n            gl.cullFace(this.cullFace);\n            this._isCullFaceDirty = false;\n        }\n        // Depth mask\n        if (this._isDepthMaskDirty) {\n            gl.depthMask(this.depthMask);\n            this._isDepthMaskDirty = false;\n        }\n        // Depth test\n        if (this._isDepthTestDirty) {\n            if (this.depthTest) {\n                gl.enable(gl.DEPTH_TEST);\n            }\n            else {\n                gl.disable(gl.DEPTH_TEST);\n            }\n            this._isDepthTestDirty = false;\n        }\n        // Depth func\n        if (this._isDepthFuncDirty) {\n            gl.depthFunc(this.depthFunc);\n            this._isDepthFuncDirty = false;\n        }\n        // zOffset\n        if (this._isZOffsetDirty) {\n            if (this.zOffset || this.zOffsetUnits) {\n                gl.enable(gl.POLYGON_OFFSET_FILL);\n                gl.polygonOffset(this.zOffset, this.zOffsetUnits);\n            }\n            else {\n                gl.disable(gl.POLYGON_OFFSET_FILL);\n            }\n            this._isZOffsetDirty = false;\n        }\n        // Front face\n        if (this._isFrontFaceDirty) {\n            gl.frontFace(this.frontFace);\n            this._isFrontFaceDirty = false;\n        }\n    }\n}\n","/**\n * @internal\n **/\nexport class StencilStateComposer {\n    get isDirty() {\n        return this._isStencilTestDirty || this._isStencilMaskDirty || this._isStencilFuncDirty || this._isStencilOpDirty;\n    }\n    get func() {\n        return this._func;\n    }\n    set func(value) {\n        if (this._func === value) {\n            return;\n        }\n        this._func = value;\n        this._isStencilFuncDirty = true;\n    }\n    get funcRef() {\n        return this._funcRef;\n    }\n    set funcRef(value) {\n        if (this._funcRef === value) {\n            return;\n        }\n        this._funcRef = value;\n        this._isStencilFuncDirty = true;\n    }\n    get funcMask() {\n        return this._funcMask;\n    }\n    set funcMask(value) {\n        if (this._funcMask === value) {\n            return;\n        }\n        this._funcMask = value;\n        this._isStencilFuncDirty = true;\n    }\n    get opStencilFail() {\n        return this._opStencilFail;\n    }\n    set opStencilFail(value) {\n        if (this._opStencilFail === value) {\n            return;\n        }\n        this._opStencilFail = value;\n        this._isStencilOpDirty = true;\n    }\n    get opDepthFail() {\n        return this._opDepthFail;\n    }\n    set opDepthFail(value) {\n        if (this._opDepthFail === value) {\n            return;\n        }\n        this._opDepthFail = value;\n        this._isStencilOpDirty = true;\n    }\n    get opStencilDepthPass() {\n        return this._opStencilDepthPass;\n    }\n    set opStencilDepthPass(value) {\n        if (this._opStencilDepthPass === value) {\n            return;\n        }\n        this._opStencilDepthPass = value;\n        this._isStencilOpDirty = true;\n    }\n    get mask() {\n        return this._mask;\n    }\n    set mask(value) {\n        if (this._mask === value) {\n            return;\n        }\n        this._mask = value;\n        this._isStencilMaskDirty = true;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(value) {\n        if (this._enabled === value) {\n            return;\n        }\n        this._enabled = value;\n        this._isStencilTestDirty = true;\n    }\n    constructor(reset = true) {\n        this._isStencilTestDirty = false;\n        this._isStencilMaskDirty = false;\n        this._isStencilFuncDirty = false;\n        this._isStencilOpDirty = false;\n        this.useStencilGlobalOnly = false;\n        if (reset) {\n            this.reset();\n        }\n    }\n    reset() {\n        this.stencilMaterial = undefined;\n        this.stencilGlobal?.reset();\n        this._isStencilTestDirty = true;\n        this._isStencilMaskDirty = true;\n        this._isStencilFuncDirty = true;\n        this._isStencilOpDirty = true;\n    }\n    apply(gl) {\n        if (!gl) {\n            return;\n        }\n        const stencilMaterialEnabled = !this.useStencilGlobalOnly && !!this.stencilMaterial?.enabled;\n        this.enabled = stencilMaterialEnabled ? this.stencilMaterial.enabled : this.stencilGlobal.enabled;\n        this.func = stencilMaterialEnabled ? this.stencilMaterial.func : this.stencilGlobal.func;\n        this.funcRef = stencilMaterialEnabled ? this.stencilMaterial.funcRef : this.stencilGlobal.funcRef;\n        this.funcMask = stencilMaterialEnabled ? this.stencilMaterial.funcMask : this.stencilGlobal.funcMask;\n        this.opStencilFail = stencilMaterialEnabled ? this.stencilMaterial.opStencilFail : this.stencilGlobal.opStencilFail;\n        this.opDepthFail = stencilMaterialEnabled ? this.stencilMaterial.opDepthFail : this.stencilGlobal.opDepthFail;\n        this.opStencilDepthPass = stencilMaterialEnabled ? this.stencilMaterial.opStencilDepthPass : this.stencilGlobal.opStencilDepthPass;\n        this.mask = stencilMaterialEnabled ? this.stencilMaterial.mask : this.stencilGlobal.mask;\n        if (!this.isDirty) {\n            return;\n        }\n        // Stencil test\n        if (this._isStencilTestDirty) {\n            if (this.enabled) {\n                gl.enable(gl.STENCIL_TEST);\n            }\n            else {\n                gl.disable(gl.STENCIL_TEST);\n            }\n            this._isStencilTestDirty = false;\n        }\n        // Stencil mask\n        if (this._isStencilMaskDirty) {\n            gl.stencilMask(this.mask);\n            this._isStencilMaskDirty = false;\n        }\n        // Stencil func\n        if (this._isStencilFuncDirty) {\n            gl.stencilFunc(this.func, this.funcRef, this.funcMask);\n            this._isStencilFuncDirty = false;\n        }\n        // Stencil op\n        if (this._isStencilOpDirty) {\n            gl.stencilOp(this.opStencilFail, this.opDepthFail, this.opStencilDepthPass);\n            this._isStencilOpDirty = false;\n        }\n    }\n}\n","\n/**\n * @internal\n **/\nexport class StencilState {\n    constructor() {\n        this.reset();\n    }\n    reset() {\n        this.enabled = false;\n        this.mask = 0xff;\n        this.func = StencilState.ALWAYS;\n        this.funcRef = 1;\n        this.funcMask = 0xff;\n        this.opStencilFail = StencilState.KEEP;\n        this.opDepthFail = StencilState.KEEP;\n        this.opStencilDepthPass = StencilState.REPLACE;\n    }\n    get stencilFunc() {\n        return this.func;\n    }\n    set stencilFunc(value) {\n        this.func = value;\n    }\n    get stencilFuncRef() {\n        return this.funcRef;\n    }\n    set stencilFuncRef(value) {\n        this.funcRef = value;\n    }\n    get stencilFuncMask() {\n        return this.funcMask;\n    }\n    set stencilFuncMask(value) {\n        this.funcMask = value;\n    }\n    get stencilOpStencilFail() {\n        return this.opStencilFail;\n    }\n    set stencilOpStencilFail(value) {\n        this.opStencilFail = value;\n    }\n    get stencilOpDepthFail() {\n        return this.opDepthFail;\n    }\n    set stencilOpDepthFail(value) {\n        this.opDepthFail = value;\n    }\n    get stencilOpStencilDepthPass() {\n        return this.opStencilDepthPass;\n    }\n    set stencilOpStencilDepthPass(value) {\n        this.opStencilDepthPass = value;\n    }\n    get stencilMask() {\n        return this.mask;\n    }\n    set stencilMask(value) {\n        this.mask = value;\n    }\n    get stencilTest() {\n        return this.enabled;\n    }\n    set stencilTest(value) {\n        this.enabled = value;\n    }\n}\n/** Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn */\nStencilState.ALWAYS = 519;\n/** Passed to stencilOperation to specify that stencil value must be kept */\nStencilState.KEEP = 7680;\n/** Passed to stencilOperation to specify that stencil value must be replaced */\nStencilState.REPLACE = 7681;\n","/**\n * @internal\n **/\nexport class AlphaState {\n    /**\n     * Initializes the state.\n     */\n    constructor() {\n        this._blendFunctionParameters = new Array(4);\n        this._blendEquationParameters = new Array(2);\n        this._blendConstants = new Array(4);\n        this._isBlendConstantsDirty = false;\n        this._alphaBlend = false;\n        this._isAlphaBlendDirty = false;\n        this._isBlendFunctionParametersDirty = false;\n        this._isBlendEquationParametersDirty = false;\n        this.reset();\n    }\n    get isDirty() {\n        return this._isAlphaBlendDirty || this._isBlendFunctionParametersDirty || this._isBlendEquationParametersDirty;\n    }\n    get alphaBlend() {\n        return this._alphaBlend;\n    }\n    set alphaBlend(value) {\n        if (this._alphaBlend === value) {\n            return;\n        }\n        this._alphaBlend = value;\n        this._isAlphaBlendDirty = true;\n    }\n    setAlphaBlendConstants(r, g, b, a) {\n        if (this._blendConstants[0] === r && this._blendConstants[1] === g && this._blendConstants[2] === b && this._blendConstants[3] === a) {\n            return;\n        }\n        this._blendConstants[0] = r;\n        this._blendConstants[1] = g;\n        this._blendConstants[2] = b;\n        this._blendConstants[3] = a;\n        this._isBlendConstantsDirty = true;\n    }\n    setAlphaBlendFunctionParameters(value0, value1, value2, value3) {\n        if (this._blendFunctionParameters[0] === value0 &&\n            this._blendFunctionParameters[1] === value1 &&\n            this._blendFunctionParameters[2] === value2 &&\n            this._blendFunctionParameters[3] === value3) {\n            return;\n        }\n        this._blendFunctionParameters[0] = value0;\n        this._blendFunctionParameters[1] = value1;\n        this._blendFunctionParameters[2] = value2;\n        this._blendFunctionParameters[3] = value3;\n        this._isBlendFunctionParametersDirty = true;\n    }\n    setAlphaEquationParameters(rgb, alpha) {\n        if (this._blendEquationParameters[0] === rgb && this._blendEquationParameters[1] === alpha) {\n            return;\n        }\n        this._blendEquationParameters[0] = rgb;\n        this._blendEquationParameters[1] = alpha;\n        this._isBlendEquationParametersDirty = true;\n    }\n    reset() {\n        this._alphaBlend = false;\n        this._blendFunctionParameters[0] = null;\n        this._blendFunctionParameters[1] = null;\n        this._blendFunctionParameters[2] = null;\n        this._blendFunctionParameters[3] = null;\n        this._blendEquationParameters[0] = null;\n        this._blendEquationParameters[1] = null;\n        this._blendConstants[0] = null;\n        this._blendConstants[1] = null;\n        this._blendConstants[2] = null;\n        this._blendConstants[3] = null;\n        this._isAlphaBlendDirty = true;\n        this._isBlendFunctionParametersDirty = false;\n        this._isBlendEquationParametersDirty = false;\n        this._isBlendConstantsDirty = false;\n    }\n    apply(gl) {\n        if (!this.isDirty) {\n            return;\n        }\n        // Alpha blend\n        if (this._isAlphaBlendDirty) {\n            if (this._alphaBlend) {\n                gl.enable(gl.BLEND);\n            }\n            else {\n                gl.disable(gl.BLEND);\n            }\n            this._isAlphaBlendDirty = false;\n        }\n        // Alpha function\n        if (this._isBlendFunctionParametersDirty) {\n            gl.blendFuncSeparate(this._blendFunctionParameters[0], this._blendFunctionParameters[1], this._blendFunctionParameters[2], this._blendFunctionParameters[3]);\n            this._isBlendFunctionParametersDirty = false;\n        }\n        // Alpha equation\n        if (this._isBlendEquationParametersDirty) {\n            gl.blendEquationSeparate(this._blendEquationParameters[0], this._blendEquationParameters[1]);\n            this._isBlendEquationParametersDirty = false;\n        }\n        // Constants\n        if (this._isBlendConstantsDirty) {\n            gl.blendColor(this._blendConstants[0], this._blendConstants[1], this._blendConstants[2], this._blendConstants[3]);\n            this._isBlendConstantsDirty = false;\n        }\n    }\n}\n","\n/**\n * Class used to store a texture sampler data\n */\nexport class TextureSampler {\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapU() {\n        return this._cachedWrapU;\n    }\n    set wrapU(value) {\n        this._cachedWrapU = value;\n    }\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapV() {\n        return this._cachedWrapV;\n    }\n    set wrapV(value) {\n        this._cachedWrapV = value;\n    }\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapR() {\n        return this._cachedWrapR;\n    }\n    set wrapR(value) {\n        this._cachedWrapR = value;\n    }\n    /**\n     * With compliant hardware and browser (supporting anisotropic filtering)\n     * this defines the level of anisotropic filtering in the texture.\n     * The higher the better but the slower.\n     */\n    get anisotropicFilteringLevel() {\n        return this._cachedAnisotropicFilteringLevel;\n    }\n    set anisotropicFilteringLevel(value) {\n        this._cachedAnisotropicFilteringLevel = value;\n    }\n    /**\n     * Gets or sets the comparison function (513, 514, etc). Set 0 to not use a comparison function\n     */\n    get comparisonFunction() {\n        return this._comparisonFunction;\n    }\n    set comparisonFunction(value) {\n        this._comparisonFunction = value;\n    }\n    /**\n     * Indicates to use the mip maps (if available on the texture).\n     * Thanks to this flag, you can instruct the sampler to not sample the mipmaps even if they exist (and if the sampling mode is set to a value that normally samples the mipmaps!)\n     */\n    get useMipMaps() {\n        return this._useMipMaps;\n    }\n    set useMipMaps(value) {\n        this._useMipMaps = value;\n    }\n    /**\n     * Creates a Sampler instance\n     */\n    constructor() {\n        /**\n         * Gets the sampling mode of the texture\n         */\n        this.samplingMode = -1;\n        this._useMipMaps = true;\n        /** @internal */\n        this._cachedWrapU = null;\n        /** @internal */\n        this._cachedWrapV = null;\n        /** @internal */\n        this._cachedWrapR = null;\n        /** @internal */\n        this._cachedAnisotropicFilteringLevel = null;\n        /** @internal */\n        this._comparisonFunction = 0;\n    }\n    /**\n     * Sets all the parameters of the sampler\n     * @param wrapU u address mode (default: TEXTURE_WRAP_ADDRESSMODE)\n     * @param wrapV v address mode (default: TEXTURE_WRAP_ADDRESSMODE)\n     * @param wrapR r address mode (default: TEXTURE_WRAP_ADDRESSMODE)\n     * @param anisotropicFilteringLevel anisotropic level (default: 1)\n     * @param samplingMode sampling mode (default: 2)\n     * @param comparisonFunction comparison function (default: 0 - no comparison function)\n     * @returns the current sampler instance\n     */\n    setParameters(wrapU = 1, wrapV = 1, wrapR = 1, anisotropicFilteringLevel = 1, samplingMode = 2, comparisonFunction = 0) {\n        this._cachedWrapU = wrapU;\n        this._cachedWrapV = wrapV;\n        this._cachedWrapR = wrapR;\n        this._cachedAnisotropicFilteringLevel = anisotropicFilteringLevel;\n        this.samplingMode = samplingMode;\n        this._comparisonFunction = comparisonFunction;\n        return this;\n    }\n    /**\n     * Compares this sampler with another one\n     * @param other sampler to compare with\n     * @returns true if the samplers have the same parametres, else false\n     */\n    compareSampler(other) {\n        return (this._cachedWrapU === other._cachedWrapU &&\n            this._cachedWrapV === other._cachedWrapV &&\n            this._cachedWrapR === other._cachedWrapR &&\n            this._cachedAnisotropicFilteringLevel === other._cachedAnisotropicFilteringLevel &&\n            this.samplingMode === other.samplingMode &&\n            this._comparisonFunction === other._comparisonFunction &&\n            this._useMipMaps === other._useMipMaps);\n    }\n}\n","import { Observable } from \"../../Misc/observable.js\";\nimport { TextureSampler } from \"./textureSampler.js\";\n/**\n * Defines the source of the internal texture\n */\nexport var InternalTextureSource;\n(function (InternalTextureSource) {\n    /**\n     * The source of the texture data is unknown\n     */\n    InternalTextureSource[InternalTextureSource[\"Unknown\"] = 0] = \"Unknown\";\n    /**\n     * Texture data comes from an URL\n     */\n    InternalTextureSource[InternalTextureSource[\"Url\"] = 1] = \"Url\";\n    /**\n     * Texture data is only used for temporary storage\n     */\n    InternalTextureSource[InternalTextureSource[\"Temp\"] = 2] = \"Temp\";\n    /**\n     * Texture data comes from raw data (ArrayBuffer)\n     */\n    InternalTextureSource[InternalTextureSource[\"Raw\"] = 3] = \"Raw\";\n    /**\n     * Texture content is dynamic (video or dynamic texture)\n     */\n    InternalTextureSource[InternalTextureSource[\"Dynamic\"] = 4] = \"Dynamic\";\n    /**\n     * Texture content is generated by rendering to it\n     */\n    InternalTextureSource[InternalTextureSource[\"RenderTarget\"] = 5] = \"RenderTarget\";\n    /**\n     * Texture content is part of a multi render target process\n     */\n    InternalTextureSource[InternalTextureSource[\"MultiRenderTarget\"] = 6] = \"MultiRenderTarget\";\n    /**\n     * Texture data comes from a cube data file\n     */\n    InternalTextureSource[InternalTextureSource[\"Cube\"] = 7] = \"Cube\";\n    /**\n     * Texture data comes from a raw cube data\n     */\n    InternalTextureSource[InternalTextureSource[\"CubeRaw\"] = 8] = \"CubeRaw\";\n    /**\n     * Texture data come from a prefiltered cube data file\n     */\n    InternalTextureSource[InternalTextureSource[\"CubePrefiltered\"] = 9] = \"CubePrefiltered\";\n    /**\n     * Texture content is raw 3D data\n     */\n    InternalTextureSource[InternalTextureSource[\"Raw3D\"] = 10] = \"Raw3D\";\n    /**\n     * Texture content is raw 2D array data\n     */\n    InternalTextureSource[InternalTextureSource[\"Raw2DArray\"] = 11] = \"Raw2DArray\";\n    /**\n     * Texture content is a depth/stencil texture\n     */\n    InternalTextureSource[InternalTextureSource[\"DepthStencil\"] = 12] = \"DepthStencil\";\n    /**\n     * Texture data comes from a raw cube data encoded with RGBD\n     */\n    InternalTextureSource[InternalTextureSource[\"CubeRawRGBD\"] = 13] = \"CubeRawRGBD\";\n    /**\n     * Texture content is a depth texture\n     */\n    InternalTextureSource[InternalTextureSource[\"Depth\"] = 14] = \"Depth\";\n})(InternalTextureSource || (InternalTextureSource = {}));\n/**\n * Class used to store data associated with WebGL texture data for the engine\n * This class should not be used directly\n */\nexport class InternalTexture extends TextureSampler {\n    /**\n     * Gets a boolean indicating if the texture uses mipmaps\n     * TODO implements useMipMaps as a separate setting from generateMipMaps\n     */\n    get useMipMaps() {\n        return this.generateMipMaps;\n    }\n    set useMipMaps(value) {\n        this.generateMipMaps = value;\n    }\n    /** Gets the unique id of the internal texture */\n    get uniqueId() {\n        return this._uniqueId;\n    }\n    /** @internal */\n    _setUniqueId(id) {\n        this._uniqueId = id;\n    }\n    /**\n     * Gets the Engine the texture belongs to.\n     * @returns The babylon engine\n     */\n    getEngine() {\n        return this._engine;\n    }\n    /**\n     * Gets the data source type of the texture\n     */\n    get source() {\n        return this._source;\n    }\n    /**\n     * Creates a new InternalTexture\n     * @param engine defines the engine to use\n     * @param source defines the type of data that will be used\n     * @param delayAllocation if the texture allocation should be delayed (default: false)\n     */\n    constructor(engine, source, delayAllocation = false) {\n        super();\n        /**\n         * Defines if the texture is ready\n         */\n        this.isReady = false;\n        /**\n         * Defines if the texture is a cube texture\n         */\n        this.isCube = false;\n        /**\n         * Defines if the texture contains 3D data\n         */\n        this.is3D = false;\n        /**\n         * Defines if the texture contains 2D array data\n         */\n        this.is2DArray = false;\n        /**\n         * Defines if the texture contains multiview data\n         */\n        this.isMultiview = false;\n        /**\n         * Gets the URL used to load this texture\n         */\n        this.url = \"\";\n        /**\n         * Gets a boolean indicating if the texture needs mipmaps generation\n         */\n        this.generateMipMaps = false;\n        /**\n         * Gets the number of samples used by the texture (WebGL2+ only)\n         */\n        this.samples = 0;\n        /**\n         * Gets the type of the texture (int, float...)\n         */\n        this.type = -1;\n        /**\n         * Gets the format of the texture (RGB, RGBA...)\n         */\n        this.format = -1;\n        /**\n         * Observable called when the texture is loaded\n         */\n        this.onLoadedObservable = new Observable();\n        /**\n         * Observable called when the texture load is raising an error\n         */\n        this.onErrorObservable = new Observable();\n        /**\n         * If this callback is defined it will be called instead of the default _rebuild function\n         */\n        this.onRebuildCallback = null;\n        /**\n         * Gets the width of the texture\n         */\n        this.width = 0;\n        /**\n         * Gets the height of the texture\n         */\n        this.height = 0;\n        /**\n         * Gets the depth of the texture\n         */\n        this.depth = 0;\n        /**\n         * Gets the initial width of the texture (It could be rescaled if the current system does not support non power of two textures)\n         */\n        this.baseWidth = 0;\n        /**\n         * Gets the initial height of the texture (It could be rescaled if the current system does not support non power of two textures)\n         */\n        this.baseHeight = 0;\n        /**\n         * Gets the initial depth of the texture (It could be rescaled if the current system does not support non power of two textures)\n         */\n        this.baseDepth = 0;\n        /**\n         * Gets a boolean indicating if the texture is inverted on Y axis\n         */\n        this.invertY = false;\n        // Private\n        /** @internal */\n        this._invertVScale = false;\n        /** @internal */\n        this._associatedChannel = -1;\n        /** @internal */\n        this._source = 0 /* InternalTextureSource.Unknown */;\n        /** @internal */\n        this._buffer = null;\n        /** @internal */\n        this._bufferView = null;\n        /** @internal */\n        this._bufferViewArray = null;\n        /** @internal */\n        this._bufferViewArrayArray = null;\n        /** @internal */\n        this._size = 0;\n        /** @internal */\n        this._extension = \"\";\n        /** @internal */\n        this._files = null;\n        /** @internal */\n        this._workingCanvas = null;\n        /** @internal */\n        this._workingContext = null;\n        /** @internal */\n        this._cachedCoordinatesMode = null;\n        /** @internal */\n        this._isDisabled = false;\n        /** @internal */\n        this._compression = null;\n        /** @internal */\n        this._sphericalPolynomial = null;\n        /** @internal */\n        this._sphericalPolynomialPromise = null;\n        /** @internal */\n        this._sphericalPolynomialComputed = false;\n        /** @internal */\n        this._lodGenerationScale = 0;\n        /** @internal */\n        this._lodGenerationOffset = 0;\n        /** @internal */\n        this._useSRGBBuffer = false;\n        /** @internal */\n        this._creationFlags = 0;\n        // The following three fields helps sharing generated fixed LODs for texture filtering\n        // In environment not supporting the textureLOD extension like EDGE. They are for internal use only.\n        // They are at the level of the gl texture to benefit from the cache.\n        /** @internal */\n        this._lodTextureHigh = null;\n        /** @internal */\n        this._lodTextureMid = null;\n        /** @internal */\n        this._lodTextureLow = null;\n        /** @internal */\n        this._isRGBD = false;\n        /** @internal */\n        this._linearSpecularLOD = false;\n        /** @internal */\n        this._irradianceTexture = null;\n        /** @internal */\n        this._hardwareTexture = null;\n        /** @internal */\n        this._maxLodLevel = null;\n        /** @internal */\n        this._references = 1;\n        /** @internal */\n        this._gammaSpace = null;\n        /** @internal */\n        this._premulAlpha = false;\n        /** @internal */\n        this._dynamicTextureSource = null;\n        this._engine = engine;\n        this._source = source;\n        this._uniqueId = InternalTexture._Counter++;\n        if (!delayAllocation) {\n            this._hardwareTexture = engine._createHardwareTexture();\n        }\n    }\n    /**\n     * Increments the number of references (ie. the number of Texture that point to it)\n     */\n    incrementReferences() {\n        this._references++;\n    }\n    /**\n     * Change the size of the texture (not the size of the content)\n     * @param width defines the new width\n     * @param height defines the new height\n     * @param depth defines the new depth (1 by default)\n     */\n    updateSize(width, height, depth = 1) {\n        this._engine.updateTextureDimensions(this, width, height, depth);\n        this.width = width;\n        this.height = height;\n        this.depth = depth;\n        this.baseWidth = width;\n        this.baseHeight = height;\n        this.baseDepth = depth;\n        this._size = width * height * depth;\n    }\n    /** @internal */\n    _rebuild() {\n        this.isReady = false;\n        this._cachedCoordinatesMode = null;\n        this._cachedWrapU = null;\n        this._cachedWrapV = null;\n        this._cachedWrapR = null;\n        this._cachedAnisotropicFilteringLevel = null;\n        if (this.onRebuildCallback) {\n            const data = this.onRebuildCallback(this);\n            const swapAndSetIsReady = (proxyInternalTexture) => {\n                proxyInternalTexture._swapAndDie(this, false);\n                this.isReady = data.isReady;\n            };\n            if (data.isAsync) {\n                data.proxy.then(swapAndSetIsReady);\n            }\n            else {\n                swapAndSetIsReady(data.proxy);\n            }\n            return;\n        }\n        let proxy;\n        switch (this.source) {\n            case 2 /* InternalTextureSource.Temp */:\n                break;\n            case 1 /* InternalTextureSource.Url */:\n                proxy = this._engine.createTexture(this._originalUrl ?? this.url, !this.generateMipMaps, this.invertY, null, this.samplingMode, \n                // Do not use Proxy here as it could be fully synchronous\n                // and proxy would be undefined.\n                (temp) => {\n                    temp._swapAndDie(this, false);\n                    this.isReady = true;\n                }, null, this._buffer, undefined, this.format, this._extension, undefined, undefined, undefined, this._useSRGBBuffer);\n                return;\n            case 3 /* InternalTextureSource.Raw */:\n                proxy = this._engine.createRawTexture(this._bufferView, this.baseWidth, this.baseHeight, this.format, this.generateMipMaps, this.invertY, this.samplingMode, this._compression, this.type, this._creationFlags, this._useSRGBBuffer);\n                proxy._swapAndDie(this, false);\n                this.isReady = true;\n                break;\n            case 10 /* InternalTextureSource.Raw3D */:\n                proxy = this._engine.createRawTexture3D(this._bufferView, this.baseWidth, this.baseHeight, this.baseDepth, this.format, this.generateMipMaps, this.invertY, this.samplingMode, this._compression, this.type);\n                proxy._swapAndDie(this, false);\n                this.isReady = true;\n                break;\n            case 11 /* InternalTextureSource.Raw2DArray */:\n                proxy = this._engine.createRawTexture2DArray(this._bufferView, this.baseWidth, this.baseHeight, this.baseDepth, this.format, this.generateMipMaps, this.invertY, this.samplingMode, this._compression, this.type);\n                proxy._swapAndDie(this, false);\n                this.isReady = true;\n                break;\n            case 4 /* InternalTextureSource.Dynamic */:\n                proxy = this._engine.createDynamicTexture(this.baseWidth, this.baseHeight, this.generateMipMaps, this.samplingMode);\n                proxy._swapAndDie(this, false);\n                if (this._dynamicTextureSource) {\n                    this._engine.updateDynamicTexture(this, this._dynamicTextureSource, this.invertY, this._premulAlpha, this.format, true);\n                }\n                // The engine will make sure to update content so no need to flag it as isReady = true\n                break;\n            case 7 /* InternalTextureSource.Cube */:\n                proxy = this._engine.createCubeTexture(this.url, null, this._files, !this.generateMipMaps, () => {\n                    proxy._swapAndDie(this, false);\n                    this.isReady = true;\n                }, null, this.format, this._extension, false, 0, 0, null, undefined, this._useSRGBBuffer, ArrayBuffer.isView(this._buffer) ? this._buffer : null);\n                return;\n            case 8 /* InternalTextureSource.CubeRaw */:\n                proxy = this._engine.createRawCubeTexture(this._bufferViewArray, this.width, this._originalFormat ?? this.format, this.type, this.generateMipMaps, this.invertY, this.samplingMode, this._compression);\n                proxy._swapAndDie(this, false);\n                this.isReady = true;\n                break;\n            case 13 /* InternalTextureSource.CubeRawRGBD */:\n                // This case is being handeled by the environment texture tools and is not a part of the rebuild process.\n                // To use CubeRawRGBD use updateRGBDAsync on the cube texture.\n                return;\n            case 9 /* InternalTextureSource.CubePrefiltered */:\n                proxy = this._engine.createPrefilteredCubeTexture(this.url, null, this._lodGenerationScale, this._lodGenerationOffset, (proxy) => {\n                    if (proxy) {\n                        proxy._swapAndDie(this, false);\n                    }\n                    this.isReady = true;\n                }, null, this.format, this._extension);\n                proxy._sphericalPolynomial = this._sphericalPolynomial;\n                return;\n            case 12 /* InternalTextureSource.DepthStencil */:\n            case 14 /* InternalTextureSource.Depth */: {\n                // Will be handled at the RenderTargetWrapper level\n                break;\n            }\n        }\n    }\n    /**\n     * @internal\n     */\n    _swapAndDie(target, swapAll = true) {\n        // TODO what about refcount on target?\n        this._hardwareTexture?.setUsage(target._source, this.generateMipMaps, this.is2DArray, this.isCube, this.is3D, this.width, this.height, this.depth);\n        target._hardwareTexture = this._hardwareTexture;\n        if (swapAll) {\n            target._isRGBD = this._isRGBD;\n        }\n        if (this._lodTextureHigh) {\n            if (target._lodTextureHigh) {\n                target._lodTextureHigh.dispose();\n            }\n            target._lodTextureHigh = this._lodTextureHigh;\n        }\n        if (this._lodTextureMid) {\n            if (target._lodTextureMid) {\n                target._lodTextureMid.dispose();\n            }\n            target._lodTextureMid = this._lodTextureMid;\n        }\n        if (this._lodTextureLow) {\n            if (target._lodTextureLow) {\n                target._lodTextureLow.dispose();\n            }\n            target._lodTextureLow = this._lodTextureLow;\n        }\n        if (this._irradianceTexture) {\n            if (target._irradianceTexture) {\n                target._irradianceTexture.dispose();\n            }\n            target._irradianceTexture = this._irradianceTexture;\n        }\n        const cache = this._engine.getLoadedTexturesCache();\n        let index = cache.indexOf(this);\n        if (index !== -1) {\n            cache.splice(index, 1);\n        }\n        index = cache.indexOf(target);\n        if (index === -1) {\n            cache.push(target);\n        }\n    }\n    /**\n     * Dispose the current allocated resources\n     */\n    dispose() {\n        this._references--;\n        this.onLoadedObservable.clear();\n        this.onErrorObservable.clear();\n        if (this._references === 0) {\n            this._engine._releaseTexture(this);\n            this._hardwareTexture = null;\n            this._dynamicTextureSource = null;\n        }\n    }\n}\n/** @internal */\nInternalTexture._Counter = 0;\n","import { EngineStore } from \"./engineStore.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { Effect } from \"../Materials/effect.js\";\nimport { PerformanceConfigurator } from \"./performanceConfigurator.js\";\nimport { PrecisionDate } from \"../Misc/precisionDate.js\";\nimport { DepthCullingState } from \"../States/depthCullingState.js\";\nimport { StencilStateComposer } from \"../States/stencilStateComposer.js\";\nimport { StencilState } from \"../States/stencilState.js\";\nimport { AlphaState } from \"../States/alphaCullingState.js\";\nimport { _WarnImport } from \"../Misc/devTools.js\";\nimport { InternalTexture } from \"../Materials/Textures/internalTexture.js\";\nimport { IsDocumentAvailable, IsNavigatorAvailable, IsWindowObjectExist } from \"../Misc/domManagement.js\";\n\nimport { Observable } from \"../Misc/observable.js\";\nimport { EngineFunctionContext, _loadFile } from \"./abstractEngine.functions.js\";\n/**\n * Queue a new function into the requested animation frame pool (ie. this function will be executed by the browser (or the javascript engine) for the next frame)\n * @param func - the function to be called\n * @param requester - the object that will request the next frame. Falls back to window.\n * @returns frame number\n */\nexport function QueueNewFrame(func, requester) {\n    // Note that there is kind of a typing issue here, as `setTimeout` might return something else than a number (NodeJs returns a NodeJS.Timeout object).\n    // Also if the global `requestAnimationFrame`'s returnType is number, `requester.requestPostAnimationFrame` and `requester.requestAnimationFrame` types\n    // are `any`.\n    if (!IsWindowObjectExist()) {\n        if (typeof requestAnimationFrame === \"function\") {\n            return requestAnimationFrame(func);\n        }\n    }\n    else {\n        const { requestAnimationFrame } = requester || window;\n        if (typeof requestAnimationFrame === \"function\") {\n            return requestAnimationFrame(func);\n        }\n    }\n    // fallback to the global `setTimeout`.\n    // In most cases (aka in the browser), `window` is the global object, so instead of calling `window.setTimeout` we could call the global `setTimeout`.\n    return setTimeout(func, 16);\n}\n/**\n * The parent class for specialized engines (WebGL, WebGPU)\n */\nexport class AbstractEngine {\n    /**\n     * Gets the current frame id\n     */\n    get frameId() {\n        return this._frameId;\n    }\n    /**\n     * Gets a boolean indicating if the engine runs in WebGPU or not.\n     */\n    get isWebGPU() {\n        return this._isWebGPU;\n    }\n    /**\n     * @internal\n     */\n    _getShaderProcessor(shaderLanguage) {\n        return this._shaderProcessor;\n    }\n    /**\n     * Gets the shader platform name used by the effects.\n     */\n    get shaderPlatformName() {\n        return this._shaderPlatformName;\n    }\n    _clearEmptyResources() {\n        this._emptyTexture = null;\n        this._emptyCubeTexture = null;\n        this._emptyTexture3D = null;\n        this._emptyTexture2DArray = null;\n    }\n    /**\n     * Gets or sets a boolean indicating if depth buffer should be reverse, going from far to near.\n     * This can provide greater z depth for distant objects.\n     */\n    get useReverseDepthBuffer() {\n        return this._useReverseDepthBuffer;\n    }\n    set useReverseDepthBuffer(useReverse) {\n        if (useReverse === this._useReverseDepthBuffer) {\n            return;\n        }\n        this._useReverseDepthBuffer = useReverse;\n        if (useReverse) {\n            this._depthCullingState.depthFunc = 518;\n        }\n        else {\n            this._depthCullingState.depthFunc = 515;\n        }\n    }\n    /**\n     * Enable or disable color writing\n     * @param enable defines the state to set\n     */\n    setColorWrite(enable) {\n        if (enable !== this._colorWrite) {\n            this._colorWriteChanged = true;\n            this._colorWrite = enable;\n        }\n    }\n    /**\n     * Gets a boolean indicating if color writing is enabled\n     * @returns the current color writing state\n     */\n    getColorWrite() {\n        return this._colorWrite;\n    }\n    /**\n     * Gets the depth culling state manager\n     */\n    get depthCullingState() {\n        return this._depthCullingState;\n    }\n    /**\n     * Gets the alpha state manager\n     */\n    get alphaState() {\n        return this._alphaState;\n    }\n    /**\n     * Gets the stencil state manager\n     */\n    get stencilState() {\n        return this._stencilState;\n    }\n    /**\n     * Gets the stencil state composer\n     */\n    get stencilStateComposer() {\n        return this._stencilStateComposer;\n    }\n    /** @internal */\n    _getGlobalDefines(defines) {\n        if (defines) {\n            if (this.isNDCHalfZRange) {\n                defines[\"IS_NDC_HALF_ZRANGE\"] = \"\";\n            }\n            else {\n                delete defines[\"IS_NDC_HALF_ZRANGE\"];\n            }\n            if (this.useReverseDepthBuffer) {\n                defines[\"USE_REVERSE_DEPTHBUFFER\"] = \"\";\n            }\n            else {\n                delete defines[\"USE_REVERSE_DEPTHBUFFER\"];\n            }\n            if (this.useExactSrgbConversions) {\n                defines[\"USE_EXACT_SRGB_CONVERSIONS\"] = \"\";\n            }\n            else {\n                delete defines[\"USE_EXACT_SRGB_CONVERSIONS\"];\n            }\n            return;\n        }\n        else {\n            let s = \"\";\n            if (this.isNDCHalfZRange) {\n                s += \"#define IS_NDC_HALF_ZRANGE\";\n            }\n            if (this.useReverseDepthBuffer) {\n                if (s) {\n                    s += \"\\n\";\n                }\n                s += \"#define USE_REVERSE_DEPTHBUFFER\";\n            }\n            if (this.useExactSrgbConversions) {\n                if (s) {\n                    s += \"\\n\";\n                }\n                s += \"#define USE_EXACT_SRGB_CONVERSIONS\";\n            }\n            return s;\n        }\n    }\n    _rebuildInternalTextures() {\n        const currentState = this._internalTexturesCache.slice(); // Do a copy because the rebuild will add proxies\n        for (const internalTexture of currentState) {\n            internalTexture._rebuild();\n        }\n    }\n    _rebuildRenderTargetWrappers() {\n        const currentState = this._renderTargetWrapperCache.slice(); // Do a copy because the rebuild will add proxies\n        for (const renderTargetWrapper of currentState) {\n            renderTargetWrapper._rebuild();\n        }\n    }\n    _rebuildEffects() {\n        for (const key in this._compiledEffects) {\n            const effect = this._compiledEffects[key];\n            effect._pipelineContext = null; // because _prepareEffect will try to dispose this pipeline before recreating it and that would lead to webgl errors\n            effect._prepareEffect();\n        }\n        Effect.ResetCache();\n    }\n    _rebuildGraphicsResources() {\n        // Ensure webgl and engine states are matching\n        this.wipeCaches(true);\n        // Rebuild effects\n        this._rebuildEffects();\n        this._rebuildComputeEffects?.();\n        // Note:\n        //  The call to _rebuildBuffers must be made before the call to _rebuildInternalTextures because in the process of _rebuildBuffers the buffers used by the post process managers will be rebuilt\n        //  and we may need to use the post process manager of the scene during _rebuildInternalTextures (in WebGL1, non-POT textures are rescaled using a post process + post process manager of the scene)\n        // Rebuild buffers\n        this._rebuildBuffers();\n        // Rebuild textures\n        this._rebuildInternalTextures();\n        // Rebuild textures\n        this._rebuildTextures();\n        // Rebuild textures\n        this._rebuildRenderTargetWrappers();\n        // Reset engine states after all the buffer/textures/... have been rebuilt\n        this.wipeCaches(true);\n    }\n    _flagContextRestored() {\n        Logger.Warn(this.name + \" context successfully restored.\");\n        this.onContextRestoredObservable.notifyObservers(this);\n        this._contextWasLost = false;\n    }\n    _restoreEngineAfterContextLost(initEngine) {\n        // Adding a timeout to avoid race condition at browser level\n        setTimeout(async () => {\n            this._clearEmptyResources();\n            const depthTest = this._depthCullingState.depthTest; // backup those values because the call to initEngine / wipeCaches will reset them\n            const depthFunc = this._depthCullingState.depthFunc;\n            const depthMask = this._depthCullingState.depthMask;\n            const stencilTest = this._stencilState.stencilTest;\n            // Rebuild context\n            await initEngine();\n            this._rebuildGraphicsResources();\n            this._depthCullingState.depthTest = depthTest;\n            this._depthCullingState.depthFunc = depthFunc;\n            this._depthCullingState.depthMask = depthMask;\n            this._stencilState.stencilTest = stencilTest;\n            this._flagContextRestored();\n        }, 0);\n    }\n    /** Gets a boolean indicating if the engine was disposed */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Enables or disables the snapshot rendering mode\n     * Note that the WebGL engine does not support snapshot rendering so setting the value won't have any effect for this engine\n     */\n    get snapshotRendering() {\n        return false;\n    }\n    set snapshotRendering(activate) {\n        // Do nothing\n    }\n    /**\n     * Gets or sets the snapshot rendering mode\n     */\n    get snapshotRenderingMode() {\n        return 0;\n    }\n    set snapshotRenderingMode(mode) { }\n    /**\n     * Returns the string \"AbstractEngine\"\n     * @returns \"AbstractEngine\"\n     */\n    getClassName() {\n        return \"AbstractEngine\";\n    }\n    /**\n     * Gets the default empty texture\n     */\n    get emptyTexture() {\n        if (!this._emptyTexture) {\n            this._emptyTexture = this.createRawTexture(new Uint8Array(4), 1, 1, 5, false, false, 1);\n        }\n        return this._emptyTexture;\n    }\n    /**\n     * Gets the default empty 3D texture\n     */\n    get emptyTexture3D() {\n        if (!this._emptyTexture3D) {\n            this._emptyTexture3D = this.createRawTexture3D(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n        }\n        return this._emptyTexture3D;\n    }\n    /**\n     * Gets the default empty 2D array texture\n     */\n    get emptyTexture2DArray() {\n        if (!this._emptyTexture2DArray) {\n            this._emptyTexture2DArray = this.createRawTexture2DArray(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n        }\n        return this._emptyTexture2DArray;\n    }\n    /**\n     * Gets the default empty cube texture\n     */\n    get emptyCubeTexture() {\n        if (!this._emptyCubeTexture) {\n            const faceData = new Uint8Array(4);\n            const cubeData = [faceData, faceData, faceData, faceData, faceData, faceData];\n            this._emptyCubeTexture = this.createRawCubeTexture(cubeData, 1, 5, 0, false, false, 1);\n        }\n        return this._emptyCubeTexture;\n    }\n    /**\n     * Gets the list of current active render loop functions\n     * @returns a read only array with the current render loop functions\n     */\n    get activeRenderLoops() {\n        return this._activeRenderLoops;\n    }\n    /**\n     * stop executing a render loop function and remove it from the execution array\n     * @param renderFunction defines the function to be removed. If not provided all functions will be removed.\n     */\n    stopRenderLoop(renderFunction) {\n        if (!renderFunction) {\n            this._activeRenderLoops.length = 0;\n            this._cancelFrame();\n            return;\n        }\n        const index = this._activeRenderLoops.indexOf(renderFunction);\n        if (index >= 0) {\n            this._activeRenderLoops.splice(index, 1);\n            if (this._activeRenderLoops.length == 0) {\n                this._cancelFrame();\n            }\n        }\n    }\n    _cancelFrame() {\n        if (this._frameHandler !== 0) {\n            const handlerToCancel = this._frameHandler;\n            this._frameHandler = 0;\n            if (!IsWindowObjectExist()) {\n                if (typeof cancelAnimationFrame === \"function\") {\n                    return cancelAnimationFrame(handlerToCancel);\n                }\n            }\n            else {\n                const { cancelAnimationFrame } = this.getHostWindow() || window;\n                if (typeof cancelAnimationFrame === \"function\") {\n                    return cancelAnimationFrame(handlerToCancel);\n                }\n            }\n            return clearTimeout(handlerToCancel);\n        }\n    }\n    /**\n     * Begin a new frame\n     */\n    beginFrame() {\n        this.onBeginFrameObservable.notifyObservers(this);\n    }\n    /**\n     * End the current frame\n     */\n    endFrame() {\n        this._frameId++;\n        this.onEndFrameObservable.notifyObservers(this);\n    }\n    /** @internal */\n    _renderLoop() {\n        // Reset the frame handler before rendering a frame to determine if a new frame has been queued.\n        this._frameHandler = 0;\n        if (!this._contextWasLost) {\n            let shouldRender = true;\n            if (this._isDisposed || (!this.renderEvenInBackground && this._windowIsBackground)) {\n                shouldRender = false;\n            }\n            if (shouldRender) {\n                // Start new frame\n                this.beginFrame();\n                // Child canvases\n                if (!this._renderViews()) {\n                    // Main frame\n                    this._renderFrame();\n                }\n                // Present\n                this.endFrame();\n            }\n        }\n        // The first condition prevents queuing another frame if we no longer have active render loops (e.g., if\n        // `stopRenderLoop` is called mid frame). The second condition prevents queuing another frame if one has\n        // already been queued (e.g., if `stopRenderLoop` and `runRenderLoop` is called mid frame).\n        if (this._activeRenderLoops.length > 0 && this._frameHandler === 0) {\n            this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n        }\n    }\n    /** @internal */\n    _renderFrame() {\n        for (let index = 0; index < this._activeRenderLoops.length; index++) {\n            const renderFunction = this._activeRenderLoops[index];\n            renderFunction();\n        }\n    }\n    /** @internal */\n    _renderViews() {\n        return false;\n    }\n    /**\n     * Can be used to override the current requestAnimationFrame requester.\n     * @internal\n     */\n    _queueNewFrame(bindedRenderFunction, requester) {\n        return QueueNewFrame(bindedRenderFunction, requester);\n    }\n    /**\n     * Register and execute a render loop. The engine can have more than one render function\n     * @param renderFunction defines the function to continuously execute\n     */\n    runRenderLoop(renderFunction) {\n        if (this._activeRenderLoops.indexOf(renderFunction) !== -1) {\n            return;\n        }\n        this._activeRenderLoops.push(renderFunction);\n        // On the first added function, start the render loop.\n        if (this._activeRenderLoops.length === 1 && this._frameHandler === 0) {\n            this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n        }\n    }\n    /**\n     * Gets a boolean indicating if depth testing is enabled\n     * @returns the current state\n     */\n    getDepthBuffer() {\n        return this._depthCullingState.depthTest;\n    }\n    /**\n     * Enable or disable depth buffering\n     * @param enable defines the state to set\n     */\n    setDepthBuffer(enable) {\n        this._depthCullingState.depthTest = enable;\n    }\n    /**\n     * Set the z offset Factor to apply to current rendering\n     * @param value defines the offset to apply\n     */\n    setZOffset(value) {\n        this._depthCullingState.zOffset = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Factor\n     * @returns the current zOffset Factor state\n     */\n    getZOffset() {\n        const zOffset = this._depthCullingState.zOffset;\n        return this.useReverseDepthBuffer ? -zOffset : zOffset;\n    }\n    /**\n     * Set the z offset Units to apply to current rendering\n     * @param value defines the offset to apply\n     */\n    setZOffsetUnits(value) {\n        this._depthCullingState.zOffsetUnits = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Units\n     * @returns the current zOffset Units state\n     */\n    getZOffsetUnits() {\n        const zOffsetUnits = this._depthCullingState.zOffsetUnits;\n        return this.useReverseDepthBuffer ? -zOffsetUnits : zOffsetUnits;\n    }\n    /**\n     * Gets host window\n     * @returns the host window object\n     */\n    getHostWindow() {\n        if (!IsWindowObjectExist()) {\n            return null;\n        }\n        if (this._renderingCanvas && this._renderingCanvas.ownerDocument && this._renderingCanvas.ownerDocument.defaultView) {\n            return this._renderingCanvas.ownerDocument.defaultView;\n        }\n        return window;\n    }\n    /**\n     * (WebGPU only) True (default) to be in compatibility mode, meaning rendering all existing scenes without artifacts (same rendering than WebGL).\n     * Setting the property to false will improve performances but may not work in some scenes if some precautions are not taken.\n     * See https://doc.babylonjs.com/setup/support/webGPU/webGPUOptimization/webGPUNonCompatibilityMode for more details\n     */\n    get compatibilityMode() {\n        return this._compatibilityMode;\n    }\n    set compatibilityMode(mode) {\n        // not supported in WebGL\n        this._compatibilityMode = true;\n    }\n    _rebuildTextures() {\n        for (const scene of this.scenes) {\n            scene._rebuildTextures();\n        }\n        for (const scene of this._virtualScenes) {\n            scene._rebuildTextures();\n        }\n    }\n    /**\n     * @internal\n     */\n    _releaseRenderTargetWrapper(rtWrapper) {\n        const index = this._renderTargetWrapperCache.indexOf(rtWrapper);\n        if (index !== -1) {\n            this._renderTargetWrapperCache.splice(index, 1);\n        }\n    }\n    /**\n     * Gets the current viewport\n     */\n    get currentViewport() {\n        return this._cachedViewport;\n    }\n    /**\n     * Set the WebGL's viewport\n     * @param viewport defines the viewport element to be used\n     * @param requiredWidth defines the width required for rendering. If not provided the rendering canvas' width is used\n     * @param requiredHeight defines the height required for rendering. If not provided the rendering canvas' height is used\n     */\n    setViewport(viewport, requiredWidth, requiredHeight) {\n        const width = requiredWidth || this.getRenderWidth();\n        const height = requiredHeight || this.getRenderHeight();\n        const x = viewport.x || 0;\n        const y = viewport.y || 0;\n        this._cachedViewport = viewport;\n        this._viewport(x * width, y * height, width * viewport.width, height * viewport.height);\n    }\n    /**\n     * Create an image to use with canvas\n     * @returns IImage interface\n     */\n    createCanvasImage() {\n        return document.createElement(\"img\");\n    }\n    /**\n     * Returns a string describing the current engine\n     */\n    get description() {\n        let description = this.name + this.version;\n        if (this._caps.parallelShaderCompile) {\n            description += \" - Parallel shader compilation\";\n        }\n        return description;\n    }\n    _createTextureBase(url, noMipmap, invertY, scene, samplingMode = 3, onLoad = null, onError = null, prepareTexture, prepareTextureProcess, buffer = null, fallback = null, format = null, forcedExtension = null, mimeType, loaderOptions, useSRGBBuffer) {\n        url = url || \"\";\n        const fromData = url.substr(0, 5) === \"data:\";\n        const fromBlob = url.substr(0, 5) === \"blob:\";\n        const isBase64 = fromData && url.indexOf(\";base64,\") !== -1;\n        const texture = fallback ? fallback : new InternalTexture(this, 1 /* InternalTextureSource.Url */);\n        if (texture !== fallback) {\n            texture.label = url.substring(0, 60); // default label, can be overriden by the caller\n        }\n        const originalUrl = url;\n        if (this._transformTextureUrl && !isBase64 && !fallback && !buffer) {\n            url = this._transformTextureUrl(url);\n        }\n        if (originalUrl !== url) {\n            texture._originalUrl = originalUrl;\n        }\n        // establish the file extension, if possible\n        const lastDot = url.lastIndexOf(\".\");\n        let extension = forcedExtension ? forcedExtension : lastDot > -1 ? url.substring(lastDot).toLowerCase() : \"\";\n        let loader = null;\n        // Remove query string\n        const queryStringIndex = extension.indexOf(\"?\");\n        if (queryStringIndex > -1) {\n            extension = extension.split(\"?\")[0];\n        }\n        for (const availableLoader of AbstractEngine._TextureLoaders) {\n            if (availableLoader.canLoad(extension, mimeType)) {\n                loader = availableLoader;\n                break;\n            }\n        }\n        if (scene) {\n            scene.addPendingData(texture);\n        }\n        texture.url = url;\n        texture.generateMipMaps = !noMipmap;\n        texture.samplingMode = samplingMode;\n        texture.invertY = invertY;\n        texture._useSRGBBuffer = this._getUseSRGBBuffer(!!useSRGBBuffer, noMipmap);\n        if (!this._doNotHandleContextLost) {\n            // Keep a link to the buffer only if we plan to handle context lost\n            texture._buffer = buffer;\n        }\n        let onLoadObserver = null;\n        if (onLoad && !fallback) {\n            onLoadObserver = texture.onLoadedObservable.add(onLoad);\n        }\n        if (!fallback) {\n            this._internalTexturesCache.push(texture);\n        }\n        const onInternalError = (message, exception) => {\n            if (scene) {\n                scene.removePendingData(texture);\n            }\n            if (url === originalUrl) {\n                if (onLoadObserver) {\n                    texture.onLoadedObservable.remove(onLoadObserver);\n                }\n                if (EngineStore.UseFallbackTexture && url !== EngineStore.FallbackTexture) {\n                    this._createTextureBase(EngineStore.FallbackTexture, noMipmap, texture.invertY, scene, samplingMode, null, onError, prepareTexture, prepareTextureProcess, buffer, texture);\n                }\n                message = (message || \"Unknown error\") + (EngineStore.UseFallbackTexture ? \" - Fallback texture was used\" : \"\");\n                texture.onErrorObservable.notifyObservers({ message, exception });\n                if (onError) {\n                    onError(message, exception);\n                }\n            }\n            else {\n                // fall back to the original url if the transformed url fails to load\n                Logger.Warn(`Failed to load ${url}, falling back to ${originalUrl}`);\n                this._createTextureBase(originalUrl, noMipmap, texture.invertY, scene, samplingMode, onLoad, onError, prepareTexture, prepareTextureProcess, buffer, texture, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n            }\n        };\n        // processing for non-image formats\n        if (loader) {\n            const callback = (data) => {\n                loader.loadData(data, texture, (width, height, loadMipmap, isCompressed, done, loadFailed) => {\n                    if (loadFailed) {\n                        onInternalError(\"TextureLoader failed to load data\");\n                    }\n                    else {\n                        prepareTexture(texture, extension, scene, { width, height }, texture.invertY, !loadMipmap, isCompressed, () => {\n                            done();\n                            return false;\n                        }, samplingMode);\n                    }\n                }, loaderOptions);\n            };\n            if (!buffer) {\n                this._loadFile(url, (data) => callback(new Uint8Array(data)), undefined, scene ? scene.offlineProvider : undefined, true, (request, exception) => {\n                    onInternalError(\"Unable to load \" + (request ? request.responseURL : url, exception));\n                });\n            }\n            else {\n                if (buffer instanceof ArrayBuffer) {\n                    callback(new Uint8Array(buffer));\n                }\n                else if (ArrayBuffer.isView(buffer)) {\n                    callback(buffer);\n                }\n                else {\n                    if (onError) {\n                        onError(\"Unable to load: only ArrayBuffer or ArrayBufferView is supported\", null);\n                    }\n                }\n            }\n        }\n        else {\n            const onload = (img) => {\n                if (fromBlob && !this._doNotHandleContextLost) {\n                    // We need to store the image if we need to rebuild the texture\n                    // in case of a webgl context lost\n                    texture._buffer = img;\n                }\n                prepareTexture(texture, extension, scene, img, texture.invertY, noMipmap, false, prepareTextureProcess, samplingMode);\n            };\n            // According to the WebGL spec section 6.10, ImageBitmaps must be inverted on creation.\n            // So, we pass imageOrientation to _FileToolsLoadImage() as it may create an ImageBitmap.\n            if (!fromData || isBase64) {\n                if (buffer && (typeof buffer.decoding === \"string\" || buffer.close)) {\n                    onload(buffer);\n                }\n                else {\n                    AbstractEngine._FileToolsLoadImage(url || \"\", onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? { imageOrientation: \"flipY\" } : undefined);\n                }\n            }\n            else if (typeof buffer === \"string\" || buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer) || buffer instanceof Blob) {\n                AbstractEngine._FileToolsLoadImage(buffer, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? { imageOrientation: \"flipY\" } : undefined);\n            }\n            else if (buffer) {\n                onload(buffer);\n            }\n        }\n        return texture;\n    }\n    _rebuildBuffers() {\n        // Uniforms\n        for (const uniformBuffer of this._uniformBuffers) {\n            uniformBuffer._rebuildAfterContextLost();\n        }\n    }\n    /** @internal */\n    get _shouldUseHighPrecisionShader() {\n        return !!(this._caps.highPrecisionShaderSupported && this._highPrecisionShadersAllowed);\n    }\n    /**\n     * Gets host document\n     * @returns the host document object\n     */\n    getHostDocument() {\n        if (this._renderingCanvas && this._renderingCanvas.ownerDocument) {\n            return this._renderingCanvas.ownerDocument;\n        }\n        return IsDocumentAvailable() ? document : null;\n    }\n    /**\n     * Gets the list of loaded textures\n     * @returns an array containing all loaded textures\n     */\n    getLoadedTexturesCache() {\n        return this._internalTexturesCache;\n    }\n    /**\n     * Clears the list of texture accessible through engine.\n     * This can help preventing texture load conflict due to name collision.\n     */\n    clearInternalTexturesCache() {\n        this._internalTexturesCache.length = 0;\n    }\n    /**\n     * Gets the object containing all engine capabilities\n     * @returns the EngineCapabilities object\n     */\n    getCaps() {\n        return this._caps;\n    }\n    /**\n     * Reset the texture cache to empty state\n     */\n    resetTextureCache() {\n        for (const key in this._boundTexturesCache) {\n            if (!Object.prototype.hasOwnProperty.call(this._boundTexturesCache, key)) {\n                continue;\n            }\n            this._boundTexturesCache[key] = null;\n        }\n        this._currentTextureChannel = -1;\n    }\n    /**\n     * Gets or sets the name of the engine\n     */\n    get name() {\n        return this._name;\n    }\n    set name(value) {\n        this._name = value;\n    }\n    /**\n     * Returns the current npm package of the sdk\n     */\n    // Not mixed with Version for tooling purpose.\n    static get NpmPackage() {\n        return \"babylonjs@7.16.0\";\n    }\n    /**\n     * Returns the current version of the framework\n     */\n    static get Version() {\n        return \"7.16.0\";\n    }\n    /**\n     * Gets the HTML canvas attached with the current webGL context\n     * @returns a HTML canvas\n     */\n    getRenderingCanvas() {\n        return this._renderingCanvas;\n    }\n    /**\n     * Gets the audio context specified in engine initialization options\n     * @returns an Audio Context\n     */\n    getAudioContext() {\n        return this._audioContext;\n    }\n    /**\n     * Gets the audio destination specified in engine initialization options\n     * @returns an audio destination node\n     */\n    getAudioDestination() {\n        return this._audioDestination;\n    }\n    /**\n     * Defines the hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @param level defines the level to use\n     */\n    setHardwareScalingLevel(level) {\n        this._hardwareScalingLevel = level;\n        this.resize();\n    }\n    /**\n     * Gets the current hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @returns a number indicating the current hardware scaling level\n     */\n    getHardwareScalingLevel() {\n        return this._hardwareScalingLevel;\n    }\n    /**\n     * Gets or sets a boolean indicating if resources should be retained to be able to handle context lost events\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#handling-webgl-context-lost\n     */\n    get doNotHandleContextLost() {\n        return this._doNotHandleContextLost;\n    }\n    set doNotHandleContextLost(value) {\n        this._doNotHandleContextLost = value;\n    }\n    /**\n     * Returns true if the stencil buffer has been enabled through the creation option of the context.\n     */\n    get isStencilEnable() {\n        return this._isStencilEnable;\n    }\n    /**\n     * Gets the options used for engine creation\n     * @returns EngineOptions object\n     */\n    getCreationOptions() {\n        return this._creationOptions;\n    }\n    /**\n     * Creates a new engine\n     * @param antialias defines whether anti-aliasing should be enabled. If undefined, it means that the underlying engine is free to enable it or not\n     * @param options defines further options to be sent to the creation context\n     * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)\n     */\n    constructor(antialias, options, adaptToDeviceRatio) {\n        // States\n        /** @internal */\n        this._colorWrite = true;\n        /** @internal */\n        this._colorWriteChanged = true;\n        /** @internal */\n        this._depthCullingState = new DepthCullingState();\n        /** @internal */\n        this._stencilStateComposer = new StencilStateComposer();\n        /** @internal */\n        this._stencilState = new StencilState();\n        /** @internal */\n        this._alphaState = new AlphaState();\n        /** @internal */\n        this._alphaMode = 1;\n        /** @internal */\n        this._alphaEquation = 0;\n        this._activeRequests = [];\n        /** @internal */\n        this._badOS = false;\n        /** @internal */\n        this._badDesktopOS = false;\n        this._compatibilityMode = true;\n        /** @internal */\n        this._internalTexturesCache = new Array();\n        /** @internal */\n        this._currentRenderTarget = null;\n        /** @internal */\n        this._boundTexturesCache = {};\n        /** @internal */\n        this._activeChannel = 0;\n        /** @internal */\n        this._currentTextureChannel = -1;\n        /** @internal */\n        this._viewportCached = { x: 0, y: 0, z: 0, w: 0 };\n        /** @internal */\n        this._isWebGPU = false;\n        /**\n         * Observable event triggered each time the canvas loses focus\n         */\n        this.onCanvasBlurObservable = new Observable();\n        /**\n         * Observable event triggered each time the canvas gains focus\n         */\n        this.onCanvasFocusObservable = new Observable();\n        /**\n         * Event raised when a new scene is created\n         */\n        this.onNewSceneAddedObservable = new Observable();\n        /**\n         * Observable event triggered each time the rendering canvas is resized\n         */\n        this.onResizeObservable = new Observable();\n        /**\n         * Observable event triggered each time the canvas receives pointerout event\n         */\n        this.onCanvasPointerOutObservable = new Observable();\n        /**\n         * Turn this value on if you want to pause FPS computation when in background\n         */\n        this.disablePerformanceMonitorInBackground = false;\n        /**\n         * Gets or sets a boolean indicating that vertex array object must be disabled even if they are supported\n         */\n        this.disableVertexArrayObjects = false;\n        /** @internal */\n        this._frameId = 0;\n        /**\n         * Gets information about the current host\n         */\n        this.hostInformation = {\n            isMobile: false,\n        };\n        /**\n         * Gets a boolean indicating if the engine is currently rendering in fullscreen mode\n         */\n        this.isFullscreen = false;\n        /**\n         * Gets or sets a boolean to enable/disable IndexedDB support and avoid XHR on .manifest\n         **/\n        this.enableOfflineSupport = false;\n        /**\n         * Gets or sets a boolean to enable/disable checking manifest if IndexedDB support is enabled (js will always consider the database is up to date)\n         **/\n        this.disableManifestCheck = false;\n        /**\n         * Gets or sets a boolean to enable/disable the context menu (right-click) from appearing on the main canvas\n         */\n        this.disableContextMenu = true;\n        /**\n         * Gets or sets the current render pass id\n         */\n        this.currentRenderPassId = 0;\n        /**\n         * Gets a boolean indicating if the pointer is currently locked\n         */\n        this.isPointerLock = false;\n        /**\n         * Gets the list of created postprocesses\n         */\n        this.postProcesses = [];\n        /** Gets or sets the tab index to set to the rendering canvas. 1 is the minimum value to set to be able to capture keyboard events */\n        this.canvasTabIndex = 1;\n        /** @internal */\n        this._contextWasLost = false;\n        this._useReverseDepthBuffer = false;\n        /**\n         * Indicates if the z range in NDC space is 0..1 (value: true) or -1..1 (value: false)\n         */\n        this.isNDCHalfZRange = false;\n        /**\n         * Indicates that the origin of the texture/framebuffer space is the bottom left corner. If false, the origin is top left\n         */\n        this.hasOriginBottomLeft = true;\n        /** @internal */\n        this._renderTargetWrapperCache = new Array();\n        /** @internal */\n        this._compiledEffects = {};\n        /** @internal */\n        this._isDisposed = false;\n        /**\n         * Gets the list of created scenes\n         */\n        this.scenes = [];\n        /** @internal */\n        this._virtualScenes = new Array();\n        /**\n         * Observable event triggered before each texture is initialized\n         */\n        this.onBeforeTextureInitObservable = new Observable();\n        /**\n         * Gets or sets a boolean indicating if the engine must keep rendering even if the window is not in foreground\n         */\n        this.renderEvenInBackground = true;\n        /**\n         * Gets or sets a boolean indicating that cache can be kept between frames\n         */\n        this.preventCacheWipeBetweenFrames = false;\n        /** @internal */\n        this._frameHandler = 0;\n        /** @internal */\n        this._activeRenderLoops = new Array();\n        /** @internal */\n        this._windowIsBackground = false;\n        /** @internal */\n        this._boundRenderFunction = () => this._renderLoop();\n        /**\n         * Observable raised when the engine is about to compile a shader\n         */\n        this.onBeforeShaderCompilationObservable = new Observable();\n        /**\n         * Observable raised when the engine has just compiled a shader\n         */\n        this.onAfterShaderCompilationObservable = new Observable();\n        /**\n         * Observable raised when the engine begins a new frame\n         */\n        this.onBeginFrameObservable = new Observable();\n        /**\n         * Observable raised when the engine ends the current frame\n         */\n        this.onEndFrameObservable = new Observable();\n        /** @internal */\n        this._transformTextureUrl = null;\n        /** @internal */\n        this._uniformBuffers = new Array();\n        /** @internal */\n        this._storageBuffers = new Array();\n        this._highPrecisionShadersAllowed = true;\n        // Lost context\n        /**\n         * Observable signaled when a context lost event is raised\n         */\n        this.onContextLostObservable = new Observable();\n        /**\n         * Observable signaled when a context restored event is raised\n         */\n        this.onContextRestoredObservable = new Observable();\n        /** @internal */\n        this._name = \"\";\n        /**\n         * Defines whether the engine has been created with the premultipliedAlpha option on or not.\n         */\n        this.premultipliedAlpha = true;\n        /**\n         * If set to true zooming in and out in the browser will rescale the hardware-scaling correctly.\n         */\n        this.adaptToDeviceRatio = false;\n        /** @internal */\n        this._lastDevicePixelRatio = 1.0;\n        /** @internal */\n        this._doNotHandleContextLost = false;\n        /**\n         * Gets or sets a boolean indicating if back faces must be culled. If false, front faces are culled instead (true by default)\n         * If non null, this takes precedence over the value from the material\n         */\n        this.cullBackFaces = null;\n        /** @internal */\n        this._renderPassNames = [\"main\"];\n        // FPS\n        this._fps = 60;\n        this._deltaTime = 0;\n        // Deterministic lockstepMaxSteps\n        /** @internal */\n        this._deterministicLockstep = false;\n        /** @internal */\n        this._lockstepMaxSteps = 4;\n        /** @internal */\n        this._timeStep = 1 / 60;\n        /**\n         * An event triggered when the engine is disposed.\n         */\n        this.onDisposeObservable = new Observable();\n        EngineStore.Instances.push(this);\n        this.startTime = PrecisionDate.Now;\n        this._stencilStateComposer.stencilGlobal = this._stencilState;\n        PerformanceConfigurator.SetMatrixPrecision(!!options.useHighPrecisionMatrix);\n        if (IsNavigatorAvailable() && navigator.userAgent) {\n            // Detect if we are running on a faulty buggy OS.\n            this._badOS = /iPad/i.test(navigator.userAgent) || /iPhone/i.test(navigator.userAgent);\n            // Detect if we are running on a faulty buggy desktop OS.\n            this._badDesktopOS = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        }\n        // Save this off for use in resize().\n        this.adaptToDeviceRatio = adaptToDeviceRatio ?? false;\n        options.antialias = antialias ?? options.antialias;\n        options.deterministicLockstep = options.deterministicLockstep ?? false;\n        options.lockstepMaxSteps = options.lockstepMaxSteps ?? 4;\n        options.timeStep = options.timeStep ?? 1 / 60;\n        options.audioEngine = options.audioEngine ?? true;\n        options.stencil = options.stencil ?? true;\n        this._audioContext = options.audioEngineOptions?.audioContext ?? null;\n        this._audioDestination = options.audioEngineOptions?.audioDestination ?? null;\n        this.premultipliedAlpha = options.premultipliedAlpha ?? true;\n        this._doNotHandleContextLost = !!options.doNotHandleContextLost;\n        this._isStencilEnable = options.stencil ? true : false;\n        this.useExactSrgbConversions = options.useExactSrgbConversions ?? false;\n        const devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n        const limitDeviceRatio = options.limitDeviceRatio || devicePixelRatio;\n        // Viewport\n        adaptToDeviceRatio = adaptToDeviceRatio || options.adaptToDeviceRatio || false;\n        this._hardwareScalingLevel = adaptToDeviceRatio ? 1.0 / Math.min(limitDeviceRatio, devicePixelRatio) : 1.0;\n        this._lastDevicePixelRatio = devicePixelRatio;\n        this._creationOptions = options;\n    }\n    /**\n     * Resize the view according to the canvas' size\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     */\n    resize(forceSetSize = false) {\n        let width;\n        let height;\n        // Re-query hardware scaling level to handle zoomed-in resizing.\n        if (this.adaptToDeviceRatio) {\n            const devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n            const changeRatio = this._lastDevicePixelRatio / devicePixelRatio;\n            this._lastDevicePixelRatio = devicePixelRatio;\n            this._hardwareScalingLevel *= changeRatio;\n        }\n        if (IsWindowObjectExist() && IsDocumentAvailable()) {\n            // make sure it is a Node object, and is a part of the document.\n            if (this._renderingCanvas) {\n                const boundingRect = this._renderingCanvas.getBoundingClientRect\n                    ? this._renderingCanvas.getBoundingClientRect()\n                    : {\n                        // fallback to last solution in case the function doesn't exist\n                        width: this._renderingCanvas.width * this._hardwareScalingLevel,\n                        height: this._renderingCanvas.height * this._hardwareScalingLevel,\n                    };\n                width = this._renderingCanvas.clientWidth || boundingRect.width || this._renderingCanvas.width || 100;\n                height = this._renderingCanvas.clientHeight || boundingRect.height || this._renderingCanvas.height || 100;\n            }\n            else {\n                width = window.innerWidth;\n                height = window.innerHeight;\n            }\n        }\n        else {\n            width = this._renderingCanvas ? this._renderingCanvas.width : 100;\n            height = this._renderingCanvas ? this._renderingCanvas.height : 100;\n        }\n        this.setSize(width / this._hardwareScalingLevel, height / this._hardwareScalingLevel, forceSetSize);\n    }\n    /**\n     * Force a specific size of the canvas\n     * @param width defines the new canvas' width\n     * @param height defines the new canvas' height\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     * @returns true if the size was changed\n     */\n    setSize(width, height, forceSetSize = false) {\n        if (!this._renderingCanvas) {\n            return false;\n        }\n        width = width | 0;\n        height = height | 0;\n        if (!forceSetSize && this._renderingCanvas.width === width && this._renderingCanvas.height === height) {\n            return false;\n        }\n        this._renderingCanvas.width = width;\n        this._renderingCanvas.height = height;\n        if (this.scenes) {\n            for (let index = 0; index < this.scenes.length; index++) {\n                const scene = this.scenes[index];\n                for (let camIndex = 0; camIndex < scene.cameras.length; camIndex++) {\n                    const cam = scene.cameras[camIndex];\n                    cam._currentRenderId = 0;\n                }\n            }\n            if (this.onResizeObservable.hasObservers()) {\n                this.onResizeObservable.notifyObservers(this);\n            }\n        }\n        return true;\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Creates a raw texture\n     * @param data defines the data to store in the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param format defines the format of the data\n     * @param generateMipMaps defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\n     * @param compression defines the compression used (null by default)\n     * @param type defines the type fo the data (Engine.TEXTURETYPE_UNSIGNED_INT by default)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns the raw texture inside an InternalTexture\n     */\n    createRawTexture(data, width, height, format, generateMipMaps, invertY, samplingMode, compression, type, creationFlags, useSRGBBuffer) {\n        throw _WarnImport(\"engine.rawTexture\");\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Creates a new raw cube texture\n     * @param data defines the array of data to use to create each face\n     * @param size defines the size of the textures\n     * @param format defines the format of the data\n     * @param type defines the type of the data (like Engine.TEXTURETYPE_UNSIGNED_INT)\n     * @param generateMipMaps  defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compression used (null by default)\n     * @returns the cube texture as an InternalTexture\n     */\n    createRawCubeTexture(data, size, format, type, generateMipMaps, invertY, samplingMode, compression) {\n        throw _WarnImport(\"engine.rawTexture\");\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Creates a new raw 3D texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the depth of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @returns a new raw 3D texture (stored in an InternalTexture)\n     */\n    createRawTexture3D(data, width, height, depth, format, generateMipMaps, invertY, samplingMode, compression, textureType, creationFlags) {\n        throw _WarnImport(\"engine.rawTexture\");\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Creates a new raw 2D array texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the number of layers of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @returns a new raw 2D array texture (stored in an InternalTexture)\n     */\n    createRawTexture2DArray(data, width, height, depth, format, generateMipMaps, invertY, samplingMode, compression, textureType, creationFlags) {\n        throw _WarnImport(\"engine.rawTexture\");\n    }\n    /**\n     * Shared initialization across engines types.\n     * @param canvas The canvas associated with this instance of the engine.\n     */\n    _sharedInit(canvas) {\n        this._renderingCanvas = canvas;\n    }\n    _setupMobileChecks() {\n        if (!(navigator && navigator.userAgent)) {\n            return;\n        }\n        // Function to check if running on mobile device\n        this._checkForMobile = () => {\n            const currentUA = navigator.userAgent;\n            this.hostInformation.isMobile =\n                currentUA.indexOf(\"Mobile\") !== -1 ||\n                    // Needed for iOS 13+ detection on iPad (inspired by solution from https://stackoverflow.com/questions/9038625/detect-if-device-is-ios)\n                    (currentUA.indexOf(\"Mac\") !== -1 && IsDocumentAvailable() && \"ontouchend\" in document);\n        };\n        // Set initial isMobile value\n        this._checkForMobile();\n        // Set up event listener to check when window is resized (used to get emulator activation to work properly)\n        if (IsWindowObjectExist()) {\n            window.addEventListener(\"resize\", this._checkForMobile);\n        }\n    }\n    /**\n     * creates and returns a new video element\n     * @param constraints video constraints\n     * @returns video element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    createVideoElement(constraints) {\n        return document.createElement(\"video\");\n    }\n    /**\n     * @internal\n     */\n    _reportDrawCall(numDrawCalls = 1) {\n        this._drawCalls?.addCount(numDrawCalls, false);\n    }\n    /**\n     * Gets the current framerate\n     * @returns a number representing the framerate\n     */\n    getFps() {\n        return this._fps;\n    }\n    /**\n     * Gets the time spent between current and previous frame\n     * @returns a number representing the delta time in ms\n     */\n    getDeltaTime() {\n        return this._deltaTime;\n    }\n    /**\n     * Gets a boolean indicating that the engine is running in deterministic lock step mode\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n     * @returns true if engine is in deterministic lock step mode\n     */\n    isDeterministicLockStep() {\n        return this._deterministicLockstep;\n    }\n    /**\n     * Gets the max steps when engine is running in deterministic lock step\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n     * @returns the max steps\n     */\n    getLockstepMaxSteps() {\n        return this._lockstepMaxSteps;\n    }\n    /**\n     * Returns the time in ms between steps when using deterministic lock step.\n     * @returns time step in (ms)\n     */\n    getTimeStep() {\n        return this._timeStep * 1000;\n    }\n    /**\n     * Engine abstraction for loading and creating an image bitmap from a given source string.\n     * @param imageSource source to load the image from.\n     * @param options An object that sets options for the image's extraction.\n     */\n    _createImageBitmapFromSource(imageSource, options) {\n        throw new Error(\"createImageBitmapFromSource is not implemented\");\n    }\n    /**\n     * Engine abstraction for createImageBitmap\n     * @param image source for image\n     * @param options An object that sets options for the image's extraction.\n     * @returns ImageBitmap\n     */\n    createImageBitmap(image, options) {\n        return createImageBitmap(image, options);\n    }\n    /**\n     * Resize an image and returns the image data as an uint8array\n     * @param image image to resize\n     * @param bufferWidth destination buffer width\n     * @param bufferHeight destination buffer height\n     */\n    resizeImageBitmap(image, bufferWidth, bufferHeight) {\n        throw new Error(\"resizeImageBitmap is not implemented\");\n    }\n    /**\n     * Get Font size information\n     * @param font font name\n     */\n    getFontOffset(font) {\n        throw new Error(\"getFontOffset is not implemented\");\n    }\n    static _CreateCanvas(width, height) {\n        if (typeof document === \"undefined\") {\n            return new OffscreenCanvas(width, height);\n        }\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = width;\n        canvas.height = height;\n        return canvas;\n    }\n    /**\n     * Create a canvas. This method is overridden by other engines\n     * @param width width\n     * @param height height\n     * @returns ICanvas interface\n     */\n    createCanvas(width, height) {\n        return AbstractEngine._CreateCanvas(width, height);\n    }\n    /**\n     * Loads an image as an HTMLImageElement.\n     * @param input url string, ArrayBuffer, or Blob to load\n     * @param onLoad callback called when the image successfully loads\n     * @param onError callback called when the image fails to load\n     * @param offlineProvider offline provider for caching\n     * @param mimeType optional mime type\n     * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\n     * @returns the HTMLImageElement of the loaded image\n     * @internal\n     */\n    static _FileToolsLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions) {\n        throw _WarnImport(\"FileTools\");\n    }\n    /**\n     * @internal\n     */\n    _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n        const request = _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n        this._activeRequests.push(request);\n        request.onCompleteObservable.add(() => {\n            const index = this._activeRequests.indexOf(request);\n            if (index !== -1) {\n                this._activeRequests.splice(index, 1);\n            }\n        });\n        return request;\n    }\n    /**\n     * Loads a file from a url\n     * @param url url to load\n     * @param onSuccess callback called when the file successfully loads\n     * @param onProgress callback called while file is loading (if the server supports this mode)\n     * @param offlineProvider defines the offline provider for caching\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @param onError callback called when the file fails to load\n     * @returns a file request object\n     * @internal\n     */\n    static _FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n        if (EngineFunctionContext.loadFile) {\n            return EngineFunctionContext.loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n        }\n        throw _WarnImport(\"FileTools\");\n    }\n    /**\n     * Dispose and release all associated resources\n     */\n    dispose() {\n        this.releaseEffects();\n        this._isDisposed = true;\n        this.stopRenderLoop();\n        // Empty texture\n        if (this._emptyTexture) {\n            this._releaseTexture(this._emptyTexture);\n            this._emptyTexture = null;\n        }\n        if (this._emptyCubeTexture) {\n            this._releaseTexture(this._emptyCubeTexture);\n            this._emptyCubeTexture = null;\n        }\n        this._renderingCanvas = null;\n        // Clear observables\n        if (this.onBeforeTextureInitObservable) {\n            this.onBeforeTextureInitObservable.clear();\n        }\n        // Release postProcesses\n        while (this.postProcesses.length) {\n            this.postProcesses[0].dispose();\n        }\n        // Release scenes\n        while (this.scenes.length) {\n            this.scenes[0].dispose();\n        }\n        while (this._virtualScenes.length) {\n            this._virtualScenes[0].dispose();\n        }\n        // Release effects\n        this.releaseComputeEffects?.();\n        Effect.ResetCache();\n        // Abort active requests\n        for (const request of this._activeRequests) {\n            request.abort();\n        }\n        this._boundRenderFunction = null;\n        this.onDisposeObservable.notifyObservers(this);\n        this.onDisposeObservable.clear();\n        this.onResizeObservable.clear();\n        this.onCanvasBlurObservable.clear();\n        this.onCanvasFocusObservable.clear();\n        this.onCanvasPointerOutObservable.clear();\n        this.onNewSceneAddedObservable.clear();\n        if (IsWindowObjectExist()) {\n            window.removeEventListener(\"resize\", this._checkForMobile);\n        }\n        // Remove from Instances\n        const index = EngineStore.Instances.indexOf(this);\n        if (index >= 0) {\n            EngineStore.Instances.splice(index, 1);\n        }\n        // no more engines left in the engine store? Notify!\n        if (!EngineStore.Instances.length) {\n            EngineStore.OnEnginesDisposedObservable.notifyObservers(this);\n            EngineStore.OnEnginesDisposedObservable.clear();\n        }\n        // Observables\n        this.onBeginFrameObservable.clear();\n        this.onEndFrameObservable.clear();\n    }\n    /**\n     * Method called to create the default loading screen.\n     * This can be overridden in your own app.\n     * @param canvas The rendering canvas element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static DefaultLoadingScreenFactory(canvas) {\n        throw _WarnImport(\"LoadingScreen\");\n    }\n}\n/** @internal */\nAbstractEngine._TextureLoaders = [];\n// eslint-disable-next-line @typescript-eslint/naming-convention\n/** @internal */\nAbstractEngine._RenderPassIdCounter = 0;\n/**\n * Method called to create the default rescale post process on each engine.\n */\nAbstractEngine._RescalePostProcessFactory = null;\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { WebRequest } from \"./webRequest.js\";\nimport { IsWindowObjectExist } from \"./domManagement.js\";\nimport { Observable } from \"./observable.js\";\nimport { FilesInputStore } from \"./filesInputStore.js\";\nimport { RetryStrategy } from \"./retryStrategy.js\";\nimport { BaseError, ErrorCodes, RuntimeError } from \"./error.js\";\nimport { DecodeBase64ToBinary, DecodeBase64ToString, EncodeArrayBufferToBase64 } from \"./stringTools.js\";\nimport { _functionContainer } from \"../Engines/Processors/shaderProcessor.js\";\nimport { EngineStore } from \"../Engines/engineStore.js\";\nimport { Logger } from \"./logger.js\";\nimport { TimingTools } from \"./timingTools.js\";\nimport { EngineFunctionContext } from \"../Engines/abstractEngine.functions.js\";\nimport { AbstractEngine } from \"../Engines/abstractEngine.js\";\nconst Base64DataUrlRegEx = new RegExp(/^data:([^,]+\\/[^,]+)?;base64,/i);\n/** @ignore */\nexport class LoadFileError extends RuntimeError {\n    /**\n     * Creates a new LoadFileError\n     * @param message defines the message of the error\n     * @param object defines the optional web request\n     */\n    constructor(message, object) {\n        super(message, ErrorCodes.LoadFileError);\n        this.name = \"LoadFileError\";\n        BaseError._setPrototypeOf(this, LoadFileError.prototype);\n        if (object instanceof WebRequest) {\n            this.request = object;\n        }\n        else {\n            this.file = object;\n        }\n    }\n}\n/** @ignore */\nexport class RequestFileError extends RuntimeError {\n    /**\n     * Creates a new LoadFileError\n     * @param message defines the message of the error\n     * @param request defines the optional web request\n     */\n    constructor(message, request) {\n        super(message, ErrorCodes.RequestFileError);\n        this.request = request;\n        this.name = \"RequestFileError\";\n        BaseError._setPrototypeOf(this, RequestFileError.prototype);\n    }\n}\n/** @ignore */\nexport class ReadFileError extends RuntimeError {\n    /**\n     * Creates a new ReadFileError\n     * @param message defines the message of the error\n     * @param file defines the optional file\n     */\n    constructor(message, file) {\n        super(message, ErrorCodes.ReadFileError);\n        this.file = file;\n        this.name = \"ReadFileError\";\n        BaseError._setPrototypeOf(this, ReadFileError.prototype);\n    }\n}\n/**\n * Removes unwanted characters from an url\n * @param url defines the url to clean\n * @returns the cleaned url\n */\nconst CleanUrl = (url) => {\n    url = url.replace(/#/gm, \"%23\");\n    return url;\n};\n/**\n * @internal\n */\nexport const FileToolsOptions = {\n    /**\n     * Gets or sets the retry strategy to apply when an error happens while loading an asset.\n     * When defining this function, return the wait time before trying again or return -1 to\n     * stop retrying and error out.\n     */\n    DefaultRetryStrategy: RetryStrategy.ExponentialBackoff(),\n    /**\n     * Gets or sets the base URL to use to load assets\n     */\n    BaseUrl: \"\",\n    /**\n     * Default behaviour for cors in the application.\n     * It can be a string if the expected behavior is identical in the entire app.\n     * Or a callback to be able to set it per url or on a group of them (in case of Video source for instance)\n     */\n    CorsBehavior: \"anonymous\",\n    /**\n     * Gets or sets a function used to pre-process url before using them to load assets\n     * @param url\n     * @returns the processed url\n     */\n    PreprocessUrl: (url) => url,\n    /**\n     * Gets or sets the base URL to use to load scripts\n     * Used for both JS and WASM\n     */\n    ScriptBaseUrl: \"\",\n    /**\n     * Gets or sets a function used to pre-process script url before using them to load.\n     * Used for both JS and WASM\n     * @param url defines the url to process\n     * @returns the processed url\n     */\n    ScriptPreprocessUrl: (url) => url,\n    /**\n     * Gets or sets a function used to clean the url before using it to load assets\n     * @param url defines the url to clean\n     * @returns the cleaned url\n     */\n    CleanUrl,\n};\n/**\n * Sets the cors behavior on a dom element. This will add the required Tools.CorsBehavior to the element.\n * @param url define the url we are trying\n * @param element define the dom element where to configure the cors policy\n * @internal\n */\nexport const SetCorsBehavior = (url, element) => {\n    if (url && url.indexOf(\"data:\") === 0) {\n        return;\n    }\n    if (FileToolsOptions.CorsBehavior) {\n        if (typeof FileToolsOptions.CorsBehavior === \"string\" || FileToolsOptions.CorsBehavior instanceof String) {\n            element.crossOrigin = FileToolsOptions.CorsBehavior;\n        }\n        else {\n            const result = FileToolsOptions.CorsBehavior(url);\n            if (result) {\n                element.crossOrigin = result;\n            }\n        }\n    }\n};\n/**\n * Loads an image as an HTMLImageElement.\n * @param input url string, ArrayBuffer, or Blob to load\n * @param onLoad callback called when the image successfully loads\n * @param onError callback called when the image fails to load\n * @param offlineProvider offline provider for caching\n * @param mimeType optional mime type\n * @param imageBitmapOptions\n * @returns the HTMLImageElement of the loaded image\n * @internal\n */\nexport const LoadImage = (input, onLoad, onError, offlineProvider, mimeType = \"\", imageBitmapOptions) => {\n    const engine = EngineStore.LastCreatedEngine;\n    if (typeof HTMLImageElement === \"undefined\" && !engine?._features.forceBitmapOverHTMLImageElement) {\n        onError(\"LoadImage is only supported in web or BabylonNative environments.\");\n        return null;\n    }\n    let url;\n    let usingObjectURL = false;\n    if (input instanceof ArrayBuffer || ArrayBuffer.isView(input)) {\n        if (typeof Blob !== \"undefined\" && typeof URL !== \"undefined\") {\n            url = URL.createObjectURL(new Blob([input], { type: mimeType }));\n            usingObjectURL = true;\n        }\n        else {\n            url = `data:${mimeType};base64,` + EncodeArrayBufferToBase64(input);\n        }\n    }\n    else if (input instanceof Blob) {\n        url = URL.createObjectURL(input);\n        usingObjectURL = true;\n    }\n    else {\n        url = FileToolsOptions.CleanUrl(input);\n        url = FileToolsOptions.PreprocessUrl(url);\n    }\n    const onErrorHandler = (exception) => {\n        if (onError) {\n            const inputText = url || input.toString();\n            onError(`Error while trying to load image: ${inputText.indexOf(\"http\") === 0 || inputText.length <= 128 ? inputText : inputText.slice(0, 128) + \"...\"}`, exception);\n        }\n    };\n    if (engine?._features.forceBitmapOverHTMLImageElement) {\n        LoadFile(url, (data) => {\n            engine\n                .createImageBitmap(new Blob([data], { type: mimeType }), { premultiplyAlpha: \"none\", ...imageBitmapOptions })\n                .then((imgBmp) => {\n                onLoad(imgBmp);\n                if (usingObjectURL) {\n                    URL.revokeObjectURL(url);\n                }\n            })\n                .catch((reason) => {\n                if (onError) {\n                    onError(\"Error while trying to load image: \" + input, reason);\n                }\n            });\n        }, undefined, offlineProvider || undefined, true, (request, exception) => {\n            onErrorHandler(exception);\n        });\n        return null;\n    }\n    const img = new Image();\n    SetCorsBehavior(url, img);\n    const handlersList = [];\n    const loadHandlersList = () => {\n        handlersList.forEach((handler) => {\n            handler.target.addEventListener(handler.name, handler.handler);\n        });\n    };\n    const unloadHandlersList = () => {\n        handlersList.forEach((handler) => {\n            handler.target.removeEventListener(handler.name, handler.handler);\n        });\n        handlersList.length = 0;\n    };\n    const loadHandler = () => {\n        unloadHandlersList();\n        onLoad(img);\n        // Must revoke the URL after calling onLoad to avoid security exceptions in\n        // certain scenarios (e.g. when hosted in vscode).\n        if (usingObjectURL && img.src) {\n            URL.revokeObjectURL(img.src);\n        }\n    };\n    const errorHandler = (err) => {\n        unloadHandlersList();\n        onErrorHandler(err);\n        if (usingObjectURL && img.src) {\n            URL.revokeObjectURL(img.src);\n        }\n    };\n    const cspHandler = (err) => {\n        if (err.blockedURI !== img.src) {\n            return;\n        }\n        unloadHandlersList();\n        const cspException = new Error(`CSP violation of policy ${err.effectiveDirective} ${err.blockedURI}. Current policy is ${err.originalPolicy}`);\n        EngineStore.UseFallbackTexture = false;\n        onErrorHandler(cspException);\n        if (usingObjectURL && img.src) {\n            URL.revokeObjectURL(img.src);\n        }\n        img.src = \"\";\n    };\n    handlersList.push({ target: img, name: \"load\", handler: loadHandler });\n    handlersList.push({ target: img, name: \"error\", handler: errorHandler });\n    handlersList.push({ target: document, name: \"securitypolicyviolation\", handler: cspHandler });\n    loadHandlersList();\n    const fromBlob = url.substring(0, 5) === \"blob:\";\n    const fromData = url.substring(0, 5) === \"data:\";\n    const noOfflineSupport = () => {\n        if (fromBlob || fromData || !WebRequest.IsCustomRequestAvailable) {\n            img.src = url;\n        }\n        else {\n            LoadFile(url, (data, _, contentType) => {\n                const type = !mimeType && contentType ? contentType : mimeType;\n                const blob = new Blob([data], { type });\n                const url = URL.createObjectURL(blob);\n                usingObjectURL = true;\n                img.src = url;\n            }, undefined, offlineProvider || undefined, true, (_request, exception) => {\n                onErrorHandler(exception);\n            });\n        }\n    };\n    const loadFromOfflineSupport = () => {\n        if (offlineProvider) {\n            offlineProvider.loadImage(url, img);\n        }\n    };\n    if (!fromBlob && !fromData && offlineProvider && offlineProvider.enableTexturesOffline) {\n        offlineProvider.open(loadFromOfflineSupport, noOfflineSupport);\n    }\n    else {\n        if (url.indexOf(\"file:\") !== -1) {\n            const textureName = decodeURIComponent(url.substring(5).toLowerCase());\n            if (FilesInputStore.FilesToLoad[textureName] && typeof URL !== \"undefined\") {\n                try {\n                    let blobURL;\n                    try {\n                        blobURL = URL.createObjectURL(FilesInputStore.FilesToLoad[textureName]);\n                    }\n                    catch (ex) {\n                        // Chrome doesn't support oneTimeOnly parameter\n                        blobURL = URL.createObjectURL(FilesInputStore.FilesToLoad[textureName]);\n                    }\n                    img.src = blobURL;\n                    usingObjectURL = true;\n                }\n                catch (e) {\n                    img.src = \"\";\n                }\n                return img;\n            }\n        }\n        noOfflineSupport();\n    }\n    return img;\n};\n/**\n * Reads a file from a File object\n * @param file defines the file to load\n * @param onSuccess defines the callback to call when data is loaded\n * @param onProgress defines the callback to call during loading process\n * @param useArrayBuffer defines a boolean indicating that data must be returned as an ArrayBuffer\n * @param onError defines the callback to call when an error occurs\n * @returns a file request object\n * @internal\n */\nexport const ReadFile = (file, onSuccess, onProgress, useArrayBuffer, onError) => {\n    const reader = new FileReader();\n    const fileRequest = {\n        onCompleteObservable: new Observable(),\n        abort: () => reader.abort(),\n    };\n    reader.onloadend = () => fileRequest.onCompleteObservable.notifyObservers(fileRequest);\n    if (onError) {\n        reader.onerror = () => {\n            onError(new ReadFileError(`Unable to read ${file.name}`, file));\n        };\n    }\n    reader.onload = (e) => {\n        //target doesn't have result from ts 1.3\n        onSuccess(e.target[\"result\"]);\n    };\n    if (onProgress) {\n        reader.onprogress = onProgress;\n    }\n    if (!useArrayBuffer) {\n        // Asynchronous read\n        reader.readAsText(file);\n    }\n    else {\n        reader.readAsArrayBuffer(file);\n    }\n    return fileRequest;\n};\n/**\n * Loads a file from a url, a data url, or a file url\n * @param fileOrUrl file, url, data url, or file url to load\n * @param onSuccess callback called when the file successfully loads\n * @param onProgress callback called while file is loading (if the server supports this mode)\n * @param offlineProvider defines the offline provider for caching\n * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n * @param onError callback called when the file fails to load\n * @param onOpened\n * @returns a file request object\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const LoadFile = (fileOrUrl, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError, onOpened) => {\n    if (fileOrUrl.name) {\n        return ReadFile(fileOrUrl, onSuccess, onProgress, useArrayBuffer, onError\n            ? (error) => {\n                onError(undefined, error);\n            }\n            : undefined);\n    }\n    const url = fileOrUrl;\n    // If file and file input are set\n    if (url.indexOf(\"file:\") !== -1) {\n        let fileName = decodeURIComponent(url.substring(5).toLowerCase());\n        if (fileName.indexOf(\"./\") === 0) {\n            fileName = fileName.substring(2);\n        }\n        const file = FilesInputStore.FilesToLoad[fileName];\n        if (file) {\n            return ReadFile(file, onSuccess, onProgress, useArrayBuffer, onError ? (error) => onError(undefined, new LoadFileError(error.message, error.file)) : undefined);\n        }\n    }\n    // For a Base64 Data URL\n    const { match, type } = TestBase64DataUrl(url);\n    if (match) {\n        const fileRequest = {\n            onCompleteObservable: new Observable(),\n            abort: () => () => { },\n        };\n        try {\n            const data = useArrayBuffer ? DecodeBase64UrlToBinary(url) : DecodeBase64UrlToString(url);\n            onSuccess(data, undefined, type);\n        }\n        catch (error) {\n            if (onError) {\n                onError(undefined, error);\n            }\n            else {\n                Logger.Error(error.message || \"Failed to parse the Data URL\");\n            }\n        }\n        TimingTools.SetImmediate(() => {\n            fileRequest.onCompleteObservable.notifyObservers(fileRequest);\n        });\n        return fileRequest;\n    }\n    return RequestFile(url, (data, request) => {\n        onSuccess(data, request?.responseURL, request?.getResponseHeader(\"content-type\"));\n    }, onProgress, offlineProvider, useArrayBuffer, onError\n        ? (error) => {\n            onError(error.request, new LoadFileError(error.message, error.request));\n        }\n        : undefined, onOpened);\n};\n/**\n * Loads a file from a url\n * @param url url to load\n * @param onSuccess callback called when the file successfully loads\n * @param onProgress callback called while file is loading (if the server supports this mode)\n * @param offlineProvider defines the offline provider for caching\n * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n * @param onError callback called when the file fails to load\n * @param onOpened callback called when the web request is opened\n * @returns a file request object\n * @internal\n */\nexport const RequestFile = (url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError, onOpened) => {\n    url = FileToolsOptions.CleanUrl(url);\n    url = FileToolsOptions.PreprocessUrl(url);\n    const loadUrl = FileToolsOptions.BaseUrl + url;\n    let aborted = false;\n    const fileRequest = {\n        onCompleteObservable: new Observable(),\n        abort: () => (aborted = true),\n    };\n    const requestFile = () => {\n        let request = new WebRequest();\n        let retryHandle = null;\n        let onReadyStateChange;\n        const unbindEvents = () => {\n            if (!request) {\n                return;\n            }\n            if (onProgress) {\n                request.removeEventListener(\"progress\", onProgress);\n            }\n            if (onReadyStateChange) {\n                request.removeEventListener(\"readystatechange\", onReadyStateChange);\n            }\n            request.removeEventListener(\"loadend\", onLoadEnd);\n        };\n        let onLoadEnd = () => {\n            unbindEvents();\n            fileRequest.onCompleteObservable.notifyObservers(fileRequest);\n            fileRequest.onCompleteObservable.clear();\n            onProgress = undefined;\n            onReadyStateChange = null;\n            onLoadEnd = null;\n            onError = undefined;\n            onOpened = undefined;\n            onSuccess = undefined;\n        };\n        fileRequest.abort = () => {\n            aborted = true;\n            if (onLoadEnd) {\n                onLoadEnd();\n            }\n            if (request && request.readyState !== (XMLHttpRequest.DONE || 4)) {\n                request.abort();\n            }\n            if (retryHandle !== null) {\n                clearTimeout(retryHandle);\n                retryHandle = null;\n            }\n            request = null;\n        };\n        const handleError = (error) => {\n            const message = error.message || \"Unknown error\";\n            if (onError && request) {\n                onError(new RequestFileError(message, request));\n            }\n            else {\n                Logger.Error(message);\n            }\n        };\n        const retryLoop = (retryIndex) => {\n            if (!request) {\n                return;\n            }\n            request.open(\"GET\", loadUrl);\n            if (onOpened) {\n                try {\n                    onOpened(request);\n                }\n                catch (e) {\n                    handleError(e);\n                    return;\n                }\n            }\n            if (useArrayBuffer) {\n                request.responseType = \"arraybuffer\";\n            }\n            if (onProgress) {\n                request.addEventListener(\"progress\", onProgress);\n            }\n            if (onLoadEnd) {\n                request.addEventListener(\"loadend\", onLoadEnd);\n            }\n            onReadyStateChange = () => {\n                if (aborted || !request) {\n                    return;\n                }\n                // In case of undefined state in some browsers.\n                if (request.readyState === (XMLHttpRequest.DONE || 4)) {\n                    // Some browsers have issues where onreadystatechange can be called multiple times with the same value.\n                    if (onReadyStateChange) {\n                        request.removeEventListener(\"readystatechange\", onReadyStateChange);\n                    }\n                    if ((request.status >= 200 && request.status < 300) || (request.status === 0 && (!IsWindowObjectExist() || IsFileURL()))) {\n                        try {\n                            if (onSuccess) {\n                                onSuccess(useArrayBuffer ? request.response : request.responseText, request);\n                            }\n                        }\n                        catch (e) {\n                            handleError(e);\n                        }\n                        return;\n                    }\n                    const retryStrategy = FileToolsOptions.DefaultRetryStrategy;\n                    if (retryStrategy) {\n                        const waitTime = retryStrategy(loadUrl, request, retryIndex);\n                        if (waitTime !== -1) {\n                            // Prevent the request from completing for retry.\n                            unbindEvents();\n                            request = new WebRequest();\n                            retryHandle = setTimeout(() => retryLoop(retryIndex + 1), waitTime);\n                            return;\n                        }\n                    }\n                    const error = new RequestFileError(\"Error status: \" + request.status + \" \" + request.statusText + \" - Unable to load \" + loadUrl, request);\n                    if (onError) {\n                        onError(error);\n                    }\n                }\n            };\n            request.addEventListener(\"readystatechange\", onReadyStateChange);\n            request.send();\n        };\n        retryLoop(0);\n    };\n    // Caching all files\n    if (offlineProvider && offlineProvider.enableSceneOffline) {\n        const noOfflineSupport = (request) => {\n            if (request && request.status > 400) {\n                if (onError) {\n                    onError(request);\n                }\n            }\n            else {\n                requestFile();\n            }\n        };\n        const loadFromOfflineSupport = () => {\n            // TODO: database needs to support aborting and should return a IFileRequest\n            if (offlineProvider) {\n                offlineProvider.loadFile(FileToolsOptions.BaseUrl + url, (data) => {\n                    if (!aborted && onSuccess) {\n                        onSuccess(data);\n                    }\n                    fileRequest.onCompleteObservable.notifyObservers(fileRequest);\n                }, onProgress\n                    ? (event) => {\n                        if (!aborted && onProgress) {\n                            onProgress(event);\n                        }\n                    }\n                    : undefined, noOfflineSupport, useArrayBuffer);\n            }\n        };\n        offlineProvider.open(loadFromOfflineSupport, noOfflineSupport);\n    }\n    else {\n        requestFile();\n    }\n    return fileRequest;\n};\n/**\n * Checks if the loaded document was accessed via `file:`-Protocol.\n * @returns boolean\n * @internal\n */\nexport const IsFileURL = () => {\n    return typeof location !== \"undefined\" && location.protocol === \"file:\";\n};\n/**\n * Test if the given uri is a valid base64 data url\n * @param uri The uri to test\n * @returns True if the uri is a base64 data url or false otherwise\n * @internal\n */\nexport const IsBase64DataUrl = (uri) => {\n    return Base64DataUrlRegEx.test(uri);\n};\nexport const TestBase64DataUrl = (uri) => {\n    const results = Base64DataUrlRegEx.exec(uri);\n    if (results === null || results.length === 0) {\n        return { match: false, type: \"\" };\n    }\n    else {\n        const type = results[0].replace(\"data:\", \"\").replace(\"base64,\", \"\");\n        return { match: true, type };\n    }\n};\n/**\n * Decode the given base64 uri.\n * @param uri The uri to decode\n * @returns The decoded base64 data.\n * @internal\n */\nexport function DecodeBase64UrlToBinary(uri) {\n    return DecodeBase64ToBinary(uri.split(\",\")[1]);\n}\n/**\n * Decode the given base64 uri into a UTF-8 encoded string.\n * @param uri The uri to decode\n * @returns The decoded base64 data.\n * @internal\n */\nexport const DecodeBase64UrlToString = (uri) => {\n    return DecodeBase64ToString(uri.split(\",\")[1]);\n};\n/**\n * This will be executed automatically for UMD and es5.\n * If esm dev wants the side effects to execute they will have to run it manually\n * Once we build native modules those need to be exported.\n * @internal\n */\nconst initSideEffects = () => {\n    AbstractEngine._FileToolsLoadImage = LoadImage;\n    EngineFunctionContext.loadFile = LoadFile;\n    _functionContainer.loadFile = LoadFile;\n};\ninitSideEffects();\n// deprecated\n/**\n * FileTools defined as any.\n * This should not be imported or used in future releases or in any module in the framework\n * @internal\n * @deprecated import the needed function from fileTools.ts\n */\nexport let FileTools;\n/**\n * @internal\n */\nexport const _injectLTSFileTools = (DecodeBase64UrlToBinary, DecodeBase64UrlToString, FileToolsOptions, IsBase64DataUrl, IsFileURL, LoadFile, LoadImage, ReadFile, RequestFile, SetCorsBehavior) => {\n    /**\n     * Backwards compatibility.\n     * @internal\n     * @deprecated\n     */\n    FileTools = {\n        DecodeBase64UrlToBinary,\n        DecodeBase64UrlToString,\n        DefaultRetryStrategy: FileToolsOptions.DefaultRetryStrategy,\n        BaseUrl: FileToolsOptions.BaseUrl,\n        CorsBehavior: FileToolsOptions.CorsBehavior,\n        PreprocessUrl: FileToolsOptions.PreprocessUrl,\n        IsBase64DataUrl,\n        IsFileURL,\n        LoadFile,\n        LoadImage,\n        ReadFile,\n        RequestFile,\n        SetCorsBehavior,\n    };\n    Object.defineProperty(FileTools, \"DefaultRetryStrategy\", {\n        get: function () {\n            return FileToolsOptions.DefaultRetryStrategy;\n        },\n        set: function (value) {\n            FileToolsOptions.DefaultRetryStrategy = value;\n        },\n    });\n    Object.defineProperty(FileTools, \"BaseUrl\", {\n        get: function () {\n            return FileToolsOptions.BaseUrl;\n        },\n        set: function (value) {\n            FileToolsOptions.BaseUrl = value;\n        },\n    });\n    Object.defineProperty(FileTools, \"PreprocessUrl\", {\n        get: function () {\n            return FileToolsOptions.PreprocessUrl;\n        },\n        set: function (value) {\n            FileToolsOptions.PreprocessUrl = value;\n        },\n    });\n    Object.defineProperty(FileTools, \"CorsBehavior\", {\n        get: function () {\n            return FileToolsOptions.CorsBehavior;\n        },\n        set: function (value) {\n            FileToolsOptions.CorsBehavior = value;\n        },\n    });\n};\n_injectLTSFileTools(DecodeBase64UrlToBinary, DecodeBase64UrlToString, FileToolsOptions, IsBase64DataUrl, IsFileURL, LoadFile, LoadImage, ReadFile, RequestFile, SetCorsBehavior);\n","/**\n * Size containing width and height\n */\nexport class Size {\n    /**\n     * Creates a Size object from the given width and height (floats).\n     * @param width width of the new size\n     * @param height height of the new size\n     */\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    /**\n     * Returns a string with the Size width and height\n     * @returns a string with the Size width and height\n     */\n    toString() {\n        return `{W: ${this.width}, H: ${this.height}}`;\n    }\n    /**\n     * \"Size\"\n     * @returns the string \"Size\"\n     */\n    getClassName() {\n        return \"Size\";\n    }\n    /**\n     * Returns the Size hash code.\n     * @returns a hash code for a unique width and height\n     */\n    getHashCode() {\n        let hash = this.width | 0;\n        hash = (hash * 397) ^ (this.height | 0);\n        return hash;\n    }\n    /**\n     * Updates the current size from the given one.\n     * @param src the given size\n     */\n    copyFrom(src) {\n        this.width = src.width;\n        this.height = src.height;\n    }\n    /**\n     * Updates in place the current Size from the given floats.\n     * @param width width of the new size\n     * @param height height of the new size\n     * @returns the updated Size.\n     */\n    copyFromFloats(width, height) {\n        this.width = width;\n        this.height = height;\n        return this;\n    }\n    /**\n     * Updates in place the current Size from the given floats.\n     * @param width width to set\n     * @param height height to set\n     * @returns the updated Size.\n     */\n    set(width, height) {\n        return this.copyFromFloats(width, height);\n    }\n    /**\n     * Multiplies the width and height by numbers\n     * @param w factor to multiple the width by\n     * @param h factor to multiple the height by\n     * @returns a new Size set with the multiplication result of the current Size and the given floats.\n     */\n    multiplyByFloats(w, h) {\n        return new Size(this.width * w, this.height * h);\n    }\n    /**\n     * Clones the size\n     * @returns a new Size copied from the given one.\n     */\n    clone() {\n        return new Size(this.width, this.height);\n    }\n    /**\n     * True if the current Size and the given one width and height are strictly equal.\n     * @param other the other size to compare against\n     * @returns True if the current Size and the given one width and height are strictly equal.\n     */\n    equals(other) {\n        if (!other) {\n            return false;\n        }\n        return this.width === other.width && this.height === other.height;\n    }\n    /**\n     * The surface of the Size : width * height (float).\n     */\n    get surface() {\n        return this.width * this.height;\n    }\n    /**\n     * Create a new size of zero\n     * @returns a new Size set to (0.0, 0.0)\n     */\n    static Zero() {\n        return new Size(0.0, 0.0);\n    }\n    /**\n     * Sums the width and height of two sizes\n     * @param otherSize size to add to this size\n     * @returns a new Size set as the addition result of the current Size and the given one.\n     */\n    add(otherSize) {\n        const r = new Size(this.width + otherSize.width, this.height + otherSize.height);\n        return r;\n    }\n    /**\n     * Subtracts the width and height of two\n     * @param otherSize size to subtract to this size\n     * @returns a new Size set as the subtraction result of  the given one from the current Size.\n     */\n    subtract(otherSize) {\n        const r = new Size(this.width - otherSize.width, this.height - otherSize.height);\n        return r;\n    }\n    /**\n     * Scales the width and height\n     * @param scale the scale to multiply the width and height by\n     * @returns a new Size set with the multiplication result of the current Size and the given floats.\n     */\n    scale(scale) {\n        return new Size(this.width * scale, this.height * scale);\n    }\n    /**\n     * Creates a new Size set at the linear interpolation \"amount\" between \"start\" and \"end\"\n     * @param start starting size to lerp between\n     * @param end end size to lerp between\n     * @param amount amount to lerp between the start and end values\n     * @returns a new Size set at the linear interpolation \"amount\" between \"start\" and \"end\"\n     */\n    static Lerp(start, end, amount) {\n        const w = start.width + (end.width - start.width) * amount;\n        const h = start.height + (end.height - start.height) * amount;\n        return new Size(w, h);\n    }\n}\n","\nimport { Size } from \"../../Maths/math.size.js\";\n/**\n * Base class of all the textures in babylon.\n * It groups all the common properties required to work with Thin Engine.\n */\nexport class ThinTexture {\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapU() {\n        return this._wrapU;\n    }\n    set wrapU(value) {\n        this._wrapU = value;\n    }\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapV() {\n        return this._wrapV;\n    }\n    set wrapV(value) {\n        this._wrapV = value;\n    }\n    /**\n     * How a texture is mapped.\n     * Unused in thin texture mode.\n     */\n    get coordinatesMode() {\n        return 0;\n    }\n    /**\n     * Define if the texture is a cube texture or if false a 2d texture.\n     */\n    get isCube() {\n        if (!this._texture) {\n            return false;\n        }\n        return this._texture.isCube;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    set isCube(value) {\n        if (!this._texture) {\n            return;\n        }\n        this._texture.isCube = value;\n    }\n    /**\n     * Define if the texture is a 3d texture (webgl 2) or if false a 2d texture.\n     */\n    get is3D() {\n        if (!this._texture) {\n            return false;\n        }\n        return this._texture.is3D;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    set is3D(value) {\n        if (!this._texture) {\n            return;\n        }\n        this._texture.is3D = value;\n    }\n    /**\n     * Define if the texture is a 2d array texture (webgl 2) or if false a 2d texture.\n     */\n    get is2DArray() {\n        if (!this._texture) {\n            return false;\n        }\n        return this._texture.is2DArray;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    set is2DArray(value) {\n        if (!this._texture) {\n            return;\n        }\n        this._texture.is2DArray = value;\n    }\n    /**\n     * Get the class name of the texture.\n     * @returns \"ThinTexture\"\n     */\n    getClassName() {\n        return \"ThinTexture\";\n    }\n    static _IsRenderTargetWrapper(texture) {\n        return texture?.shareDepth !== undefined;\n    }\n    /**\n     * Instantiates a new ThinTexture.\n     * Base class of all the textures in babylon.\n     * This can be used as an internal texture wrapper in AbstractEngine to benefit from the cache\n     * @param internalTexture Define the internalTexture to wrap. You can also pass a RenderTargetWrapper, in which case the texture will be the render target's texture\n     */\n    constructor(internalTexture) {\n        this._wrapU = 1;\n        this._wrapV = 1;\n        /**\n         * | Value | Type               | Description |\n         * | ----- | ------------------ | ----------- |\n         * | 0     | CLAMP_ADDRESSMODE  |             |\n         * | 1     | WRAP_ADDRESSMODE   |             |\n         * | 2     | MIRROR_ADDRESSMODE |             |\n         */\n        this.wrapR = 1;\n        /**\n         * With compliant hardware and browser (supporting anisotropic filtering)\n         * this defines the level of anisotropic filtering in the texture.\n         * The higher the better but the slower. This defaults to 4 as it seems to be the best tradeoff.\n         */\n        this.anisotropicFilteringLevel = 4;\n        /**\n         * Define the current state of the loading sequence when in delayed load mode.\n         */\n        this.delayLoadState = 0;\n        /** @internal */\n        this._texture = null;\n        this._engine = null;\n        this._cachedSize = Size.Zero();\n        this._cachedBaseSize = Size.Zero();\n        /** @internal */\n        this._initialSamplingMode = 2;\n        this._texture = ThinTexture._IsRenderTargetWrapper(internalTexture) ? internalTexture.texture : internalTexture;\n        if (this._texture) {\n            this._engine = this._texture.getEngine();\n        }\n    }\n    /**\n     * Get if the texture is ready to be used (downloaded, converted, mip mapped...).\n     * @returns true if fully ready\n     */\n    isReady() {\n        if (this.delayLoadState === 4) {\n            this.delayLoad();\n            return false;\n        }\n        if (this._texture) {\n            return this._texture.isReady;\n        }\n        return false;\n    }\n    /**\n     * Triggers the load sequence in delayed load mode.\n     */\n    delayLoad() { }\n    /**\n     * Get the underlying lower level texture from Babylon.\n     * @returns the internal texture\n     */\n    getInternalTexture() {\n        return this._texture;\n    }\n    /**\n     * Get the size of the texture.\n     * @returns the texture size.\n     */\n    getSize() {\n        if (this._texture) {\n            if (this._texture.width) {\n                this._cachedSize.width = this._texture.width;\n                this._cachedSize.height = this._texture.height;\n                return this._cachedSize;\n            }\n            if (this._texture._size) {\n                this._cachedSize.width = this._texture._size;\n                this._cachedSize.height = this._texture._size;\n                return this._cachedSize;\n            }\n        }\n        return this._cachedSize;\n    }\n    /**\n     * Get the base size of the texture.\n     * It can be different from the size if the texture has been resized for POT for instance\n     * @returns the base size\n     */\n    getBaseSize() {\n        if (!this.isReady() || !this._texture) {\n            this._cachedBaseSize.width = 0;\n            this._cachedBaseSize.height = 0;\n            return this._cachedBaseSize;\n        }\n        if (this._texture._size) {\n            this._cachedBaseSize.width = this._texture._size;\n            this._cachedBaseSize.height = this._texture._size;\n            return this._cachedBaseSize;\n        }\n        this._cachedBaseSize.width = this._texture.baseWidth;\n        this._cachedBaseSize.height = this._texture.baseHeight;\n        return this._cachedBaseSize;\n    }\n    /**\n     * Get the current sampling mode associated with the texture.\n     */\n    get samplingMode() {\n        if (!this._texture) {\n            return this._initialSamplingMode;\n        }\n        return this._texture.samplingMode;\n    }\n    /**\n     * Update the sampling mode of the texture.\n     * Default is Trilinear mode.\n     *\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 1     | NEAREST_SAMPLINGMODE or NEAREST_NEAREST_MIPLINEAR  | Nearest is: mag = nearest, min = nearest, mip = linear |\n     * | 2     | BILINEAR_SAMPLINGMODE or LINEAR_LINEAR_MIPNEAREST | Bilinear is: mag = linear, min = linear, mip = nearest |\n     * | 3     | TRILINEAR_SAMPLINGMODE or LINEAR_LINEAR_MIPLINEAR | Trilinear is: mag = linear, min = linear, mip = linear |\n     * | 4     | NEAREST_NEAREST_MIPNEAREST |             |\n     * | 5    | NEAREST_LINEAR_MIPNEAREST |             |\n     * | 6    | NEAREST_LINEAR_MIPLINEAR |             |\n     * | 7    | NEAREST_LINEAR |             |\n     * | 8    | NEAREST_NEAREST |             |\n     * | 9   | LINEAR_NEAREST_MIPNEAREST |             |\n     * | 10   | LINEAR_NEAREST_MIPLINEAR |             |\n     * | 11   | LINEAR_LINEAR |             |\n     * | 12   | LINEAR_NEAREST |             |\n     *\n     *    > _mag_: magnification filter (close to the viewer)\n     *    > _min_: minification filter (far from the viewer)\n     *    > _mip_: filter used between mip map levels\n     *@param samplingMode Define the new sampling mode of the texture\n     */\n    updateSamplingMode(samplingMode) {\n        if (this._texture && this._engine) {\n            this._engine.updateTextureSamplingMode(samplingMode, this._texture);\n        }\n    }\n    /**\n     * Release and destroy the underlying lower level texture aka internalTexture.\n     */\n    releaseInternalTexture() {\n        if (this._texture) {\n            this._texture.dispose();\n            this._texture = null;\n        }\n    }\n    /**\n     * Dispose the texture and release its associated resources.\n     */\n    dispose() {\n        if (this._texture) {\n            this.releaseInternalTexture();\n            this._engine = null;\n        }\n    }\n}\n","/**\n * Detect if the effect is a DrawWrapper\n * @param effect defines the entity to test\n * @returns if the entity is a DrawWrapper\n */\nexport function IsWrapper(effect) {\n    return effect.getPipelineContext === undefined;\n}\n","/** @internal */\nexport class WebGLShaderProcessor {\n    constructor() {\n        this.shaderLanguage = 0 /* ShaderLanguage.GLSL */;\n    }\n    postProcessor(code, defines, isFragment, processingContext, parameters) {\n        // Remove extensions\n        if (parameters.drawBuffersExtensionDisabled) {\n            // even if enclosed in #if/#endif, IE11 does parse the #extension declaration, so we need to remove it altogether\n            const regex = /#extension.+GL_EXT_draw_buffers.+(enable|require)/g;\n            code = code.replace(regex, \"\");\n        }\n        return code;\n    }\n}\n","const varyingRegex = /(flat\\s)?\\s*varying\\s*.*/;\n/** @internal */\nexport class WebGL2ShaderProcessor {\n    constructor() {\n        this.shaderLanguage = 0 /* ShaderLanguage.GLSL */;\n    }\n    attributeProcessor(attribute) {\n        return attribute.replace(\"attribute\", \"in\");\n    }\n    varyingCheck(varying, _isFragment) {\n        return varyingRegex.test(varying);\n    }\n    varyingProcessor(varying, isFragment) {\n        return varying.replace(\"varying\", isFragment ? \"in\" : \"out\");\n    }\n    postProcessor(code, defines, isFragment) {\n        const hasDrawBuffersExtension = code.search(/#extension.+GL_EXT_draw_buffers.+require/) !== -1;\n        // Remove extensions\n        const regex = /#extension.+(GL_OVR_multiview2|GL_OES_standard_derivatives|GL_EXT_shader_texture_lod|GL_EXT_frag_depth|GL_EXT_draw_buffers).+(enable|require)/g;\n        code = code.replace(regex, \"\");\n        // Replace instructions\n        code = code.replace(/texture2D\\s*\\(/g, \"texture(\");\n        if (isFragment) {\n            const hasOutput = code.search(/layout *\\(location *= *0\\) *out/g) !== -1;\n            code = code.replace(/texture2DLodEXT\\s*\\(/g, \"textureLod(\");\n            code = code.replace(/textureCubeLodEXT\\s*\\(/g, \"textureLod(\");\n            code = code.replace(/textureCube\\s*\\(/g, \"texture(\");\n            code = code.replace(/gl_FragDepthEXT/g, \"gl_FragDepth\");\n            code = code.replace(/gl_FragColor/g, \"glFragColor\");\n            code = code.replace(/gl_FragData/g, \"glFragData\");\n            code = code.replace(/void\\s+?main\\s*\\(/g, (hasDrawBuffersExtension || hasOutput ? \"\" : \"layout(location = 0) out vec4 glFragColor;\\n\") + \"void main(\");\n        }\n        else {\n            const hasMultiviewExtension = defines.indexOf(\"#define MULTIVIEW\") !== -1;\n            if (hasMultiviewExtension) {\n                return \"#extension GL_OVR_multiview2 : require\\nlayout (num_views = 2) in;\\n\" + code;\n            }\n        }\n        return code;\n    }\n}\n","import { DataBuffer } from \"../../Buffers/dataBuffer.js\";\n/** @internal */\nexport class WebGLDataBuffer extends DataBuffer {\n    constructor(resource) {\n        super();\n        this._buffer = resource;\n    }\n    get underlyingResource() {\n        return this._buffer;\n    }\n}\n","\n/**\n * Function indicating if a number is an exponent of 2\n * @param value defines the value to test\n * @returns true if the value is an exponent of 2\n */\nexport function IsExponentOfTwo(value) {\n    let count = 1;\n    do {\n        count *= 2;\n    } while (count < value);\n    return count === value;\n}\n/**\n * Interpolates between a and b via alpha\n * @param a The lower value (returned when alpha = 0)\n * @param b The upper value (returned when alpha = 1)\n * @param alpha The interpolation-factor\n * @returns The mixed value\n */\nexport function Mix(a, b, alpha) {\n    return a * (1 - alpha) + b * alpha;\n}\n/**\n * Find the nearest power of two.\n * @param x Number to start search from.\n * @returns Next nearest power of two.\n */\nexport function NearestPOT(x) {\n    const c = CeilingPOT(x);\n    const f = FloorPOT(x);\n    return c - x > x - f ? f : c;\n}\n/**\n * Find the next highest power of two.\n * @param x Number to start search from.\n * @returns Next highest power of two.\n */\nexport function CeilingPOT(x) {\n    x--;\n    x |= x >> 1;\n    x |= x >> 2;\n    x |= x >> 4;\n    x |= x >> 8;\n    x |= x >> 16;\n    x++;\n    return x;\n}\n/**\n * Find the next lowest power of two.\n * @param x Number to start search from.\n * @returns Next lowest power of two.\n */\nexport function FloorPOT(x) {\n    x = x | (x >> 1);\n    x = x | (x >> 2);\n    x = x | (x >> 4);\n    x = x | (x >> 8);\n    x = x | (x >> 16);\n    return x - (x >> 1);\n}\n/**\n * Get the closest exponent of two\n * @param value defines the value to approximate\n * @param max defines the maximum value to return\n * @param mode defines how to define the closest value\n * @returns closest exponent of two of the given value\n */\nexport function GetExponentOfTwo(value, max, mode = 2) {\n    let pot;\n    switch (mode) {\n        case 1:\n            pot = FloorPOT(value);\n            break;\n        case 2:\n            pot = NearestPOT(value);\n            break;\n        case 3:\n        default:\n            pot = CeilingPOT(value);\n            break;\n    }\n    return Math.min(pot, max);\n}\n","/** @internal */\nexport class WebGLHardwareTexture {\n    get underlyingResource() {\n        return this._webGLTexture;\n    }\n    constructor(existingTexture = null, context) {\n        // There can be multiple buffers for a single WebGL texture because different layers of a 2DArrayTexture / 3DTexture\n        // or different faces of a cube texture can be bound to different render targets at the same time.\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        this._MSAARenderBuffers = null;\n        this._context = context;\n        if (!existingTexture) {\n            existingTexture = context.createTexture();\n            if (!existingTexture) {\n                throw new Error(\"Unable to create webGL texture\");\n            }\n        }\n        this.set(existingTexture);\n    }\n    setUsage() { }\n    set(hardwareTexture) {\n        this._webGLTexture = hardwareTexture;\n    }\n    reset() {\n        this._webGLTexture = null;\n        this._MSAARenderBuffers = null;\n    }\n    addMSAARenderBuffer(buffer) {\n        if (!this._MSAARenderBuffers) {\n            this._MSAARenderBuffers = [];\n        }\n        this._MSAARenderBuffers.push(buffer);\n    }\n    releaseMSAARenderBuffers() {\n        if (this._MSAARenderBuffers) {\n            for (const buffer of this._MSAARenderBuffers) {\n                this._context.deleteRenderbuffer(buffer);\n            }\n            this._MSAARenderBuffers = null;\n        }\n    }\n    getMSAARenderBuffer(index = 0) {\n        return this._MSAARenderBuffers?.[index] ?? null;\n    }\n    release() {\n        this.releaseMSAARenderBuffers();\n        if (this._webGLTexture) {\n            this._context.deleteTexture(this._webGLTexture);\n        }\n        this.reset();\n    }\n}\n","import { createPipelineContext, createRawShaderProgram, createShaderProgram, _finalizePipelineContext, _preparePipelineContext, _setProgram, _executeWhenRenderingStateIsCompiled, getStateObject, _createShaderProgram, deleteStateObject, } from \"./thinEngine.functions.js\";\nimport { IsWrapper } from \"../Materials/drawWrapper.functions.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { IsWindowObjectExist } from \"../Misc/domManagement.js\";\nimport { WebGLShaderProcessor } from \"./WebGL/webGLShaderProcessors.js\";\nimport { WebGL2ShaderProcessor } from \"./WebGL/webGL2ShaderProcessors.js\";\nimport { WebGLDataBuffer } from \"../Meshes/WebGL/webGLDataBuffer.js\";\nimport { CeilingPOT, FloorPOT, GetExponentOfTwo, NearestPOT } from \"../Misc/tools.functions.js\";\nimport { AbstractEngine, QueueNewFrame } from \"./abstractEngine.js\";\n\nimport { WebGLHardwareTexture } from \"./WebGL/webGLHardwareTexture.js\";\nimport { InternalTexture } from \"../Materials/Textures/internalTexture.js\";\nimport { Effect } from \"../Materials/effect.js\";\nimport { _ConcatenateShader, _getGlobalDefines } from \"./abstractEngine.functions.js\";\nimport { resetCachedPipeline } from \"../Materials/effect.functions.js\";\n/**\n * Keeps track of all the buffer info used in engine.\n */\nclass BufferPointer {\n}\n/**\n * The base engine class (root of all engines)\n */\nexport class ThinEngine extends AbstractEngine {\n    /**\n     * Gets or sets the name of the engine\n     */\n    get name() {\n        return this._name;\n    }\n    set name(value) {\n        this._name = value;\n    }\n    /**\n     * Returns the version of the engine\n     */\n    get version() {\n        return this._webGLVersion;\n    }\n    /**\n     * Gets or sets the relative url used to load shaders if using the engine in non-minified mode\n     */\n    static get ShadersRepository() {\n        return Effect.ShadersRepository;\n    }\n    static set ShadersRepository(value) {\n        Effect.ShadersRepository = value;\n    }\n    /**\n     * Gets a boolean indicating that the engine supports uniform buffers\n     * @see https://doc.babylonjs.com/setup/support/webGL2#uniform-buffer-objets\n     */\n    get supportsUniformBuffers() {\n        return this.webGLVersion > 1 && !this.disableUniformBuffers;\n    }\n    /**\n     * Gets a boolean indicating that only power of 2 textures are supported\n     * Please note that you can still use non power of 2 textures but in this case the engine will forcefully convert them\n     */\n    get needPOTTextures() {\n        return this._webGLVersion < 2 || this.forcePOTTextures;\n    }\n    get _supportsHardwareTextureRescaling() {\n        return false;\n    }\n    /**\n     * sets the object from which width and height will be taken from when getting render width and height\n     * Will fallback to the gl object\n     * @param dimensions the framebuffer width and height that will be used.\n     */\n    set framebufferDimensionsObject(dimensions) {\n        this._framebufferDimensionsObject = dimensions;\n    }\n    /**\n     * Creates a new snapshot at the next frame using the current snapshotRenderingMode\n     */\n    snapshotRenderingReset() {\n        this.snapshotRendering = false;\n    }\n    /**\n     * Creates a new engine\n     * @param canvasOrContext defines the canvas or WebGL context to use for rendering. If you provide a WebGL context, Babylon.js will not hook events on the canvas (like pointers, keyboards, etc...) so no event observables will be available. This is mostly used when Babylon.js is used as a plugin on a system which already used the WebGL context\n     * @param antialias defines whether anti-aliasing should be enabled (default value is \"undefined\", meaning that the browser may or may not enable it)\n     * @param options defines further options to be sent to the getContext() function\n     * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)\n     */\n    constructor(canvasOrContext, antialias, options, adaptToDeviceRatio) {\n        options = options || {};\n        super(antialias ?? options.antialias, options, adaptToDeviceRatio);\n        /** @internal */\n        this._name = \"WebGL\";\n        /**\n         * Gets or sets a boolean that indicates if textures must be forced to power of 2 size even if not required\n         */\n        this.forcePOTTextures = false;\n        /** Gets or sets a boolean indicating if the engine should validate programs after compilation */\n        this.validateShaderPrograms = false;\n        /**\n         * Gets or sets a boolean indicating that uniform buffers must be disabled even if they are supported\n         */\n        this.disableUniformBuffers = false;\n        /** @internal */\n        this._webGLVersion = 1.0;\n        this._vertexAttribArraysEnabled = [];\n        this._uintIndicesCurrentlySet = false;\n        this._currentBoundBuffer = new Array();\n        /** @internal */\n        this._currentFramebuffer = null;\n        /** @internal */\n        this._dummyFramebuffer = null;\n        this._currentBufferPointers = new Array();\n        this._currentInstanceLocations = new Array();\n        this._currentInstanceBuffers = new Array();\n        this._vaoRecordInProgress = false;\n        this._mustWipeVertexAttributes = false;\n        this._nextFreeTextureSlots = new Array();\n        this._maxSimultaneousTextures = 0;\n        this._maxMSAASamplesOverride = null;\n        this._unpackFlipYCached = null;\n        /**\n         * In case you are sharing the context with other applications, it might\n         * be interested to not cache the unpack flip y state to ensure a consistent\n         * value would be set.\n         */\n        this.enableUnpackFlipYCached = true;\n        /**\n         * @internal\n         */\n        this._boundUniforms = {};\n        if (!canvasOrContext) {\n            return;\n        }\n        let canvas = null;\n        if (canvasOrContext.getContext) {\n            canvas = canvasOrContext;\n            this._renderingCanvas = canvas;\n            if (options.preserveDrawingBuffer === undefined) {\n                options.preserveDrawingBuffer = false;\n            }\n            if (options.xrCompatible === undefined) {\n                options.xrCompatible = false;\n            }\n            // Exceptions\n            if (navigator && navigator.userAgent) {\n                this._setupMobileChecks();\n                const ua = navigator.userAgent;\n                for (const exception of ThinEngine.ExceptionList) {\n                    const key = exception.key;\n                    const targets = exception.targets;\n                    const check = new RegExp(key);\n                    if (check.test(ua)) {\n                        if (exception.capture && exception.captureConstraint) {\n                            const capture = exception.capture;\n                            const constraint = exception.captureConstraint;\n                            const regex = new RegExp(capture);\n                            const matches = regex.exec(ua);\n                            if (matches && matches.length > 0) {\n                                const capturedValue = parseInt(matches[matches.length - 1]);\n                                if (capturedValue >= constraint) {\n                                    continue;\n                                }\n                            }\n                        }\n                        for (const target of targets) {\n                            switch (target) {\n                                case \"uniformBuffer\":\n                                    this.disableUniformBuffers = true;\n                                    break;\n                                case \"vao\":\n                                    this.disableVertexArrayObjects = true;\n                                    break;\n                                case \"antialias\":\n                                    options.antialias = false;\n                                    break;\n                                case \"maxMSAASamples\":\n                                    this._maxMSAASamplesOverride = 1;\n                                    break;\n                            }\n                        }\n                    }\n                }\n            }\n            // Context lost\n            if (!this._doNotHandleContextLost) {\n                this._onContextLost = (evt) => {\n                    evt.preventDefault();\n                    this._contextWasLost = true;\n                    Logger.Warn(\"WebGL context lost.\");\n                    this.onContextLostObservable.notifyObservers(this);\n                };\n                this._onContextRestored = () => {\n                    this._restoreEngineAfterContextLost(() => this._initGLContext());\n                };\n                canvas.addEventListener(\"webglcontextlost\", this._onContextLost, false);\n                canvas.addEventListener(\"webglcontextrestored\", this._onContextRestored, false);\n                options.powerPreference = options.powerPreference || \"high-performance\";\n            }\n            if (this._badDesktopOS) {\n                options.xrCompatible = false;\n            }\n            // GL\n            if (!options.disableWebGL2Support) {\n                try {\n                    this._gl = (canvas.getContext(\"webgl2\", options) || canvas.getContext(\"experimental-webgl2\", options));\n                    if (this._gl) {\n                        this._webGLVersion = 2.0;\n                        this._shaderPlatformName = \"WEBGL2\";\n                        // Prevent weird browsers to lie (yeah that happens!)\n                        if (!this._gl.deleteQuery) {\n                            this._webGLVersion = 1.0;\n                            this._shaderPlatformName = \"WEBGL1\";\n                        }\n                    }\n                }\n                catch (e) {\n                    // Do nothing\n                }\n            }\n            if (!this._gl) {\n                if (!canvas) {\n                    throw new Error(\"The provided canvas is null or undefined.\");\n                }\n                try {\n                    this._gl = (canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options));\n                }\n                catch (e) {\n                    throw new Error(\"WebGL not supported\");\n                }\n            }\n            if (!this._gl) {\n                throw new Error(\"WebGL not supported\");\n            }\n        }\n        else {\n            this._gl = canvasOrContext;\n            this._renderingCanvas = this._gl.canvas;\n            if (this._gl.renderbufferStorageMultisample) {\n                this._webGLVersion = 2.0;\n                this._shaderPlatformName = \"WEBGL2\";\n            }\n            else {\n                this._shaderPlatformName = \"WEBGL1\";\n            }\n            const attributes = this._gl.getContextAttributes();\n            if (attributes) {\n                options.stencil = attributes.stencil;\n            }\n        }\n        // Ensures a consistent color space unpacking of textures cross browser.\n        this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n        if (options.useHighPrecisionFloats !== undefined) {\n            this._highPrecisionShadersAllowed = options.useHighPrecisionFloats;\n        }\n        this.resize();\n        this._initGLContext();\n        this._initFeatures();\n        // Prepare buffer pointers\n        for (let i = 0; i < this._caps.maxVertexAttribs; i++) {\n            this._currentBufferPointers[i] = new BufferPointer();\n        }\n        // Shader processor\n        this._shaderProcessor = this.webGLVersion > 1 ? new WebGL2ShaderProcessor() : new WebGLShaderProcessor();\n        // Starting with iOS 14, we can trust the browser\n        // let matches = navigator.userAgent.match(/Version\\/(\\d+)/);\n        // if (matches && matches.length === 2) {\n        //     if (parseInt(matches[1]) >= 14) {\n        //         this._badOS = false;\n        //     }\n        // }\n        const versionToLog = `Babylon.js v${ThinEngine.Version}`;\n        Logger.Log(versionToLog + ` - ${this.description}`);\n        // Check setAttribute in case of workers\n        if (this._renderingCanvas && this._renderingCanvas.setAttribute) {\n            this._renderingCanvas.setAttribute(\"data-engine\", versionToLog);\n        }\n        const stateObject = getStateObject(this._gl);\n        // update state object with the current engine state\n        stateObject.validateShaderPrograms = this.validateShaderPrograms;\n        stateObject.parallelShaderCompile = this._caps.parallelShaderCompile;\n    }\n    _clearEmptyResources() {\n        this._dummyFramebuffer = null;\n        super._clearEmptyResources();\n    }\n    /**\n     * @internal\n     */\n    _getShaderProcessingContext(shaderLanguage) {\n        return null;\n    }\n    /**\n     * Gets a boolean indicating if all created effects are ready\n     * @returns true if all effects are ready\n     */\n    areAllEffectsReady() {\n        for (const key in this._compiledEffects) {\n            const effect = this._compiledEffects[key];\n            if (!effect.isReady()) {\n                return false;\n            }\n        }\n        return true;\n    }\n    _initGLContext() {\n        // Caps\n        this._caps = {\n            maxTexturesImageUnits: this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),\n            maxCombinedTexturesImageUnits: this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),\n            maxVertexTextureImageUnits: this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n            maxTextureSize: this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),\n            maxSamples: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_SAMPLES) : 1,\n            maxCubemapTextureSize: this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),\n            maxRenderTextureSize: this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),\n            maxVertexAttribs: this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),\n            maxVaryingVectors: this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),\n            maxFragmentUniformVectors: this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),\n            maxVertexUniformVectors: this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),\n            parallelShaderCompile: this._gl.getExtension(\"KHR_parallel_shader_compile\") || undefined,\n            standardDerivatives: this._webGLVersion > 1 || this._gl.getExtension(\"OES_standard_derivatives\") !== null,\n            maxAnisotropy: 1,\n            astc: this._gl.getExtension(\"WEBGL_compressed_texture_astc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_astc\"),\n            bptc: this._gl.getExtension(\"EXT_texture_compression_bptc\") || this._gl.getExtension(\"WEBKIT_EXT_texture_compression_bptc\"),\n            s3tc: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\"),\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            s3tc_srgb: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc_srgb\"),\n            pvrtc: this._gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n            etc1: this._gl.getExtension(\"WEBGL_compressed_texture_etc1\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc1\"),\n            etc2: this._gl.getExtension(\"WEBGL_compressed_texture_etc\") ||\n                this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc\") ||\n                this._gl.getExtension(\"WEBGL_compressed_texture_es3_0\"),\n            textureAnisotropicFilterExtension: this._gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n                this._gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") ||\n                this._gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\"),\n            uintIndices: this._webGLVersion > 1 || this._gl.getExtension(\"OES_element_index_uint\") !== null,\n            fragmentDepthSupported: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_frag_depth\") !== null,\n            highPrecisionShaderSupported: false,\n            timerQuery: this._gl.getExtension(\"EXT_disjoint_timer_query_webgl2\") || this._gl.getExtension(\"EXT_disjoint_timer_query\"),\n            supportOcclusionQuery: this._webGLVersion > 1,\n            canUseTimestampForTimerQuery: false,\n            drawBuffersExtension: false,\n            maxMSAASamples: 1,\n            colorBufferFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_float\")),\n            supportFloatTexturesResolve: false,\n            rg11b10ufColorRenderable: false,\n            colorBufferHalfFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_half_float\")),\n            textureFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_float\") ? true : false,\n            textureHalfFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_half_float\") ? true : false,\n            textureHalfFloatRender: false,\n            textureFloatLinearFiltering: false,\n            textureFloatRender: false,\n            textureHalfFloatLinearFiltering: false,\n            vertexArrayObject: false,\n            instancedArrays: false,\n            textureLOD: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_shader_texture_lod\") ? true : false,\n            texelFetch: this._webGLVersion !== 1,\n            blendMinMax: false,\n            multiview: this._gl.getExtension(\"OVR_multiview2\"),\n            oculusMultiview: this._gl.getExtension(\"OCULUS_multiview\"),\n            depthTextureExtension: false,\n            canUseGLInstanceID: this._webGLVersion > 1,\n            canUseGLVertexID: this._webGLVersion > 1,\n            supportComputeShaders: false,\n            supportSRGBBuffers: false,\n            supportTransformFeedbacks: this._webGLVersion > 1,\n            textureMaxLevel: this._webGLVersion > 1,\n            texture2DArrayMaxLayerCount: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_ARRAY_TEXTURE_LAYERS) : 128,\n            disableMorphTargetTexture: false,\n        };\n        this._caps.supportFloatTexturesResolve = this._caps.colorBufferFloat;\n        this._caps.rg11b10ufColorRenderable = this._caps.colorBufferFloat;\n        // Infos\n        this._glVersion = this._gl.getParameter(this._gl.VERSION);\n        const rendererInfo = this._gl.getExtension(\"WEBGL_debug_renderer_info\");\n        if (rendererInfo != null) {\n            this._glRenderer = this._gl.getParameter(rendererInfo.UNMASKED_RENDERER_WEBGL);\n            this._glVendor = this._gl.getParameter(rendererInfo.UNMASKED_VENDOR_WEBGL);\n        }\n        if (!this._glVendor) {\n            this._glVendor = this._gl.getParameter(this._gl.VENDOR) || \"Unknown vendor\";\n        }\n        if (!this._glRenderer) {\n            this._glRenderer = this._gl.getParameter(this._gl.RENDERER) || \"Unknown renderer\";\n        }\n        // Constants\n        if (this._gl.HALF_FLOAT_OES !== 0x8d61) {\n            this._gl.HALF_FLOAT_OES = 0x8d61; // Half floating-point type (16-bit).\n        }\n        if (this._gl.RGBA16F !== 0x881a) {\n            this._gl.RGBA16F = 0x881a; // RGBA 16-bit floating-point color-renderable internal sized format.\n        }\n        if (this._gl.RGBA32F !== 0x8814) {\n            this._gl.RGBA32F = 0x8814; // RGBA 32-bit floating-point color-renderable internal sized format.\n        }\n        if (this._gl.DEPTH24_STENCIL8 !== 35056) {\n            this._gl.DEPTH24_STENCIL8 = 35056;\n        }\n        // Extensions\n        if (this._caps.timerQuery) {\n            if (this._webGLVersion === 1) {\n                this._gl.getQuery = this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery);\n            }\n            // WebGLQuery casted to number to avoid TS error\n            this._caps.canUseTimestampForTimerQuery = (this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT, this._caps.timerQuery.QUERY_COUNTER_BITS_EXT) ?? 0) > 0;\n        }\n        this._caps.maxAnisotropy = this._caps.textureAnisotropicFilterExtension\n            ? this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT)\n            : 0;\n        this._caps.textureFloatLinearFiltering = this._caps.textureFloat && this._gl.getExtension(\"OES_texture_float_linear\") ? true : false;\n        this._caps.textureFloatRender = this._caps.textureFloat && this._canRenderToFloatFramebuffer() ? true : false;\n        this._caps.textureHalfFloatLinearFiltering =\n            this._webGLVersion > 1 || (this._caps.textureHalfFloat && this._gl.getExtension(\"OES_texture_half_float_linear\")) ? true : false;\n        // Compressed formats\n        if (this._caps.astc) {\n            this._gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = this._caps.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n        }\n        if (this._caps.bptc) {\n            this._gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = this._caps.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n        }\n        if (this._caps.s3tc_srgb) {\n            this._gl.COMPRESSED_SRGB_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n            this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n            this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n        }\n        if (this._caps.etc2) {\n            this._gl.COMPRESSED_SRGB8_ETC2 = this._caps.etc2.COMPRESSED_SRGB8_ETC2;\n            this._gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = this._caps.etc2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n        }\n        // Checks if some of the format renders first to allow the use of webgl inspector.\n        if (this._webGLVersion > 1) {\n            if (this._gl.HALF_FLOAT_OES !== 0x140b) {\n                this._gl.HALF_FLOAT_OES = 0x140b;\n            }\n        }\n        this._caps.textureHalfFloatRender = this._caps.textureHalfFloat && this._canRenderToHalfFloatFramebuffer();\n        // Draw buffers\n        if (this._webGLVersion > 1) {\n            this._caps.drawBuffersExtension = true;\n            this._caps.maxMSAASamples = this._maxMSAASamplesOverride !== null ? this._maxMSAASamplesOverride : this._gl.getParameter(this._gl.MAX_SAMPLES);\n        }\n        else {\n            const drawBuffersExtension = this._gl.getExtension(\"WEBGL_draw_buffers\");\n            if (drawBuffersExtension !== null) {\n                this._caps.drawBuffersExtension = true;\n                this._gl.drawBuffers = drawBuffersExtension.drawBuffersWEBGL.bind(drawBuffersExtension);\n                this._gl.DRAW_FRAMEBUFFER = this._gl.FRAMEBUFFER;\n                for (let i = 0; i < 16; i++) {\n                    this._gl[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"] = drawBuffersExtension[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n                }\n            }\n        }\n        // Depth Texture\n        if (this._webGLVersion > 1) {\n            this._caps.depthTextureExtension = true;\n        }\n        else {\n            const depthTextureExtension = this._gl.getExtension(\"WEBGL_depth_texture\");\n            if (depthTextureExtension != null) {\n                this._caps.depthTextureExtension = true;\n                this._gl.UNSIGNED_INT_24_8 = depthTextureExtension.UNSIGNED_INT_24_8_WEBGL;\n            }\n        }\n        // Vertex array object\n        if (this.disableVertexArrayObjects) {\n            this._caps.vertexArrayObject = false;\n        }\n        else if (this._webGLVersion > 1) {\n            this._caps.vertexArrayObject = true;\n        }\n        else {\n            const vertexArrayObjectExtension = this._gl.getExtension(\"OES_vertex_array_object\");\n            if (vertexArrayObjectExtension != null) {\n                this._caps.vertexArrayObject = true;\n                this._gl.createVertexArray = vertexArrayObjectExtension.createVertexArrayOES.bind(vertexArrayObjectExtension);\n                this._gl.bindVertexArray = vertexArrayObjectExtension.bindVertexArrayOES.bind(vertexArrayObjectExtension);\n                this._gl.deleteVertexArray = vertexArrayObjectExtension.deleteVertexArrayOES.bind(vertexArrayObjectExtension);\n            }\n        }\n        // Instances count\n        if (this._webGLVersion > 1) {\n            this._caps.instancedArrays = true;\n        }\n        else {\n            const instanceExtension = this._gl.getExtension(\"ANGLE_instanced_arrays\");\n            if (instanceExtension != null) {\n                this._caps.instancedArrays = true;\n                this._gl.drawArraysInstanced = instanceExtension.drawArraysInstancedANGLE.bind(instanceExtension);\n                this._gl.drawElementsInstanced = instanceExtension.drawElementsInstancedANGLE.bind(instanceExtension);\n                this._gl.vertexAttribDivisor = instanceExtension.vertexAttribDivisorANGLE.bind(instanceExtension);\n            }\n            else {\n                this._caps.instancedArrays = false;\n            }\n        }\n        if (this._gl.getShaderPrecisionFormat) {\n            const vertexhighp = this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER, this._gl.HIGH_FLOAT);\n            const fragmenthighp = this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER, this._gl.HIGH_FLOAT);\n            if (vertexhighp && fragmenthighp) {\n                this._caps.highPrecisionShaderSupported = vertexhighp.precision !== 0 && fragmenthighp.precision !== 0;\n            }\n        }\n        if (this._webGLVersion > 1) {\n            this._caps.blendMinMax = true;\n        }\n        else {\n            const blendMinMaxExtension = this._gl.getExtension(\"EXT_blend_minmax\");\n            if (blendMinMaxExtension != null) {\n                this._caps.blendMinMax = true;\n                this._gl.MAX = blendMinMaxExtension.MAX_EXT;\n                this._gl.MIN = blendMinMaxExtension.MIN_EXT;\n            }\n        }\n        // sRGB buffers\n        // only run this if not already set to true (in the constructor, for example)\n        if (!this._caps.supportSRGBBuffers) {\n            if (this._webGLVersion > 1) {\n                this._caps.supportSRGBBuffers = true;\n                this._glSRGBExtensionValues = {\n                    SRGB: WebGL2RenderingContext.SRGB,\n                    SRGB8: WebGL2RenderingContext.SRGB8,\n                    SRGB8_ALPHA8: WebGL2RenderingContext.SRGB8_ALPHA8,\n                };\n            }\n            else {\n                const sRGBExtension = this._gl.getExtension(\"EXT_sRGB\");\n                if (sRGBExtension != null) {\n                    this._caps.supportSRGBBuffers = true;\n                    this._glSRGBExtensionValues = {\n                        SRGB: sRGBExtension.SRGB_EXT,\n                        SRGB8: sRGBExtension.SRGB_ALPHA_EXT,\n                        SRGB8_ALPHA8: sRGBExtension.SRGB_ALPHA_EXT,\n                    };\n                }\n            }\n            // take into account the forced state that was provided in options\n            // When the issue in angle/chrome is fixed the flag should be taken into account only when it is explicitly defined\n            this._caps.supportSRGBBuffers = this._caps.supportSRGBBuffers && !!(this._creationOptions && this._creationOptions.forceSRGBBufferSupportState);\n        }\n        // Depth buffer\n        this._depthCullingState.depthTest = true;\n        this._depthCullingState.depthFunc = this._gl.LEQUAL;\n        this._depthCullingState.depthMask = true;\n        // Texture maps\n        this._maxSimultaneousTextures = this._caps.maxCombinedTexturesImageUnits;\n        for (let slot = 0; slot < this._maxSimultaneousTextures; slot++) {\n            this._nextFreeTextureSlots.push(slot);\n        }\n        if (this._glRenderer === \"Mali-G72\") {\n            // Overcome a bug when using a texture to store morph targets on Mali-G72\n            this._caps.disableMorphTargetTexture = true;\n        }\n    }\n    _initFeatures() {\n        this._features = {\n            forceBitmapOverHTMLImageElement: typeof HTMLImageElement === \"undefined\",\n            supportRenderAndCopyToLodForFloatTextures: this._webGLVersion !== 1,\n            supportDepthStencilTexture: this._webGLVersion !== 1,\n            supportShadowSamplers: this._webGLVersion !== 1,\n            uniformBufferHardCheckMatrix: false,\n            allowTexturePrefiltering: this._webGLVersion !== 1,\n            trackUbosInFrame: false,\n            checkUbosContentBeforeUpload: false,\n            supportCSM: this._webGLVersion !== 1,\n            basisNeedsPOT: this._webGLVersion === 1,\n            support3DTextures: this._webGLVersion !== 1,\n            needTypeSuffixInShaderConstants: this._webGLVersion !== 1,\n            supportMSAA: this._webGLVersion !== 1,\n            supportSSAO2: this._webGLVersion !== 1,\n            supportExtendedTextureFormats: this._webGLVersion !== 1,\n            supportSwitchCaseInShader: this._webGLVersion !== 1,\n            supportSyncTextureRead: true,\n            needsInvertingBitmap: true,\n            useUBOBindingCache: true,\n            needShaderCodeInlining: false,\n            needToAlwaysBindUniformBuffers: false,\n            supportRenderPasses: false,\n            supportSpriteInstancing: true,\n            forceVertexBufferStrideAndOffsetMultiple4Bytes: false,\n            _checkNonFloatVertexBuffersDontRecreatePipelineContext: false,\n            _collectUbosUpdatedInFrame: false,\n        };\n    }\n    /**\n     * Gets version of the current webGL context\n     * Keep it for back compat - use version instead\n     */\n    get webGLVersion() {\n        return this._webGLVersion;\n    }\n    /**\n     * Gets a string identifying the name of the class\n     * @returns \"Engine\" string\n     */\n    getClassName() {\n        return \"ThinEngine\";\n    }\n    /** @internal */\n    _prepareWorkingCanvas() {\n        if (this._workingCanvas) {\n            return;\n        }\n        this._workingCanvas = this.createCanvas(1, 1);\n        const context = this._workingCanvas.getContext(\"2d\");\n        if (context) {\n            this._workingContext = context;\n        }\n    }\n    /**\n     * Gets an object containing information about the current engine context\n     * @returns an object containing the vendor, the renderer and the version of the current engine context\n     */\n    getInfo() {\n        return this.getGlInfo();\n    }\n    /**\n     * Gets an object containing information about the current webGL context\n     * @returns an object containing the vendor, the renderer and the version of the current webGL context\n     */\n    getGlInfo() {\n        return {\n            vendor: this._glVendor,\n            renderer: this._glRenderer,\n            version: this._glVersion,\n        };\n    }\n    /**Gets driver info if available */\n    extractDriverInfo() {\n        const glInfo = this.getGlInfo();\n        if (glInfo && glInfo.renderer) {\n            return glInfo.renderer;\n        }\n        return \"\";\n    }\n    /**\n     * Gets the current render width\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render width\n     */\n    getRenderWidth(useScreen = false) {\n        if (!useScreen && this._currentRenderTarget) {\n            return this._currentRenderTarget.width;\n        }\n        return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferWidth : this._gl.drawingBufferWidth;\n    }\n    /**\n     * Gets the current render height\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render height\n     */\n    getRenderHeight(useScreen = false) {\n        if (!useScreen && this._currentRenderTarget) {\n            return this._currentRenderTarget.height;\n        }\n        return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferHeight : this._gl.drawingBufferHeight;\n    }\n    /**\n     * Clear the current render buffer or the current render target (if any is set up)\n     * @param color defines the color to use\n     * @param backBuffer defines if the back buffer must be cleared\n     * @param depth defines if the depth buffer must be cleared\n     * @param stencil defines if the stencil buffer must be cleared\n     */\n    clear(color, backBuffer, depth, stencil = false) {\n        const useStencilGlobalOnly = this.stencilStateComposer.useStencilGlobalOnly;\n        this.stencilStateComposer.useStencilGlobalOnly = true; // make sure the stencil mask is coming from the global stencil and not from a material (effect) which would currently be in effect\n        this.applyStates();\n        this.stencilStateComposer.useStencilGlobalOnly = useStencilGlobalOnly;\n        let mode = 0;\n        if (backBuffer && color) {\n            let setBackBufferColor = true;\n            if (this._currentRenderTarget) {\n                const textureFormat = this._currentRenderTarget.texture?.format;\n                if (textureFormat === 8 ||\n                    textureFormat === 9 ||\n                    textureFormat === 10 ||\n                    textureFormat === 11) {\n                    const textureType = this._currentRenderTarget.texture?.type;\n                    if (textureType === 7 || textureType === 5) {\n                        ThinEngine._TempClearColorUint32[0] = color.r * 255;\n                        ThinEngine._TempClearColorUint32[1] = color.g * 255;\n                        ThinEngine._TempClearColorUint32[2] = color.b * 255;\n                        ThinEngine._TempClearColorUint32[3] = color.a * 255;\n                        this._gl.clearBufferuiv(this._gl.COLOR, 0, ThinEngine._TempClearColorUint32);\n                        setBackBufferColor = false;\n                    }\n                    else {\n                        ThinEngine._TempClearColorInt32[0] = color.r * 255;\n                        ThinEngine._TempClearColorInt32[1] = color.g * 255;\n                        ThinEngine._TempClearColorInt32[2] = color.b * 255;\n                        ThinEngine._TempClearColorInt32[3] = color.a * 255;\n                        this._gl.clearBufferiv(this._gl.COLOR, 0, ThinEngine._TempClearColorInt32);\n                        setBackBufferColor = false;\n                    }\n                }\n            }\n            if (setBackBufferColor) {\n                this._gl.clearColor(color.r, color.g, color.b, color.a !== undefined ? color.a : 1.0);\n                mode |= this._gl.COLOR_BUFFER_BIT;\n            }\n        }\n        if (depth) {\n            if (this.useReverseDepthBuffer) {\n                this._depthCullingState.depthFunc = this._gl.GEQUAL;\n                this._gl.clearDepth(0.0);\n            }\n            else {\n                this._gl.clearDepth(1.0);\n            }\n            mode |= this._gl.DEPTH_BUFFER_BIT;\n        }\n        if (stencil) {\n            this._gl.clearStencil(0);\n            mode |= this._gl.STENCIL_BUFFER_BIT;\n        }\n        this._gl.clear(mode);\n    }\n    /**\n     * @internal\n     */\n    _viewport(x, y, width, height) {\n        if (x !== this._viewportCached.x || y !== this._viewportCached.y || width !== this._viewportCached.z || height !== this._viewportCached.w) {\n            this._viewportCached.x = x;\n            this._viewportCached.y = y;\n            this._viewportCached.z = width;\n            this._viewportCached.w = height;\n            this._gl.viewport(x, y, width, height);\n        }\n    }\n    /**\n     * End the current frame\n     */\n    endFrame() {\n        super.endFrame();\n        // Force a flush in case we are using a bad OS.\n        if (this._badOS) {\n            this.flushFramebuffer();\n        }\n    }\n    /**\n     * Gets the performance monitor attached to this engine\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#engineinstrumentation\n     */\n    get performanceMonitor() {\n        throw new Error(\"Not Supported by ThinEngine\");\n    }\n    /**\n     * Binds the frame buffer to the specified texture.\n     * @param rtWrapper The render target wrapper to render to\n     * @param faceIndex The face of the texture to render to in case of cube texture and if the render target wrapper is not a multi render target\n     * @param requiredWidth The width of the target to render to\n     * @param requiredHeight The height of the target to render to\n     * @param forceFullscreenViewport Forces the viewport to be the entire texture/screen if true\n     * @param lodLevel Defines the lod level to bind to the frame buffer\n     * @param layer Defines the 2d array index to bind to the frame buffer if the render target wrapper is not a multi render target\n     */\n    bindFramebuffer(rtWrapper, faceIndex = 0, requiredWidth, requiredHeight, forceFullscreenViewport, lodLevel = 0, layer = 0) {\n        const webglRTWrapper = rtWrapper;\n        if (this._currentRenderTarget) {\n            this.unBindFramebuffer(this._currentRenderTarget);\n        }\n        this._currentRenderTarget = rtWrapper;\n        this._bindUnboundFramebuffer(webglRTWrapper._MSAAFramebuffer ? webglRTWrapper._MSAAFramebuffer : webglRTWrapper._framebuffer);\n        const gl = this._gl;\n        if (!rtWrapper.isMulti) {\n            if (rtWrapper.is2DArray || rtWrapper.is3D) {\n                gl.framebufferTextureLayer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, rtWrapper.texture._hardwareTexture?.underlyingResource, lodLevel, layer);\n            }\n            else if (rtWrapper.isCube) {\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, rtWrapper.texture._hardwareTexture?.underlyingResource, lodLevel);\n            }\n            else if (webglRTWrapper._currentLOD !== lodLevel) {\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, rtWrapper.texture._hardwareTexture?.underlyingResource, lodLevel);\n                webglRTWrapper._currentLOD = lodLevel;\n            }\n        }\n        const depthStencilTexture = rtWrapper._depthStencilTexture;\n        if (depthStencilTexture) {\n            if (rtWrapper.is3D) {\n                if (rtWrapper.texture.width !== depthStencilTexture.width ||\n                    rtWrapper.texture.height !== depthStencilTexture.height ||\n                    rtWrapper.texture.depth !== depthStencilTexture.depth) {\n                    Logger.Warn(\"Depth/Stencil attachment for 3D target must have same dimensions as color attachment\");\n                }\n            }\n            const attachment = rtWrapper._depthStencilTextureWithStencil ? gl.DEPTH_STENCIL_ATTACHMENT : gl.DEPTH_ATTACHMENT;\n            if (rtWrapper.is2DArray || rtWrapper.is3D) {\n                gl.framebufferTextureLayer(gl.FRAMEBUFFER, attachment, depthStencilTexture._hardwareTexture?.underlyingResource, lodLevel, layer);\n            }\n            else if (rtWrapper.isCube) {\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, depthStencilTexture._hardwareTexture?.underlyingResource, lodLevel);\n            }\n            else {\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, depthStencilTexture._hardwareTexture?.underlyingResource, lodLevel);\n            }\n        }\n        if (this._cachedViewport && !forceFullscreenViewport) {\n            this.setViewport(this._cachedViewport, requiredWidth, requiredHeight);\n        }\n        else {\n            if (!requiredWidth) {\n                requiredWidth = rtWrapper.width;\n                if (lodLevel) {\n                    requiredWidth = requiredWidth / Math.pow(2, lodLevel);\n                }\n            }\n            if (!requiredHeight) {\n                requiredHeight = rtWrapper.height;\n                if (lodLevel) {\n                    requiredHeight = requiredHeight / Math.pow(2, lodLevel);\n                }\n            }\n            this._viewport(0, 0, requiredWidth, requiredHeight);\n        }\n        this.wipeCaches();\n    }\n    /**\n     * Set various states to the webGL context\n     * @param culling defines culling state: true to enable culling, false to disable it\n     * @param zOffset defines the value to apply to zOffset (0 by default)\n     * @param force defines if states must be applied even if cache is up to date\n     * @param reverseSide defines if culling must be reversed (CCW if false, CW if true)\n     * @param cullBackFaces true to cull back faces, false to cull front faces (if culling is enabled)\n     * @param stencil stencil states to set\n     * @param zOffsetUnits defines the value to apply to zOffsetUnits (0 by default)\n     */\n    setState(culling, zOffset = 0, force, reverseSide = false, cullBackFaces, stencil, zOffsetUnits = 0) {\n        // Culling\n        if (this._depthCullingState.cull !== culling || force) {\n            this._depthCullingState.cull = culling;\n        }\n        // Cull face\n        const cullFace = this.cullBackFaces ?? cullBackFaces ?? true ? this._gl.BACK : this._gl.FRONT;\n        if (this._depthCullingState.cullFace !== cullFace || force) {\n            this._depthCullingState.cullFace = cullFace;\n        }\n        // Z offset\n        this.setZOffset(zOffset);\n        this.setZOffsetUnits(zOffsetUnits);\n        // Front face\n        const frontFace = reverseSide ? this._gl.CW : this._gl.CCW;\n        if (this._depthCullingState.frontFace !== frontFace || force) {\n            this._depthCullingState.frontFace = frontFace;\n        }\n        this._stencilStateComposer.stencilMaterial = stencil;\n    }\n    /**\n     * @internal\n     */\n    _bindUnboundFramebuffer(framebuffer) {\n        if (this._currentFramebuffer !== framebuffer) {\n            this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, framebuffer);\n            this._currentFramebuffer = framebuffer;\n        }\n    }\n    /** @internal */\n    _currentFrameBufferIsDefaultFrameBuffer() {\n        return this._currentFramebuffer === null;\n    }\n    /**\n     * Generates the mipmaps for a texture\n     * @param texture texture to generate the mipmaps for\n     */\n    generateMipmaps(texture) {\n        const target = this._getTextureTarget(texture);\n        this._bindTextureDirectly(target, texture, true);\n        this._gl.generateMipmap(target);\n        this._bindTextureDirectly(target, null);\n    }\n    /**\n     * Unbind the current render target texture from the webGL context\n     * @param texture defines the render target wrapper to unbind\n     * @param disableGenerateMipMaps defines a boolean indicating that mipmaps must not be generated\n     * @param onBeforeUnbind defines a function which will be called before the effective unbind\n     */\n    unBindFramebuffer(texture, disableGenerateMipMaps = false, onBeforeUnbind) {\n        const webglRTWrapper = texture;\n        this._currentRenderTarget = null;\n        // If MSAA, we need to bitblt back to main texture\n        const gl = this._gl;\n        if (webglRTWrapper._MSAAFramebuffer) {\n            if (texture.isMulti) {\n                // This texture is part of a MRT texture, we need to treat all attachments\n                this.unBindMultiColorAttachmentFramebuffer(texture, disableGenerateMipMaps, onBeforeUnbind);\n                return;\n            }\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webglRTWrapper._MSAAFramebuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webglRTWrapper._framebuffer);\n            gl.blitFramebuffer(0, 0, texture.width, texture.height, 0, 0, texture.width, texture.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n        }\n        if (texture.texture?.generateMipMaps && !disableGenerateMipMaps && !texture.isCube) {\n            this.generateMipmaps(texture.texture);\n        }\n        if (onBeforeUnbind) {\n            if (webglRTWrapper._MSAAFramebuffer) {\n                // Bind the correct framebuffer\n                this._bindUnboundFramebuffer(webglRTWrapper._framebuffer);\n            }\n            onBeforeUnbind();\n        }\n        this._bindUnboundFramebuffer(null);\n    }\n    /**\n     * Force a webGL flush (ie. a flush of all waiting webGL commands)\n     */\n    flushFramebuffer() {\n        this._gl.flush();\n    }\n    /**\n     * Unbind the current render target and bind the default framebuffer\n     */\n    restoreDefaultFramebuffer() {\n        if (this._currentRenderTarget) {\n            this.unBindFramebuffer(this._currentRenderTarget);\n        }\n        else {\n            this._bindUnboundFramebuffer(null);\n        }\n        if (this._cachedViewport) {\n            this.setViewport(this._cachedViewport);\n        }\n        this.wipeCaches();\n    }\n    // VBOs\n    /** @internal */\n    _resetVertexBufferBinding() {\n        this.bindArrayBuffer(null);\n        this._cachedVertexBuffers = null;\n    }\n    /**\n     * Creates a vertex buffer\n     * @param data the data or size for the vertex buffer\n     * @param _updatable whether the buffer should be created as updatable\n     * @param _label defines the label of the buffer (for debug purpose)\n     * @returns the new WebGL static buffer\n     */\n    createVertexBuffer(data, _updatable, _label) {\n        return this._createVertexBuffer(data, this._gl.STATIC_DRAW);\n    }\n    _createVertexBuffer(data, usage) {\n        const vbo = this._gl.createBuffer();\n        if (!vbo) {\n            throw new Error(\"Unable to create vertex buffer\");\n        }\n        const dataBuffer = new WebGLDataBuffer(vbo);\n        this.bindArrayBuffer(dataBuffer);\n        if (typeof data !== \"number\") {\n            if (data instanceof Array) {\n                this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(data), usage);\n                dataBuffer.capacity = data.length * 4;\n            }\n            else {\n                this._gl.bufferData(this._gl.ARRAY_BUFFER, data, usage);\n                dataBuffer.capacity = data.byteLength;\n            }\n        }\n        else {\n            this._gl.bufferData(this._gl.ARRAY_BUFFER, new Uint8Array(data), usage);\n            dataBuffer.capacity = data;\n        }\n        this._resetVertexBufferBinding();\n        dataBuffer.references = 1;\n        return dataBuffer;\n    }\n    /**\n     * Creates a dynamic vertex buffer\n     * @param data the data for the dynamic vertex buffer\n     * @param _label defines the label of the buffer (for debug purpose)\n     * @returns the new WebGL dynamic buffer\n     */\n    createDynamicVertexBuffer(data, _label) {\n        return this._createVertexBuffer(data, this._gl.DYNAMIC_DRAW);\n    }\n    _resetIndexBufferBinding() {\n        this.bindIndexBuffer(null);\n        this._cachedIndexBuffer = null;\n    }\n    /**\n     * Creates a new index buffer\n     * @param indices defines the content of the index buffer\n     * @param updatable defines if the index buffer must be updatable\n     * @param _label defines the label of the buffer (for debug purpose)\n     * @returns a new webGL buffer\n     */\n    createIndexBuffer(indices, updatable, _label) {\n        const vbo = this._gl.createBuffer();\n        const dataBuffer = new WebGLDataBuffer(vbo);\n        if (!vbo) {\n            throw new Error(\"Unable to create index buffer\");\n        }\n        this.bindIndexBuffer(dataBuffer);\n        const data = this._normalizeIndexData(indices);\n        this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, data, updatable ? this._gl.DYNAMIC_DRAW : this._gl.STATIC_DRAW);\n        this._resetIndexBufferBinding();\n        dataBuffer.references = 1;\n        dataBuffer.is32Bits = data.BYTES_PER_ELEMENT === 4;\n        return dataBuffer;\n    }\n    _normalizeIndexData(indices) {\n        const bytesPerElement = indices.BYTES_PER_ELEMENT;\n        if (bytesPerElement === 2) {\n            return indices;\n        }\n        // Check 32 bit support\n        if (this._caps.uintIndices) {\n            if (indices instanceof Uint32Array) {\n                return indices;\n            }\n            else {\n                // number[] or Int32Array, check if 32 bit is necessary\n                for (let index = 0; index < indices.length; index++) {\n                    if (indices[index] >= 65535) {\n                        return new Uint32Array(indices);\n                    }\n                }\n                return new Uint16Array(indices);\n            }\n        }\n        // No 32 bit support, force conversion to 16 bit (values greater 16 bit are lost)\n        return new Uint16Array(indices);\n    }\n    /**\n     * Bind a webGL buffer to the webGL context\n     * @param buffer defines the buffer to bind\n     */\n    bindArrayBuffer(buffer) {\n        if (!this._vaoRecordInProgress) {\n            this._unbindVertexArrayObject();\n        }\n        this._bindBuffer(buffer, this._gl.ARRAY_BUFFER);\n    }\n    /**\n     * Bind a specific block at a given index in a specific shader program\n     * @param pipelineContext defines the pipeline context to use\n     * @param blockName defines the block name\n     * @param index defines the index where to bind the block\n     */\n    bindUniformBlock(pipelineContext, blockName, index) {\n        const program = pipelineContext.program;\n        const uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n        this._gl.uniformBlockBinding(program, uniformLocation, index);\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    bindIndexBuffer(buffer) {\n        if (!this._vaoRecordInProgress) {\n            this._unbindVertexArrayObject();\n        }\n        this._bindBuffer(buffer, this._gl.ELEMENT_ARRAY_BUFFER);\n    }\n    _bindBuffer(buffer, target) {\n        if (this._vaoRecordInProgress || this._currentBoundBuffer[target] !== buffer) {\n            this._gl.bindBuffer(target, buffer ? buffer.underlyingResource : null);\n            this._currentBoundBuffer[target] = buffer;\n        }\n    }\n    /**\n     * update the bound buffer with the given data\n     * @param data defines the data to update\n     */\n    updateArrayBuffer(data) {\n        this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n    }\n    _vertexAttribPointer(buffer, indx, size, type, normalized, stride, offset) {\n        const pointer = this._currentBufferPointers[indx];\n        if (!pointer) {\n            return;\n        }\n        let changed = false;\n        if (!pointer.active) {\n            changed = true;\n            pointer.active = true;\n            pointer.index = indx;\n            pointer.size = size;\n            pointer.type = type;\n            pointer.normalized = normalized;\n            pointer.stride = stride;\n            pointer.offset = offset;\n            pointer.buffer = buffer;\n        }\n        else {\n            if (pointer.buffer !== buffer) {\n                pointer.buffer = buffer;\n                changed = true;\n            }\n            if (pointer.size !== size) {\n                pointer.size = size;\n                changed = true;\n            }\n            if (pointer.type !== type) {\n                pointer.type = type;\n                changed = true;\n            }\n            if (pointer.normalized !== normalized) {\n                pointer.normalized = normalized;\n                changed = true;\n            }\n            if (pointer.stride !== stride) {\n                pointer.stride = stride;\n                changed = true;\n            }\n            if (pointer.offset !== offset) {\n                pointer.offset = offset;\n                changed = true;\n            }\n        }\n        if (changed || this._vaoRecordInProgress) {\n            this.bindArrayBuffer(buffer);\n            if (type === this._gl.UNSIGNED_INT || type === this._gl.INT) {\n                this._gl.vertexAttribIPointer(indx, size, type, stride, offset);\n            }\n            else {\n                this._gl.vertexAttribPointer(indx, size, type, normalized, stride, offset);\n            }\n        }\n    }\n    /**\n     * @internal\n     */\n    _bindIndexBufferWithCache(indexBuffer) {\n        if (indexBuffer == null) {\n            return;\n        }\n        if (this._cachedIndexBuffer !== indexBuffer) {\n            this._cachedIndexBuffer = indexBuffer;\n            this.bindIndexBuffer(indexBuffer);\n            this._uintIndicesCurrentlySet = indexBuffer.is32Bits;\n        }\n    }\n    _bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers) {\n        const attributes = effect.getAttributesNames();\n        if (!this._vaoRecordInProgress) {\n            this._unbindVertexArrayObject();\n        }\n        this.unbindAllAttributes();\n        for (let index = 0; index < attributes.length; index++) {\n            const order = effect.getAttributeLocation(index);\n            if (order >= 0) {\n                const ai = attributes[index];\n                let vertexBuffer = null;\n                if (overrideVertexBuffers) {\n                    vertexBuffer = overrideVertexBuffers[ai];\n                }\n                if (!vertexBuffer) {\n                    vertexBuffer = vertexBuffers[ai];\n                }\n                if (!vertexBuffer) {\n                    continue;\n                }\n                this._gl.enableVertexAttribArray(order);\n                if (!this._vaoRecordInProgress) {\n                    this._vertexAttribArraysEnabled[order] = true;\n                }\n                const buffer = vertexBuffer.getBuffer();\n                if (buffer) {\n                    this._vertexAttribPointer(buffer, order, vertexBuffer.getSize(), vertexBuffer.type, vertexBuffer.normalized, vertexBuffer.byteStride, vertexBuffer.byteOffset);\n                    if (vertexBuffer.getIsInstanced()) {\n                        this._gl.vertexAttribDivisor(order, vertexBuffer.getInstanceDivisor());\n                        if (!this._vaoRecordInProgress) {\n                            this._currentInstanceLocations.push(order);\n                            this._currentInstanceBuffers.push(buffer);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Records a vertex array object\n     * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n     * @param vertexBuffers defines the list of vertex buffers to store\n     * @param indexBuffer defines the index buffer to store\n     * @param effect defines the effect to store\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     * @returns the new vertex array object\n     */\n    recordVertexArrayObject(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n        const vao = this._gl.createVertexArray();\n        if (!vao) {\n            throw new Error(\"Unable to create VAO\");\n        }\n        this._vaoRecordInProgress = true;\n        this._gl.bindVertexArray(vao);\n        this._mustWipeVertexAttributes = true;\n        this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n        this.bindIndexBuffer(indexBuffer);\n        this._vaoRecordInProgress = false;\n        this._gl.bindVertexArray(null);\n        return vao;\n    }\n    /**\n     * Bind a specific vertex array object\n     * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n     * @param vertexArrayObject defines the vertex array object to bind\n     * @param indexBuffer defines the index buffer to bind\n     */\n    bindVertexArrayObject(vertexArrayObject, indexBuffer) {\n        if (this._cachedVertexArrayObject !== vertexArrayObject) {\n            this._cachedVertexArrayObject = vertexArrayObject;\n            this._gl.bindVertexArray(vertexArrayObject);\n            this._cachedVertexBuffers = null;\n            this._cachedIndexBuffer = null;\n            this._uintIndicesCurrentlySet = indexBuffer != null && indexBuffer.is32Bits;\n            this._mustWipeVertexAttributes = true;\n        }\n    }\n    /**\n     * Bind webGl buffers directly to the webGL context\n     * @param vertexBuffer defines the vertex buffer to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param vertexDeclaration defines the vertex declaration to use with the vertex buffer\n     * @param vertexStrideSize defines the vertex stride of the vertex buffer\n     * @param effect defines the effect associated with the vertex buffer\n     */\n    bindBuffersDirectly(vertexBuffer, indexBuffer, vertexDeclaration, vertexStrideSize, effect) {\n        if (this._cachedVertexBuffers !== vertexBuffer || this._cachedEffectForVertexBuffers !== effect) {\n            this._cachedVertexBuffers = vertexBuffer;\n            this._cachedEffectForVertexBuffers = effect;\n            const attributesCount = effect.getAttributesCount();\n            this._unbindVertexArrayObject();\n            this.unbindAllAttributes();\n            let offset = 0;\n            for (let index = 0; index < attributesCount; index++) {\n                if (index < vertexDeclaration.length) {\n                    const order = effect.getAttributeLocation(index);\n                    if (order >= 0) {\n                        this._gl.enableVertexAttribArray(order);\n                        this._vertexAttribArraysEnabled[order] = true;\n                        this._vertexAttribPointer(vertexBuffer, order, vertexDeclaration[index], this._gl.FLOAT, false, vertexStrideSize, offset);\n                    }\n                    offset += vertexDeclaration[index] * 4;\n                }\n            }\n        }\n        this._bindIndexBufferWithCache(indexBuffer);\n    }\n    _unbindVertexArrayObject() {\n        if (!this._cachedVertexArrayObject) {\n            return;\n        }\n        this._cachedVertexArrayObject = null;\n        this._gl.bindVertexArray(null);\n    }\n    /**\n     * Bind a list of vertex buffers to the webGL context\n     * @param vertexBuffers defines the list of vertex buffers to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param effect defines the effect associated with the vertex buffers\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     */\n    bindBuffers(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n        if (this._cachedVertexBuffers !== vertexBuffers || this._cachedEffectForVertexBuffers !== effect) {\n            this._cachedVertexBuffers = vertexBuffers;\n            this._cachedEffectForVertexBuffers = effect;\n            this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n        }\n        this._bindIndexBufferWithCache(indexBuffer);\n    }\n    /**\n     * Unbind all instance attributes\n     */\n    unbindInstanceAttributes() {\n        let boundBuffer;\n        for (let i = 0, ul = this._currentInstanceLocations.length; i < ul; i++) {\n            const instancesBuffer = this._currentInstanceBuffers[i];\n            if (boundBuffer != instancesBuffer && instancesBuffer.references) {\n                boundBuffer = instancesBuffer;\n                this.bindArrayBuffer(instancesBuffer);\n            }\n            const offsetLocation = this._currentInstanceLocations[i];\n            this._gl.vertexAttribDivisor(offsetLocation, 0);\n        }\n        this._currentInstanceBuffers.length = 0;\n        this._currentInstanceLocations.length = 0;\n    }\n    /**\n     * Release and free the memory of a vertex array object\n     * @param vao defines the vertex array object to delete\n     */\n    releaseVertexArrayObject(vao) {\n        this._gl.deleteVertexArray(vao);\n    }\n    /**\n     * @internal\n     */\n    _releaseBuffer(buffer) {\n        buffer.references--;\n        if (buffer.references === 0) {\n            this._deleteBuffer(buffer);\n            return true;\n        }\n        return false;\n    }\n    _deleteBuffer(buffer) {\n        this._gl.deleteBuffer(buffer.underlyingResource);\n    }\n    /**\n     * Update the content of a webGL buffer used with instantiation and bind it to the webGL context\n     * @param instancesBuffer defines the webGL buffer to update and bind\n     * @param data defines the data to store in the buffer\n     * @param offsetLocations defines the offsets or attributes information used to determine where data must be stored in the buffer\n     */\n    updateAndBindInstancesBuffer(instancesBuffer, data, offsetLocations) {\n        this.bindArrayBuffer(instancesBuffer);\n        if (data) {\n            this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n        }\n        if (offsetLocations[0].index !== undefined) {\n            this.bindInstancesBuffer(instancesBuffer, offsetLocations, true);\n        }\n        else {\n            for (let index = 0; index < 4; index++) {\n                const offsetLocation = offsetLocations[index];\n                if (!this._vertexAttribArraysEnabled[offsetLocation]) {\n                    this._gl.enableVertexAttribArray(offsetLocation);\n                    this._vertexAttribArraysEnabled[offsetLocation] = true;\n                }\n                this._vertexAttribPointer(instancesBuffer, offsetLocation, 4, this._gl.FLOAT, false, 64, index * 16);\n                this._gl.vertexAttribDivisor(offsetLocation, 1);\n                this._currentInstanceLocations.push(offsetLocation);\n                this._currentInstanceBuffers.push(instancesBuffer);\n            }\n        }\n    }\n    /**\n     * Bind the content of a webGL buffer used with instantiation\n     * @param instancesBuffer defines the webGL buffer to bind\n     * @param attributesInfo defines the offsets or attributes information used to determine where data must be stored in the buffer\n     * @param computeStride defines Whether to compute the strides from the info or use the default 0\n     */\n    bindInstancesBuffer(instancesBuffer, attributesInfo, computeStride = true) {\n        this.bindArrayBuffer(instancesBuffer);\n        let stride = 0;\n        if (computeStride) {\n            for (let i = 0; i < attributesInfo.length; i++) {\n                const ai = attributesInfo[i];\n                stride += ai.attributeSize * 4;\n            }\n        }\n        for (let i = 0; i < attributesInfo.length; i++) {\n            const ai = attributesInfo[i];\n            if (ai.index === undefined) {\n                ai.index = this._currentEffect.getAttributeLocationByName(ai.attributeName);\n            }\n            if (ai.index < 0) {\n                continue;\n            }\n            if (!this._vertexAttribArraysEnabled[ai.index]) {\n                this._gl.enableVertexAttribArray(ai.index);\n                this._vertexAttribArraysEnabled[ai.index] = true;\n            }\n            this._vertexAttribPointer(instancesBuffer, ai.index, ai.attributeSize, ai.attributeType || this._gl.FLOAT, ai.normalized || false, stride, ai.offset);\n            this._gl.vertexAttribDivisor(ai.index, ai.divisor === undefined ? 1 : ai.divisor);\n            this._currentInstanceLocations.push(ai.index);\n            this._currentInstanceBuffers.push(instancesBuffer);\n        }\n    }\n    /**\n     * Disable the instance attribute corresponding to the name in parameter\n     * @param name defines the name of the attribute to disable\n     */\n    disableInstanceAttributeByName(name) {\n        if (!this._currentEffect) {\n            return;\n        }\n        const attributeLocation = this._currentEffect.getAttributeLocationByName(name);\n        this.disableInstanceAttribute(attributeLocation);\n    }\n    /**\n     * Disable the instance attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n    disableInstanceAttribute(attributeLocation) {\n        let shouldClean = false;\n        let index;\n        while ((index = this._currentInstanceLocations.indexOf(attributeLocation)) !== -1) {\n            this._currentInstanceLocations.splice(index, 1);\n            this._currentInstanceBuffers.splice(index, 1);\n            shouldClean = true;\n            index = this._currentInstanceLocations.indexOf(attributeLocation);\n        }\n        if (shouldClean) {\n            this._gl.vertexAttribDivisor(attributeLocation, 0);\n            this.disableAttributeByIndex(attributeLocation);\n        }\n    }\n    /**\n     * Disable the attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n    disableAttributeByIndex(attributeLocation) {\n        this._gl.disableVertexAttribArray(attributeLocation);\n        this._vertexAttribArraysEnabled[attributeLocation] = false;\n        this._currentBufferPointers[attributeLocation].active = false;\n    }\n    /**\n     * Send a draw order\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n    draw(useTriangles, indexStart, indexCount, instancesCount) {\n        this.drawElementsType(useTriangles ? 0 : 1, indexStart, indexCount, instancesCount);\n    }\n    /**\n     * Draw a list of points\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n    drawPointClouds(verticesStart, verticesCount, instancesCount) {\n        this.drawArraysType(2, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n    drawUnIndexed(useTriangles, verticesStart, verticesCount, instancesCount) {\n        this.drawArraysType(useTriangles ? 0 : 1, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of indexed primitives\n     * @param fillMode defines the primitive to use\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n    drawElementsType(fillMode, indexStart, indexCount, instancesCount) {\n        // Apply states\n        this.applyStates();\n        this._reportDrawCall();\n        // Render\n        const drawMode = this._drawMode(fillMode);\n        const indexFormat = this._uintIndicesCurrentlySet ? this._gl.UNSIGNED_INT : this._gl.UNSIGNED_SHORT;\n        const mult = this._uintIndicesCurrentlySet ? 4 : 2;\n        if (instancesCount) {\n            this._gl.drawElementsInstanced(drawMode, indexCount, indexFormat, indexStart * mult, instancesCount);\n        }\n        else {\n            this._gl.drawElements(drawMode, indexCount, indexFormat, indexStart * mult);\n        }\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param fillMode defines the primitive to use\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n    drawArraysType(fillMode, verticesStart, verticesCount, instancesCount) {\n        // Apply states\n        this.applyStates();\n        this._reportDrawCall();\n        const drawMode = this._drawMode(fillMode);\n        if (instancesCount) {\n            this._gl.drawArraysInstanced(drawMode, verticesStart, verticesCount, instancesCount);\n        }\n        else {\n            this._gl.drawArrays(drawMode, verticesStart, verticesCount);\n        }\n    }\n    _drawMode(fillMode) {\n        switch (fillMode) {\n            // Triangle views\n            case 0:\n                return this._gl.TRIANGLES;\n            case 2:\n                return this._gl.POINTS;\n            case 1:\n                return this._gl.LINES;\n            // Draw modes\n            case 3:\n                return this._gl.POINTS;\n            case 4:\n                return this._gl.LINES;\n            case 5:\n                return this._gl.LINE_LOOP;\n            case 6:\n                return this._gl.LINE_STRIP;\n            case 7:\n                return this._gl.TRIANGLE_STRIP;\n            case 8:\n                return this._gl.TRIANGLE_FAN;\n            default:\n                return this._gl.TRIANGLES;\n        }\n    }\n    // Shaders\n    /**\n     * @internal\n     */\n    _releaseEffect(effect) {\n        if (this._compiledEffects[effect._key]) {\n            delete this._compiledEffects[effect._key];\n        }\n        const pipelineContext = effect.getPipelineContext();\n        if (pipelineContext) {\n            this._deletePipelineContext(pipelineContext);\n        }\n    }\n    /**\n     * @internal\n     */\n    _deletePipelineContext(pipelineContext) {\n        const webGLPipelineContext = pipelineContext;\n        if (webGLPipelineContext && webGLPipelineContext.program) {\n            webGLPipelineContext.program.__SPECTOR_rebuildProgram = null;\n            resetCachedPipeline(webGLPipelineContext);\n            this._gl.deleteProgram(webGLPipelineContext.program);\n        }\n    }\n    /**\n     * @internal\n     */\n    _getGlobalDefines(defines) {\n        return _getGlobalDefines(defines, this.isNDCHalfZRange, this.useReverseDepthBuffer, this.useExactSrgbConversions);\n    }\n    /**\n     * Create a new effect (used to store vertex/fragment shaders)\n     * @param baseName defines the base name of the effect (The name of file without .fragment.fx or .vertex.fx)\n     * @param attributesNamesOrOptions defines either a list of attribute names or an IEffectCreationOptions object\n     * @param uniformsNamesOrEngine defines either a list of uniform names or the engine to use\n     * @param samplers defines an array of string used to represent textures\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param fallbacks defines the list of potential fallbacks to use if shader compilation fails\n     * @param onCompiled defines a function to call when the effect creation is successful\n     * @param onError defines a function to call when the effect creation has failed\n     * @param indexParameters defines an object containing the index values to use to compile shaders (like the maximum number of simultaneous lights)\n     * @param shaderLanguage the language the shader is written in (default: GLSL)\n     * @returns the new Effect\n     */\n    createEffect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, defines, fallbacks, onCompiled, onError, indexParameters, shaderLanguage = 0 /* ShaderLanguage.GLSL */) {\n        const vertex = typeof baseName === \"string\" ? baseName : baseName.vertexToken || baseName.vertexSource || baseName.vertexElement || baseName.vertex;\n        const fragment = typeof baseName === \"string\" ? baseName : baseName.fragmentToken || baseName.fragmentSource || baseName.fragmentElement || baseName.fragment;\n        const globalDefines = this._getGlobalDefines();\n        let fullDefines = defines ?? attributesNamesOrOptions.defines ?? \"\";\n        if (globalDefines) {\n            fullDefines += globalDefines;\n        }\n        const name = vertex + \"+\" + fragment + \"@\" + fullDefines;\n        if (this._compiledEffects[name]) {\n            const compiledEffect = this._compiledEffects[name];\n            if (onCompiled && compiledEffect.isReady()) {\n                onCompiled(compiledEffect);\n            }\n            return compiledEffect;\n        }\n        if (this._gl) {\n            getStateObject(this._gl);\n        }\n        const effect = new Effect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, this, defines, fallbacks, onCompiled, onError, indexParameters, name, attributesNamesOrOptions.shaderLanguage ?? shaderLanguage);\n        this._compiledEffects[name] = effect;\n        return effect;\n    }\n    /**\n     * @internal\n     */\n    _getShaderSource(shader) {\n        return this._gl.getShaderSource(shader);\n    }\n    /**\n     * Directly creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n    createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context, transformFeedbackVaryings = null) {\n        const stateObject = getStateObject(this._gl);\n        stateObject._contextWasLost = this._contextWasLost;\n        stateObject.validateShaderPrograms = this.validateShaderPrograms;\n        return createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context || this._gl, transformFeedbackVaryings);\n    }\n    /**\n     * Creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode  defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n    createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context, transformFeedbackVaryings = null) {\n        const stateObject = getStateObject(this._gl);\n        // assure the state object is correct\n        stateObject._contextWasLost = this._contextWasLost;\n        stateObject.validateShaderPrograms = this.validateShaderPrograms;\n        return createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context || this._gl, transformFeedbackVaryings);\n    }\n    /**\n     * Inline functions in shader code that are marked to be inlined\n     * @param code code to inline\n     * @returns inlined code\n     */\n    inlineShaderCode(code) {\n        // no inlining needed in the WebGL engine\n        return code;\n    }\n    /**\n     * Creates a new pipeline context\n     * @param shaderProcessingContext defines the shader processing context used during the processing if available\n     * @returns the new pipeline\n     */\n    createPipelineContext(shaderProcessingContext) {\n        if (this._gl) {\n            const stateObject = getStateObject(this._gl);\n            stateObject.parallelShaderCompile = this._caps.parallelShaderCompile;\n        }\n        const context = createPipelineContext(this._gl, shaderProcessingContext);\n        context.engine = this;\n        return context;\n    }\n    /**\n     * Creates a new material context\n     * @returns the new context\n     */\n    createMaterialContext() {\n        return undefined;\n    }\n    /**\n     * Creates a new draw context\n     * @returns the new context\n     */\n    createDrawContext() {\n        return undefined;\n    }\n    _finalizePipelineContext(pipelineContext) {\n        return _finalizePipelineContext(pipelineContext, this._gl, this.validateShaderPrograms);\n    }\n    /**\n     * @internal\n     */\n    _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, _rawVertexSourceCode, _rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, _key) {\n        const stateObject = getStateObject(this._gl);\n        stateObject._contextWasLost = this._contextWasLost;\n        stateObject.validateShaderPrograms = this.validateShaderPrograms;\n        stateObject._createShaderProgramInjection = this._createShaderProgram.bind(this);\n        stateObject.createRawShaderProgramInjection = this.createRawShaderProgram.bind(this);\n        stateObject.createShaderProgramInjection = this.createShaderProgram.bind(this);\n        stateObject.loadFileInjection = this._loadFile.bind(this);\n        return _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, _rawVertexSourceCode, _rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, _key);\n    }\n    _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings = null) {\n        return _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * @internal\n     */\n    _isRenderingStateCompiled(pipelineContext) {\n        const webGLPipelineContext = pipelineContext;\n        if (this._isDisposed || webGLPipelineContext._isDisposed) {\n            return false;\n        }\n        if (this._gl.getProgramParameter(webGLPipelineContext.program, this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)) {\n            this._finalizePipelineContext(webGLPipelineContext);\n            return true;\n        }\n        return false;\n    }\n    /**\n     * @internal\n     */\n    _executeWhenRenderingStateIsCompiled(pipelineContext, action) {\n        _executeWhenRenderingStateIsCompiled(pipelineContext, action);\n    }\n    /**\n     * Gets the list of webGL uniform locations associated with a specific program based on a list of uniform names\n     * @param pipelineContext defines the pipeline context to use\n     * @param uniformsNames defines the list of uniform names\n     * @returns an array of webGL uniform locations\n     */\n    getUniforms(pipelineContext, uniformsNames) {\n        const results = new Array();\n        const webGLPipelineContext = pipelineContext;\n        for (let index = 0; index < uniformsNames.length; index++) {\n            results.push(this._gl.getUniformLocation(webGLPipelineContext.program, uniformsNames[index]));\n        }\n        return results;\n    }\n    /**\n     * Gets the list of active attributes for a given webGL program\n     * @param pipelineContext defines the pipeline context to use\n     * @param attributesNames defines the list of attribute names to get\n     * @returns an array of indices indicating the offset of each attribute\n     */\n    getAttributes(pipelineContext, attributesNames) {\n        const results = [];\n        const webGLPipelineContext = pipelineContext;\n        for (let index = 0; index < attributesNames.length; index++) {\n            try {\n                results.push(this._gl.getAttribLocation(webGLPipelineContext.program, attributesNames[index]));\n            }\n            catch (e) {\n                results.push(-1);\n            }\n        }\n        return results;\n    }\n    /**\n     * Activates an effect, making it the current one (ie. the one used for rendering)\n     * @param effect defines the effect to activate\n     */\n    enableEffect(effect) {\n        effect = effect !== null && IsWrapper(effect) ? effect.effect : effect; // get only the effect, we don't need a Wrapper in the WebGL engine\n        if (!effect || effect === this._currentEffect) {\n            return;\n        }\n        this._stencilStateComposer.stencilMaterial = undefined;\n        effect = effect;\n        // Use program\n        this.bindSamplers(effect);\n        this._currentEffect = effect;\n        if (effect.onBind) {\n            effect.onBind(effect);\n        }\n        if (effect._onBindObservable) {\n            effect._onBindObservable.notifyObservers(effect);\n        }\n    }\n    /**\n     * Set the value of an uniform to a number (int)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the int number to store\n     * @returns true if the value was set\n     */\n    setInt(uniform, value) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform1i(uniform, value);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a int2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n    setInt2(uniform, x, y) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform2i(uniform, x, y);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a int3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n    setInt3(uniform, x, y, z) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform3i(uniform, x, y, z);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a int4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n    setInt4(uniform, x, y, z, w) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform4i(uniform, x, y, z, w);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n    setIntArray(uniform, array) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform1iv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n    setIntArray2(uniform, array) {\n        if (!uniform || array.length % 2 !== 0) {\n            return false;\n        }\n        this._gl.uniform2iv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n    setIntArray3(uniform, array) {\n        if (!uniform || array.length % 3 !== 0) {\n            return false;\n        }\n        this._gl.uniform3iv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n    setIntArray4(uniform, array) {\n        if (!uniform || array.length % 4 !== 0) {\n            return false;\n        }\n        this._gl.uniform4iv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a number (unsigned int)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the unsigned int number to store\n     * @returns true if the value was set\n     */\n    setUInt(uniform, value) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform1ui(uniform, value);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a unsigned int2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n    setUInt2(uniform, x, y) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform2ui(uniform, x, y);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a unsigned int3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n    setUInt3(uniform, x, y, z) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform3ui(uniform, x, y, z);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a unsigned int4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n    setUInt4(uniform, x, y, z, w) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform4ui(uniform, x, y, z, w);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n    setUIntArray(uniform, array) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform1uiv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32 (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n    setUIntArray2(uniform, array) {\n        if (!uniform || array.length % 2 !== 0) {\n            return false;\n        }\n        this._gl.uniform2uiv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32 (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n    setUIntArray3(uniform, array) {\n        if (!uniform || array.length % 3 !== 0) {\n            return false;\n        }\n        this._gl.uniform3uiv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32 (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n    setUIntArray4(uniform, array) {\n        if (!uniform || array.length % 4 !== 0) {\n            return false;\n        }\n        this._gl.uniform4uiv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n    setArray(uniform, array) {\n        if (!uniform) {\n            return false;\n        }\n        if (array.length < 1) {\n            return false;\n        }\n        this._gl.uniform1fv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n    setArray2(uniform, array) {\n        if (!uniform || array.length % 2 !== 0) {\n            return false;\n        }\n        this._gl.uniform2fv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n    setArray3(uniform, array) {\n        if (!uniform || array.length % 3 !== 0) {\n            return false;\n        }\n        this._gl.uniform3fv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n    setArray4(uniform, array) {\n        if (!uniform || array.length % 4 !== 0) {\n            return false;\n        }\n        this._gl.uniform4fv(uniform, array);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to an array of float32 (stored as matrices)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrices defines the array of float32 to store\n     * @returns true if the value was set\n     */\n    setMatrices(uniform, matrices) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniformMatrix4fv(uniform, false, matrices);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (3x3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 3x3 matrix to store\n     * @returns true if the value was set\n     */\n    setMatrix3x3(uniform, matrix) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniformMatrix3fv(uniform, false, matrix);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (2x2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 2x2 matrix to store\n     * @returns true if the value was set\n     */\n    setMatrix2x2(uniform, matrix) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniformMatrix2fv(uniform, false, matrix);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a number (float)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the float number to store\n     * @returns true if the value was transferred\n     */\n    setFloat(uniform, value) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform1f(uniform, value);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a vec2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n    setFloat2(uniform, x, y) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform2f(uniform, x, y);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a vec3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n    setFloat3(uniform, x, y, z) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform3f(uniform, x, y, z);\n        return true;\n    }\n    /**\n     * Set the value of an uniform to a vec4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n    setFloat4(uniform, x, y, z, w) {\n        if (!uniform) {\n            return false;\n        }\n        this._gl.uniform4f(uniform, x, y, z, w);\n        return true;\n    }\n    // States\n    /**\n     * Apply all cached states (depth, culling, stencil and alpha)\n     */\n    applyStates() {\n        this._depthCullingState.apply(this._gl);\n        this._stencilStateComposer.apply(this._gl);\n        this._alphaState.apply(this._gl);\n        if (this._colorWriteChanged) {\n            this._colorWriteChanged = false;\n            const enable = this._colorWrite;\n            this._gl.colorMask(enable, enable, enable, enable);\n        }\n    }\n    // Textures\n    /**\n     * Force the entire cache to be cleared\n     * You should not have to use this function unless your engine needs to share the webGL context with another engine\n     * @param bruteForce defines a boolean to force clearing ALL caches (including stencil, detoh and alpha states)\n     */\n    wipeCaches(bruteForce) {\n        if (this.preventCacheWipeBetweenFrames && !bruteForce) {\n            return;\n        }\n        this._currentEffect = null;\n        this._viewportCached.x = 0;\n        this._viewportCached.y = 0;\n        this._viewportCached.z = 0;\n        this._viewportCached.w = 0;\n        // Done before in case we clean the attributes\n        this._unbindVertexArrayObject();\n        if (bruteForce) {\n            this._currentProgram = null;\n            this.resetTextureCache();\n            this._stencilStateComposer.reset();\n            this._depthCullingState.reset();\n            this._depthCullingState.depthFunc = this._gl.LEQUAL;\n            this._alphaState.reset();\n            this._alphaMode = 1;\n            this._alphaEquation = 0;\n            this._colorWrite = true;\n            this._colorWriteChanged = true;\n            this._unpackFlipYCached = null;\n            this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n            this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n            this._mustWipeVertexAttributes = true;\n            this.unbindAllAttributes();\n        }\n        this._resetVertexBufferBinding();\n        this._cachedIndexBuffer = null;\n        this._cachedEffectForVertexBuffers = null;\n        this.bindIndexBuffer(null);\n    }\n    /**\n     * @internal\n     */\n    _getSamplingParameters(samplingMode, generateMipMaps) {\n        const gl = this._gl;\n        let magFilter = gl.NEAREST;\n        let minFilter = gl.NEAREST;\n        switch (samplingMode) {\n            case 11:\n                magFilter = gl.LINEAR;\n                if (generateMipMaps) {\n                    minFilter = gl.LINEAR_MIPMAP_NEAREST;\n                }\n                else {\n                    minFilter = gl.LINEAR;\n                }\n                break;\n            case 3:\n                magFilter = gl.LINEAR;\n                if (generateMipMaps) {\n                    minFilter = gl.LINEAR_MIPMAP_LINEAR;\n                }\n                else {\n                    minFilter = gl.LINEAR;\n                }\n                break;\n            case 8:\n                magFilter = gl.NEAREST;\n                if (generateMipMaps) {\n                    minFilter = gl.NEAREST_MIPMAP_LINEAR;\n                }\n                else {\n                    minFilter = gl.NEAREST;\n                }\n                break;\n            case 4:\n                magFilter = gl.NEAREST;\n                if (generateMipMaps) {\n                    minFilter = gl.NEAREST_MIPMAP_NEAREST;\n                }\n                else {\n                    minFilter = gl.NEAREST;\n                }\n                break;\n            case 5:\n                magFilter = gl.NEAREST;\n                if (generateMipMaps) {\n                    minFilter = gl.LINEAR_MIPMAP_NEAREST;\n                }\n                else {\n                    minFilter = gl.LINEAR;\n                }\n                break;\n            case 6:\n                magFilter = gl.NEAREST;\n                if (generateMipMaps) {\n                    minFilter = gl.LINEAR_MIPMAP_LINEAR;\n                }\n                else {\n                    minFilter = gl.LINEAR;\n                }\n                break;\n            case 7:\n                magFilter = gl.NEAREST;\n                minFilter = gl.LINEAR;\n                break;\n            case 1:\n                magFilter = gl.NEAREST;\n                minFilter = gl.NEAREST;\n                break;\n            case 9:\n                magFilter = gl.LINEAR;\n                if (generateMipMaps) {\n                    minFilter = gl.NEAREST_MIPMAP_NEAREST;\n                }\n                else {\n                    minFilter = gl.NEAREST;\n                }\n                break;\n            case 10:\n                magFilter = gl.LINEAR;\n                if (generateMipMaps) {\n                    minFilter = gl.NEAREST_MIPMAP_LINEAR;\n                }\n                else {\n                    minFilter = gl.NEAREST;\n                }\n                break;\n            case 2:\n                magFilter = gl.LINEAR;\n                minFilter = gl.LINEAR;\n                break;\n            case 12:\n                magFilter = gl.LINEAR;\n                minFilter = gl.NEAREST;\n                break;\n        }\n        return {\n            min: minFilter,\n            mag: magFilter,\n        };\n    }\n    /** @internal */\n    _createTexture() {\n        const texture = this._gl.createTexture();\n        if (!texture) {\n            throw new Error(\"Unable to create texture\");\n        }\n        return texture;\n    }\n    /** @internal */\n    _createHardwareTexture() {\n        return new WebGLHardwareTexture(this._createTexture(), this._gl);\n    }\n    /**\n     * Creates an internal texture without binding it to a framebuffer\n     * @internal\n     * @param size defines the size of the texture\n     * @param options defines the options used to create the texture\n     * @param delayGPUTextureCreation true to delay the texture creation the first time it is really needed. false to create it right away\n     * @param source source type of the texture\n     * @returns a new internal texture\n     */\n    _createInternalTexture(size, options, delayGPUTextureCreation = true, source = 0 /* InternalTextureSource.Unknown */) {\n        let generateMipMaps = false;\n        let type = 0;\n        let samplingMode = 3;\n        let format = 5;\n        let useSRGBBuffer = false;\n        let samples = 1;\n        let label;\n        if (options !== undefined && typeof options === \"object\") {\n            generateMipMaps = !!options.generateMipMaps;\n            type = options.type === undefined ? 0 : options.type;\n            samplingMode = options.samplingMode === undefined ? 3 : options.samplingMode;\n            format = options.format === undefined ? 5 : options.format;\n            useSRGBBuffer = options.useSRGBBuffer === undefined ? false : options.useSRGBBuffer;\n            samples = options.samples ?? 1;\n            label = options.label;\n        }\n        else {\n            generateMipMaps = !!options;\n        }\n        useSRGBBuffer && (useSRGBBuffer = this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU));\n        if (type === 1 && !this._caps.textureFloatLinearFiltering) {\n            // if floating point linear (gl.FLOAT) then force to NEAREST_SAMPLINGMODE\n            samplingMode = 1;\n        }\n        else if (type === 2 && !this._caps.textureHalfFloatLinearFiltering) {\n            // if floating point linear (HALF_FLOAT) then force to NEAREST_SAMPLINGMODE\n            samplingMode = 1;\n        }\n        if (type === 1 && !this._caps.textureFloat) {\n            type = 0;\n            Logger.Warn(\"Float textures are not supported. Type forced to TEXTURETYPE_UNSIGNED_BYTE\");\n        }\n        const gl = this._gl;\n        const texture = new InternalTexture(this, source);\n        const width = size.width || size;\n        const height = size.height || size;\n        const depth = size.depth || 0;\n        const layers = size.layers || 0;\n        const filters = this._getSamplingParameters(samplingMode, generateMipMaps);\n        const target = layers !== 0 ? gl.TEXTURE_2D_ARRAY : depth !== 0 ? gl.TEXTURE_3D : gl.TEXTURE_2D;\n        const sizedFormat = this._getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer);\n        const internalFormat = this._getInternalFormat(format);\n        const textureType = this._getWebGLTextureType(type);\n        // Bind\n        this._bindTextureDirectly(target, texture);\n        if (layers !== 0) {\n            texture.is2DArray = true;\n            gl.texImage3D(target, 0, sizedFormat, width, height, layers, 0, internalFormat, textureType, null);\n        }\n        else if (depth !== 0) {\n            texture.is3D = true;\n            gl.texImage3D(target, 0, sizedFormat, width, height, depth, 0, internalFormat, textureType, null);\n        }\n        else {\n            gl.texImage2D(target, 0, sizedFormat, width, height, 0, internalFormat, textureType, null);\n        }\n        gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filters.mag);\n        gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filters.min);\n        gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // MipMaps\n        if (generateMipMaps) {\n            this._gl.generateMipmap(target);\n        }\n        this._bindTextureDirectly(target, null);\n        texture._useSRGBBuffer = useSRGBBuffer;\n        texture.baseWidth = width;\n        texture.baseHeight = height;\n        texture.width = width;\n        texture.height = height;\n        texture.depth = layers;\n        texture.isReady = true;\n        texture.samples = samples;\n        texture.generateMipMaps = generateMipMaps;\n        texture.samplingMode = samplingMode;\n        texture.type = type;\n        texture.format = format;\n        texture.label = label;\n        this._internalTexturesCache.push(texture);\n        return texture;\n    }\n    /**\n     * @internal\n     */\n    _getUseSRGBBuffer(useSRGBBuffer, noMipmap) {\n        // Generating mipmaps for sRGB textures is not supported in WebGL1 so we must disable the support if mipmaps is enabled\n        return useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || noMipmap);\n    }\n    /**\n     * Usually called from Texture.ts.\n     * Passed information to create a WebGLTexture\n     * @param url defines a value which contains one of the following:\n     * * A conventional http URL, e.g. 'http://...' or 'file://...'\n     * * A base64 string of in-line texture data, e.g. 'data:image/jpg;base64,/...'\n     * * An indicator that data being passed using the buffer parameter, e.g. 'data:mytexture.jpg'\n     * @param noMipmap defines a boolean indicating that no mipmaps shall be generated.  Ignored for compressed textures.  They must be in the file\n     * @param invertY when true, image is flipped when loaded.  You probably want true. Certain compressed textures may invert this if their default is inverted (eg. ktx)\n     * @param scene needed for loading to the correct scene\n     * @param samplingMode mode with should be used sample / access the texture (Default: Texture.TRILINEAR_SAMPLINGMODE)\n     * @param onLoad optional callback to be called upon successful completion\n     * @param onError optional callback to be called upon failure\n     * @param buffer a source of a file previously fetched as either a base64 string, an ArrayBuffer (compressed or image format), HTMLImageElement (image format), or a Blob\n     * @param fallback an internal argument in case the function must be called again, due to etc1 not having alpha capabilities\n     * @param format internal format.  Default: RGB when extension is '.jpg' else RGBA.  Ignored for compressed textures\n     * @param forcedExtension defines the extension to use to pick the right loader\n     * @param mimeType defines an optional mime type\n     * @param loaderOptions options to be passed to the loader\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns a InternalTexture for assignment back into BABYLON.Texture\n     */\n    createTexture(url, noMipmap, invertY, scene, samplingMode = 3, onLoad = null, onError = null, buffer = null, fallback = null, format = null, forcedExtension = null, mimeType, loaderOptions, creationFlags, useSRGBBuffer) {\n        return this._createTextureBase(url, noMipmap, invertY, scene, samplingMode, onLoad, onError, (...args) => this._prepareWebGLTexture(...args, format), (potWidth, potHeight, img, extension, texture, continuationCallback) => {\n            const gl = this._gl;\n            const isPot = img.width === potWidth && img.height === potHeight;\n            texture._creationFlags = creationFlags ?? 0;\n            const tip = this._getTexImageParametersForCreateTexture(texture.format, texture._useSRGBBuffer);\n            if (isPot) {\n                gl.texImage2D(gl.TEXTURE_2D, 0, tip.internalFormat, tip.format, tip.type, img);\n                return false;\n            }\n            const maxTextureSize = this._caps.maxTextureSize;\n            if (img.width > maxTextureSize || img.height > maxTextureSize || !this._supportsHardwareTextureRescaling) {\n                this._prepareWorkingCanvas();\n                if (!this._workingCanvas || !this._workingContext) {\n                    return false;\n                }\n                this._workingCanvas.width = potWidth;\n                this._workingCanvas.height = potHeight;\n                this._workingContext.drawImage(img, 0, 0, img.width, img.height, 0, 0, potWidth, potHeight);\n                gl.texImage2D(gl.TEXTURE_2D, 0, tip.internalFormat, tip.format, tip.type, this._workingCanvas);\n                texture.width = potWidth;\n                texture.height = potHeight;\n                return false;\n            }\n            else {\n                // Using shaders when possible to rescale because canvas.drawImage is lossy\n                const source = new InternalTexture(this, 2 /* InternalTextureSource.Temp */);\n                this._bindTextureDirectly(gl.TEXTURE_2D, source, true);\n                gl.texImage2D(gl.TEXTURE_2D, 0, tip.internalFormat, tip.format, tip.type, img);\n                this._rescaleTexture(source, texture, scene, tip.format, () => {\n                    this._releaseTexture(source);\n                    this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n                    continuationCallback();\n                });\n            }\n            return true;\n        }, buffer, fallback, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n    }\n    /**\n     * Calls to the GL texImage2D and texImage3D functions require three arguments describing the pixel format of the texture.\n     * createTexture derives these from the babylonFormat and useSRGBBuffer arguments and also the file extension of the URL it's working with.\n     * This function encapsulates that derivation for easy unit testing.\n     * @param babylonFormat Babylon's format enum, as specified in ITextureCreationOptions.\n     * @param fileExtension The file extension including the dot, e.g. .jpg.\n     * @param useSRGBBuffer Use SRGB not linear.\n     * @returns The options to pass to texImage2D or texImage3D calls.\n     * @internal\n     */\n    _getTexImageParametersForCreateTexture(babylonFormat, useSRGBBuffer) {\n        let format, internalFormat;\n        if (this.webGLVersion === 1) {\n            // In WebGL 1, format and internalFormat must be the same and taken from a limited set of values, see https://docs.gl/es2/glTexImage2D.\n            // The SRGB extension (https://developer.mozilla.org/en-US/docs/Web/API/EXT_sRGB) adds some extra values, hence passing useSRGBBuffer\n            // to getInternalFormat.\n            format = this._getInternalFormat(babylonFormat, useSRGBBuffer);\n            internalFormat = format;\n        }\n        else {\n            // In WebGL 2, format has a wider range of values and internal format can be one of the sized formats, see\n            // https://registry.khronos.org/OpenGL-Refpages/es3.0/html/glTexImage2D.xhtml.\n            // SRGB is included in the sized format and should not be passed in \"format\", hence always passing useSRGBBuffer as false.\n            format = this._getInternalFormat(babylonFormat, false);\n            internalFormat = this._getRGBABufferInternalSizedFormat(0, babylonFormat, useSRGBBuffer);\n        }\n        return {\n            internalFormat,\n            format,\n            type: this._gl.UNSIGNED_BYTE,\n        };\n    }\n    /**\n     * @internal\n     */\n    _rescaleTexture(source, destination, scene, internalFormat, onComplete) { }\n    /**\n     * @internal\n     */\n    _unpackFlipY(value) {\n        if (this._unpackFlipYCached !== value) {\n            this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, value ? 1 : 0);\n            if (this.enableUnpackFlipYCached) {\n                this._unpackFlipYCached = value;\n            }\n        }\n    }\n    /** @internal */\n    _getUnpackAlignement() {\n        return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT);\n    }\n    /** @internal */\n    _getTextureTarget(texture) {\n        if (texture.isCube) {\n            return this._gl.TEXTURE_CUBE_MAP;\n        }\n        else if (texture.is3D) {\n            return this._gl.TEXTURE_3D;\n        }\n        else if (texture.is2DArray || texture.isMultiview) {\n            return this._gl.TEXTURE_2D_ARRAY;\n        }\n        return this._gl.TEXTURE_2D;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param samplingMode defines the required sampling mode\n     * @param texture defines the texture to update\n     * @param generateMipMaps defines whether to generate mipmaps for the texture\n     */\n    updateTextureSamplingMode(samplingMode, texture, generateMipMaps = false) {\n        const target = this._getTextureTarget(texture);\n        const filters = this._getSamplingParameters(samplingMode, texture.useMipMaps || generateMipMaps);\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_MAG_FILTER, filters.mag, texture);\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_MIN_FILTER, filters.min);\n        if (generateMipMaps) {\n            texture.generateMipMaps = true;\n            this._gl.generateMipmap(target);\n        }\n        this._bindTextureDirectly(target, null);\n        texture.samplingMode = samplingMode;\n    }\n    /**\n     * Update the dimensions of a texture\n     * @param texture texture to update\n     * @param width new width of the texture\n     * @param height new height of the texture\n     * @param depth new depth of the texture\n     */\n    updateTextureDimensions(texture, width, height, depth = 1) { }\n    /**\n     * Update the sampling mode of a given texture\n     * @param texture defines the texture to update\n     * @param wrapU defines the texture wrap mode of the u coordinates\n     * @param wrapV defines the texture wrap mode of the v coordinates\n     * @param wrapR defines the texture wrap mode of the r coordinates\n     */\n    updateTextureWrappingMode(texture, wrapU, wrapV = null, wrapR = null) {\n        const target = this._getTextureTarget(texture);\n        if (wrapU !== null) {\n            this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(wrapU), texture);\n            texture._cachedWrapU = wrapU;\n        }\n        if (wrapV !== null) {\n            this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(wrapV), texture);\n            texture._cachedWrapV = wrapV;\n        }\n        if ((texture.is2DArray || texture.is3D) && wrapR !== null) {\n            this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(wrapR), texture);\n            texture._cachedWrapR = wrapR;\n        }\n        this._bindTextureDirectly(target, null);\n    }\n    /**\n     * @internal\n     */\n    _uploadCompressedDataToTextureDirectly(texture, internalFormat, width, height, data, faceIndex = 0, lod = 0) {\n        const gl = this._gl;\n        let target = gl.TEXTURE_2D;\n        if (texture.isCube) {\n            target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n        }\n        if (texture._useSRGBBuffer) {\n            switch (internalFormat) {\n                case 37492:\n                case 36196:\n                    // Note, if using ETC1 and sRGB is requested, this will use ETC2 if available.\n                    if (this._caps.etc2) {\n                        internalFormat = gl.COMPRESSED_SRGB8_ETC2;\n                    }\n                    else {\n                        texture._useSRGBBuffer = false;\n                    }\n                    break;\n                case 37496:\n                    if (this._caps.etc2) {\n                        internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n                    }\n                    else {\n                        texture._useSRGBBuffer = false;\n                    }\n                    break;\n                case 36492:\n                    internalFormat = gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n                    break;\n                case 37808:\n                    internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n                    break;\n                case 33776:\n                    if (this._caps.s3tc_srgb) {\n                        internalFormat = gl.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n                    }\n                    else {\n                        // S3TC sRGB extension not supported\n                        texture._useSRGBBuffer = false;\n                    }\n                    break;\n                case 33777:\n                    if (this._caps.s3tc_srgb) {\n                        internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n                    }\n                    else {\n                        // S3TC sRGB extension not supported\n                        texture._useSRGBBuffer = false;\n                    }\n                    break;\n                case 33779:\n                    if (this._caps.s3tc_srgb) {\n                        internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n                    }\n                    else {\n                        // S3TC sRGB extension not supported\n                        texture._useSRGBBuffer = false;\n                    }\n                    break;\n                default:\n                    // We don't support a sRGB format corresponding to internalFormat, so revert to non sRGB format\n                    texture._useSRGBBuffer = false;\n                    break;\n            }\n        }\n        this._gl.compressedTexImage2D(target, lod, internalFormat, width, height, 0, data);\n    }\n    /**\n     * @internal\n     */\n    _uploadDataToTextureDirectly(texture, imageData, faceIndex = 0, lod = 0, babylonInternalFormat, useTextureWidthAndHeight = false) {\n        const gl = this._gl;\n        const textureType = this._getWebGLTextureType(texture.type);\n        const format = this._getInternalFormat(texture.format);\n        const internalFormat = babylonInternalFormat === undefined\n            ? this._getRGBABufferInternalSizedFormat(texture.type, texture.format, texture._useSRGBBuffer)\n            : this._getInternalFormat(babylonInternalFormat, texture._useSRGBBuffer);\n        this._unpackFlipY(texture.invertY);\n        let target = gl.TEXTURE_2D;\n        if (texture.isCube) {\n            target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n        }\n        const lodMaxWidth = Math.round(Math.log(texture.width) * Math.LOG2E);\n        const lodMaxHeight = Math.round(Math.log(texture.height) * Math.LOG2E);\n        const width = useTextureWidthAndHeight ? texture.width : Math.pow(2, Math.max(lodMaxWidth - lod, 0));\n        const height = useTextureWidthAndHeight ? texture.height : Math.pow(2, Math.max(lodMaxHeight - lod, 0));\n        gl.texImage2D(target, lod, internalFormat, width, height, 0, format, textureType, imageData);\n    }\n    /**\n     * Update a portion of an internal texture\n     * @param texture defines the texture to update\n     * @param imageData defines the data to store into the texture\n     * @param xOffset defines the x coordinates of the update rectangle\n     * @param yOffset defines the y coordinates of the update rectangle\n     * @param width defines the width of the update rectangle\n     * @param height defines the height of the update rectangle\n     * @param faceIndex defines the face index if texture is a cube (0 by default)\n     * @param lod defines the lod level to update (0 by default)\n     * @param generateMipMaps defines whether to generate mipmaps or not\n     */\n    updateTextureData(texture, imageData, xOffset, yOffset, width, height, faceIndex = 0, lod = 0, generateMipMaps = false) {\n        const gl = this._gl;\n        const textureType = this._getWebGLTextureType(texture.type);\n        const format = this._getInternalFormat(texture.format);\n        this._unpackFlipY(texture.invertY);\n        let targetForBinding = gl.TEXTURE_2D;\n        let target = gl.TEXTURE_2D;\n        if (texture.isCube) {\n            target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n            targetForBinding = gl.TEXTURE_CUBE_MAP;\n        }\n        this._bindTextureDirectly(targetForBinding, texture, true);\n        gl.texSubImage2D(target, lod, xOffset, yOffset, width, height, format, textureType, imageData);\n        if (generateMipMaps) {\n            this._gl.generateMipmap(target);\n        }\n        this._bindTextureDirectly(targetForBinding, null);\n    }\n    /**\n     * @internal\n     */\n    _uploadArrayBufferViewToTexture(texture, imageData, faceIndex = 0, lod = 0) {\n        const gl = this._gl;\n        const bindTarget = texture.isCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n        this._bindTextureDirectly(bindTarget, texture, true);\n        this._uploadDataToTextureDirectly(texture, imageData, faceIndex, lod);\n        this._bindTextureDirectly(bindTarget, null, true);\n    }\n    _prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode) {\n        const gl = this._gl;\n        if (!gl) {\n            return;\n        }\n        const filters = this._getSamplingParameters(samplingMode, !noMipmap);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filters.mag);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filters.min);\n        if (!noMipmap && !isCompressed) {\n            gl.generateMipmap(gl.TEXTURE_2D);\n        }\n        this._bindTextureDirectly(gl.TEXTURE_2D, null);\n        // this.resetTextureCache();\n        if (scene) {\n            scene.removePendingData(texture);\n        }\n        texture.onLoadedObservable.notifyObservers(texture);\n        texture.onLoadedObservable.clear();\n    }\n    _prepareWebGLTexture(texture, extension, scene, img, invertY, noMipmap, isCompressed, processFunction, samplingMode, format) {\n        const maxTextureSize = this.getCaps().maxTextureSize;\n        const potWidth = Math.min(maxTextureSize, this.needPOTTextures ? GetExponentOfTwo(img.width, maxTextureSize) : img.width);\n        const potHeight = Math.min(maxTextureSize, this.needPOTTextures ? GetExponentOfTwo(img.height, maxTextureSize) : img.height);\n        const gl = this._gl;\n        if (!gl) {\n            return;\n        }\n        if (!texture._hardwareTexture) {\n            //  this.resetTextureCache();\n            if (scene) {\n                scene.removePendingData(texture);\n            }\n            return;\n        }\n        this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n        this._unpackFlipY(invertY === undefined ? true : invertY ? true : false);\n        texture.baseWidth = img.width;\n        texture.baseHeight = img.height;\n        texture.width = potWidth;\n        texture.height = potHeight;\n        texture.isReady = true;\n        texture.type = texture.type !== -1 ? texture.type : 0;\n        texture.format =\n            texture.format !== -1 ? texture.format : format ?? (extension === \".jpg\" && !texture._useSRGBBuffer ? 4 : 5);\n        if (processFunction(potWidth, potHeight, img, extension, texture, () => {\n            this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n        })) {\n            // Returning as texture needs extra async steps\n            return;\n        }\n        this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n    }\n    /**\n     * @internal\n     */\n    _setupFramebufferDepthAttachments(generateStencilBuffer, generateDepthBuffer, width, height, samples = 1) {\n        const gl = this._gl;\n        // Create the depth/stencil buffer\n        if (generateStencilBuffer && generateDepthBuffer) {\n            return this._createRenderBuffer(width, height, samples, gl.DEPTH_STENCIL, gl.DEPTH24_STENCIL8, gl.DEPTH_STENCIL_ATTACHMENT);\n        }\n        if (generateDepthBuffer) {\n            let depthFormat = gl.DEPTH_COMPONENT16;\n            if (this._webGLVersion > 1) {\n                depthFormat = gl.DEPTH_COMPONENT32F;\n            }\n            return this._createRenderBuffer(width, height, samples, depthFormat, depthFormat, gl.DEPTH_ATTACHMENT);\n        }\n        if (generateStencilBuffer) {\n            return this._createRenderBuffer(width, height, samples, gl.STENCIL_INDEX8, gl.STENCIL_INDEX8, gl.STENCIL_ATTACHMENT);\n        }\n        return null;\n    }\n    /**\n     * @internal\n     */\n    _createRenderBuffer(width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer = true) {\n        const gl = this._gl;\n        const renderBuffer = gl.createRenderbuffer();\n        return this._updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer);\n    }\n    _updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer = true) {\n        const gl = this._gl;\n        gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n        if (samples > 1 && gl.renderbufferStorageMultisample) {\n            gl.renderbufferStorageMultisample(gl.RENDERBUFFER, samples, msInternalFormat, width, height);\n        }\n        else {\n            gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\n        }\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, renderBuffer);\n        if (unbindBuffer) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        }\n        return renderBuffer;\n    }\n    /**\n     * @internal\n     */\n    _releaseTexture(texture) {\n        this._deleteTexture(texture._hardwareTexture);\n        // Unbind channels\n        this.unbindAllTextures();\n        const index = this._internalTexturesCache.indexOf(texture);\n        if (index !== -1) {\n            this._internalTexturesCache.splice(index, 1);\n        }\n        // Integrated fixed lod samplers.\n        if (texture._lodTextureHigh) {\n            texture._lodTextureHigh.dispose();\n        }\n        if (texture._lodTextureMid) {\n            texture._lodTextureMid.dispose();\n        }\n        if (texture._lodTextureLow) {\n            texture._lodTextureLow.dispose();\n        }\n        // Integrated irradiance map.\n        if (texture._irradianceTexture) {\n            texture._irradianceTexture.dispose();\n        }\n    }\n    _deleteTexture(texture) {\n        texture?.release();\n    }\n    _setProgram(program) {\n        if (this._currentProgram !== program) {\n            _setProgram(program, this._gl);\n            this._currentProgram = program;\n        }\n    }\n    /**\n     * Binds an effect to the webGL context\n     * @param effect defines the effect to bind\n     */\n    bindSamplers(effect) {\n        const webGLPipelineContext = effect.getPipelineContext();\n        this._setProgram(webGLPipelineContext.program);\n        const samplers = effect.getSamplers();\n        for (let index = 0; index < samplers.length; index++) {\n            const uniform = effect.getUniform(samplers[index]);\n            if (uniform) {\n                this._boundUniforms[index] = uniform;\n            }\n        }\n        this._currentEffect = null;\n    }\n    _activateCurrentTexture() {\n        if (this._currentTextureChannel !== this._activeChannel) {\n            this._gl.activeTexture(this._gl.TEXTURE0 + this._activeChannel);\n            this._currentTextureChannel = this._activeChannel;\n        }\n    }\n    /**\n     * @internal\n     */\n    _bindTextureDirectly(target, texture, forTextureDataUpdate = false, force = false) {\n        let wasPreviouslyBound = false;\n        const isTextureForRendering = texture && texture._associatedChannel > -1;\n        if (forTextureDataUpdate && isTextureForRendering) {\n            this._activeChannel = texture._associatedChannel;\n        }\n        const currentTextureBound = this._boundTexturesCache[this._activeChannel];\n        if (currentTextureBound !== texture || force) {\n            this._activateCurrentTexture();\n            if (texture && texture.isMultiview) {\n                //this._gl.bindTexture(target, texture ? texture._colorTextureArray : null);\n                Logger.Error([\"_bindTextureDirectly called with a multiview texture!\", target, texture]);\n                // eslint-disable-next-line no-throw-literal\n                throw \"_bindTextureDirectly called with a multiview texture!\";\n            }\n            else {\n                this._gl.bindTexture(target, texture?._hardwareTexture?.underlyingResource ?? null);\n            }\n            this._boundTexturesCache[this._activeChannel] = texture;\n            if (texture) {\n                texture._associatedChannel = this._activeChannel;\n            }\n        }\n        else if (forTextureDataUpdate) {\n            wasPreviouslyBound = true;\n            this._activateCurrentTexture();\n        }\n        if (isTextureForRendering && !forTextureDataUpdate) {\n            this._bindSamplerUniformToChannel(texture._associatedChannel, this._activeChannel);\n        }\n        return wasPreviouslyBound;\n    }\n    /**\n     * @internal\n     */\n    _bindTexture(channel, texture, name) {\n        if (channel === undefined) {\n            return;\n        }\n        if (texture) {\n            texture._associatedChannel = channel;\n        }\n        this._activeChannel = channel;\n        const target = texture ? this._getTextureTarget(texture) : this._gl.TEXTURE_2D;\n        this._bindTextureDirectly(target, texture);\n    }\n    /**\n     * Unbind all textures from the webGL context\n     */\n    unbindAllTextures() {\n        for (let channel = 0; channel < this._maxSimultaneousTextures; channel++) {\n            this._activeChannel = channel;\n            this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n            this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n            if (this.webGLVersion > 1) {\n                this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n                this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n            }\n        }\n    }\n    /**\n     * Sets a texture to the according uniform.\n     * @param channel The texture channel\n     * @param uniform The uniform to set\n     * @param texture The texture to apply\n     * @param name The name of the uniform in the effect\n     */\n    setTexture(channel, uniform, texture, name) {\n        if (channel === undefined) {\n            return;\n        }\n        if (uniform) {\n            this._boundUniforms[channel] = uniform;\n        }\n        this._setTexture(channel, texture);\n    }\n    _bindSamplerUniformToChannel(sourceSlot, destination) {\n        const uniform = this._boundUniforms[sourceSlot];\n        if (!uniform || uniform._currentState === destination) {\n            return;\n        }\n        this._gl.uniform1i(uniform, destination);\n        uniform._currentState = destination;\n    }\n    _getTextureWrapMode(mode) {\n        switch (mode) {\n            case 1:\n                return this._gl.REPEAT;\n            case 0:\n                return this._gl.CLAMP_TO_EDGE;\n            case 2:\n                return this._gl.MIRRORED_REPEAT;\n        }\n        return this._gl.REPEAT;\n    }\n    _setTexture(channel, texture, isPartOfTextureArray = false, depthStencilTexture = false, name = \"\") {\n        // Not ready?\n        if (!texture) {\n            if (this._boundTexturesCache[channel] != null) {\n                this._activeChannel = channel;\n                this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n                this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n                if (this.webGLVersion > 1) {\n                    this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n                    this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n                }\n            }\n            return false;\n        }\n        // Video\n        if (texture.video) {\n            this._activeChannel = channel;\n            const videoInternalTexture = texture.getInternalTexture();\n            if (videoInternalTexture) {\n                videoInternalTexture._associatedChannel = channel;\n            }\n            texture.update();\n        }\n        else if (texture.delayLoadState === 4) {\n            // Delay loading\n            texture.delayLoad();\n            return false;\n        }\n        let internalTexture;\n        if (depthStencilTexture) {\n            internalTexture = texture.depthStencilTexture;\n        }\n        else if (texture.isReady()) {\n            internalTexture = texture.getInternalTexture();\n        }\n        else if (texture.isCube) {\n            internalTexture = this.emptyCubeTexture;\n        }\n        else if (texture.is3D) {\n            internalTexture = this.emptyTexture3D;\n        }\n        else if (texture.is2DArray) {\n            internalTexture = this.emptyTexture2DArray;\n        }\n        else {\n            internalTexture = this.emptyTexture;\n        }\n        if (!isPartOfTextureArray && internalTexture) {\n            internalTexture._associatedChannel = channel;\n        }\n        let needToBind = true;\n        if (this._boundTexturesCache[channel] === internalTexture) {\n            if (!isPartOfTextureArray) {\n                this._bindSamplerUniformToChannel(internalTexture._associatedChannel, channel);\n            }\n            needToBind = false;\n        }\n        this._activeChannel = channel;\n        const target = this._getTextureTarget(internalTexture);\n        if (needToBind) {\n            this._bindTextureDirectly(target, internalTexture, isPartOfTextureArray);\n        }\n        if (internalTexture && !internalTexture.isMultiview) {\n            // CUBIC_MODE and SKYBOX_MODE both require CLAMP_TO_EDGE.  All other modes use REPEAT.\n            if (internalTexture.isCube && internalTexture._cachedCoordinatesMode !== texture.coordinatesMode) {\n                internalTexture._cachedCoordinatesMode = texture.coordinatesMode;\n                const textureWrapMode = texture.coordinatesMode !== 3 && texture.coordinatesMode !== 5\n                    ? 1\n                    : 0;\n                texture.wrapU = textureWrapMode;\n                texture.wrapV = textureWrapMode;\n            }\n            if (internalTexture._cachedWrapU !== texture.wrapU) {\n                internalTexture._cachedWrapU = texture.wrapU;\n                this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(texture.wrapU), internalTexture);\n            }\n            if (internalTexture._cachedWrapV !== texture.wrapV) {\n                internalTexture._cachedWrapV = texture.wrapV;\n                this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(texture.wrapV), internalTexture);\n            }\n            if (internalTexture.is3D && internalTexture._cachedWrapR !== texture.wrapR) {\n                internalTexture._cachedWrapR = texture.wrapR;\n                this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(texture.wrapR), internalTexture);\n            }\n            this._setAnisotropicLevel(target, internalTexture, texture.anisotropicFilteringLevel);\n        }\n        return true;\n    }\n    /**\n     * Sets an array of texture to the webGL context\n     * @param channel defines the channel where the texture array must be set\n     * @param uniform defines the associated uniform location\n     * @param textures defines the array of textures to bind\n     * @param name name of the channel\n     */\n    setTextureArray(channel, uniform, textures, name) {\n        if (channel === undefined || !uniform) {\n            return;\n        }\n        if (!this._textureUnits || this._textureUnits.length !== textures.length) {\n            this._textureUnits = new Int32Array(textures.length);\n        }\n        for (let i = 0; i < textures.length; i++) {\n            const texture = textures[i].getInternalTexture();\n            if (texture) {\n                this._textureUnits[i] = channel + i;\n                texture._associatedChannel = channel + i;\n            }\n            else {\n                this._textureUnits[i] = -1;\n            }\n        }\n        this._gl.uniform1iv(uniform, this._textureUnits);\n        for (let index = 0; index < textures.length; index++) {\n            this._setTexture(this._textureUnits[index], textures[index], true);\n        }\n    }\n    /**\n     * @internal\n     */\n    _setAnisotropicLevel(target, internalTexture, anisotropicFilteringLevel) {\n        const anisotropicFilterExtension = this._caps.textureAnisotropicFilterExtension;\n        if (internalTexture.samplingMode !== 11 &&\n            internalTexture.samplingMode !== 3 &&\n            internalTexture.samplingMode !== 2) {\n            anisotropicFilteringLevel = 1; // Forcing the anisotropic to 1 because else webgl will force filters to linear\n        }\n        if (anisotropicFilterExtension && internalTexture._cachedAnisotropicFilteringLevel !== anisotropicFilteringLevel) {\n            this._setTextureParameterFloat(target, anisotropicFilterExtension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(anisotropicFilteringLevel, this._caps.maxAnisotropy), internalTexture);\n            internalTexture._cachedAnisotropicFilteringLevel = anisotropicFilteringLevel;\n        }\n    }\n    _setTextureParameterFloat(target, parameter, value, texture) {\n        this._bindTextureDirectly(target, texture, true, true);\n        this._gl.texParameterf(target, parameter, value);\n    }\n    _setTextureParameterInteger(target, parameter, value, texture) {\n        if (texture) {\n            this._bindTextureDirectly(target, texture, true, true);\n        }\n        this._gl.texParameteri(target, parameter, value);\n    }\n    /**\n     * Unbind all vertex attributes from the webGL context\n     */\n    unbindAllAttributes() {\n        if (this._mustWipeVertexAttributes) {\n            this._mustWipeVertexAttributes = false;\n            for (let i = 0; i < this._caps.maxVertexAttribs; i++) {\n                this.disableAttributeByIndex(i);\n            }\n            return;\n        }\n        for (let i = 0, ul = this._vertexAttribArraysEnabled.length; i < ul; i++) {\n            if (i >= this._caps.maxVertexAttribs || !this._vertexAttribArraysEnabled[i]) {\n                continue;\n            }\n            this.disableAttributeByIndex(i);\n        }\n    }\n    /**\n     * Force the engine to release all cached effects. This means that next effect compilation will have to be done completely even if a similar effect was already compiled\n     */\n    releaseEffects() {\n        const keys = Object.keys(this._compiledEffects);\n        for (const name of keys) {\n            const effect = this._compiledEffects[name];\n            effect.dispose();\n        }\n        this._compiledEffects = {};\n    }\n    /**\n     * Dispose and release all associated resources\n     */\n    dispose() {\n        // Events\n        if (IsWindowObjectExist()) {\n            if (this._renderingCanvas) {\n                if (!this._doNotHandleContextLost) {\n                    this._renderingCanvas.removeEventListener(\"webglcontextlost\", this._onContextLost);\n                    this._renderingCanvas.removeEventListener(\"webglcontextrestored\", this._onContextRestored);\n                }\n            }\n        }\n        // Should not be moved up of renderingCanvas will be null.\n        super.dispose();\n        if (this._dummyFramebuffer) {\n            this._gl.deleteFramebuffer(this._dummyFramebuffer);\n        }\n        // Unbind\n        this.unbindAllAttributes();\n        this._boundUniforms = {};\n        this._workingCanvas = null;\n        this._workingContext = null;\n        this._currentBufferPointers.length = 0;\n        this._currentProgram = null;\n        if (this._creationOptions.loseContextOnDispose) {\n            this._gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n        }\n        // clear the state object\n        deleteStateObject(this._gl);\n    }\n    /**\n     * Attach a new callback raised when context lost event is fired\n     * @param callback defines the callback to call\n     */\n    attachContextLostEvent(callback) {\n        if (this._renderingCanvas) {\n            this._renderingCanvas.addEventListener(\"webglcontextlost\", callback, false);\n        }\n    }\n    /**\n     * Attach a new callback raised when context restored event is fired\n     * @param callback defines the callback to call\n     */\n    attachContextRestoredEvent(callback) {\n        if (this._renderingCanvas) {\n            this._renderingCanvas.addEventListener(\"webglcontextrestored\", callback, false);\n        }\n    }\n    /**\n     * Get the current error code of the webGL context\n     * @returns the error code\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/getError\n     */\n    getError() {\n        return this._gl.getError();\n    }\n    _canRenderToFloatFramebuffer() {\n        if (this._webGLVersion > 1) {\n            return this._caps.colorBufferFloat;\n        }\n        return this._canRenderToFramebuffer(1);\n    }\n    _canRenderToHalfFloatFramebuffer() {\n        if (this._webGLVersion > 1) {\n            return this._caps.colorBufferFloat;\n        }\n        return this._canRenderToFramebuffer(2);\n    }\n    // Thank you : http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n    _canRenderToFramebuffer(type) {\n        const gl = this._gl;\n        //clear existing errors\n        // eslint-disable-next-line no-empty\n        while (gl.getError() !== gl.NO_ERROR) { }\n        let successful = true;\n        const texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(type), 1, 1, 0, gl.RGBA, this._getWebGLTextureType(type), null);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        const fb = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n        const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n        successful = successful && status === gl.FRAMEBUFFER_COMPLETE;\n        successful = successful && gl.getError() === gl.NO_ERROR;\n        //try render by clearing frame buffer's color buffer\n        if (successful) {\n            gl.clear(gl.COLOR_BUFFER_BIT);\n            successful = successful && gl.getError() === gl.NO_ERROR;\n        }\n        //try reading from frame to ensure render occurs (just creating the FBO is not sufficient to determine if rendering is supported)\n        if (successful) {\n            //in practice it's sufficient to just read from the backbuffer rather than handle potentially issues reading from the texture\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n            const readFormat = gl.RGBA;\n            const readType = gl.UNSIGNED_BYTE;\n            const buffer = new Uint8Array(4);\n            gl.readPixels(0, 0, 1, 1, readFormat, readType, buffer);\n            successful = successful && gl.getError() === gl.NO_ERROR;\n        }\n        //clean up\n        gl.deleteTexture(texture);\n        gl.deleteFramebuffer(fb);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        //clear accumulated errors\n        // eslint-disable-next-line no-empty\n        while (!successful && gl.getError() !== gl.NO_ERROR) { }\n        return successful;\n    }\n    /**\n     * @internal\n     */\n    _getWebGLTextureType(type) {\n        if (this._webGLVersion === 1) {\n            switch (type) {\n                case 1:\n                    return this._gl.FLOAT;\n                case 2:\n                    return this._gl.HALF_FLOAT_OES;\n                case 0:\n                    return this._gl.UNSIGNED_BYTE;\n                case 8:\n                    return this._gl.UNSIGNED_SHORT_4_4_4_4;\n                case 9:\n                    return this._gl.UNSIGNED_SHORT_5_5_5_1;\n                case 10:\n                    return this._gl.UNSIGNED_SHORT_5_6_5;\n            }\n            return this._gl.UNSIGNED_BYTE;\n        }\n        switch (type) {\n            case 3:\n                return this._gl.BYTE;\n            case 0:\n                return this._gl.UNSIGNED_BYTE;\n            case 4:\n                return this._gl.SHORT;\n            case 5:\n                return this._gl.UNSIGNED_SHORT;\n            case 6:\n                return this._gl.INT;\n            case 7: // Refers to UNSIGNED_INT\n                return this._gl.UNSIGNED_INT;\n            case 1:\n                return this._gl.FLOAT;\n            case 2:\n                return this._gl.HALF_FLOAT;\n            case 8:\n                return this._gl.UNSIGNED_SHORT_4_4_4_4;\n            case 9:\n                return this._gl.UNSIGNED_SHORT_5_5_5_1;\n            case 10:\n                return this._gl.UNSIGNED_SHORT_5_6_5;\n            case 11:\n                return this._gl.UNSIGNED_INT_2_10_10_10_REV;\n            case 12:\n                return this._gl.UNSIGNED_INT_24_8;\n            case 13:\n                return this._gl.UNSIGNED_INT_10F_11F_11F_REV;\n            case 14:\n                return this._gl.UNSIGNED_INT_5_9_9_9_REV;\n            case 15:\n                return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV;\n        }\n        return this._gl.UNSIGNED_BYTE;\n    }\n    /**\n     * @internal\n     */\n    _getInternalFormat(format, useSRGBBuffer = false) {\n        let internalFormat = useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA;\n        switch (format) {\n            case 0:\n                internalFormat = this._gl.ALPHA;\n                break;\n            case 1:\n                internalFormat = this._gl.LUMINANCE;\n                break;\n            case 2:\n                internalFormat = this._gl.LUMINANCE_ALPHA;\n                break;\n            case 6:\n                internalFormat = this._gl.RED;\n                break;\n            case 7:\n                internalFormat = this._gl.RG;\n                break;\n            case 4:\n                internalFormat = useSRGBBuffer ? this._glSRGBExtensionValues.SRGB : this._gl.RGB;\n                break;\n            case 5:\n                internalFormat = useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA;\n                break;\n        }\n        if (this._webGLVersion > 1) {\n            switch (format) {\n                case 8:\n                    internalFormat = this._gl.RED_INTEGER;\n                    break;\n                case 9:\n                    internalFormat = this._gl.RG_INTEGER;\n                    break;\n                case 10:\n                    internalFormat = this._gl.RGB_INTEGER;\n                    break;\n                case 11:\n                    internalFormat = this._gl.RGBA_INTEGER;\n                    break;\n            }\n        }\n        return internalFormat;\n    }\n    /**\n     * @internal\n     */\n    _getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer = false) {\n        if (this._webGLVersion === 1) {\n            if (format !== undefined) {\n                switch (format) {\n                    case 0:\n                        return this._gl.ALPHA;\n                    case 1:\n                        return this._gl.LUMINANCE;\n                    case 2:\n                        return this._gl.LUMINANCE_ALPHA;\n                    case 4:\n                        return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB : this._gl.RGB;\n                }\n            }\n            return this._gl.RGBA;\n        }\n        switch (type) {\n            case 3:\n                switch (format) {\n                    case 6:\n                        return this._gl.R8_SNORM;\n                    case 7:\n                        return this._gl.RG8_SNORM;\n                    case 4:\n                        return this._gl.RGB8_SNORM;\n                    case 8:\n                        return this._gl.R8I;\n                    case 9:\n                        return this._gl.RG8I;\n                    case 10:\n                        return this._gl.RGB8I;\n                    case 11:\n                        return this._gl.RGBA8I;\n                    default:\n                        return this._gl.RGBA8_SNORM;\n                }\n            case 0:\n                switch (format) {\n                    case 6:\n                        return this._gl.R8;\n                    case 7:\n                        return this._gl.RG8;\n                    case 4:\n                        return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8 : this._gl.RGB8; // By default. Other possibilities are RGB565, SRGB8.\n                    case 5:\n                        return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA8; // By default. Other possibilities are RGB5_A1, RGBA4, SRGB8_ALPHA8.\n                    case 8:\n                        return this._gl.R8UI;\n                    case 9:\n                        return this._gl.RG8UI;\n                    case 10:\n                        return this._gl.RGB8UI;\n                    case 11:\n                        return this._gl.RGBA8UI;\n                    case 0:\n                        return this._gl.ALPHA;\n                    case 1:\n                        return this._gl.LUMINANCE;\n                    case 2:\n                        return this._gl.LUMINANCE_ALPHA;\n                    default:\n                        return this._gl.RGBA8;\n                }\n            case 4:\n                switch (format) {\n                    case 8:\n                        return this._gl.R16I;\n                    case 9:\n                        return this._gl.RG16I;\n                    case 10:\n                        return this._gl.RGB16I;\n                    case 11:\n                        return this._gl.RGBA16I;\n                    default:\n                        return this._gl.RGBA16I;\n                }\n            case 5:\n                switch (format) {\n                    case 8:\n                        return this._gl.R16UI;\n                    case 9:\n                        return this._gl.RG16UI;\n                    case 10:\n                        return this._gl.RGB16UI;\n                    case 11:\n                        return this._gl.RGBA16UI;\n                    default:\n                        return this._gl.RGBA16UI;\n                }\n            case 6:\n                switch (format) {\n                    case 8:\n                        return this._gl.R32I;\n                    case 9:\n                        return this._gl.RG32I;\n                    case 10:\n                        return this._gl.RGB32I;\n                    case 11:\n                        return this._gl.RGBA32I;\n                    default:\n                        return this._gl.RGBA32I;\n                }\n            case 7: // Refers to UNSIGNED_INT\n                switch (format) {\n                    case 8:\n                        return this._gl.R32UI;\n                    case 9:\n                        return this._gl.RG32UI;\n                    case 10:\n                        return this._gl.RGB32UI;\n                    case 11:\n                        return this._gl.RGBA32UI;\n                    default:\n                        return this._gl.RGBA32UI;\n                }\n            case 1:\n                switch (format) {\n                    case 6:\n                        return this._gl.R32F; // By default. Other possibility is R16F.\n                    case 7:\n                        return this._gl.RG32F; // By default. Other possibility is RG16F.\n                    case 4:\n                        return this._gl.RGB32F; // By default. Other possibilities are RGB16F, R11F_G11F_B10F, RGB9_E5.\n                    case 5:\n                        return this._gl.RGBA32F; // By default. Other possibility is RGBA16F.\n                    default:\n                        return this._gl.RGBA32F;\n                }\n            case 2:\n                switch (format) {\n                    case 6:\n                        return this._gl.R16F;\n                    case 7:\n                        return this._gl.RG16F;\n                    case 4:\n                        return this._gl.RGB16F; // By default. Other possibilities are R11F_G11F_B10F, RGB9_E5.\n                    case 5:\n                        return this._gl.RGBA16F;\n                    default:\n                        return this._gl.RGBA16F;\n                }\n            case 10:\n                return this._gl.RGB565;\n            case 13:\n                return this._gl.R11F_G11F_B10F;\n            case 14:\n                return this._gl.RGB9_E5;\n            case 8:\n                return this._gl.RGBA4;\n            case 9:\n                return this._gl.RGB5_A1;\n            case 11:\n                switch (format) {\n                    case 5:\n                        return this._gl.RGB10_A2; // By default. Other possibility is RGB5_A1.\n                    case 11:\n                        return this._gl.RGB10_A2UI;\n                    default:\n                        return this._gl.RGB10_A2;\n                }\n        }\n        return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA8;\n    }\n    /**\n     * Reads pixels from the current frame buffer. Please note that this function can be slow\n     * @param x defines the x coordinate of the rectangle where pixels must be read\n     * @param y defines the y coordinate of the rectangle where pixels must be read\n     * @param width defines the width of the rectangle where pixels must be read\n     * @param height defines the height of the rectangle where pixels must be read\n     * @param hasAlpha defines whether the output should have alpha or not (defaults to true)\n     * @param flushRenderer true to flush the renderer from the pending commands before reading the pixels\n     * @returns a ArrayBufferView promise (Uint8Array) containing RGBA colors\n     */\n    readPixels(x, y, width, height, hasAlpha = true, flushRenderer = true) {\n        const numChannels = hasAlpha ? 4 : 3;\n        const format = hasAlpha ? this._gl.RGBA : this._gl.RGB;\n        const data = new Uint8Array(height * width * numChannels);\n        if (flushRenderer) {\n            this.flushFramebuffer();\n        }\n        this._gl.readPixels(x, y, width, height, format, this._gl.UNSIGNED_BYTE, data);\n        return Promise.resolve(data);\n    }\n    /**\n     * Gets a Promise<boolean> indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n    static get IsSupportedAsync() {\n        return Promise.resolve(this.isSupported());\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n    static get IsSupported() {\n        return this.isSupported(); // Backward compat\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     * @returns true if the engine can be created\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    static isSupported() {\n        if (this._HasMajorPerformanceCaveat !== null) {\n            return !this._HasMajorPerformanceCaveat; // We know it is performant so WebGL is supported\n        }\n        if (this._IsSupported === null) {\n            try {\n                const tempcanvas = AbstractEngine._CreateCanvas(1, 1);\n                const gl = tempcanvas.getContext(\"webgl\") || tempcanvas.getContext(\"experimental-webgl\");\n                this._IsSupported = gl != null && !!window.WebGLRenderingContext;\n            }\n            catch (e) {\n                this._IsSupported = false;\n            }\n        }\n        return this._IsSupported;\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated on a performant device (ie. if a webGL context can be found and it does not use a slow implementation)\n     */\n    static get HasMajorPerformanceCaveat() {\n        if (this._HasMajorPerformanceCaveat === null) {\n            try {\n                const tempcanvas = AbstractEngine._CreateCanvas(1, 1);\n                const gl = tempcanvas.getContext(\"webgl\", { failIfMajorPerformanceCaveat: true }) ||\n                    tempcanvas.getContext(\"experimental-webgl\", { failIfMajorPerformanceCaveat: true });\n                this._HasMajorPerformanceCaveat = !gl;\n            }\n            catch (e) {\n                this._HasMajorPerformanceCaveat = false;\n            }\n        }\n        return this._HasMajorPerformanceCaveat;\n    }\n}\nThinEngine._TempClearColorUint32 = new Uint32Array(4);\nThinEngine._TempClearColorInt32 = new Int32Array(4);\n/** Use this array to turn off some WebGL2 features on known buggy browsers version */\nThinEngine.ExceptionList = [\n    { key: \"Chrome/63.0\", capture: \"63\\\\.0\\\\.3239\\\\.(\\\\d+)\", captureConstraint: 108, targets: [\"uniformBuffer\"] },\n    { key: \"Firefox/58\", capture: null, captureConstraint: null, targets: [\"uniformBuffer\"] },\n    { key: \"Firefox/59\", capture: null, captureConstraint: null, targets: [\"uniformBuffer\"] },\n    { key: \"Chrome/72.+?Mobile\", capture: null, captureConstraint: null, targets: [\"vao\"] },\n    { key: \"Chrome/73.+?Mobile\", capture: null, captureConstraint: null, targets: [\"vao\"] },\n    { key: \"Chrome/74.+?Mobile\", capture: null, captureConstraint: null, targets: [\"vao\"] },\n    { key: \"Mac OS.+Chrome/71\", capture: null, captureConstraint: null, targets: [\"vao\"] },\n    { key: \"Mac OS.+Chrome/72\", capture: null, captureConstraint: null, targets: [\"vao\"] },\n    { key: \"Mac OS.+Chrome\", capture: null, captureConstraint: null, targets: [\"uniformBuffer\"] },\n    { key: \"Chrome/12\\\\d\\\\..+?Mobile\", capture: null, captureConstraint: null, targets: [\"uniformBuffer\"] },\n    // desktop osx safari 15.4\n    { key: \".*AppleWebKit.*(15.4).*Safari\", capture: null, captureConstraint: null, targets: [\"antialias\", \"maxMSAASamples\"] },\n    // mobile browsers using safari 15.4 on ios\n    { key: \".*(15.4).*AppleWebKit.*Safari\", capture: null, captureConstraint: null, targets: [\"antialias\", \"maxMSAASamples\"] },\n];\n// Updatable statics so stick with vars here\n/**\n * Gets or sets the epsilon value used by collision engine\n */\nThinEngine.CollisionsEpsilon = 0.001;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nThinEngine._ConcatenateShader = _ConcatenateShader;\n// Statics\nThinEngine._IsSupported = null;\nThinEngine._HasMajorPerformanceCaveat = null;\n/**\n * Find the next highest power of two.\n * @param x Number to start search from.\n * @returns Next highest power of two.\n */\nThinEngine.CeilingPOT = CeilingPOT;\n/**\n * Find the next lowest power of two.\n * @param x Number to start search from.\n * @returns Next lowest power of two.\n */\nThinEngine.FloorPOT = FloorPOT;\n/**\n * Find the nearest power of two.\n * @param x Number to start search from.\n * @returns Next nearest power of two.\n */\nThinEngine.NearestPOT = NearestPOT;\n/**\n * Get the closest exponent of two\n * @param value defines the value to approximate\n * @param max defines the maximum value to return\n * @param mode defines how to define the closest value\n * @returns closest exponent of two of the given value\n */\nThinEngine.GetExponentOfTwo = GetExponentOfTwo;\n/**\n * Queue a new function into the requested animation frame pool (ie. this function will be executed by the browser (or the javascript engine) for the next frame)\n * @param func - the function to be called\n * @param requester - the object that will request the next frame. Falls back to window.\n * @returns frame number\n */\nThinEngine.QueueNewFrame = QueueNewFrame;\n","import { ThinEngine } from \"../../Engines/thinEngine.js\";\n\n/**\n * Allocate a typed array depending on a texture type. Optionally can copy existing data in the buffer.\n * @param type type of the texture\n * @param sizeOrDstBuffer size of the array OR an existing buffer that will be used as the destination of the copy (if copyBuffer is provided)\n * @param sizeInBytes true if the size of the array is given in bytes, false if it is the number of elements of the array\n * @param copyBuffer if provided, buffer to copy into the destination buffer (either a newly allocated buffer if sizeOrDstBuffer is a number or use sizeOrDstBuffer as the destination buffer otherwise)\n * @returns the allocated buffer or sizeOrDstBuffer if the latter is an ArrayBuffer\n */\nexport function allocateAndCopyTypedBuffer(type, sizeOrDstBuffer, sizeInBytes = false, copyBuffer) {\n    switch (type) {\n        case 3: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Int8Array(sizeOrDstBuffer) : new Int8Array(sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Int8Array(copyBuffer));\n            }\n            return buffer;\n        }\n        case 0: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Uint8Array(sizeOrDstBuffer) : new Uint8Array(sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Uint8Array(copyBuffer));\n            }\n            return buffer;\n        }\n        case 4: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Int16Array(sizeOrDstBuffer) : new Int16Array(sizeInBytes ? sizeOrDstBuffer / 2 : sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Int16Array(copyBuffer));\n            }\n            return buffer;\n        }\n        case 5:\n        case 8:\n        case 9:\n        case 10:\n        case 2: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Uint16Array(sizeOrDstBuffer) : new Uint16Array(sizeInBytes ? sizeOrDstBuffer / 2 : sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Uint16Array(copyBuffer));\n            }\n            return buffer;\n        }\n        case 6: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Int32Array(sizeOrDstBuffer) : new Int32Array(sizeInBytes ? sizeOrDstBuffer / 4 : sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Int32Array(copyBuffer));\n            }\n            return buffer;\n        }\n        case 7:\n        case 11:\n        case 12:\n        case 13:\n        case 14:\n        case 15: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Uint32Array(sizeOrDstBuffer) : new Uint32Array(sizeInBytes ? sizeOrDstBuffer / 4 : sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Uint32Array(copyBuffer));\n            }\n            return buffer;\n        }\n        case 1: {\n            const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Float32Array(sizeOrDstBuffer) : new Float32Array(sizeInBytes ? sizeOrDstBuffer / 4 : sizeOrDstBuffer);\n            if (copyBuffer) {\n                buffer.set(new Float32Array(copyBuffer));\n            }\n            return buffer;\n        }\n    }\n    const buffer = sizeOrDstBuffer instanceof ArrayBuffer ? new Uint8Array(sizeOrDstBuffer) : new Uint8Array(sizeOrDstBuffer);\n    if (copyBuffer) {\n        buffer.set(new Uint8Array(copyBuffer));\n    }\n    return buffer;\n}\nThinEngine.prototype._readTexturePixelsSync = function (texture, width, height, faceIndex = -1, level = 0, buffer = null, flushRenderer = true, noDataConversion = false, x = 0, y = 0) {\n    const gl = this._gl;\n    if (!gl) {\n        throw new Error(\"Engine does not have gl rendering context.\");\n    }\n    if (!this._dummyFramebuffer) {\n        const dummy = gl.createFramebuffer();\n        if (!dummy) {\n            throw new Error(\"Unable to create dummy framebuffer\");\n        }\n        this._dummyFramebuffer = dummy;\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._dummyFramebuffer);\n    if (faceIndex > -1) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, texture._hardwareTexture?.underlyingResource, level);\n    }\n    else {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture._hardwareTexture?.underlyingResource, level);\n    }\n    let readType = texture.type !== undefined ? this._getWebGLTextureType(texture.type) : gl.UNSIGNED_BYTE;\n    if (!noDataConversion) {\n        switch (readType) {\n            case gl.UNSIGNED_BYTE:\n                if (!buffer) {\n                    buffer = new Uint8Array(4 * width * height);\n                }\n                readType = gl.UNSIGNED_BYTE;\n                break;\n            default:\n                if (!buffer) {\n                    buffer = new Float32Array(4 * width * height);\n                }\n                readType = gl.FLOAT;\n                break;\n        }\n    }\n    else if (!buffer) {\n        buffer = allocateAndCopyTypedBuffer(texture.type, 4 * width * height);\n    }\n    if (flushRenderer) {\n        this.flushFramebuffer();\n    }\n    gl.readPixels(x, y, width, height, gl.RGBA, readType, buffer);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._currentFramebuffer);\n    return buffer;\n};\nThinEngine.prototype._readTexturePixels = function (texture, width, height, faceIndex = -1, level = 0, buffer = null, flushRenderer = true, noDataConversion = false, x = 0, y = 0) {\n    return Promise.resolve(this._readTexturePixelsSync(texture, width, height, faceIndex, level, buffer, flushRenderer, noDataConversion, x, y));\n};\n","import { __decorate } from \"../../tslib.es6.js\";\nimport { serialize, serializeAsTexture } from \"../../Misc/decorators.js\";\nimport { Observable } from \"../../Misc/observable.js\";\nimport { Matrix } from \"../../Maths/math.vector.js\";\nimport { EngineStore } from \"../../Engines/engineStore.js\";\n\nimport { RandomGUID } from \"../../Misc/guid.js\";\nimport \"../../Misc/fileTools.js\";\nimport { ThinTexture } from \"./thinTexture.js\";\nimport { SerializationHelper } from \"../../Misc/decorators.serialization.js\";\nimport \"../../Engines/Extensions/engine.readTexture.js\";\n/**\n * Base class of all the textures in babylon.\n * It groups all the common properties the materials, post process, lights... might need\n * in order to make a correct use of the texture.\n */\nexport class BaseTexture extends ThinTexture {\n    /**\n     * Define if the texture is having a usable alpha value (can be use for transparency or glossiness for instance).\n     */\n    set hasAlpha(value) {\n        if (this._hasAlpha === value) {\n            return;\n        }\n        this._hasAlpha = value;\n        if (this._scene) {\n            this._scene.markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n    }\n    get hasAlpha() {\n        return this._hasAlpha;\n    }\n    /**\n     * Defines if the alpha value should be determined via the rgb values.\n     * If true the luminance of the pixel might be used to find the corresponding alpha value.\n     */\n    set getAlphaFromRGB(value) {\n        if (this._getAlphaFromRGB === value) {\n            return;\n        }\n        this._getAlphaFromRGB = value;\n        if (this._scene) {\n            this._scene.markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n    }\n    get getAlphaFromRGB() {\n        return this._getAlphaFromRGB;\n    }\n    /**\n     * Define the UV channel to use starting from 0 and defaulting to 0.\n     * This is part of the texture as textures usually maps to one uv set.\n     */\n    set coordinatesIndex(value) {\n        if (this._coordinatesIndex === value) {\n            return;\n        }\n        this._coordinatesIndex = value;\n        if (this._scene) {\n            this._scene.markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n    }\n    get coordinatesIndex() {\n        return this._coordinatesIndex;\n    }\n    /**\n     * How a texture is mapped.\n     *\n     * | Value | Type                                | Description |\n     * | ----- | ----------------------------------- | ----------- |\n     * | 0     | EXPLICIT_MODE                       |             |\n     * | 1     | SPHERICAL_MODE                      |             |\n     * | 2     | PLANAR_MODE                         |             |\n     * | 3     | CUBIC_MODE                          |             |\n     * | 4     | PROJECTION_MODE                     |             |\n     * | 5     | SKYBOX_MODE                         |             |\n     * | 6     | INVCUBIC_MODE                       |             |\n     * | 7     | EQUIRECTANGULAR_MODE                |             |\n     * | 8     | FIXED_EQUIRECTANGULAR_MODE          |             |\n     * | 9     | FIXED_EQUIRECTANGULAR_MIRRORED_MODE |             |\n     */\n    set coordinatesMode(value) {\n        if (this._coordinatesMode === value) {\n            return;\n        }\n        this._coordinatesMode = value;\n        if (this._scene) {\n            this._scene.markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n    }\n    get coordinatesMode() {\n        return this._coordinatesMode;\n    }\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapU() {\n        return this._wrapU;\n    }\n    set wrapU(value) {\n        this._wrapU = value;\n    }\n    /**\n     * | Value | Type               | Description |\n     * | ----- | ------------------ | ----------- |\n     * | 0     | CLAMP_ADDRESSMODE  |             |\n     * | 1     | WRAP_ADDRESSMODE   |             |\n     * | 2     | MIRROR_ADDRESSMODE |             |\n     */\n    get wrapV() {\n        return this._wrapV;\n    }\n    set wrapV(value) {\n        this._wrapV = value;\n    }\n    /**\n     * Define if the texture is a cube texture or if false a 2d texture.\n     */\n    get isCube() {\n        if (!this._texture) {\n            return this._isCube;\n        }\n        return this._texture.isCube;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    set isCube(value) {\n        if (!this._texture) {\n            this._isCube = value;\n        }\n        else {\n            this._texture.isCube = value;\n        }\n    }\n    /**\n     * Define if the texture is a 3d texture (webgl 2) or if false a 2d texture.\n     */\n    get is3D() {\n        if (!this._texture) {\n            return false;\n        }\n        return this._texture.is3D;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    set is3D(value) {\n        if (!this._texture) {\n            return;\n        }\n        this._texture.is3D = value;\n    }\n    /**\n     * Define if the texture is a 2d array texture (webgl 2) or if false a 2d texture.\n     */\n    get is2DArray() {\n        if (!this._texture) {\n            return false;\n        }\n        return this._texture.is2DArray;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    set is2DArray(value) {\n        if (!this._texture) {\n            return;\n        }\n        this._texture.is2DArray = value;\n    }\n    /**\n     * Define if the texture contains data in gamma space (most of the png/jpg aside bump).\n     * HDR texture are usually stored in linear space.\n     * This only impacts the PBR and Background materials\n     */\n    get gammaSpace() {\n        if (!this._texture) {\n            return this._gammaSpace;\n        }\n        else {\n            if (this._texture._gammaSpace === null) {\n                this._texture._gammaSpace = this._gammaSpace;\n            }\n        }\n        return this._texture._gammaSpace && !this._texture._useSRGBBuffer;\n    }\n    set gammaSpace(gamma) {\n        if (!this._texture) {\n            if (this._gammaSpace === gamma) {\n                return;\n            }\n            this._gammaSpace = gamma;\n        }\n        else {\n            if (this._texture._gammaSpace === gamma) {\n                return;\n            }\n            this._texture._gammaSpace = gamma;\n        }\n        this.getScene()?.markAllMaterialsAsDirty(1, (mat) => {\n            return mat.hasTexture(this);\n        });\n    }\n    /**\n     * Gets or sets whether or not the texture contains RGBD data.\n     */\n    get isRGBD() {\n        return this._texture != null && this._texture._isRGBD;\n    }\n    set isRGBD(value) {\n        if (value === this.isRGBD) {\n            return;\n        }\n        if (this._texture) {\n            this._texture._isRGBD = value;\n        }\n        this.getScene()?.markAllMaterialsAsDirty(1, (mat) => {\n            return mat.hasTexture(this);\n        });\n    }\n    /**\n     * Are mip maps generated for this texture or not.\n     */\n    get noMipmap() {\n        return false;\n    }\n    /**\n     * With prefiltered texture, defined the offset used during the prefiltering steps.\n     */\n    get lodGenerationOffset() {\n        if (this._texture) {\n            return this._texture._lodGenerationOffset;\n        }\n        return 0.0;\n    }\n    set lodGenerationOffset(value) {\n        if (this._texture) {\n            this._texture._lodGenerationOffset = value;\n        }\n    }\n    /**\n     * With prefiltered texture, defined the scale used during the prefiltering steps.\n     */\n    get lodGenerationScale() {\n        if (this._texture) {\n            return this._texture._lodGenerationScale;\n        }\n        return 0.0;\n    }\n    set lodGenerationScale(value) {\n        if (this._texture) {\n            this._texture._lodGenerationScale = value;\n        }\n    }\n    /**\n     * With prefiltered texture, defined if the specular generation is based on a linear ramp.\n     * By default we are using a log2 of the linear roughness helping to keep a better resolution for\n     * average roughness values.\n     */\n    get linearSpecularLOD() {\n        if (this._texture) {\n            return this._texture._linearSpecularLOD;\n        }\n        return false;\n    }\n    set linearSpecularLOD(value) {\n        if (this._texture) {\n            this._texture._linearSpecularLOD = value;\n        }\n    }\n    /**\n     * In case a better definition than spherical harmonics is required for the diffuse part of the environment.\n     * You can set the irradiance texture to rely on a texture instead of the spherical approach.\n     * This texture need to have the same characteristics than its parent (Cube vs 2d, coordinates mode, Gamma/Linear, RGBD).\n     */\n    get irradianceTexture() {\n        if (this._texture) {\n            return this._texture._irradianceTexture;\n        }\n        return null;\n    }\n    set irradianceTexture(value) {\n        if (this._texture) {\n            this._texture._irradianceTexture = value;\n        }\n    }\n    /**\n     * Define the unique id of the texture in the scene.\n     */\n    get uid() {\n        if (!this._uid) {\n            this._uid = RandomGUID();\n        }\n        return this._uid;\n    }\n    /**\n     * Return a string representation of the texture.\n     * @returns the texture as a string\n     */\n    toString() {\n        return this.name;\n    }\n    /**\n     * Get the class name of the texture.\n     * @returns \"BaseTexture\"\n     */\n    getClassName() {\n        return \"BaseTexture\";\n    }\n    /**\n     * Callback triggered when the texture has been disposed.\n     * Kept for back compatibility, you can use the onDisposeObservable instead.\n     */\n    set onDispose(callback) {\n        if (this._onDisposeObserver) {\n            this.onDisposeObservable.remove(this._onDisposeObserver);\n        }\n        this._onDisposeObserver = this.onDisposeObservable.add(callback);\n    }\n    /**\n     * Define if the texture is preventing a material to render or not.\n     * If not and the texture is not ready, the engine will use a default black texture instead.\n     */\n    get isBlocking() {\n        return true;\n    }\n    /**\n     * Was there any loading error?\n     */\n    get loadingError() {\n        return this._loadingError;\n    }\n    /**\n     * If a loading error occurred this object will be populated with information about the error.\n     */\n    get errorObject() {\n        return this._errorObject;\n    }\n    /**\n     * Instantiates a new BaseTexture.\n     * Base class of all the textures in babylon.\n     * It groups all the common properties the materials, post process, lights... might need\n     * in order to make a correct use of the texture.\n     * @param sceneOrEngine Define the scene or engine the texture belongs to\n     * @param internalTexture Define the internal texture associated with the texture\n     */\n    constructor(sceneOrEngine, internalTexture = null) {\n        super(null);\n        /**\n         * Gets or sets an object used to store user defined information.\n         */\n        this.metadata = null;\n        /**\n         * For internal use only. Please do not use.\n         */\n        this.reservedDataStore = null;\n        this._hasAlpha = false;\n        this._getAlphaFromRGB = false;\n        /**\n         * Intensity or strength of the texture.\n         * It is commonly used by materials to fine tune the intensity of the texture\n         */\n        this.level = 1;\n        this._coordinatesIndex = 0;\n        /**\n         * Gets or sets a boolean indicating that the texture should try to reduce shader code if there is no UV manipulation.\n         * (ie. when texture.getTextureMatrix().isIdentityAs3x2() returns true)\n         */\n        this.optimizeUVAllocation = true;\n        this._coordinatesMode = 0;\n        /**\n         * | Value | Type               | Description |\n         * | ----- | ------------------ | ----------- |\n         * | 0     | CLAMP_ADDRESSMODE  |             |\n         * | 1     | WRAP_ADDRESSMODE   |             |\n         * | 2     | MIRROR_ADDRESSMODE |             |\n         */\n        this.wrapR = 1;\n        /**\n         * With compliant hardware and browser (supporting anisotropic filtering)\n         * this defines the level of anisotropic filtering in the texture.\n         * The higher the better but the slower. This defaults to 4 as it seems to be the best tradeoff.\n         */\n        this.anisotropicFilteringLevel = BaseTexture.DEFAULT_ANISOTROPIC_FILTERING_LEVEL;\n        /** @internal */\n        this._isCube = false;\n        /** @internal */\n        this._gammaSpace = true;\n        /**\n         * Is Z inverted in the texture (useful in a cube texture).\n         */\n        this.invertZ = false;\n        /**\n         * @internal\n         */\n        this.lodLevelInAlpha = false;\n        /**\n         * Define if the texture is a render target.\n         */\n        this.isRenderTarget = false;\n        /** @internal */\n        this._prefiltered = false;\n        /** @internal */\n        this._forceSerialize = false;\n        /**\n         * Define the list of animation attached to the texture.\n         */\n        this.animations = [];\n        /**\n         * An event triggered when the texture is disposed.\n         */\n        this.onDisposeObservable = new Observable();\n        this._onDisposeObserver = null;\n        this._scene = null;\n        /** @internal */\n        this._uid = null;\n        /** @internal */\n        this._parentContainer = null;\n        this._loadingError = false;\n        if (sceneOrEngine) {\n            if (BaseTexture._IsScene(sceneOrEngine)) {\n                this._scene = sceneOrEngine;\n            }\n            else {\n                this._engine = sceneOrEngine;\n            }\n        }\n        else {\n            this._scene = EngineStore.LastCreatedScene;\n        }\n        if (this._scene) {\n            this.uniqueId = this._scene.getUniqueId();\n            this._scene.addTexture(this);\n            this._engine = this._scene.getEngine();\n        }\n        this._texture = internalTexture;\n        this._uid = null;\n    }\n    /**\n     * Get the scene the texture belongs to.\n     * @returns the scene or null if undefined\n     */\n    getScene() {\n        return this._scene;\n    }\n    /** @internal */\n    _getEngine() {\n        return this._engine;\n    }\n    /**\n     * Get the texture transform matrix used to offset tile the texture for instance.\n     * @returns the transformation matrix\n     */\n    getTextureMatrix() {\n        return Matrix.IdentityReadOnly;\n    }\n    /**\n     * Get the texture reflection matrix used to rotate/transform the reflection.\n     * @returns the reflection matrix\n     */\n    getReflectionTextureMatrix() {\n        return Matrix.IdentityReadOnly;\n    }\n    /**\n     * Gets a suitable rotate/transform matrix when the texture is used for refraction.\n     * There's a separate function from getReflectionTextureMatrix because refraction requires a special configuration of the matrix in right-handed mode.\n     * @returns The refraction matrix\n     */\n    getRefractionTextureMatrix() {\n        return this.getReflectionTextureMatrix();\n    }\n    /**\n     * Get if the texture is ready to be consumed (either it is ready or it is not blocking)\n     * @returns true if ready, not blocking or if there was an error loading the texture\n     */\n    isReadyOrNotBlocking() {\n        return !this.isBlocking || this.isReady() || this.loadingError;\n    }\n    /**\n     * Scales the texture if is `canRescale()`\n     * @param ratio the resize factor we want to use to rescale\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    scale(ratio) { }\n    /**\n     * Get if the texture can rescale.\n     */\n    get canRescale() {\n        return false;\n    }\n    /**\n     * @internal\n     */\n    _getFromCache(url, noMipmap, sampling, invertY, useSRGBBuffer, isCube) {\n        const engine = this._getEngine();\n        if (!engine) {\n            return null;\n        }\n        const correctedUseSRGBBuffer = engine._getUseSRGBBuffer(!!useSRGBBuffer, noMipmap);\n        const texturesCache = engine.getLoadedTexturesCache();\n        for (let index = 0; index < texturesCache.length; index++) {\n            const texturesCacheEntry = texturesCache[index];\n            if (useSRGBBuffer === undefined || correctedUseSRGBBuffer === texturesCacheEntry._useSRGBBuffer) {\n                if (invertY === undefined || invertY === texturesCacheEntry.invertY) {\n                    if (texturesCacheEntry.url === url && texturesCacheEntry.generateMipMaps === !noMipmap) {\n                        if (!sampling || sampling === texturesCacheEntry.samplingMode) {\n                            if (isCube === undefined || isCube === texturesCacheEntry.isCube) {\n                                texturesCacheEntry.incrementReferences();\n                                return texturesCacheEntry;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    /** @internal */\n    _rebuild(_fromContextLost = false) { }\n    /**\n     * Clones the texture.\n     * @returns the cloned texture\n     */\n    clone() {\n        return null;\n    }\n    /**\n     * Get the texture underlying type (INT, FLOAT...)\n     */\n    get textureType() {\n        if (!this._texture) {\n            return 0;\n        }\n        return this._texture.type !== undefined ? this._texture.type : 0;\n    }\n    /**\n     * Get the texture underlying format (RGB, RGBA...)\n     */\n    get textureFormat() {\n        if (!this._texture) {\n            return 5;\n        }\n        return this._texture.format !== undefined ? this._texture.format : 5;\n    }\n    /**\n     * Indicates that textures need to be re-calculated for all materials\n     */\n    _markAllSubMeshesAsTexturesDirty() {\n        const scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n        scene.markAllMaterialsAsDirty(1);\n    }\n    /**\n     * Reads the pixels stored in the webgl texture and returns them as an ArrayBuffer.\n     * This will returns an RGBA array buffer containing either in values (0-255) or\n     * float values (0-1) depending of the underlying buffer type.\n     * @param faceIndex defines the face of the texture to read (in case of cube texture)\n     * @param level defines the LOD level of the texture to read (in case of Mip Maps)\n     * @param buffer defines a user defined buffer to fill with data (can be null)\n     * @param flushRenderer true to flush the renderer from the pending commands before reading the pixels\n     * @param noDataConversion false to convert the data to Uint8Array (if texture type is UNSIGNED_BYTE) or to Float32Array (if texture type is anything but UNSIGNED_BYTE). If true, the type of the generated buffer (if buffer==null) will depend on the type of the texture\n     * @param x defines the region x coordinates to start reading from (default to 0)\n     * @param y defines the region y coordinates to start reading from (default to 0)\n     * @param width defines the region width to read from (default to the texture size at level)\n     * @param height defines the region width to read from (default to the texture size at level)\n     * @returns The Array buffer promise containing the pixels data.\n     */\n    readPixels(faceIndex = 0, level = 0, buffer = null, flushRenderer = true, noDataConversion = false, x = 0, y = 0, width = Number.MAX_VALUE, height = Number.MAX_VALUE) {\n        if (!this._texture) {\n            return null;\n        }\n        const engine = this._getEngine();\n        if (!engine) {\n            return null;\n        }\n        const size = this.getSize();\n        let maxWidth = size.width;\n        let maxHeight = size.height;\n        if (level !== 0) {\n            maxWidth = maxWidth / Math.pow(2, level);\n            maxHeight = maxHeight / Math.pow(2, level);\n            maxWidth = Math.round(maxWidth);\n            maxHeight = Math.round(maxHeight);\n        }\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        try {\n            if (this._texture.isCube) {\n                return engine._readTexturePixels(this._texture, width, height, faceIndex, level, buffer, flushRenderer, noDataConversion, x, y);\n            }\n            return engine._readTexturePixels(this._texture, width, height, -1, level, buffer, flushRenderer, noDataConversion, x, y);\n        }\n        catch (e) {\n            return null;\n        }\n    }\n    /**\n     * @internal\n     */\n    _readPixelsSync(faceIndex = 0, level = 0, buffer = null, flushRenderer = true, noDataConversion = false) {\n        if (!this._texture) {\n            return null;\n        }\n        const size = this.getSize();\n        let width = size.width;\n        let height = size.height;\n        const engine = this._getEngine();\n        if (!engine) {\n            return null;\n        }\n        if (level != 0) {\n            width = width / Math.pow(2, level);\n            height = height / Math.pow(2, level);\n            width = Math.round(width);\n            height = Math.round(height);\n        }\n        try {\n            if (this._texture.isCube) {\n                return engine._readTexturePixelsSync(this._texture, width, height, faceIndex, level, buffer, flushRenderer, noDataConversion);\n            }\n            return engine._readTexturePixelsSync(this._texture, width, height, -1, level, buffer, flushRenderer, noDataConversion);\n        }\n        catch (e) {\n            return null;\n        }\n    }\n    /** @internal */\n    get _lodTextureHigh() {\n        if (this._texture) {\n            return this._texture._lodTextureHigh;\n        }\n        return null;\n    }\n    /** @internal */\n    get _lodTextureMid() {\n        if (this._texture) {\n            return this._texture._lodTextureMid;\n        }\n        return null;\n    }\n    /** @internal */\n    get _lodTextureLow() {\n        if (this._texture) {\n            return this._texture._lodTextureLow;\n        }\n        return null;\n    }\n    /**\n     * Dispose the texture and release its associated resources.\n     */\n    dispose() {\n        if (this._scene) {\n            // Animations\n            if (this._scene.stopAnimation) {\n                this._scene.stopAnimation(this);\n            }\n            // Remove from scene\n            this._scene.removePendingData(this);\n            const index = this._scene.textures.indexOf(this);\n            if (index >= 0) {\n                this._scene.textures.splice(index, 1);\n            }\n            this._scene.onTextureRemovedObservable.notifyObservers(this);\n            this._scene = null;\n            if (this._parentContainer) {\n                const index = this._parentContainer.textures.indexOf(this);\n                if (index > -1) {\n                    this._parentContainer.textures.splice(index, 1);\n                }\n                this._parentContainer = null;\n            }\n        }\n        // Callback\n        this.onDisposeObservable.notifyObservers(this);\n        this.onDisposeObservable.clear();\n        this.metadata = null;\n        super.dispose();\n    }\n    /**\n     * Serialize the texture into a JSON representation that can be parsed later on.\n     * @param allowEmptyName True to force serialization even if name is empty. Default: false\n     * @returns the JSON representation of the texture\n     */\n    serialize(allowEmptyName = false) {\n        if (!this.name && !allowEmptyName) {\n            return null;\n        }\n        const serializationObject = SerializationHelper.Serialize(this);\n        // Animations\n        SerializationHelper.AppendSerializedAnimations(this, serializationObject);\n        return serializationObject;\n    }\n    /**\n     * Helper function to be called back once a list of texture contains only ready textures.\n     * @param textures Define the list of textures to wait for\n     * @param callback Define the callback triggered once the entire list will be ready\n     */\n    static WhenAllReady(textures, callback) {\n        let numRemaining = textures.length;\n        if (numRemaining === 0) {\n            callback();\n            return;\n        }\n        for (let i = 0; i < textures.length; i++) {\n            const texture = textures[i];\n            if (texture.isReady()) {\n                if (--numRemaining === 0) {\n                    callback();\n                }\n            }\n            else {\n                const onLoadObservable = texture.onLoadObservable;\n                if (onLoadObservable) {\n                    onLoadObservable.addOnce(() => {\n                        if (--numRemaining === 0) {\n                            callback();\n                        }\n                    });\n                }\n                else {\n                    if (--numRemaining === 0) {\n                        callback();\n                    }\n                }\n            }\n        }\n    }\n    static _IsScene(sceneOrEngine) {\n        return sceneOrEngine.getClassName() === \"Scene\";\n    }\n}\n/**\n * Default anisotropic filtering level for the application.\n * It is set to 4 as a good tradeoff between perf and quality.\n */\nBaseTexture.DEFAULT_ANISOTROPIC_FILTERING_LEVEL = 4;\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"uniqueId\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"name\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"metadata\", void 0);\n__decorate([\n    serialize(\"hasAlpha\")\n], BaseTexture.prototype, \"_hasAlpha\", void 0);\n__decorate([\n    serialize(\"getAlphaFromRGB\")\n], BaseTexture.prototype, \"_getAlphaFromRGB\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"level\", void 0);\n__decorate([\n    serialize(\"coordinatesIndex\")\n], BaseTexture.prototype, \"_coordinatesIndex\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"optimizeUVAllocation\", void 0);\n__decorate([\n    serialize(\"coordinatesMode\")\n], BaseTexture.prototype, \"_coordinatesMode\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"wrapU\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"wrapV\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"wrapR\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"anisotropicFilteringLevel\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"isCube\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"is3D\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"is2DArray\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"gammaSpace\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"invertZ\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"lodLevelInAlpha\", void 0);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"lodGenerationOffset\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"lodGenerationScale\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"linearSpecularLOD\", null);\n__decorate([\n    serializeAsTexture()\n], BaseTexture.prototype, \"irradianceTexture\", null);\n__decorate([\n    serialize()\n], BaseTexture.prototype, \"isRenderTarget\", void 0);\n","import { Logger } from \"./logger.js\";\nimport { GetClass } from \"./typeStore.js\";\n/**\n * Class used to enable instantiation of objects by class name\n */\nexport class InstantiationTools {\n    /**\n     * Tries to instantiate a new object from a given class name\n     * @param className defines the class name to instantiate\n     * @returns the new object or null if the system was not able to do the instantiation\n     */\n    static Instantiate(className) {\n        if (this.RegisteredExternalClasses && this.RegisteredExternalClasses[className]) {\n            return this.RegisteredExternalClasses[className];\n        }\n        const internalClass = GetClass(className);\n        if (internalClass) {\n            return internalClass;\n        }\n        Logger.Warn(className + \" not found, you may have missed an import.\");\n        const arr = className.split(\".\");\n        let fn = window || this;\n        for (let i = 0, len = arr.length; i < len; i++) {\n            fn = fn[arr[i]];\n        }\n        if (typeof fn !== \"function\") {\n            return null;\n        }\n        return fn;\n    }\n}\n/**\n * Use this object to register external classes like custom textures or material\n * to allow the loaders to instantiate them\n */\nInstantiationTools.RegisteredExternalClasses = {};\n","import { Vector3, Matrix } from \"./math.vector.js\";\n/**\n * Represents a plane by the equation ax + by + cz + d = 0\n */\nexport class Plane {\n    /**\n     * Creates a Plane object according to the given floats a, b, c, d and the plane equation : ax + by + cz + d = 0\n     * @param a a component of the plane\n     * @param b b component of the plane\n     * @param c c component of the plane\n     * @param d d component of the plane\n     */\n    constructor(a, b, c, d) {\n        this.normal = new Vector3(a, b, c);\n        this.d = d;\n    }\n    /**\n     * @returns the plane coordinates as a new array of 4 elements [a, b, c, d].\n     */\n    asArray() {\n        return [this.normal.x, this.normal.y, this.normal.z, this.d];\n    }\n    // Methods\n    /**\n     * @returns a new plane copied from the current Plane.\n     */\n    clone() {\n        return new Plane(this.normal.x, this.normal.y, this.normal.z, this.d);\n    }\n    /**\n     * @returns the string \"Plane\".\n     */\n    getClassName() {\n        return \"Plane\";\n    }\n    /**\n     * @returns the Plane hash code.\n     */\n    getHashCode() {\n        let hash = this.normal.getHashCode();\n        hash = (hash * 397) ^ (this.d | 0);\n        return hash;\n    }\n    /**\n     * Normalize the current Plane in place.\n     * @returns the updated Plane.\n     */\n    normalize() {\n        const norm = Math.sqrt(this.normal.x * this.normal.x + this.normal.y * this.normal.y + this.normal.z * this.normal.z);\n        let magnitude = 0.0;\n        if (norm !== 0) {\n            magnitude = 1.0 / norm;\n        }\n        this.normal.x *= magnitude;\n        this.normal.y *= magnitude;\n        this.normal.z *= magnitude;\n        this.d *= magnitude;\n        return this;\n    }\n    /**\n     * Applies a transformation the plane and returns the result\n     * @param transformation the transformation matrix to be applied to the plane\n     * @returns a new Plane as the result of the transformation of the current Plane by the given matrix.\n     */\n    transform(transformation) {\n        const invertedMatrix = Plane._TmpMatrix;\n        transformation.invertToRef(invertedMatrix);\n        const m = invertedMatrix.m;\n        const x = this.normal.x;\n        const y = this.normal.y;\n        const z = this.normal.z;\n        const d = this.d;\n        const normalX = x * m[0] + y * m[1] + z * m[2] + d * m[3];\n        const normalY = x * m[4] + y * m[5] + z * m[6] + d * m[7];\n        const normalZ = x * m[8] + y * m[9] + z * m[10] + d * m[11];\n        const finalD = x * m[12] + y * m[13] + z * m[14] + d * m[15];\n        return new Plane(normalX, normalY, normalZ, finalD);\n    }\n    /**\n     * Compute the dot product between the point and the plane normal\n     * @param point point to calculate the dot product with\n     * @returns the dot product (float) of the point coordinates and the plane normal.\n     */\n    dotCoordinate(point) {\n        return this.normal.x * point.x + this.normal.y * point.y + this.normal.z * point.z + this.d;\n    }\n    /**\n     * Updates the current Plane from the plane defined by the three given points.\n     * @param point1 one of the points used to construct the plane\n     * @param point2 one of the points used to construct the plane\n     * @param point3 one of the points used to construct the plane\n     * @returns the updated Plane.\n     */\n    copyFromPoints(point1, point2, point3) {\n        const x1 = point2.x - point1.x;\n        const y1 = point2.y - point1.y;\n        const z1 = point2.z - point1.z;\n        const x2 = point3.x - point1.x;\n        const y2 = point3.y - point1.y;\n        const z2 = point3.z - point1.z;\n        const yz = y1 * z2 - z1 * y2;\n        const xz = z1 * x2 - x1 * z2;\n        const xy = x1 * y2 - y1 * x2;\n        const pyth = Math.sqrt(yz * yz + xz * xz + xy * xy);\n        let invPyth;\n        if (pyth !== 0) {\n            invPyth = 1.0 / pyth;\n        }\n        else {\n            invPyth = 0.0;\n        }\n        this.normal.x = yz * invPyth;\n        this.normal.y = xz * invPyth;\n        this.normal.z = xy * invPyth;\n        this.d = -(this.normal.x * point1.x + this.normal.y * point1.y + this.normal.z * point1.z);\n        return this;\n    }\n    /**\n     * Checks if the plane is facing a given direction (meaning if the plane's normal is pointing in the opposite direction of the given vector).\n     * Note that for this function to work as expected you should make sure that:\n     *   - direction and the plane normal are normalized\n     *   - epsilon is a number just bigger than -1, something like -0.99 for eg\n     * @param direction the direction to check if the plane is facing\n     * @param epsilon value the dot product is compared against (returns true if dot <= epsilon)\n     * @returns True if the plane is facing the given direction\n     */\n    isFrontFacingTo(direction, epsilon) {\n        const dot = Vector3.Dot(this.normal, direction);\n        return dot <= epsilon;\n    }\n    /**\n     * Calculates the distance to a point\n     * @param point point to calculate distance to\n     * @returns the signed distance (float) from the given point to the Plane.\n     */\n    signedDistanceTo(point) {\n        return Vector3.Dot(point, this.normal) + this.d;\n    }\n    // Statics\n    /**\n     * Creates a plane from an  array\n     * @param array the array to create a plane from\n     * @returns a new Plane from the given array.\n     */\n    static FromArray(array) {\n        return new Plane(array[0], array[1], array[2], array[3]);\n    }\n    /**\n     * Creates a plane from three points\n     * @param point1 point used to create the plane\n     * @param point2 point used to create the plane\n     * @param point3 point used to create the plane\n     * @returns a new Plane defined by the three given points.\n     */\n    static FromPoints(point1, point2, point3) {\n        const result = new Plane(0.0, 0.0, 0.0, 0.0);\n        result.copyFromPoints(point1, point2, point3);\n        return result;\n    }\n    /**\n     * Creates a plane from an origin point and a normal\n     * @param origin origin of the plane to be constructed\n     * @param normal normal of the plane to be constructed\n     * @returns a new Plane the normal vector to this plane at the given origin point.\n     */\n    static FromPositionAndNormal(origin, normal) {\n        const plane = new Plane(0.0, 0.0, 0.0, 0.0);\n        return this.FromPositionAndNormalToRef(origin, normal, plane);\n    }\n    /**\n     * Updates the given Plane \"result\" from an origin point and a normal.\n     * @param origin origin of the plane to be constructed\n     * @param normal the normalized normals of the plane to be constructed\n     * @param result defines the Plane where to store the result\n     * @returns result input\n     */\n    static FromPositionAndNormalToRef(origin, normal, result) {\n        result.normal.copyFrom(normal);\n        result.normal.normalize();\n        result.d = -origin.dot(result.normal);\n        return result;\n    }\n    /**\n     * Calculates the distance from a plane and a point\n     * @param origin origin of the plane to be constructed\n     * @param normal normal of the plane to be constructed\n     * @param point point to calculate distance to\n     * @returns the signed distance between the plane defined by the normal vector at the \"origin\"\" point and the given other point.\n     */\n    static SignedDistanceToPlaneFromPositionAndNormal(origin, normal, point) {\n        const d = -(normal.x * origin.x + normal.y * origin.y + normal.z * origin.z);\n        return Vector3.Dot(point, normal) + d;\n    }\n}\nPlane._TmpMatrix = Matrix.Identity();\n","/**\n * Transform some pixel data to a base64 string\n * @param pixels defines the pixel data to transform to base64\n * @param size defines the width and height of the (texture) data\n * @param invertY true if the data must be inverted for the Y coordinate during the conversion\n * @returns The base64 encoded string or null\n */\nexport function GenerateBase64StringFromPixelData(pixels, size, invertY = false) {\n    const width = size.width;\n    const height = size.height;\n    if (pixels instanceof Float32Array) {\n        let len = pixels.byteLength / pixels.BYTES_PER_ELEMENT;\n        const npixels = new Uint8Array(len);\n        while (--len >= 0) {\n            let val = pixels[len];\n            if (val < 0) {\n                val = 0;\n            }\n            else if (val > 1) {\n                val = 1;\n            }\n            npixels[len] = val * 255;\n        }\n        pixels = npixels;\n    }\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) {\n        return null;\n    }\n    const imageData = ctx.createImageData(width, height);\n    const castData = imageData.data;\n    castData.set(pixels);\n    ctx.putImageData(imageData, 0, 0);\n    if (invertY) {\n        const canvas2 = document.createElement(\"canvas\");\n        canvas2.width = width;\n        canvas2.height = height;\n        const ctx2 = canvas2.getContext(\"2d\");\n        if (!ctx2) {\n            return null;\n        }\n        ctx2.translate(0, height);\n        ctx2.scale(1, -1);\n        ctx2.drawImage(canvas, 0, 0);\n        return canvas2.toDataURL(\"image/png\");\n    }\n    return canvas.toDataURL(\"image/png\");\n}\n/**\n * Reads the pixels stored in the webgl texture and returns them as a base64 string\n * @param texture defines the texture to read pixels from\n * @param faceIndex defines the face of the texture to read (in case of cube texture)\n * @param level defines the LOD level of the texture to read (in case of Mip Maps)\n * @returns The base64 encoded string or null\n */\nexport function GenerateBase64StringFromTexture(texture, faceIndex = 0, level = 0) {\n    const internalTexture = texture.getInternalTexture();\n    if (!internalTexture) {\n        return null;\n    }\n    const pixels = texture._readPixelsSync(faceIndex, level);\n    if (!pixels) {\n        return null;\n    }\n    return GenerateBase64StringFromPixelData(pixels, texture.getSize(), internalTexture.invertY);\n}\n/**\n * Reads the pixels stored in the webgl texture and returns them as a base64 string\n * @param texture defines the texture to read pixels from\n * @param faceIndex defines the face of the texture to read (in case of cube texture)\n * @param level defines the LOD level of the texture to read (in case of Mip Maps)\n * @returns The base64 encoded string or null wrapped in a promise\n */\nexport async function GenerateBase64StringFromTextureAsync(texture, faceIndex = 0, level = 0) {\n    const internalTexture = texture.getInternalTexture();\n    if (!internalTexture) {\n        return null;\n    }\n    const pixels = await texture.readPixels(faceIndex, level);\n    if (!pixels) {\n        return null;\n    }\n    return GenerateBase64StringFromPixelData(pixels, texture.getSize(), internalTexture.invertY);\n}\n/**\n * Class used to host copy specific utilities\n * (Back-compat)\n */\nexport const CopyTools = {\n    /**\n     * Transform some pixel data to a base64 string\n     * @param pixels defines the pixel data to transform to base64\n     * @param size defines the width and height of the (texture) data\n     * @param invertY true if the data must be inverted for the Y coordinate during the conversion\n     * @returns The base64 encoded string or null\n     */\n    GenerateBase64StringFromPixelData,\n    /**\n     * Reads the pixels stored in the webgl texture and returns them as a base64 string\n     * @param texture defines the texture to read pixels from\n     * @param faceIndex defines the face of the texture to read (in case of cube texture)\n     * @param level defines the LOD level of the texture to read (in case of Mip Maps)\n     * @returns The base64 encoded string or null\n     */\n    GenerateBase64StringFromTexture,\n    /**\n     * Reads the pixels stored in the webgl texture and returns them as a base64 string\n     * @param texture defines the texture to read pixels from\n     * @param faceIndex defines the face of the texture to read (in case of cube texture)\n     * @param level defines the LOD level of the texture to read (in case of Mip Maps)\n     * @returns The base64 encoded string or null wrapped in a promise\n     */\n    GenerateBase64StringFromTextureAsync,\n};\n","/**\n * Options used to control default behaviors regarding compatibility support\n */\nexport class CompatibilityOptions {\n}\n/**\n * Defines if the system should use OpenGL convention for UVs when creating geometry or loading .babylon files (false by default)\n */\nCompatibilityOptions.UseOpenGLOrientationForUV = false;\n","import { __decorate } from \"../../tslib.es6.js\";\nimport { serialize } from \"../../Misc/decorators.js\";\nimport { Observable } from \"../../Misc/observable.js\";\nimport { Matrix, TmpVectors, Vector3 } from \"../../Maths/math.vector.js\";\nimport { BaseTexture } from \"../../Materials/Textures/baseTexture.js\";\n\nimport { GetClass, RegisterClass } from \"../../Misc/typeStore.js\";\nimport { _WarnImport } from \"../../Misc/devTools.js\";\nimport { TimingTools } from \"../../Misc/timingTools.js\";\nimport { InstantiationTools } from \"../../Misc/instantiationTools.js\";\nimport { Plane } from \"../../Maths/math.plane.js\";\nimport { EncodeArrayBufferToBase64 } from \"../../Misc/stringTools.js\";\nimport { GenerateBase64StringFromTexture, GenerateBase64StringFromTextureAsync } from \"../../Misc/copyTools.js\";\nimport { CompatibilityOptions } from \"../../Compat/compatibilityOptions.js\";\nimport { SerializationHelper } from \"../../Misc/decorators.serialization.js\";\n/**\n * This represents a texture in babylon. It can be easily loaded from a network, base64 or html input.\n * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/materials_introduction#texture\n */\nexport class Texture extends BaseTexture {\n    /**\n     * @internal\n     */\n    static _CreateVideoTexture(name, src, scene, generateMipMaps = false, invertY = false, samplingMode = Texture.TRILINEAR_SAMPLINGMODE, settings = {}, onError, format = 5) {\n        throw _WarnImport(\"VideoTexture\");\n    }\n    /**\n     * Are mip maps generated for this texture or not.\n     */\n    get noMipmap() {\n        return this._noMipmap;\n    }\n    /** Returns the texture mime type if it was defined by a loader (undefined else) */\n    get mimeType() {\n        return this._mimeType;\n    }\n    /**\n     * Is the texture preventing material to render while loading.\n     * If false, a default texture will be used instead of the loading one during the preparation step.\n     */\n    set isBlocking(value) {\n        this._isBlocking = value;\n    }\n    get isBlocking() {\n        return this._isBlocking;\n    }\n    /**\n     * Gets a boolean indicating if the texture needs to be inverted on the y axis during loading\n     */\n    get invertY() {\n        return this._invertY;\n    }\n    /**\n     * Instantiates a new texture.\n     * This represents a texture in babylon. It can be easily loaded from a network, base64 or html input.\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/materials_introduction#texture\n     * @param url defines the url of the picture to load as a texture\n     * @param sceneOrEngine defines the scene or engine the texture will belong to\n     * @param noMipmapOrOptions defines if the texture will require mip maps or not or set of all options to create the texture\n     * @param invertY defines if the texture needs to be inverted on the y axis during loading\n     * @param samplingMode defines the sampling mode we want for the texture while fetching from it (Texture.NEAREST_SAMPLINGMODE...)\n     * @param onLoad defines a callback triggered when the texture has been loaded\n     * @param onError defines a callback triggered when an error occurred during the loading session\n     * @param buffer defines the buffer to load the texture from in case the texture is loaded from a buffer representation\n     * @param deleteBuffer defines if the buffer we are loading the texture from should be deleted after load\n     * @param format defines the format of the texture we are trying to load (Engine.TEXTUREFORMAT_RGBA...)\n     * @param mimeType defines an optional mime type information\n     * @param loaderOptions options to be passed to the loader\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param forcedExtension defines the extension to use to pick the right loader\n     */\n    constructor(url, sceneOrEngine, noMipmapOrOptions, invertY, samplingMode = Texture.TRILINEAR_SAMPLINGMODE, onLoad = null, onError = null, buffer = null, deleteBuffer = false, format, mimeType, loaderOptions, creationFlags, forcedExtension) {\n        super(sceneOrEngine);\n        /**\n         * Define the url of the texture.\n         */\n        this.url = null;\n        /**\n         * Define an offset on the texture to offset the u coordinates of the UVs\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials#offsetting\n         */\n        this.uOffset = 0;\n        /**\n         * Define an offset on the texture to offset the v coordinates of the UVs\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials#offsetting\n         */\n        this.vOffset = 0;\n        /**\n         * Define an offset on the texture to scale the u coordinates of the UVs\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials#tiling\n         */\n        this.uScale = 1.0;\n        /**\n         * Define an offset on the texture to scale the v coordinates of the UVs\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials#tiling\n         */\n        this.vScale = 1.0;\n        /**\n         * Define an offset on the texture to rotate around the u coordinates of the UVs\n         * The angle is defined in radians.\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials\n         */\n        this.uAng = 0;\n        /**\n         * Define an offset on the texture to rotate around the v coordinates of the UVs\n         * The angle is defined in radians.\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials\n         */\n        this.vAng = 0;\n        /**\n         * Define an offset on the texture to rotate around the w coordinates of the UVs (in case of 3d texture)\n         * The angle is defined in radians.\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/materials/using/moreMaterials\n         */\n        this.wAng = 0;\n        /**\n         * Defines the center of rotation (U)\n         */\n        this.uRotationCenter = 0.5;\n        /**\n         * Defines the center of rotation (V)\n         */\n        this.vRotationCenter = 0.5;\n        /**\n         * Defines the center of rotation (W)\n         */\n        this.wRotationCenter = 0.5;\n        /**\n         * Sets this property to true to avoid deformations when rotating the texture with non-uniform scaling\n         */\n        this.homogeneousRotationInUVTransform = false;\n        /**\n         * List of inspectable custom properties (used by the Inspector)\n         * @see https://doc.babylonjs.com/toolsAndResources/inspector#extensibility\n         */\n        this.inspectableCustomProperties = null;\n        /** @internal */\n        this._noMipmap = false;\n        /** @internal */\n        this._invertY = false;\n        this._rowGenerationMatrix = null;\n        this._cachedTextureMatrix = null;\n        this._projectionModeMatrix = null;\n        this._t0 = null;\n        this._t1 = null;\n        this._t2 = null;\n        this._cachedUOffset = -1;\n        this._cachedVOffset = -1;\n        this._cachedUScale = 0;\n        this._cachedVScale = 0;\n        this._cachedUAng = -1;\n        this._cachedVAng = -1;\n        this._cachedWAng = -1;\n        this._cachedReflectionProjectionMatrixId = -1;\n        this._cachedURotationCenter = -1;\n        this._cachedVRotationCenter = -1;\n        this._cachedWRotationCenter = -1;\n        this._cachedHomogeneousRotationInUVTransform = false;\n        this._cachedIdentity3x2 = true;\n        this._cachedReflectionTextureMatrix = null;\n        this._cachedReflectionUOffset = -1;\n        this._cachedReflectionVOffset = -1;\n        this._cachedReflectionUScale = 0;\n        this._cachedReflectionVScale = 0;\n        this._cachedReflectionCoordinatesMode = -1;\n        /** @internal */\n        this._buffer = null;\n        this._deleteBuffer = false;\n        this._format = null;\n        this._delayedOnLoad = null;\n        this._delayedOnError = null;\n        /**\n         * Observable triggered once the texture has been loaded.\n         */\n        this.onLoadObservable = new Observable();\n        this._isBlocking = true;\n        this.name = url || \"\";\n        this.url = url;\n        let noMipmap;\n        let useSRGBBuffer = false;\n        let internalTexture = null;\n        let gammaSpace = true;\n        if (typeof noMipmapOrOptions === \"object\" && noMipmapOrOptions !== null) {\n            noMipmap = noMipmapOrOptions.noMipmap ?? false;\n            invertY = noMipmapOrOptions.invertY ?? (CompatibilityOptions.UseOpenGLOrientationForUV ? false : true);\n            samplingMode = noMipmapOrOptions.samplingMode ?? Texture.TRILINEAR_SAMPLINGMODE;\n            onLoad = noMipmapOrOptions.onLoad ?? null;\n            onError = noMipmapOrOptions.onError ?? null;\n            buffer = noMipmapOrOptions.buffer ?? null;\n            deleteBuffer = noMipmapOrOptions.deleteBuffer ?? false;\n            format = noMipmapOrOptions.format;\n            mimeType = noMipmapOrOptions.mimeType;\n            loaderOptions = noMipmapOrOptions.loaderOptions;\n            creationFlags = noMipmapOrOptions.creationFlags;\n            useSRGBBuffer = noMipmapOrOptions.useSRGBBuffer ?? false;\n            internalTexture = noMipmapOrOptions.internalTexture ?? null;\n            gammaSpace = noMipmapOrOptions.gammaSpace ?? gammaSpace;\n        }\n        else {\n            noMipmap = !!noMipmapOrOptions;\n        }\n        this._gammaSpace = gammaSpace;\n        this._noMipmap = noMipmap;\n        this._invertY = invertY === undefined ? (CompatibilityOptions.UseOpenGLOrientationForUV ? false : true) : invertY;\n        this._initialSamplingMode = samplingMode;\n        this._buffer = buffer;\n        this._deleteBuffer = deleteBuffer;\n        this._mimeType = mimeType;\n        this._loaderOptions = loaderOptions;\n        this._creationFlags = creationFlags;\n        this._useSRGBBuffer = useSRGBBuffer;\n        this._forcedExtension = forcedExtension;\n        if (format) {\n            this._format = format;\n        }\n        const scene = this.getScene();\n        const engine = this._getEngine();\n        if (!engine) {\n            return;\n        }\n        engine.onBeforeTextureInitObservable.notifyObservers(this);\n        const load = () => {\n            if (this._texture) {\n                if (this._texture._invertVScale) {\n                    this.vScale *= -1;\n                    this.vOffset += 1;\n                }\n                // Update texture to match internal texture's wrapping\n                if (this._texture._cachedWrapU !== null) {\n                    this.wrapU = this._texture._cachedWrapU;\n                    this._texture._cachedWrapU = null;\n                }\n                if (this._texture._cachedWrapV !== null) {\n                    this.wrapV = this._texture._cachedWrapV;\n                    this._texture._cachedWrapV = null;\n                }\n                if (this._texture._cachedWrapR !== null) {\n                    this.wrapR = this._texture._cachedWrapR;\n                    this._texture._cachedWrapR = null;\n                }\n            }\n            if (this.onLoadObservable.hasObservers()) {\n                this.onLoadObservable.notifyObservers(this);\n            }\n            if (onLoad) {\n                onLoad();\n            }\n            if (!this.isBlocking && scene) {\n                scene.resetCachedMaterial();\n            }\n        };\n        const errorHandler = (message, exception) => {\n            this._loadingError = true;\n            this._errorObject = { message, exception };\n            if (onError) {\n                onError(message, exception);\n            }\n            Texture.OnTextureLoadErrorObservable.notifyObservers(this);\n        };\n        if (!this.url && !internalTexture) {\n            this._delayedOnLoad = load;\n            this._delayedOnError = errorHandler;\n            return;\n        }\n        this._texture = internalTexture ?? this._getFromCache(this.url, noMipmap, samplingMode, this._invertY, useSRGBBuffer, this.isCube);\n        if (!this._texture) {\n            if (!scene || !scene.useDelayedTextureLoading) {\n                try {\n                    this._texture = engine.createTexture(this.url, noMipmap, this._invertY, scene, samplingMode, load, errorHandler, this._buffer, undefined, this._format, this._forcedExtension, mimeType, loaderOptions, creationFlags, useSRGBBuffer);\n                }\n                catch (e) {\n                    errorHandler(\"error loading\", e);\n                    throw e;\n                }\n                if (deleteBuffer) {\n                    this._buffer = null;\n                }\n            }\n            else {\n                this.delayLoadState = 4;\n                this._delayedOnLoad = load;\n                this._delayedOnError = errorHandler;\n            }\n        }\n        else {\n            if (this._texture.isReady) {\n                TimingTools.SetImmediate(() => load());\n            }\n            else {\n                const loadObserver = this._texture.onLoadedObservable.add(load);\n                this._texture.onErrorObservable.add((e) => {\n                    errorHandler(e.message, e.exception);\n                    this._texture?.onLoadedObservable.remove(loadObserver);\n                });\n            }\n        }\n    }\n    /**\n     * Update the url (and optional buffer) of this texture if url was null during construction.\n     * @param url the url of the texture\n     * @param buffer the buffer of the texture (defaults to null)\n     * @param onLoad callback called when the texture is loaded  (defaults to null)\n     * @param forcedExtension defines the extension to use to pick the right loader\n     */\n    updateURL(url, buffer = null, onLoad, forcedExtension) {\n        if (this.url) {\n            this.releaseInternalTexture();\n            this.getScene().markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n        if (!this.name || this.name.startsWith(\"data:\")) {\n            this.name = url;\n        }\n        this.url = url;\n        this._buffer = buffer;\n        this._forcedExtension = forcedExtension;\n        this.delayLoadState = 4;\n        if (onLoad) {\n            this._delayedOnLoad = onLoad;\n        }\n        this.delayLoad();\n    }\n    /**\n     * Finish the loading sequence of a texture flagged as delayed load.\n     * @internal\n     */\n    delayLoad() {\n        if (this.delayLoadState !== 4) {\n            return;\n        }\n        const scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n        this.delayLoadState = 1;\n        this._texture = this._getFromCache(this.url, this._noMipmap, this.samplingMode, this._invertY, this._useSRGBBuffer, this.isCube);\n        if (!this._texture) {\n            this._texture = scene\n                .getEngine()\n                .createTexture(this.url, this._noMipmap, this._invertY, scene, this.samplingMode, this._delayedOnLoad, this._delayedOnError, this._buffer, null, this._format, this._forcedExtension, this._mimeType, this._loaderOptions, this._creationFlags, this._useSRGBBuffer);\n            if (this._deleteBuffer) {\n                this._buffer = null;\n            }\n        }\n        else {\n            if (this._delayedOnLoad) {\n                if (this._texture.isReady) {\n                    TimingTools.SetImmediate(this._delayedOnLoad);\n                }\n                else {\n                    this._texture.onLoadedObservable.add(this._delayedOnLoad);\n                }\n            }\n        }\n        this._delayedOnLoad = null;\n        this._delayedOnError = null;\n    }\n    _prepareRowForTextureGeneration(x, y, z, t) {\n        x *= this._cachedUScale;\n        y *= this._cachedVScale;\n        x -= this.uRotationCenter * this._cachedUScale;\n        y -= this.vRotationCenter * this._cachedVScale;\n        z -= this.wRotationCenter;\n        Vector3.TransformCoordinatesFromFloatsToRef(x, y, z, this._rowGenerationMatrix, t);\n        t.x += this.uRotationCenter * this._cachedUScale + this._cachedUOffset;\n        t.y += this.vRotationCenter * this._cachedVScale + this._cachedVOffset;\n        t.z += this.wRotationCenter;\n    }\n    /**\n     * Get the current texture matrix which includes the requested offsetting, tiling and rotation components.\n     * @param uBase The horizontal base offset multiplier (1 by default)\n     * @returns the transform matrix of the texture.\n     */\n    getTextureMatrix(uBase = 1) {\n        if (this.uOffset === this._cachedUOffset &&\n            this.vOffset === this._cachedVOffset &&\n            this.uScale * uBase === this._cachedUScale &&\n            this.vScale === this._cachedVScale &&\n            this.uAng === this._cachedUAng &&\n            this.vAng === this._cachedVAng &&\n            this.wAng === this._cachedWAng &&\n            this.uRotationCenter === this._cachedURotationCenter &&\n            this.vRotationCenter === this._cachedVRotationCenter &&\n            this.wRotationCenter === this._cachedWRotationCenter &&\n            this.homogeneousRotationInUVTransform === this._cachedHomogeneousRotationInUVTransform) {\n            return this._cachedTextureMatrix;\n        }\n        this._cachedUOffset = this.uOffset;\n        this._cachedVOffset = this.vOffset;\n        this._cachedUScale = this.uScale * uBase;\n        this._cachedVScale = this.vScale;\n        this._cachedUAng = this.uAng;\n        this._cachedVAng = this.vAng;\n        this._cachedWAng = this.wAng;\n        this._cachedURotationCenter = this.uRotationCenter;\n        this._cachedVRotationCenter = this.vRotationCenter;\n        this._cachedWRotationCenter = this.wRotationCenter;\n        this._cachedHomogeneousRotationInUVTransform = this.homogeneousRotationInUVTransform;\n        if (!this._cachedTextureMatrix || !this._rowGenerationMatrix) {\n            this._cachedTextureMatrix = Matrix.Zero();\n            this._rowGenerationMatrix = new Matrix();\n            this._t0 = Vector3.Zero();\n            this._t1 = Vector3.Zero();\n            this._t2 = Vector3.Zero();\n        }\n        Matrix.RotationYawPitchRollToRef(this.vAng, this.uAng, this.wAng, this._rowGenerationMatrix);\n        if (this.homogeneousRotationInUVTransform) {\n            Matrix.TranslationToRef(-this._cachedURotationCenter, -this._cachedVRotationCenter, -this._cachedWRotationCenter, TmpVectors.Matrix[0]);\n            Matrix.TranslationToRef(this._cachedURotationCenter, this._cachedVRotationCenter, this._cachedWRotationCenter, TmpVectors.Matrix[1]);\n            Matrix.ScalingToRef(this._cachedUScale, this._cachedVScale, 0, TmpVectors.Matrix[2]);\n            Matrix.TranslationToRef(this._cachedUOffset, this._cachedVOffset, 0, TmpVectors.Matrix[3]);\n            TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix, this._cachedTextureMatrix);\n            this._cachedTextureMatrix.multiplyToRef(TmpVectors.Matrix[1], this._cachedTextureMatrix);\n            this._cachedTextureMatrix.multiplyToRef(TmpVectors.Matrix[2], this._cachedTextureMatrix);\n            this._cachedTextureMatrix.multiplyToRef(TmpVectors.Matrix[3], this._cachedTextureMatrix);\n            // copy the translation row to the 3rd row of the matrix so that we don't need to update the shaders (which expects the translation to be on the 3rd row)\n            this._cachedTextureMatrix.setRowFromFloats(2, this._cachedTextureMatrix.m[12], this._cachedTextureMatrix.m[13], this._cachedTextureMatrix.m[14], 1);\n        }\n        else {\n            this._prepareRowForTextureGeneration(0, 0, 0, this._t0);\n            this._prepareRowForTextureGeneration(1.0, 0, 0, this._t1);\n            this._prepareRowForTextureGeneration(0, 1.0, 0, this._t2);\n            this._t1.subtractInPlace(this._t0);\n            this._t2.subtractInPlace(this._t0);\n            Matrix.FromValuesToRef(this._t1.x, this._t1.y, this._t1.z, 0.0, this._t2.x, this._t2.y, this._t2.z, 0.0, this._t0.x, this._t0.y, this._t0.z, 0.0, 0.0, 0.0, 0.0, 1.0, this._cachedTextureMatrix);\n        }\n        const scene = this.getScene();\n        if (!scene) {\n            return this._cachedTextureMatrix;\n        }\n        const previousIdentity3x2 = this._cachedIdentity3x2;\n        this._cachedIdentity3x2 = this._cachedTextureMatrix.isIdentityAs3x2();\n        if (this.optimizeUVAllocation && previousIdentity3x2 !== this._cachedIdentity3x2) {\n            // We flag the materials that are using this texture as \"texture dirty\" because depending on the fact that the matrix is the identity or not, some defines\n            // will get different values (see PrepareDefinesForMergedUV), meaning we should regenerate the effect accordingly\n            scene.markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n        return this._cachedTextureMatrix;\n    }\n    /**\n     * Get the current matrix used to apply reflection. This is useful to rotate an environment texture for instance.\n     * @returns The reflection texture transform\n     */\n    getReflectionTextureMatrix() {\n        const scene = this.getScene();\n        if (!scene) {\n            return this._cachedReflectionTextureMatrix;\n        }\n        if (this.uOffset === this._cachedReflectionUOffset &&\n            this.vOffset === this._cachedReflectionVOffset &&\n            this.uScale === this._cachedReflectionUScale &&\n            this.vScale === this._cachedReflectionVScale &&\n            this.coordinatesMode === this._cachedReflectionCoordinatesMode) {\n            if (this.coordinatesMode === Texture.PROJECTION_MODE) {\n                if (this._cachedReflectionProjectionMatrixId === scene.getProjectionMatrix().updateFlag) {\n                    return this._cachedReflectionTextureMatrix;\n                }\n            }\n            else {\n                return this._cachedReflectionTextureMatrix;\n            }\n        }\n        if (!this._cachedReflectionTextureMatrix) {\n            this._cachedReflectionTextureMatrix = Matrix.Zero();\n        }\n        if (!this._projectionModeMatrix) {\n            this._projectionModeMatrix = Matrix.Zero();\n        }\n        const flagMaterialsAsTextureDirty = this._cachedReflectionCoordinatesMode !== this.coordinatesMode;\n        this._cachedReflectionUOffset = this.uOffset;\n        this._cachedReflectionVOffset = this.vOffset;\n        this._cachedReflectionUScale = this.uScale;\n        this._cachedReflectionVScale = this.vScale;\n        this._cachedReflectionCoordinatesMode = this.coordinatesMode;\n        switch (this.coordinatesMode) {\n            case Texture.PLANAR_MODE: {\n                Matrix.IdentityToRef(this._cachedReflectionTextureMatrix);\n                this._cachedReflectionTextureMatrix[0] = this.uScale;\n                this._cachedReflectionTextureMatrix[5] = this.vScale;\n                this._cachedReflectionTextureMatrix[12] = this.uOffset;\n                this._cachedReflectionTextureMatrix[13] = this.vOffset;\n                break;\n            }\n            case Texture.PROJECTION_MODE: {\n                Matrix.FromValuesToRef(0.5, 0.0, 0.0, 0.0, 0.0, -0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5, 0.5, 1.0, 1.0, this._projectionModeMatrix);\n                const projectionMatrix = scene.getProjectionMatrix();\n                this._cachedReflectionProjectionMatrixId = projectionMatrix.updateFlag;\n                projectionMatrix.multiplyToRef(this._projectionModeMatrix, this._cachedReflectionTextureMatrix);\n                break;\n            }\n            default:\n                Matrix.IdentityToRef(this._cachedReflectionTextureMatrix);\n                break;\n        }\n        if (flagMaterialsAsTextureDirty) {\n            // We flag the materials that are using this texture as \"texture dirty\" if the coordinatesMode has changed.\n            // Indeed, this property is used to set the value of some defines used to generate the effect (in material.isReadyForSubMesh), so we must make sure this code will be re-executed and the effect recreated if necessary\n            scene.markAllMaterialsAsDirty(1, (mat) => {\n                return mat.hasTexture(this);\n            });\n        }\n        return this._cachedReflectionTextureMatrix;\n    }\n    /**\n     * Clones the texture.\n     * @returns the cloned texture\n     */\n    clone() {\n        const options = {\n            noMipmap: this._noMipmap,\n            invertY: this._invertY,\n            samplingMode: this.samplingMode,\n            onLoad: undefined,\n            onError: undefined,\n            buffer: this._texture ? this._texture._buffer : undefined,\n            deleteBuffer: this._deleteBuffer,\n            format: this.textureFormat,\n            mimeType: this.mimeType,\n            loaderOptions: this._loaderOptions,\n            creationFlags: this._creationFlags,\n            useSRGBBuffer: this._useSRGBBuffer,\n        };\n        return SerializationHelper.Clone(() => {\n            return new Texture(this._texture ? this._texture.url : null, this.getScene(), options);\n        }, this);\n    }\n    /**\n     * Serialize the texture to a JSON representation we can easily use in the respective Parse function.\n     * @returns The JSON representation of the texture\n     */\n    serialize() {\n        const savedName = this.name;\n        if (!Texture.SerializeBuffers) {\n            if (this.name.startsWith(\"data:\")) {\n                this.name = \"\";\n            }\n        }\n        if (this.name.startsWith(\"data:\") && this.url === this.name) {\n            this.url = \"\";\n        }\n        const serializationObject = super.serialize(Texture._SerializeInternalTextureUniqueId);\n        if (!serializationObject) {\n            return null;\n        }\n        if (Texture.SerializeBuffers || Texture.ForceSerializeBuffers) {\n            if (typeof this._buffer === \"string\" && this._buffer.substr(0, 5) === \"data:\") {\n                serializationObject.base64String = this._buffer;\n                serializationObject.name = serializationObject.name.replace(\"data:\", \"\");\n            }\n            else if (this.url && this.url.startsWith(\"data:\") && this._buffer instanceof Uint8Array) {\n                serializationObject.base64String = \"data:image/png;base64,\" + EncodeArrayBufferToBase64(this._buffer);\n            }\n            else if (Texture.ForceSerializeBuffers || (this.url && this.url.startsWith(\"blob:\")) || this._forceSerialize) {\n                serializationObject.base64String =\n                    !this._engine || this._engine._features.supportSyncTextureRead ? GenerateBase64StringFromTexture(this) : GenerateBase64StringFromTextureAsync(this);\n            }\n        }\n        serializationObject.invertY = this._invertY;\n        serializationObject.samplingMode = this.samplingMode;\n        serializationObject._creationFlags = this._creationFlags;\n        serializationObject._useSRGBBuffer = this._useSRGBBuffer;\n        if (Texture._SerializeInternalTextureUniqueId) {\n            serializationObject.internalTextureUniqueId = this._texture?.uniqueId ?? undefined;\n        }\n        serializationObject.noMipmap = this._noMipmap;\n        this.name = savedName;\n        return serializationObject;\n    }\n    /**\n     * Get the current class name of the texture useful for serialization or dynamic coding.\n     * @returns \"Texture\"\n     */\n    getClassName() {\n        return \"Texture\";\n    }\n    /**\n     * Dispose the texture and release its associated resources.\n     */\n    dispose() {\n        super.dispose();\n        this.onLoadObservable.clear();\n        this._delayedOnLoad = null;\n        this._delayedOnError = null;\n        this._buffer = null;\n    }\n    /**\n     * Parse the JSON representation of a texture in order to recreate the texture in the given scene.\n     * @param parsedTexture Define the JSON representation of the texture\n     * @param scene Define the scene the parsed texture should be instantiated in\n     * @param rootUrl Define the root url of the parsing sequence in the case of relative dependencies\n     * @returns The parsed texture if successful\n     */\n    static Parse(parsedTexture, scene, rootUrl) {\n        if (parsedTexture.customType) {\n            const customTexture = InstantiationTools.Instantiate(parsedTexture.customType);\n            // Update Sampling Mode\n            const parsedCustomTexture = customTexture.Parse(parsedTexture, scene, rootUrl);\n            if (parsedTexture.samplingMode && parsedCustomTexture.updateSamplingMode && parsedCustomTexture._samplingMode) {\n                if (parsedCustomTexture._samplingMode !== parsedTexture.samplingMode) {\n                    parsedCustomTexture.updateSamplingMode(parsedTexture.samplingMode);\n                }\n            }\n            return parsedCustomTexture;\n        }\n        if (parsedTexture.isCube && !parsedTexture.isRenderTarget) {\n            return Texture._CubeTextureParser(parsedTexture, scene, rootUrl);\n        }\n        const hasInternalTextureUniqueId = parsedTexture.internalTextureUniqueId !== undefined;\n        if (!parsedTexture.name && !parsedTexture.isRenderTarget && !hasInternalTextureUniqueId) {\n            return null;\n        }\n        let internalTexture;\n        if (hasInternalTextureUniqueId) {\n            const cache = scene.getEngine().getLoadedTexturesCache();\n            for (const texture of cache) {\n                if (texture.uniqueId === parsedTexture.internalTextureUniqueId) {\n                    internalTexture = texture;\n                    break;\n                }\n            }\n        }\n        const onLoaded = (texture) => {\n            // Clear cache\n            if (texture && texture._texture) {\n                texture._texture._cachedWrapU = null;\n                texture._texture._cachedWrapV = null;\n                texture._texture._cachedWrapR = null;\n            }\n            // Update Sampling Mode\n            if (parsedTexture.samplingMode) {\n                const sampling = parsedTexture.samplingMode;\n                if (texture && texture.samplingMode !== sampling) {\n                    texture.updateSamplingMode(sampling);\n                }\n            }\n            // Animations\n            if (texture && parsedTexture.animations) {\n                for (let animationIndex = 0; animationIndex < parsedTexture.animations.length; animationIndex++) {\n                    const parsedAnimation = parsedTexture.animations[animationIndex];\n                    const internalClass = GetClass(\"BABYLON.Animation\");\n                    if (internalClass) {\n                        texture.animations.push(internalClass.Parse(parsedAnimation));\n                    }\n                }\n            }\n            if (hasInternalTextureUniqueId && !internalTexture) {\n                texture?._texture?._setUniqueId(parsedTexture.internalTextureUniqueId);\n            }\n        };\n        const texture = SerializationHelper.Parse(() => {\n            let generateMipMaps = true;\n            if (parsedTexture.noMipmap) {\n                generateMipMaps = false;\n            }\n            if (parsedTexture.mirrorPlane) {\n                const mirrorTexture = Texture._CreateMirror(parsedTexture.name, parsedTexture.renderTargetSize, scene, generateMipMaps);\n                mirrorTexture._waitingRenderList = parsedTexture.renderList;\n                mirrorTexture.mirrorPlane = Plane.FromArray(parsedTexture.mirrorPlane);\n                onLoaded(mirrorTexture);\n                return mirrorTexture;\n            }\n            else if (parsedTexture.isRenderTarget) {\n                let renderTargetTexture = null;\n                if (parsedTexture.isCube) {\n                    // Search for an existing reflection probe (which contains a cube render target texture)\n                    if (scene.reflectionProbes) {\n                        for (let index = 0; index < scene.reflectionProbes.length; index++) {\n                            const probe = scene.reflectionProbes[index];\n                            if (probe.name === parsedTexture.name) {\n                                return probe.cubeTexture;\n                            }\n                        }\n                    }\n                }\n                else {\n                    renderTargetTexture = Texture._CreateRenderTargetTexture(parsedTexture.name, parsedTexture.renderTargetSize, scene, generateMipMaps, parsedTexture._creationFlags ?? 0);\n                    renderTargetTexture._waitingRenderList = parsedTexture.renderList;\n                }\n                onLoaded(renderTargetTexture);\n                return renderTargetTexture;\n            }\n            else if (parsedTexture.isVideo) {\n                const texture = Texture._CreateVideoTexture(rootUrl + (parsedTexture.url || parsedTexture.name), rootUrl + (parsedTexture.src || parsedTexture.url), scene, generateMipMaps, parsedTexture.invertY, parsedTexture.samplingMode, parsedTexture.settings || {});\n                onLoaded(texture);\n                return texture;\n            }\n            else {\n                let texture;\n                if (parsedTexture.base64String && !internalTexture) {\n                    // name and url are the same to ensure caching happens from the actual base64 string\n                    texture = Texture.CreateFromBase64String(parsedTexture.base64String, parsedTexture.base64String, scene, !generateMipMaps, parsedTexture.invertY, parsedTexture.samplingMode, () => {\n                        onLoaded(texture);\n                    }, parsedTexture._creationFlags ?? 0, parsedTexture._useSRGBBuffer ?? false);\n                    // prettier name to fit with the loaded data\n                    texture.name = parsedTexture.name;\n                }\n                else {\n                    let url;\n                    if (parsedTexture.name && (parsedTexture.name.indexOf(\"://\") > 0 || parsedTexture.name.startsWith(\"data:\"))) {\n                        url = parsedTexture.name;\n                    }\n                    else {\n                        url = rootUrl + parsedTexture.name;\n                    }\n                    if (parsedTexture.url && (parsedTexture.url.startsWith(\"data:\") || Texture.UseSerializedUrlIfAny)) {\n                        url = parsedTexture.url;\n                    }\n                    const options = {\n                        noMipmap: !generateMipMaps,\n                        invertY: parsedTexture.invertY,\n                        samplingMode: parsedTexture.samplingMode,\n                        onLoad: () => {\n                            onLoaded(texture);\n                        },\n                        internalTexture,\n                    };\n                    texture = new Texture(url, scene, options);\n                }\n                return texture;\n            }\n        }, parsedTexture, scene);\n        return texture;\n    }\n    /**\n     * Creates a texture from its base 64 representation.\n     * @param data Define the base64 payload without the data: prefix\n     * @param name Define the name of the texture in the scene useful fo caching purpose for instance\n     * @param scene Define the scene the texture should belong to\n     * @param noMipmapOrOptions defines if the texture will require mip maps or not or set of all options to create the texture\n     * @param invertY define if the texture needs to be inverted on the y axis during loading\n     * @param samplingMode define the sampling mode we want for the texture while fetching from it (Texture.NEAREST_SAMPLINGMODE...)\n     * @param onLoad define a callback triggered when the texture has been loaded\n     * @param onError define a callback triggered when an error occurred during the loading session\n     * @param format define the format of the texture we are trying to load (Engine.TEXTUREFORMAT_RGBA...)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param forcedExtension defines the extension to use to pick the right loader\n     * @returns the created texture\n     */\n    static CreateFromBase64String(data, name, scene, noMipmapOrOptions, invertY, samplingMode = Texture.TRILINEAR_SAMPLINGMODE, onLoad = null, onError = null, format = 5, creationFlags, forcedExtension) {\n        return new Texture(\"data:\" + name, scene, noMipmapOrOptions, invertY, samplingMode, onLoad, onError, data, false, format, undefined, undefined, creationFlags, forcedExtension);\n    }\n    /**\n     * Creates a texture from its data: representation. (data: will be added in case only the payload has been passed in)\n     * @param name Define the name of the texture in the scene useful fo caching purpose for instance\n     * @param buffer define the buffer to load the texture from in case the texture is loaded from a buffer representation\n     * @param scene Define the scene the texture should belong to\n     * @param deleteBuffer define if the buffer we are loading the texture from should be deleted after load\n     * @param noMipmapOrOptions defines if the texture will require mip maps or not or set of all options to create the texture\n     * @param invertY define if the texture needs to be inverted on the y axis during loading\n     * @param samplingMode define the sampling mode we want for the texture while fetching from it (Texture.NEAREST_SAMPLINGMODE...)\n     * @param onLoad define a callback triggered when the texture has been loaded\n     * @param onError define a callback triggered when an error occurred during the loading session\n     * @param format define the format of the texture we are trying to load (Engine.TEXTUREFORMAT_RGBA...)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param forcedExtension defines the extension to use to pick the right loader\n     * @returns the created texture\n     */\n    static LoadFromDataString(name, buffer, scene, deleteBuffer = false, noMipmapOrOptions, invertY = true, samplingMode = Texture.TRILINEAR_SAMPLINGMODE, onLoad = null, onError = null, format = 5, creationFlags, forcedExtension) {\n        if (name.substr(0, 5) !== \"data:\") {\n            name = \"data:\" + name;\n        }\n        return new Texture(name, scene, noMipmapOrOptions, invertY, samplingMode, onLoad, onError, buffer, deleteBuffer, format, undefined, undefined, creationFlags, forcedExtension);\n    }\n}\n/**\n * Gets or sets a general boolean used to indicate that textures containing direct data (buffers) must be saved as part of the serialization process\n */\nTexture.SerializeBuffers = true;\n/**\n * Gets or sets a general boolean used to indicate that texture buffers must be saved as part of the serialization process.\n * If no buffer exists, one will be created as base64 string from the internal webgl data.\n */\nTexture.ForceSerializeBuffers = false;\n/**\n * This observable will notify when any texture had a loading error\n */\nTexture.OnTextureLoadErrorObservable = new Observable();\n/** @internal */\nTexture._SerializeInternalTextureUniqueId = false;\n/**\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nTexture._CubeTextureParser = (jsonTexture, scene, rootUrl) => {\n    throw _WarnImport(\"CubeTexture\");\n};\n/**\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nTexture._CreateMirror = (name, renderTargetSize, scene, generateMipMaps) => {\n    throw _WarnImport(\"MirrorTexture\");\n};\n/**\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nTexture._CreateRenderTargetTexture = (name, renderTargetSize, scene, generateMipMaps, creationFlags) => {\n    throw _WarnImport(\"RenderTargetTexture\");\n};\n/** nearest is mag = nearest and min = nearest and no mip */\nTexture.NEAREST_SAMPLINGMODE = 1;\n/** nearest is mag = nearest and min = nearest and mip = linear */\nTexture.NEAREST_NEAREST_MIPLINEAR = 8; // nearest is mag = nearest and min = nearest and mip = linear\n/** Bilinear is mag = linear and min = linear and no mip */\nTexture.BILINEAR_SAMPLINGMODE = 2;\n/** Bilinear is mag = linear and min = linear and mip = nearest */\nTexture.LINEAR_LINEAR_MIPNEAREST = 11; // Bilinear is mag = linear and min = linear and mip = nearest\n/** Trilinear is mag = linear and min = linear and mip = linear */\nTexture.TRILINEAR_SAMPLINGMODE = 3;\n/** Trilinear is mag = linear and min = linear and mip = linear */\nTexture.LINEAR_LINEAR_MIPLINEAR = 3; // Trilinear is mag = linear and min = linear and mip = linear\n/** mag = nearest and min = nearest and mip = nearest */\nTexture.NEAREST_NEAREST_MIPNEAREST = 4;\n/** mag = nearest and min = linear and mip = nearest */\nTexture.NEAREST_LINEAR_MIPNEAREST = 5;\n/** mag = nearest and min = linear and mip = linear */\nTexture.NEAREST_LINEAR_MIPLINEAR = 6;\n/** mag = nearest and min = linear and mip = none */\nTexture.NEAREST_LINEAR = 7;\n/** mag = nearest and min = nearest and mip = none */\nTexture.NEAREST_NEAREST = 1;\n/** mag = linear and min = nearest and mip = nearest */\nTexture.LINEAR_NEAREST_MIPNEAREST = 9;\n/** mag = linear and min = nearest and mip = linear */\nTexture.LINEAR_NEAREST_MIPLINEAR = 10;\n/** mag = linear and min = linear and mip = none */\nTexture.LINEAR_LINEAR = 2;\n/** mag = linear and min = nearest and mip = none */\nTexture.LINEAR_NEAREST = 12;\n/** Explicit coordinates mode */\nTexture.EXPLICIT_MODE = 0;\n/** Spherical coordinates mode */\nTexture.SPHERICAL_MODE = 1;\n/** Planar coordinates mode */\nTexture.PLANAR_MODE = 2;\n/** Cubic coordinates mode */\nTexture.CUBIC_MODE = 3;\n/** Projection coordinates mode */\nTexture.PROJECTION_MODE = 4;\n/** Inverse Cubic coordinates mode */\nTexture.SKYBOX_MODE = 5;\n/** Inverse Cubic coordinates mode */\nTexture.INVCUBIC_MODE = 6;\n/** Equirectangular coordinates mode */\nTexture.EQUIRECTANGULAR_MODE = 7;\n/** Equirectangular Fixed coordinates mode */\nTexture.FIXED_EQUIRECTANGULAR_MODE = 8;\n/** Equirectangular Fixed Mirrored coordinates mode */\nTexture.FIXED_EQUIRECTANGULAR_MIRRORED_MODE = 9;\n/** Texture is not repeating outside of 0..1 UVs */\nTexture.CLAMP_ADDRESSMODE = 0;\n/** Texture is repeating outside of 0..1 UVs */\nTexture.WRAP_ADDRESSMODE = 1;\n/** Texture is repeating and mirrored */\nTexture.MIRROR_ADDRESSMODE = 2;\n/**\n * Gets or sets a boolean which defines if the texture url must be build from the serialized URL instead of just using the name and loading them side by side with the scene file\n */\nTexture.UseSerializedUrlIfAny = false;\n__decorate([\n    serialize()\n], Texture.prototype, \"url\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"uOffset\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"vOffset\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"uScale\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"vScale\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"uAng\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"vAng\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"wAng\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"uRotationCenter\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"vRotationCenter\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"wRotationCenter\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"homogeneousRotationInUVTransform\", void 0);\n__decorate([\n    serialize()\n], Texture.prototype, \"isBlocking\", null);\n// References the dependencies.\nRegisterClass(\"BABYLON.Texture\", Texture);\nSerializationHelper._TextureParser = Texture.Parse;\n","/**\n * Helper class used to generate session unique ID\n */\nexport class UniqueIdGenerator {\n    /**\n     * Gets an unique (relatively to the current scene) Id\n     */\n    static get UniqueId() {\n        const result = this._UniqueIdCounter;\n        this._UniqueIdCounter++;\n        return result;\n    }\n}\n// Statics\nUniqueIdGenerator._UniqueIdCounter = 1;\n","import { PrecisionDate } from \"./precisionDate.js\";\n/**\n * This class is used to track a performance counter which is number based.\n * The user has access to many properties which give statistics of different nature.\n *\n * The implementer can track two kinds of Performance Counter: time and count.\n * For time you can optionally call fetchNewFrame() to notify the start of a new frame to monitor, then call beginMonitoring() to start and endMonitoring() to record the lapsed time. endMonitoring takes a newFrame parameter for you to specify if the monitored time should be set for a new frame or accumulated to the current frame being monitored.\n * For count you first have to call fetchNewFrame() to notify the start of a new frame to monitor, then call addCount() how many time required to increment the count value you monitor.\n */\nexport class PerfCounter {\n    /**\n     * Returns the smallest value ever\n     */\n    get min() {\n        return this._min;\n    }\n    /**\n     * Returns the biggest value ever\n     */\n    get max() {\n        return this._max;\n    }\n    /**\n     * Returns the average value since the performance counter is running\n     */\n    get average() {\n        return this._average;\n    }\n    /**\n     * Returns the average value of the last second the counter was monitored\n     */\n    get lastSecAverage() {\n        return this._lastSecAverage;\n    }\n    /**\n     * Returns the current value\n     */\n    get current() {\n        return this._current;\n    }\n    /**\n     * Gets the accumulated total\n     */\n    get total() {\n        return this._totalAccumulated;\n    }\n    /**\n     * Gets the total value count\n     */\n    get count() {\n        return this._totalValueCount;\n    }\n    /**\n     * Creates a new counter\n     */\n    constructor() {\n        this._startMonitoringTime = 0;\n        this._min = 0;\n        this._max = 0;\n        this._average = 0;\n        this._lastSecAverage = 0;\n        this._current = 0;\n        this._totalValueCount = 0;\n        this._totalAccumulated = 0;\n        this._lastSecAccumulated = 0;\n        this._lastSecTime = 0;\n        this._lastSecValueCount = 0;\n    }\n    /**\n     * Call this method to start monitoring a new frame.\n     * This scenario is typically used when you accumulate monitoring time many times for a single frame, you call this method at the start of the frame, then beginMonitoring to start recording and endMonitoring(false) to accumulated the recorded time to the PerfCounter or addCount() to accumulate a monitored count.\n     */\n    fetchNewFrame() {\n        this._totalValueCount++;\n        this._current = 0;\n        this._lastSecValueCount++;\n    }\n    /**\n     * Call this method to monitor a count of something (e.g. mesh drawn in viewport count)\n     * @param newCount the count value to add to the monitored count\n     * @param fetchResult true when it's the last time in the frame you add to the counter and you wish to update the statistics properties (min/max/average), false if you only want to update statistics.\n     */\n    addCount(newCount, fetchResult) {\n        if (!PerfCounter.Enabled) {\n            return;\n        }\n        this._current += newCount;\n        if (fetchResult) {\n            this._fetchResult();\n        }\n    }\n    /**\n     * Start monitoring this performance counter\n     */\n    beginMonitoring() {\n        if (!PerfCounter.Enabled) {\n            return;\n        }\n        this._startMonitoringTime = PrecisionDate.Now;\n    }\n    /**\n     * Compute the time lapsed since the previous beginMonitoring() call.\n     * @param newFrame true by default to fetch the result and monitor a new frame, if false the time monitored will be added to the current frame counter\n     */\n    endMonitoring(newFrame = true) {\n        if (!PerfCounter.Enabled) {\n            return;\n        }\n        if (newFrame) {\n            this.fetchNewFrame();\n        }\n        const currentTime = PrecisionDate.Now;\n        this._current = currentTime - this._startMonitoringTime;\n        if (newFrame) {\n            this._fetchResult();\n        }\n    }\n    /**\n     * Call this method to end the monitoring of a frame.\n     * This scenario is typically used when you accumulate monitoring time many times for a single frame, you call this method at the end of the frame, after beginMonitoring to start recording and endMonitoring(false) to accumulated the recorded time to the PerfCounter or addCount() to accumulate a monitored count.\n     */\n    endFrame() {\n        this._fetchResult();\n    }\n    /** @internal */\n    _fetchResult() {\n        this._totalAccumulated += this._current;\n        this._lastSecAccumulated += this._current;\n        // Min/Max update\n        this._min = Math.min(this._min, this._current);\n        this._max = Math.max(this._max, this._current);\n        this._average = this._totalAccumulated / this._totalValueCount;\n        // Reset last sec?\n        const now = PrecisionDate.Now;\n        if (now - this._lastSecTime > 1000) {\n            this._lastSecAverage = this._lastSecAccumulated / this._lastSecValueCount;\n            this._lastSecTime = now;\n            this._lastSecAccumulated = 0;\n            this._lastSecValueCount = 0;\n        }\n    }\n}\n/**\n * Gets or sets a global boolean to turn on and off all the counters\n */\nPerfCounter.Enabled = true;\n","import { PerfCounter } from \"../../Misc/perfCounter.js\";\n/**\n * Class used to define a WebGPU performance counter\n */\nexport class WebGPUPerfCounter {\n    constructor() {\n        this._gpuTimeInFrameId = -1;\n        /**\n         * The GPU time in nanoseconds spent in the last frame\n         */\n        this.counter = new PerfCounter();\n    }\n    /**\n     * @internal\n     */\n    _addDuration(currentFrameId, duration) {\n        if (currentFrameId < this._gpuTimeInFrameId) {\n            return;\n        }\n        if (this._gpuTimeInFrameId !== currentFrameId) {\n            this.counter._fetchResult();\n            this.counter.fetchNewFrame();\n            this.counter.addCount(duration, false);\n            this._gpuTimeInFrameId = currentFrameId;\n        }\n        else {\n            this.counter.addCount(duration, false);\n        }\n    }\n}\n","import { __decorate } from \"../tslib.es6.js\";\nimport { serialize } from \"../Misc/decorators.js\";\nimport { SerializationHelper } from \"../Misc/decorators.serialization.js\";\nimport { RegisterClass } from \"../Misc/typeStore.js\";\nimport { Texture } from \"../Materials/Textures/texture.js\";\nimport { UniqueIdGenerator } from \"../Misc/uniqueIdGenerator.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { TextureSampler } from \"../Materials/Textures/textureSampler.js\";\nimport { WebGPUPerfCounter } from \"../Engines/WebGPU/webgpuPerfCounter.js\";\n/**\n * The ComputeShader object lets you execute a compute shader on your GPU (if supported by the engine)\n */\nexport class ComputeShader {\n    /**\n     * The options used to create the shader\n     */\n    get options() {\n        return this._options;\n    }\n    /**\n     * The shaderPath used to create the shader\n     */\n    get shaderPath() {\n        return this._shaderPath;\n    }\n    /**\n     * Instantiates a new compute shader.\n     * @param name Defines the name of the compute shader in the scene\n     * @param engine Defines the engine the compute shader belongs to\n     * @param shaderPath Defines the route to the shader code in one of three ways:\n     *  * object: \\{ compute: \"custom\" \\}, used with ShaderStore.ShadersStoreWGSL[\"customComputeShader\"]\n     *  * object: \\{ computeElement: \"HTMLElementId\" \\}, used with shader code in script tags\n     *  * object: \\{ computeSource: \"compute shader code string\" \\}, where the string contains the shader code\n     *  * string: try first to find the code in ShaderStore.ShadersStoreWGSL[shaderPath + \"ComputeShader\"]. If not, assumes it is a file with name shaderPath.compute.fx in index.html folder.\n     * @param options Define the options used to create the shader\n     */\n    constructor(name, engine, shaderPath, options = {}) {\n        this._bindings = {};\n        this._samplers = {};\n        this._contextIsDirty = false;\n        /**\n         * When set to true, dispatch won't call isReady anymore and won't check if the underlying GPU resources should be (re)created because of a change in the inputs (texture, uniform buffer, etc.)\n         * If you know that your inputs did not change since last time dispatch was called and that isReady() returns true, set this flag to true to improve performance\n         */\n        this.fastMode = false;\n        /**\n         * Callback triggered when the shader is compiled\n         */\n        this.onCompiled = null;\n        /**\n         * Callback triggered when an error occurs\n         */\n        this.onError = null;\n        this.name = name;\n        this._engine = engine;\n        this.uniqueId = UniqueIdGenerator.UniqueId;\n        if (engine.enableGPUTimingMeasurements) {\n            this.gpuTimeInFrame = new WebGPUPerfCounter();\n        }\n        if (!this._engine.getCaps().supportComputeShaders) {\n            Logger.Error(\"This engine does not support compute shaders!\");\n            return;\n        }\n        if (!options.bindingsMapping) {\n            Logger.Error(\"You must provide the binding mappings as browsers don't support reflection for wgsl shaders yet!\");\n            return;\n        }\n        this._context = engine.createComputeContext();\n        this._shaderPath = shaderPath;\n        this._options = {\n            bindingsMapping: {},\n            defines: [],\n            ...options,\n        };\n    }\n    /**\n     * Gets the current class name of the material e.g. \"ComputeShader\"\n     * Mainly use in serialization.\n     * @returns the class name\n     */\n    getClassName() {\n        return \"ComputeShader\";\n    }\n    /**\n     * Binds a texture to the shader\n     * @param name Binding name of the texture\n     * @param texture Texture to bind\n     * @param bindSampler Bind the sampler corresponding to the texture (default: true). The sampler will be bound just before the binding index of the texture\n     */\n    setTexture(name, texture, bindSampler = true) {\n        const current = this._bindings[name];\n        this._bindings[name] = {\n            type: bindSampler ? 0 /* ComputeBindingType.Texture */ : 4 /* ComputeBindingType.TextureWithoutSampler */,\n            object: texture,\n            indexInGroupEntries: current?.indexInGroupEntries,\n        };\n        this._contextIsDirty || (this._contextIsDirty = !current || current.object !== texture || current.type !== this._bindings[name].type);\n    }\n    /**\n     * Binds a storage texture to the shader\n     * @param name Binding name of the texture\n     * @param texture Texture to bind\n     */\n    setStorageTexture(name, texture) {\n        const current = this._bindings[name];\n        this._contextIsDirty || (this._contextIsDirty = !current || current.object !== texture);\n        this._bindings[name] = {\n            type: 1 /* ComputeBindingType.StorageTexture */,\n            object: texture,\n            indexInGroupEntries: current?.indexInGroupEntries,\n        };\n    }\n    /**\n     * Binds an external texture to the shader\n     * @param name Binding name of the texture\n     * @param texture Texture to bind\n     */\n    setExternalTexture(name, texture) {\n        const current = this._bindings[name];\n        this._contextIsDirty || (this._contextIsDirty = !current || current.object !== texture);\n        this._bindings[name] = {\n            type: 6 /* ComputeBindingType.ExternalTexture */,\n            object: texture,\n            indexInGroupEntries: current?.indexInGroupEntries,\n        };\n    }\n    /**\n     * Binds a video texture to the shader (by binding the external texture attached to this video)\n     * @param name Binding name of the texture\n     * @param texture Texture to bind\n     * @returns true if the video texture was successfully bound, else false. false will be returned if the current engine does not support external textures\n     */\n    setVideoTexture(name, texture) {\n        if (texture.externalTexture) {\n            this.setExternalTexture(name, texture.externalTexture);\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Binds a uniform buffer to the shader\n     * @param name Binding name of the buffer\n     * @param buffer Buffer to bind\n     */\n    setUniformBuffer(name, buffer) {\n        const current = this._bindings[name];\n        this._contextIsDirty || (this._contextIsDirty = !current || current.object !== buffer);\n        this._bindings[name] = {\n            type: ComputeShader._BufferIsDataBuffer(buffer) ? 7 /* ComputeBindingType.DataBuffer */ : 2 /* ComputeBindingType.UniformBuffer */,\n            object: buffer,\n            indexInGroupEntries: current?.indexInGroupEntries,\n        };\n    }\n    /**\n     * Binds a storage buffer to the shader\n     * @param name Binding name of the buffer\n     * @param buffer Buffer to bind\n     */\n    setStorageBuffer(name, buffer) {\n        const current = this._bindings[name];\n        this._contextIsDirty || (this._contextIsDirty = !current || current.object !== buffer);\n        this._bindings[name] = {\n            type: ComputeShader._BufferIsDataBuffer(buffer) ? 7 /* ComputeBindingType.DataBuffer */ : 3 /* ComputeBindingType.StorageBuffer */,\n            object: buffer,\n            indexInGroupEntries: current?.indexInGroupEntries,\n        };\n    }\n    /**\n     * Binds a texture sampler to the shader\n     * @param name Binding name of the sampler\n     * @param sampler Sampler to bind\n     */\n    setTextureSampler(name, sampler) {\n        const current = this._bindings[name];\n        this._contextIsDirty || (this._contextIsDirty = !current || !sampler.compareSampler(current.object));\n        this._bindings[name] = {\n            type: 5 /* ComputeBindingType.Sampler */,\n            object: sampler,\n            indexInGroupEntries: current?.indexInGroupEntries,\n        };\n    }\n    /**\n     * Specifies that the compute shader is ready to be executed (the compute effect and all the resources are ready)\n     * @returns true if the compute shader is ready to be executed\n     */\n    isReady() {\n        let effect = this._effect;\n        for (const key in this._bindings) {\n            const binding = this._bindings[key], type = binding.type, object = binding.object;\n            switch (type) {\n                case 0 /* ComputeBindingType.Texture */:\n                case 4 /* ComputeBindingType.TextureWithoutSampler */:\n                case 1 /* ComputeBindingType.StorageTexture */: {\n                    const texture = object;\n                    if (!texture.isReady()) {\n                        return false;\n                    }\n                    break;\n                }\n                case 6 /* ComputeBindingType.ExternalTexture */: {\n                    const texture = object;\n                    if (!texture.isReady()) {\n                        return false;\n                    }\n                    break;\n                }\n            }\n        }\n        const defines = [];\n        const shaderName = this._shaderPath;\n        if (this._options.defines) {\n            for (let index = 0; index < this._options.defines.length; index++) {\n                defines.push(this._options.defines[index]);\n            }\n        }\n        const join = defines.join(\"\\n\");\n        if (this._cachedDefines !== join) {\n            this._cachedDefines = join;\n            effect = this._engine.createComputeEffect(shaderName, {\n                defines: join,\n                entryPoint: this._options.entryPoint,\n                onCompiled: this.onCompiled,\n                onError: this.onError,\n            });\n            this._effect = effect;\n        }\n        if (!effect.isReady()) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Dispatches (executes) the compute shader\n     * @param x Number of workgroups to execute on the X dimension\n     * @param y Number of workgroups to execute on the Y dimension (default: 1)\n     * @param z Number of workgroups to execute on the Z dimension (default: 1)\n     * @returns True if the dispatch could be done, else false (meaning either the compute effect or at least one of the bound resources was not ready)\n     */\n    dispatch(x, y, z) {\n        if (!this.fastMode && !this._checkContext()) {\n            return false;\n        }\n        this._engine.computeDispatch(this._effect, this._context, this._bindings, x, y, z, this._options.bindingsMapping, this.gpuTimeInFrame);\n        return true;\n    }\n    /**\n     * Dispatches (executes) the compute shader.\n     * @param buffer Buffer containing the number of workgroups to execute on the X, Y and Z dimensions\n     * @param offset Offset in the buffer where the workgroup counts are stored (default: 0)\n     * @returns True if the dispatch could be done, else false (meaning either the compute effect or at least one of the bound resources was not ready)\n     */\n    dispatchIndirect(buffer, offset = 0) {\n        if (!this.fastMode && !this._checkContext()) {\n            return false;\n        }\n        const dataBuffer = ComputeShader._BufferIsDataBuffer(buffer) ? buffer : buffer.getBuffer();\n        this._engine.computeDispatchIndirect(this._effect, this._context, this._bindings, dataBuffer, offset, this._options.bindingsMapping, this.gpuTimeInFrame);\n        return true;\n    }\n    _checkContext() {\n        if (!this.isReady()) {\n            return false;\n        }\n        // If the sampling parameters of a texture bound to the shader have changed, we must clear the compute context so that it is recreated with the updated values\n        // Also, if the actual (gpu) buffer used by a uniform buffer has changed, we must clear the compute context so that it is recreated with the updated value\n        for (const key in this._bindings) {\n            const binding = this._bindings[key];\n            if (!this._options.bindingsMapping[key]) {\n                throw new Error(\"ComputeShader ('\" + this.name + \"'): No binding mapping has been provided for the property '\" + key + \"'\");\n            }\n            switch (binding.type) {\n                case 0 /* ComputeBindingType.Texture */: {\n                    const sampler = this._samplers[key];\n                    const texture = binding.object;\n                    if (!sampler || !texture._texture || !sampler.compareSampler(texture._texture)) {\n                        this._samplers[key] = new TextureSampler().setParameters(texture.wrapU, texture.wrapV, texture.wrapR, texture.anisotropicFilteringLevel, texture._texture.samplingMode, texture._texture?._comparisonFunction);\n                        this._contextIsDirty = true;\n                    }\n                    break;\n                }\n                case 6 /* ComputeBindingType.ExternalTexture */: {\n                    // we must recreate the bind groups each time if there's an external texture, because device.importExternalTexture must be called each frame\n                    this._contextIsDirty = true;\n                    break;\n                }\n                case 2 /* ComputeBindingType.UniformBuffer */: {\n                    const ubo = binding.object;\n                    if (ubo.getBuffer() !== binding.buffer) {\n                        binding.buffer = ubo.getBuffer();\n                        this._contextIsDirty = true;\n                    }\n                    break;\n                }\n            }\n        }\n        if (this._contextIsDirty) {\n            this._contextIsDirty = false;\n            this._context.clear();\n        }\n        return true;\n    }\n    /**\n     * Waits for the compute shader to be ready and executes it\n     * @param x Number of workgroups to execute on the X dimension\n     * @param y Number of workgroups to execute on the Y dimension (default: 1)\n     * @param z Number of workgroups to execute on the Z dimension (default: 1)\n     * @param delay Delay between the retries while the shader is not ready (in milliseconds - 10 by default)\n     * @returns A promise that is resolved once the shader has been sent to the GPU. Note that it does not mean that the shader execution itself is finished!\n     */\n    dispatchWhenReady(x, y, z, delay = 10) {\n        return new Promise((resolve) => {\n            const check = () => {\n                if (!this.dispatch(x, y, z)) {\n                    setTimeout(check, delay);\n                }\n                else {\n                    resolve();\n                }\n            };\n            check();\n        });\n    }\n    /**\n     * Serializes this compute shader in a JSON representation\n     * @returns the serialized compute shader object\n     */\n    serialize() {\n        const serializationObject = SerializationHelper.Serialize(this);\n        serializationObject.options = this._options;\n        serializationObject.shaderPath = this._shaderPath;\n        serializationObject.bindings = {};\n        serializationObject.textures = {};\n        for (const key in this._bindings) {\n            const binding = this._bindings[key];\n            const object = binding.object;\n            switch (binding.type) {\n                case 0 /* ComputeBindingType.Texture */:\n                case 4 /* ComputeBindingType.TextureWithoutSampler */:\n                case 1 /* ComputeBindingType.StorageTexture */: {\n                    const serializedData = object.serialize();\n                    if (serializedData) {\n                        serializationObject.textures[key] = serializedData;\n                        serializationObject.bindings[key] = {\n                            type: binding.type,\n                        };\n                    }\n                    break;\n                }\n                case 2 /* ComputeBindingType.UniformBuffer */: {\n                    break;\n                }\n            }\n        }\n        return serializationObject;\n    }\n    /**\n     * Creates a compute shader from parsed compute shader data\n     * @param source defines the JSON representation of the compute shader\n     * @param scene defines the hosting scene\n     * @param rootUrl defines the root URL to use to load textures and relative dependencies\n     * @returns a new compute shader\n     */\n    static Parse(source, scene, rootUrl) {\n        const compute = SerializationHelper.Parse(() => new ComputeShader(source.name, scene.getEngine(), source.shaderPath, source.options), source, scene, rootUrl);\n        for (const key in source.textures) {\n            const binding = source.bindings[key];\n            const texture = Texture.Parse(source.textures[key], scene, rootUrl);\n            if (binding.type === 0 /* ComputeBindingType.Texture */) {\n                compute.setTexture(key, texture);\n            }\n            else if (binding.type === 4 /* ComputeBindingType.TextureWithoutSampler */) {\n                compute.setTexture(key, texture, false);\n            }\n            else {\n                compute.setStorageTexture(key, texture);\n            }\n        }\n        return compute;\n    }\n    static _BufferIsDataBuffer(buffer) {\n        return buffer.underlyingResource !== undefined;\n    }\n}\n__decorate([\n    serialize()\n], ComputeShader.prototype, \"name\", void 0);\n__decorate([\n    serialize()\n], ComputeShader.prototype, \"fastMode\", void 0);\nRegisterClass(\"BABYLON.ComputeShader\", ComputeShader);\n","\n/**\n * This class is a small wrapper around a native buffer that can be read and/or written\n */\nexport class StorageBuffer {\n    /**\n     * Creates a new storage buffer instance\n     * @param engine The engine the buffer will be created inside\n     * @param size The size of the buffer in bytes\n     * @param creationFlags flags to use when creating the buffer (see undefined). The BUFFER_CREATIONFLAG_STORAGE flag will be automatically added.\n     * @param label defines the label of the buffer (for debug purpose)\n     */\n    constructor(engine, size, creationFlags = 3, label) {\n        this._engine = engine;\n        this._label = label;\n        this._engine._storageBuffers.push(this);\n        this._create(size, creationFlags);\n    }\n    _create(size, creationFlags) {\n        this._bufferSize = size;\n        this._creationFlags = creationFlags;\n        this._buffer = this._engine.createStorageBuffer(size, creationFlags, this._label);\n    }\n    /** @internal */\n    _rebuild() {\n        this._create(this._bufferSize, this._creationFlags);\n    }\n    /**\n     * Gets underlying native buffer\n     * @returns underlying native buffer\n     */\n    getBuffer() {\n        return this._buffer;\n    }\n    /**\n     * Updates the storage buffer\n     * @param data the data used to update the storage buffer\n     * @param byteOffset the byte offset of the data (optional)\n     * @param byteLength the byte length of the data (optional)\n     */\n    update(data, byteOffset, byteLength) {\n        if (!this._buffer) {\n            return;\n        }\n        this._engine.updateStorageBuffer(this._buffer, data, byteOffset, byteLength);\n    }\n    /**\n     * Reads data from the storage buffer\n     * @param offset The offset in the storage buffer to start reading from (default: 0)\n     * @param size  The number of bytes to read from the storage buffer (default: capacity of the buffer)\n     * @param buffer The buffer to write the data we have read from the storage buffer to (optional)\n     * @param noDelay If true, a call to flushFramebuffer will be issued so that the data can be read back immediately. This can speed up data retrieval, at the cost of a small perf penalty (default: false).\n     * @returns If not undefined, returns the (promise) buffer (as provided by the 4th parameter) filled with the data, else it returns a (promise) Uint8Array with the data read from the storage buffer\n     */\n    read(offset, size, buffer, noDelay) {\n        return this._engine.readFromStorageBuffer(this._buffer, offset, size, buffer, noDelay);\n    }\n    /**\n     * Disposes the storage buffer\n     */\n    dispose() {\n        const storageBuffers = this._engine._storageBuffers;\n        const index = storageBuffers.indexOf(this);\n        if (index !== -1) {\n            storageBuffers[index] = storageBuffers[storageBuffers.length - 1];\n            storageBuffers.pop();\n        }\n        this._engine._releaseBuffer(this._buffer);\n        this._buffer = null;\n    }\n}\n","import { Logger } from \"./logger.js\";\nconst CloneValue = (source, destinationObject, shallowCopyValues) => {\n    if (!source) {\n        return null;\n    }\n    if (source.getClassName && source.getClassName() === \"Mesh\") {\n        return null;\n    }\n    if (source.getClassName && (source.getClassName() === \"SubMesh\" || source.getClassName() === \"PhysicsBody\")) {\n        return source.clone(destinationObject);\n    }\n    else if (source.clone) {\n        return source.clone();\n    }\n    else if (Array.isArray(source)) {\n        return source.slice();\n    }\n    else if (shallowCopyValues && typeof source === \"object\") {\n        return { ...source };\n    }\n    return null;\n};\nfunction GetAllPropertyNames(obj) {\n    const props = [];\n    do {\n        Object.getOwnPropertyNames(obj).forEach(function (prop) {\n            if (props.indexOf(prop) === -1) {\n                props.push(prop);\n            }\n        });\n    } while ((obj = Object.getPrototypeOf(obj)));\n    return props;\n}\n/**\n * Class containing a set of static utilities functions for deep copy.\n */\nexport class DeepCopier {\n    /**\n     * Tries to copy an object by duplicating every property\n     * @param source defines the source object\n     * @param destination defines the target object\n     * @param doNotCopyList defines a list of properties to avoid\n     * @param mustCopyList defines a list of properties to copy (even if they start with _)\n     * @param shallowCopyValues defines wether properties referencing objects (none cloneable) must be shallow copied (false by default)\n     * @remarks shallowCopyValues will not instantite the copied values which makes it only usable for \"JSON objects\"\n     */\n    static DeepCopy(source, destination, doNotCopyList, mustCopyList, shallowCopyValues = false) {\n        const properties = GetAllPropertyNames(source);\n        for (const prop of properties) {\n            if (prop[0] === \"_\" && (!mustCopyList || mustCopyList.indexOf(prop) === -1)) {\n                continue;\n            }\n            if (prop.endsWith(\"Observable\")) {\n                continue;\n            }\n            if (doNotCopyList && doNotCopyList.indexOf(prop) !== -1) {\n                continue;\n            }\n            const sourceValue = source[prop];\n            const typeOfSourceValue = typeof sourceValue;\n            if (typeOfSourceValue === \"function\") {\n                continue;\n            }\n            try {\n                if (typeOfSourceValue === \"object\") {\n                    if (sourceValue instanceof Uint8Array) {\n                        destination[prop] = Uint8Array.from(sourceValue);\n                    }\n                    else if (sourceValue instanceof Array) {\n                        destination[prop] = [];\n                        if (sourceValue.length > 0) {\n                            if (typeof sourceValue[0] == \"object\") {\n                                for (let index = 0; index < sourceValue.length; index++) {\n                                    const clonedValue = CloneValue(sourceValue[index], destination, shallowCopyValues);\n                                    if (destination[prop].indexOf(clonedValue) === -1) {\n                                        // Test if auto inject was not done\n                                        destination[prop].push(clonedValue);\n                                    }\n                                }\n                            }\n                            else {\n                                destination[prop] = sourceValue.slice(0);\n                            }\n                        }\n                    }\n                    else {\n                        destination[prop] = CloneValue(sourceValue, destination, shallowCopyValues);\n                    }\n                }\n                else {\n                    destination[prop] = sourceValue;\n                }\n            }\n            catch (e) {\n                // Log a warning (it could be because of a read-only property)\n                Logger.Warn(e.message);\n            }\n        }\n    }\n}\n","import { Observable } from \"./observable.js\";\nimport { GetDOMTextContent, IsNavigatorAvailable, IsWindowObjectExist } from \"./domManagement.js\";\nimport { Logger } from \"./logger.js\";\nimport { DeepCopier } from \"./deepCopier.js\";\nimport { PrecisionDate } from \"./precisionDate.js\";\nimport { _WarnImport } from \"./devTools.js\";\nimport { WebRequest } from \"./webRequest.js\";\nimport { EngineStore } from \"../Engines/engineStore.js\";\nimport { FileToolsOptions, DecodeBase64UrlToBinary, IsBase64DataUrl, LoadFile as FileToolsLoadFile, LoadImage as FileToolLoadImage, ReadFile as FileToolsReadFile, SetCorsBehavior, } from \"./fileTools.js\";\nimport { TimingTools } from \"./timingTools.js\";\nimport { InstantiationTools } from \"./instantiationTools.js\";\nimport { RandomGUID } from \"./guid.js\";\nimport { IsExponentOfTwo, Mix } from \"./tools.functions.js\";\n/**\n * Class containing a set of static utilities functions\n */\nexport class Tools {\n    /**\n     * Gets or sets the base URL to use to load assets\n     */\n    static get BaseUrl() {\n        return FileToolsOptions.BaseUrl;\n    }\n    static set BaseUrl(value) {\n        FileToolsOptions.BaseUrl = value;\n    }\n    /**\n     * Gets or sets the clean URL function to use to load assets\n     */\n    static get CleanUrl() {\n        return FileToolsOptions.CleanUrl;\n    }\n    static set CleanUrl(value) {\n        FileToolsOptions.CleanUrl = value;\n    }\n    /**\n     * This function checks whether a URL is absolute or not.\n     * It will also detect data and blob URLs\n     * @param url the url to check\n     * @returns is the url absolute or relative\n     */\n    static IsAbsoluteUrl(url) {\n        // See https://stackoverflow.com/a/38979205.\n        // URL is protocol-relative (= absolute)\n        if (url.indexOf(\"//\") === 0) {\n            return true;\n        }\n        // URL has no protocol (= relative)\n        if (url.indexOf(\"://\") === -1) {\n            return false;\n        }\n        // URL does not contain a dot, i.e. no TLD (= relative, possibly REST)\n        if (url.indexOf(\".\") === -1) {\n            return false;\n        }\n        // URL does not contain a single slash (= relative)\n        if (url.indexOf(\"/\") === -1) {\n            return false;\n        }\n        // The first colon comes after the first slash (= relative)\n        if (url.indexOf(\":\") > url.indexOf(\"/\")) {\n            return false;\n        }\n        // Protocol is defined before first dot (= absolute)\n        if (url.indexOf(\"://\") < url.indexOf(\".\")) {\n            return true;\n        }\n        if (url.indexOf(\"data:\") === 0 || url.indexOf(\"blob:\") === 0) {\n            return true;\n        }\n        // Anything else must be relative\n        return false;\n    }\n    /**\n     * Sets the base URL to use to load scripts\n     */\n    static set ScriptBaseUrl(value) {\n        FileToolsOptions.ScriptBaseUrl = value;\n    }\n    static get ScriptBaseUrl() {\n        return FileToolsOptions.ScriptBaseUrl;\n    }\n    /**\n     * Sets a preprocessing function to run on a source URL before importing it\n     * Note that this function will execute AFTER the base URL is appended to the URL\n     */\n    static set ScriptPreprocessUrl(func) {\n        FileToolsOptions.ScriptPreprocessUrl = func;\n    }\n    static get ScriptPreprocessUrl() {\n        return FileToolsOptions.ScriptPreprocessUrl;\n    }\n    /**\n     * Gets or sets the retry strategy to apply when an error happens while loading an asset\n     */\n    static get DefaultRetryStrategy() {\n        return FileToolsOptions.DefaultRetryStrategy;\n    }\n    static set DefaultRetryStrategy(strategy) {\n        FileToolsOptions.DefaultRetryStrategy = strategy;\n    }\n    /**\n     * Default behavior for cors in the application.\n     * It can be a string if the expected behavior is identical in the entire app.\n     * Or a callback to be able to set it per url or on a group of them (in case of Video source for instance)\n     */\n    static get CorsBehavior() {\n        return FileToolsOptions.CorsBehavior;\n    }\n    static set CorsBehavior(value) {\n        FileToolsOptions.CorsBehavior = value;\n    }\n    /**\n     * Gets or sets a global variable indicating if fallback texture must be used when a texture cannot be loaded\n     * @ignorenaming\n     */\n    static get UseFallbackTexture() {\n        return EngineStore.UseFallbackTexture;\n    }\n    static set UseFallbackTexture(value) {\n        EngineStore.UseFallbackTexture = value;\n    }\n    /**\n     * Use this object to register external classes like custom textures or material\n     * to allow the loaders to instantiate them\n     */\n    static get RegisteredExternalClasses() {\n        return InstantiationTools.RegisteredExternalClasses;\n    }\n    static set RegisteredExternalClasses(classes) {\n        InstantiationTools.RegisteredExternalClasses = classes;\n    }\n    /**\n     * Texture content used if a texture cannot loaded\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    static get fallbackTexture() {\n        return EngineStore.FallbackTexture;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    static set fallbackTexture(value) {\n        EngineStore.FallbackTexture = value;\n    }\n    /**\n     * Read the content of a byte array at a specified coordinates (taking in account wrapping)\n     * @param u defines the coordinate on X axis\n     * @param v defines the coordinate on Y axis\n     * @param width defines the width of the source data\n     * @param height defines the height of the source data\n     * @param pixels defines the source byte array\n     * @param color defines the output color\n     */\n    static FetchToRef(u, v, width, height, pixels, color) {\n        const wrappedU = (Math.abs(u) * width) % width | 0;\n        const wrappedV = (Math.abs(v) * height) % height | 0;\n        const position = (wrappedU + wrappedV * width) * 4;\n        color.r = pixels[position] / 255;\n        color.g = pixels[position + 1] / 255;\n        color.b = pixels[position + 2] / 255;\n        color.a = pixels[position + 3] / 255;\n    }\n    /**\n     * Interpolates between a and b via alpha\n     * @param a The lower value (returned when alpha = 0)\n     * @param b The upper value (returned when alpha = 1)\n     * @param alpha The interpolation-factor\n     * @returns The mixed value\n     */\n    static Mix(a, b, alpha) {\n        return 0;\n    }\n    /**\n     * Tries to instantiate a new object from a given class name\n     * @param className defines the class name to instantiate\n     * @returns the new object or null if the system was not able to do the instantiation\n     */\n    static Instantiate(className) {\n        return InstantiationTools.Instantiate(className);\n    }\n    /**\n     * Polyfill for setImmediate\n     * @param action defines the action to execute after the current execution block\n     */\n    static SetImmediate(action) {\n        TimingTools.SetImmediate(action);\n    }\n    /**\n     * Function indicating if a number is an exponent of 2\n     * @param value defines the value to test\n     * @returns true if the value is an exponent of 2\n     */\n    static IsExponentOfTwo(value) {\n        return true;\n    }\n    /**\n     * Returns the nearest 32-bit single precision float representation of a Number\n     * @param value A Number.  If the parameter is of a different type, it will get converted\n     * to a number or to NaN if it cannot be converted\n     * @returns number\n     */\n    static FloatRound(value) {\n        return Math.fround(value);\n    }\n    /**\n     * Extracts the filename from a path\n     * @param path defines the path to use\n     * @returns the filename\n     */\n    static GetFilename(path) {\n        const index = path.lastIndexOf(\"/\");\n        if (index < 0) {\n            return path;\n        }\n        return path.substring(index + 1);\n    }\n    /**\n     * Extracts the \"folder\" part of a path (everything before the filename).\n     * @param uri The URI to extract the info from\n     * @param returnUnchangedIfNoSlash Do not touch the URI if no slashes are present\n     * @returns The \"folder\" part of the path\n     */\n    static GetFolderPath(uri, returnUnchangedIfNoSlash = false) {\n        const index = uri.lastIndexOf(\"/\");\n        if (index < 0) {\n            if (returnUnchangedIfNoSlash) {\n                return uri;\n            }\n            return \"\";\n        }\n        return uri.substring(0, index + 1);\n    }\n    /**\n     * Convert an angle in radians to degrees\n     * @param angle defines the angle to convert\n     * @returns the angle in degrees\n     */\n    static ToDegrees(angle) {\n        return (angle * 180) / Math.PI;\n    }\n    /**\n     * Convert an angle in degrees to radians\n     * @param angle defines the angle to convert\n     * @returns the angle in radians\n     */\n    static ToRadians(angle) {\n        return (angle * Math.PI) / 180;\n    }\n    /**\n     * Smooth angle changes (kind of low-pass filter), in particular for device orientation \"shaking\"\n     * Use trigonometric functions to avoid discontinuity (0/360, -180/180)\n     * @param previousAngle defines last angle value, in degrees\n     * @param newAngle defines new angle value, in degrees\n     * @param smoothFactor defines smoothing sensitivity; min 0: no smoothing, max 1: new data ignored\n     * @returns the angle in degrees\n     */\n    static SmoothAngleChange(previousAngle, newAngle, smoothFactor = 0.9) {\n        const previousAngleRad = this.ToRadians(previousAngle);\n        const newAngleRad = this.ToRadians(newAngle);\n        return this.ToDegrees(Math.atan2((1 - smoothFactor) * Math.sin(newAngleRad) + smoothFactor * Math.sin(previousAngleRad), (1 - smoothFactor) * Math.cos(newAngleRad) + smoothFactor * Math.cos(previousAngleRad)));\n    }\n    /**\n     * Returns an array if obj is not an array\n     * @param obj defines the object to evaluate as an array\n     * @param allowsNullUndefined defines a boolean indicating if obj is allowed to be null or undefined\n     * @returns either obj directly if obj is an array or a new array containing obj\n     */\n    static MakeArray(obj, allowsNullUndefined) {\n        if (allowsNullUndefined !== true && (obj === undefined || obj == null)) {\n            return null;\n        }\n        return Array.isArray(obj) ? obj : [obj];\n    }\n    /**\n     * Gets the pointer prefix to use\n     * @param engine defines the engine we are finding the prefix for\n     * @returns \"pointer\" if touch is enabled. Else returns \"mouse\"\n     */\n    static GetPointerPrefix(engine) {\n        let eventPrefix = \"pointer\";\n        // Check if pointer events are supported\n        if (IsWindowObjectExist() && !window.PointerEvent) {\n            eventPrefix = \"mouse\";\n        }\n        // Special Fallback MacOS Safari...\n        if (engine._badDesktopOS &&\n            !engine._badOS &&\n            // And not ipad pros who claim to be macs...\n            !(document && \"ontouchend\" in document)) {\n            eventPrefix = \"mouse\";\n        }\n        return eventPrefix;\n    }\n    /**\n     * Sets the cors behavior on a dom element. This will add the required Tools.CorsBehavior to the element.\n     * @param url define the url we are trying\n     * @param element define the dom element where to configure the cors policy\n     * @param element.crossOrigin\n     */\n    static SetCorsBehavior(url, element) {\n        SetCorsBehavior(url, element);\n    }\n    /**\n     * Sets the referrerPolicy behavior on a dom element.\n     * @param referrerPolicy define the referrer policy to use\n     * @param element define the dom element where to configure the referrer policy\n     * @param element.referrerPolicy\n     */\n    static SetReferrerPolicyBehavior(referrerPolicy, element) {\n        element.referrerPolicy = referrerPolicy;\n    }\n    // External files\n    /**\n     * Gets or sets a function used to pre-process url before using them to load assets\n     */\n    static get PreprocessUrl() {\n        return FileToolsOptions.PreprocessUrl;\n    }\n    static set PreprocessUrl(processor) {\n        FileToolsOptions.PreprocessUrl = processor;\n    }\n    /**\n     * Loads an image as an HTMLImageElement.\n     * @param input url string, ArrayBuffer, or Blob to load\n     * @param onLoad callback called when the image successfully loads\n     * @param onError callback called when the image fails to load\n     * @param offlineProvider offline provider for caching\n     * @param mimeType optional mime type\n     * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\n     * @returns the HTMLImageElement of the loaded image\n     */\n    static LoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions) {\n        return FileToolLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions);\n    }\n    /**\n     * Loads a file from a url\n     * @param url url string, ArrayBuffer, or Blob to load\n     * @param onSuccess callback called when the file successfully loads\n     * @param onProgress callback called while file is loading (if the server supports this mode)\n     * @param offlineProvider defines the offline provider for caching\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @param onError callback called when the file fails to load\n     * @returns a file request object\n     */\n    static LoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n        return FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n    }\n    /**\n     * Loads a file from a url\n     * @param url the file url to load\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @returns a promise containing an ArrayBuffer corresponding to the loaded file\n     */\n    static LoadFileAsync(url, useArrayBuffer = true) {\n        return new Promise((resolve, reject) => {\n            FileToolsLoadFile(url, (data) => {\n                resolve(data);\n            }, undefined, undefined, useArrayBuffer, (request, exception) => {\n                reject(exception);\n            });\n        });\n    }\n    /**\n     * Get a script URL including preprocessing\n     * @param scriptUrl the script Url to process\n     * @param forceAbsoluteUrl force the script to be an absolute url (adding the current base url if necessary)\n     * @returns a modified URL to use\n     */\n    static GetBabylonScriptURL(scriptUrl, forceAbsoluteUrl) {\n        if (!scriptUrl) {\n            return \"\";\n        }\n        // if the base URL was set, and the script Url is an absolute path change the default path\n        if (Tools.ScriptBaseUrl && scriptUrl.startsWith(Tools._DefaultCdnUrl)) {\n            // change the default host, which is https://cdn.babylonjs.com with the one defined\n            // make sure no trailing slash is present\n            const baseUrl = Tools.ScriptBaseUrl[Tools.ScriptBaseUrl.length - 1] === \"/\" ? Tools.ScriptBaseUrl.substring(0, Tools.ScriptBaseUrl.length - 1) : Tools.ScriptBaseUrl;\n            scriptUrl = scriptUrl.replace(Tools._DefaultCdnUrl, baseUrl);\n        }\n        // run the preprocessor\n        scriptUrl = Tools.ScriptPreprocessUrl(scriptUrl);\n        if (forceAbsoluteUrl) {\n            scriptUrl = Tools.GetAbsoluteUrl(scriptUrl);\n        }\n        return scriptUrl;\n    }\n    /**\n     * This function is used internally by babylon components to load a script (identified by an url). When the url returns, the\n     * content of this file is added into a new script element, attached to the DOM (body element)\n     * @param scriptUrl defines the url of the script to load\n     * @param onSuccess defines the callback called when the script is loaded\n     * @param onError defines the callback to call if an error occurs\n     * @param scriptId defines the id of the script element\n     */\n    static LoadBabylonScript(scriptUrl, onSuccess, onError, scriptId) {\n        scriptUrl = Tools.GetBabylonScriptURL(scriptUrl);\n        Tools.LoadScript(scriptUrl, onSuccess, onError);\n    }\n    /**\n     * Load an asynchronous script (identified by an url). When the url returns, the\n     * content of this file is added into a new script element, attached to the DOM (body element)\n     * @param scriptUrl defines the url of the script to laod\n     * @returns a promise request object\n     */\n    static LoadBabylonScriptAsync(scriptUrl) {\n        scriptUrl = Tools.GetBabylonScriptURL(scriptUrl);\n        return Tools.LoadScriptAsync(scriptUrl);\n    }\n    /**\n     * This function is used internally by babylon components to load a script (identified by an url). When the url returns, the\n     * content of this file is added into a new script element, attached to the DOM (body element)\n     * @param scriptUrl defines the url of the script to load\n     * @param onSuccess defines the callback called when the script is loaded\n     * @param onError defines the callback to call if an error occurs\n     * @param scriptId defines the id of the script element\n     */\n    static LoadScript(scriptUrl, onSuccess, onError, scriptId) {\n        if (typeof importScripts === \"function\") {\n            try {\n                importScripts(scriptUrl);\n                onSuccess();\n            }\n            catch (e) {\n                onError?.(`Unable to load script '${scriptUrl}' in worker`, e);\n            }\n            return;\n        }\n        else if (!IsWindowObjectExist()) {\n            onError?.(`Cannot load script '${scriptUrl}' outside of a window or a worker`);\n            return;\n        }\n        const head = document.getElementsByTagName(\"head\")[0];\n        const script = document.createElement(\"script\");\n        script.setAttribute(\"type\", \"text/javascript\");\n        script.setAttribute(\"src\", scriptUrl);\n        if (scriptId) {\n            script.id = scriptId;\n        }\n        script.onload = () => {\n            if (onSuccess) {\n                onSuccess();\n            }\n        };\n        script.onerror = (e) => {\n            if (onError) {\n                onError(`Unable to load script '${scriptUrl}'`, e);\n            }\n        };\n        head.appendChild(script);\n    }\n    /**\n     * Load an asynchronous script (identified by an url). When the url returns, the\n     * content of this file is added into a new script element, attached to the DOM (body element)\n     * @param scriptUrl defines the url of the script to load\n     * @param scriptId defines the id of the script element\n     * @returns a promise request object\n     */\n    static LoadScriptAsync(scriptUrl, scriptId) {\n        return new Promise((resolve, reject) => {\n            this.LoadScript(scriptUrl, () => {\n                resolve();\n            }, (message, exception) => {\n                reject(exception || new Error(message));\n            }, scriptId);\n        });\n    }\n    /**\n     * Loads a file from a blob\n     * @param fileToLoad defines the blob to use\n     * @param callback defines the callback to call when data is loaded\n     * @param progressCallback defines the callback to call during loading process\n     * @returns a file request object\n     */\n    static ReadFileAsDataURL(fileToLoad, callback, progressCallback) {\n        const reader = new FileReader();\n        const request = {\n            onCompleteObservable: new Observable(),\n            abort: () => reader.abort(),\n        };\n        reader.onloadend = () => {\n            request.onCompleteObservable.notifyObservers(request);\n        };\n        reader.onload = (e) => {\n            //target doesn't have result from ts 1.3\n            callback(e.target[\"result\"]);\n        };\n        reader.onprogress = progressCallback;\n        reader.readAsDataURL(fileToLoad);\n        return request;\n    }\n    /**\n     * Reads a file from a File object\n     * @param file defines the file to load\n     * @param onSuccess defines the callback to call when data is loaded\n     * @param onProgress defines the callback to call during loading process\n     * @param useArrayBuffer defines a boolean indicating that data must be returned as an ArrayBuffer\n     * @param onError defines the callback to call when an error occurs\n     * @returns a file request object\n     */\n    static ReadFile(file, onSuccess, onProgress, useArrayBuffer, onError) {\n        return FileToolsReadFile(file, onSuccess, onProgress, useArrayBuffer, onError);\n    }\n    /**\n     * Creates a data url from a given string content\n     * @param content defines the content to convert\n     * @returns the new data url link\n     */\n    static FileAsURL(content) {\n        const fileBlob = new Blob([content]);\n        const url = window.URL;\n        const link = url.createObjectURL(fileBlob);\n        return link;\n    }\n    /**\n     * Format the given number to a specific decimal format\n     * @param value defines the number to format\n     * @param decimals defines the number of decimals to use\n     * @returns the formatted string\n     */\n    static Format(value, decimals = 2) {\n        return value.toFixed(decimals);\n    }\n    /**\n     * Tries to copy an object by duplicating every property\n     * @param source defines the source object\n     * @param destination defines the target object\n     * @param doNotCopyList defines a list of properties to avoid\n     * @param mustCopyList defines a list of properties to copy (even if they start with _)\n     */\n    static DeepCopy(source, destination, doNotCopyList, mustCopyList) {\n        DeepCopier.DeepCopy(source, destination, doNotCopyList, mustCopyList);\n    }\n    /**\n     * Gets a boolean indicating if the given object has no own property\n     * @param obj defines the object to test\n     * @returns true if object has no own property\n     */\n    static IsEmpty(obj) {\n        for (const i in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Function used to register events at window level\n     * @param windowElement defines the Window object to use\n     * @param events defines the events to register\n     */\n    static RegisterTopRootEvents(windowElement, events) {\n        for (let index = 0; index < events.length; index++) {\n            const event = events[index];\n            windowElement.addEventListener(event.name, event.handler, false);\n            try {\n                if (window.parent) {\n                    window.parent.addEventListener(event.name, event.handler, false);\n                }\n            }\n            catch (e) {\n                // Silently fails...\n            }\n        }\n    }\n    /**\n     * Function used to unregister events from window level\n     * @param windowElement defines the Window object to use\n     * @param events defines the events to unregister\n     */\n    static UnregisterTopRootEvents(windowElement, events) {\n        for (let index = 0; index < events.length; index++) {\n            const event = events[index];\n            windowElement.removeEventListener(event.name, event.handler);\n            try {\n                if (windowElement.parent) {\n                    windowElement.parent.removeEventListener(event.name, event.handler);\n                }\n            }\n            catch (e) {\n                // Silently fails...\n            }\n        }\n    }\n    /**\n     * Dumps the current bound framebuffer\n     * @param width defines the rendering width\n     * @param height defines the rendering height\n     * @param engine defines the hosting engine\n     * @param successCallback defines the callback triggered once the data are available\n     * @param mimeType defines the mime type of the result\n     * @param fileName defines the filename to download. If present, the result will automatically be downloaded\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     * @returns a void promise\n     */\n    static async DumpFramebuffer(width, height, engine, successCallback, mimeType = \"image/png\", fileName, quality) {\n        throw _WarnImport(\"DumpTools\");\n    }\n    /**\n     * Dumps an array buffer\n     * @param width defines the rendering width\n     * @param height defines the rendering height\n     * @param data the data array\n     * @param successCallback defines the callback triggered once the data are available\n     * @param mimeType defines the mime type of the result\n     * @param fileName defines the filename to download. If present, the result will automatically be downloaded\n     * @param invertY true to invert the picture in the Y dimension\n     * @param toArrayBuffer true to convert the data to an ArrayBuffer (encoded as `mimeType`) instead of a base64 string\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     */\n    static DumpData(width, height, data, successCallback, mimeType = \"image/png\", fileName, invertY = false, toArrayBuffer = false, quality) {\n        throw _WarnImport(\"DumpTools\");\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Dumps an array buffer\n     * @param width defines the rendering width\n     * @param height defines the rendering height\n     * @param data the data array\n     * @param mimeType defines the mime type of the result\n     * @param fileName defines the filename to download. If present, the result will automatically be downloaded\n     * @param invertY true to invert the picture in the Y dimension\n     * @param toArrayBuffer true to convert the data to an ArrayBuffer (encoded as `mimeType`) instead of a base64 string\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     * @returns a promise that resolve to the final data\n     */\n    static DumpDataAsync(width, height, data, mimeType = \"image/png\", fileName, invertY = false, toArrayBuffer = false, quality) {\n        throw _WarnImport(\"DumpTools\");\n    }\n    static _IsOffScreenCanvas(canvas) {\n        return canvas.convertToBlob !== undefined;\n    }\n    /**\n     * Converts the canvas data to blob.\n     * This acts as a polyfill for browsers not supporting the to blob function.\n     * @param canvas Defines the canvas to extract the data from (can be an offscreen canvas)\n     * @param successCallback Defines the callback triggered once the data are available\n     * @param mimeType Defines the mime type of the result\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     */\n    static ToBlob(canvas, successCallback, mimeType = \"image/png\", quality) {\n        // We need HTMLCanvasElement.toBlob for HD screenshots\n        if (!Tools._IsOffScreenCanvas(canvas) && !canvas.toBlob) {\n            //  low performance polyfill based on toDataURL (https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob)\n            canvas.toBlob = function (callback, type, quality) {\n                setTimeout(() => {\n                    const binStr = atob(this.toDataURL(type, quality).split(\",\")[1]), len = binStr.length, arr = new Uint8Array(len);\n                    for (let i = 0; i < len; i++) {\n                        arr[i] = binStr.charCodeAt(i);\n                    }\n                    callback(new Blob([arr]));\n                });\n            };\n        }\n        if (Tools._IsOffScreenCanvas(canvas)) {\n            canvas\n                .convertToBlob({\n                type: mimeType,\n                quality,\n            })\n                .then((blob) => successCallback(blob));\n        }\n        else {\n            canvas.toBlob(function (blob) {\n                successCallback(blob);\n            }, mimeType, quality);\n        }\n    }\n    /**\n     * Download a Blob object\n     * @param blob the Blob object\n     * @param fileName the file name to download\n     */\n    static DownloadBlob(blob, fileName) {\n        //Creating a link if the browser have the download attribute on the a tag, to automatically start download generated image.\n        if (\"download\" in document.createElement(\"a\")) {\n            if (!fileName) {\n                const date = new Date();\n                const stringDate = (date.getFullYear() + \"-\" + (date.getMonth() + 1)).slice(2) + \"-\" + date.getDate() + \"_\" + date.getHours() + \"-\" + (\"0\" + date.getMinutes()).slice(-2);\n                fileName = \"screenshot_\" + stringDate + \".png\";\n            }\n            Tools.Download(blob, fileName);\n        }\n        else {\n            if (blob && typeof URL !== \"undefined\") {\n                const url = URL.createObjectURL(blob);\n                const newWindow = window.open(\"\");\n                if (!newWindow) {\n                    return;\n                }\n                const img = newWindow.document.createElement(\"img\");\n                img.onload = function () {\n                    // no longer need to read the blob so it's revoked\n                    URL.revokeObjectURL(url);\n                };\n                img.src = url;\n                newWindow.document.body.appendChild(img);\n            }\n        }\n    }\n    /**\n     * Encodes the canvas data to base 64, or automatically downloads the result if `fileName` is defined.\n     * @param canvas The canvas to get the data from, which can be an offscreen canvas.\n     * @param successCallback The callback which is triggered once the data is available. If `fileName` is defined, the callback will be invoked after the download occurs, and the `data` argument will be an empty string.\n     * @param mimeType The mime type of the result.\n     * @param fileName The name of the file to download. If defined, the result will automatically be downloaded. If not defined, and `successCallback` is also not defined, the result will automatically be downloaded with an auto-generated file name.\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     */\n    static EncodeScreenshotCanvasData(canvas, successCallback, mimeType = \"image/png\", fileName, quality) {\n        if (typeof fileName === \"string\" || !successCallback) {\n            this.ToBlob(canvas, function (blob) {\n                if (blob) {\n                    Tools.DownloadBlob(blob, fileName);\n                }\n                if (successCallback) {\n                    successCallback(\"\");\n                }\n            }, mimeType, quality);\n        }\n        else if (successCallback) {\n            if (Tools._IsOffScreenCanvas(canvas)) {\n                canvas\n                    .convertToBlob({\n                    type: mimeType,\n                    quality,\n                })\n                    .then((blob) => {\n                    const reader = new FileReader();\n                    reader.readAsDataURL(blob);\n                    reader.onloadend = () => {\n                        const base64data = reader.result;\n                        successCallback(base64data);\n                    };\n                });\n                return;\n            }\n            const base64Image = canvas.toDataURL(mimeType, quality);\n            successCallback(base64Image);\n        }\n    }\n    /**\n     * Downloads a blob in the browser\n     * @param blob defines the blob to download\n     * @param fileName defines the name of the downloaded file\n     */\n    static Download(blob, fileName) {\n        if (typeof URL === \"undefined\") {\n            return;\n        }\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        document.body.appendChild(a);\n        a.style.display = \"none\";\n        a.href = url;\n        a.download = fileName;\n        a.addEventListener(\"click\", () => {\n            if (a.parentElement) {\n                a.parentElement.removeChild(a);\n            }\n        });\n        a.click();\n        window.URL.revokeObjectURL(url);\n    }\n    /**\n     * Will return the right value of the noPreventDefault variable\n     * Needed to keep backwards compatibility to the old API.\n     *\n     * @param args arguments passed to the attachControl function\n     * @returns the correct value for noPreventDefault\n     */\n    static BackCompatCameraNoPreventDefault(args) {\n        // is it used correctly?\n        if (typeof args[0] === \"boolean\") {\n            return args[0];\n        }\n        else if (typeof args[1] === \"boolean\") {\n            return args[1];\n        }\n        return false;\n    }\n    /**\n     * Captures a screenshot of the current rendering\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/renderToPNG\n     * @param engine defines the rendering engine\n     * @param camera defines the source camera\n     * @param size This parameter can be set to a single number or to an object with the\n     * following (optional) properties: precision, width, height. If a single number is passed,\n     * it will be used for both width and height. If an object is passed, the screenshot size\n     * will be derived from the parameters. The precision property is a multiplier allowing\n     * rendering at a higher or lower resolution\n     * @param successCallback defines the callback receives a single parameter which contains the\n     * screenshot as a string of base64-encoded characters. This string can be assigned to the\n     * src parameter of an <img> to display it\n     * @param mimeType defines the MIME type of the screenshot image (default: image/png).\n     * Check your browser for supported MIME types\n     * @param forceDownload force the system to download the image even if a successCallback is provided\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static CreateScreenshot(engine, camera, size, successCallback, mimeType = \"image/png\", forceDownload = false, quality) {\n        throw _WarnImport(\"ScreenshotTools\");\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Captures a screenshot of the current rendering\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/renderToPNG\n     * @param engine defines the rendering engine\n     * @param camera defines the source camera\n     * @param size This parameter can be set to a single number or to an object with the\n     * following (optional) properties: precision, width, height. If a single number is passed,\n     * it will be used for both width and height. If an object is passed, the screenshot size\n     * will be derived from the parameters. The precision property is a multiplier allowing\n     * rendering at a higher or lower resolution\n     * @param mimeType defines the MIME type of the screenshot image (default: image/png).\n     * Check your browser for supported MIME types\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     * @returns screenshot as a string of base64-encoded characters. This string can be assigned\n     * to the src parameter of an <img> to display it\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static CreateScreenshotAsync(engine, camera, size, mimeType = \"image/png\", quality) {\n        throw _WarnImport(\"ScreenshotTools\");\n    }\n    /**\n     * Generates an image screenshot from the specified camera.\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/renderToPNG\n     * @param engine The engine to use for rendering\n     * @param camera The camera to use for rendering\n     * @param size This parameter can be set to a single number or to an object with the\n     * following (optional) properties: precision, width, height. If a single number is passed,\n     * it will be used for both width and height. If an object is passed, the screenshot size\n     * will be derived from the parameters. The precision property is a multiplier allowing\n     * rendering at a higher or lower resolution\n     * @param successCallback The callback receives a single parameter which contains the\n     * screenshot as a string of base64-encoded characters. This string can be assigned to the\n     * src parameter of an <img> to display it\n     * @param mimeType The MIME type of the screenshot image (default: image/png).\n     * Check your browser for supported MIME types\n     * @param samples Texture samples (default: 1)\n     * @param antialiasing Whether antialiasing should be turned on or not (default: false)\n     * @param fileName A name for for the downloaded file.\n     * @param renderSprites Whether the sprites should be rendered or not (default: false)\n     * @param enableStencilBuffer Whether the stencil buffer should be enabled or not (default: false)\n     * @param useLayerMask if the camera's layer mask should be used to filter what should be rendered (default: true)\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static CreateScreenshotUsingRenderTarget(engine, camera, size, successCallback, mimeType = \"image/png\", samples = 1, antialiasing = false, fileName, renderSprites = false, enableStencilBuffer = false, useLayerMask = true, quality) {\n        throw _WarnImport(\"ScreenshotTools\");\n    }\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * Generates an image screenshot from the specified camera.\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/renderToPNG\n     * @param engine The engine to use for rendering\n     * @param camera The camera to use for rendering\n     * @param size This parameter can be set to a single number or to an object with the\n     * following (optional) properties: precision, width, height. If a single number is passed,\n     * it will be used for both width and height. If an object is passed, the screenshot size\n     * will be derived from the parameters. The precision property is a multiplier allowing\n     * rendering at a higher or lower resolution\n     * @param mimeType The MIME type of the screenshot image (default: image/png).\n     * Check your browser for supported MIME types\n     * @param samples Texture samples (default: 1)\n     * @param antialiasing Whether antialiasing should be turned on or not (default: false)\n     * @param fileName A name for for the downloaded file.\n     * @returns screenshot as a string of base64-encoded characters. This string can be assigned\n     * @param renderSprites Whether the sprites should be rendered or not (default: false)\n     * @param enableStencilBuffer Whether the stencil buffer should be enabled or not (default: false)\n     * @param useLayerMask if the camera's layer mask should be used to filter what should be rendered (default: true)\n     * @param quality The quality of the image if lossy mimeType is used (e.g. image/jpeg, image/webp). See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob | HTMLCanvasElement.toBlob()}'s `quality` parameter.\n     * to the src parameter of an <img> to display it\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static CreateScreenshotUsingRenderTargetAsync(engine, camera, size, mimeType = \"image/png\", samples = 1, antialiasing = false, fileName, renderSprites = false, enableStencilBuffer = false, useLayerMask = true, quality) {\n        throw _WarnImport(\"ScreenshotTools\");\n    }\n    /**\n     * Implementation from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#answer-2117523\n     * Be aware Math.random() could cause collisions, but:\n     * \"All but 6 of the 128 bits of the ID are randomly generated, which means that for any two ids, there's a 1 in 2^^122 (or 5.3x10^^36) chance they'll collide\"\n     * @returns a pseudo random id\n     */\n    static RandomId() {\n        return RandomGUID();\n    }\n    /**\n     * Test if the given uri is a base64 string\n     * @deprecated Please use FileTools.IsBase64DataUrl instead.\n     * @param uri The uri to test\n     * @returns True if the uri is a base64 string or false otherwise\n     */\n    static IsBase64(uri) {\n        return IsBase64DataUrl(uri);\n    }\n    /**\n     * Decode the given base64 uri.\n     * @deprecated Please use FileTools.DecodeBase64UrlToBinary instead.\n     * @param uri The uri to decode\n     * @returns The decoded base64 data.\n     */\n    static DecodeBase64(uri) {\n        return DecodeBase64UrlToBinary(uri);\n    }\n    /**\n     * Gets a value indicating the number of loading errors\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    static get errorsCount() {\n        return Logger.errorsCount;\n    }\n    /**\n     * Log a message to the console\n     * @param message defines the message to log\n     */\n    static Log(message) {\n        Logger.Log(message);\n    }\n    /**\n     * Write a warning message to the console\n     * @param message defines the message to log\n     */\n    static Warn(message) {\n        Logger.Warn(message);\n    }\n    /**\n     * Write an error message to the console\n     * @param message defines the message to log\n     */\n    static Error(message) {\n        Logger.Error(message);\n    }\n    /**\n     * Gets current log cache (list of logs)\n     */\n    static get LogCache() {\n        return Logger.LogCache;\n    }\n    /**\n     * Clears the log cache\n     */\n    static ClearLogCache() {\n        Logger.ClearLogCache();\n    }\n    /**\n     * Sets the current log level (MessageLogLevel / WarningLogLevel / ErrorLogLevel)\n     */\n    static set LogLevels(level) {\n        Logger.LogLevels = level;\n    }\n    /**\n     * Sets the current performance log level\n     */\n    static set PerformanceLogLevel(level) {\n        if ((level & Tools.PerformanceUserMarkLogLevel) === Tools.PerformanceUserMarkLogLevel) {\n            Tools.StartPerformanceCounter = Tools._StartUserMark;\n            Tools.EndPerformanceCounter = Tools._EndUserMark;\n            return;\n        }\n        if ((level & Tools.PerformanceConsoleLogLevel) === Tools.PerformanceConsoleLogLevel) {\n            Tools.StartPerformanceCounter = Tools._StartPerformanceConsole;\n            Tools.EndPerformanceCounter = Tools._EndPerformanceConsole;\n            return;\n        }\n        Tools.StartPerformanceCounter = Tools._StartPerformanceCounterDisabled;\n        Tools.EndPerformanceCounter = Tools._EndPerformanceCounterDisabled;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static _StartPerformanceCounterDisabled(counterName, condition) { }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static _EndPerformanceCounterDisabled(counterName, condition) { }\n    static _StartUserMark(counterName, condition = true) {\n        if (!Tools._Performance) {\n            if (!IsWindowObjectExist()) {\n                return;\n            }\n            Tools._Performance = window.performance;\n        }\n        if (!condition || !Tools._Performance.mark) {\n            return;\n        }\n        Tools._Performance.mark(counterName + \"-Begin\");\n    }\n    static _EndUserMark(counterName, condition = true) {\n        if (!condition || !Tools._Performance.mark) {\n            return;\n        }\n        Tools._Performance.mark(counterName + \"-End\");\n        Tools._Performance.measure(counterName, counterName + \"-Begin\", counterName + \"-End\");\n    }\n    static _StartPerformanceConsole(counterName, condition = true) {\n        if (!condition) {\n            return;\n        }\n        Tools._StartUserMark(counterName, condition);\n        if (console.time) {\n            console.time(counterName);\n        }\n    }\n    static _EndPerformanceConsole(counterName, condition = true) {\n        if (!condition) {\n            return;\n        }\n        Tools._EndUserMark(counterName, condition);\n        console.timeEnd(counterName);\n    }\n    /**\n     * Gets either window.performance.now() if supported or Date.now() else\n     */\n    static get Now() {\n        return PrecisionDate.Now;\n    }\n    /**\n     * This method will return the name of the class used to create the instance of the given object.\n     * It will works only on Javascript basic data types (number, string, ...) and instance of class declared with the @className decorator.\n     * @param object the object to get the class name from\n     * @param isType defines if the object is actually a type\n     * @returns the name of the class, will be \"object\" for a custom data type not using the @className decorator\n     */\n    static GetClassName(object, isType = false) {\n        let name = null;\n        if (!isType && object.getClassName) {\n            name = object.getClassName();\n        }\n        else {\n            if (object instanceof Object) {\n                const classObj = isType ? object : Object.getPrototypeOf(object);\n                name = classObj.constructor[\"__bjsclassName__\"];\n            }\n            if (!name) {\n                name = typeof object;\n            }\n        }\n        return name;\n    }\n    /**\n     * Gets the first element of an array satisfying a given predicate\n     * @param array defines the array to browse\n     * @param predicate defines the predicate to use\n     * @returns null if not found or the element\n     */\n    static First(array, predicate) {\n        for (const el of array) {\n            if (predicate(el)) {\n                return el;\n            }\n        }\n        return null;\n    }\n    /**\n     * This method will return the name of the full name of the class, including its owning module (if any).\n     * It will works only on Javascript basic data types (number, string, ...) and instance of class declared with the @className decorator or implementing a method getClassName():string (in which case the module won't be specified).\n     * @param object the object to get the class name from\n     * @param isType defines if the object is actually a type\n     * @returns a string that can have two forms: \"moduleName.className\" if module was specified when the class' Name was registered or \"className\" if there was not module specified.\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    static getFullClassName(object, isType = false) {\n        let className = null;\n        let moduleName = null;\n        if (!isType && object.getClassName) {\n            className = object.getClassName();\n        }\n        else {\n            if (object instanceof Object) {\n                const classObj = isType ? object : Object.getPrototypeOf(object);\n                className = classObj.constructor[\"__bjsclassName__\"];\n                moduleName = classObj.constructor[\"__bjsmoduleName__\"];\n            }\n            if (!className) {\n                className = typeof object;\n            }\n        }\n        if (!className) {\n            return null;\n        }\n        return (moduleName != null ? moduleName + \".\" : \"\") + className;\n    }\n    /**\n     * Returns a promise that resolves after the given amount of time.\n     * @param delay Number of milliseconds to delay\n     * @returns Promise that resolves after the given amount of time\n     */\n    static DelayAsync(delay) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve();\n            }, delay);\n        });\n    }\n    /**\n     * Utility function to detect if the current user agent is Safari\n     * @returns whether or not the current user agent is safari\n     */\n    static IsSafari() {\n        if (!IsNavigatorAvailable()) {\n            return false;\n        }\n        return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    }\n}\n/**\n * Enable/Disable Custom HTTP Request Headers globally.\n * default = false\n * @see CustomRequestHeaders\n */\nTools.UseCustomRequestHeaders = false;\n/**\n * Custom HTTP Request Headers to be sent with XMLHttpRequests\n * i.e. when loading files, where the server/service expects an Authorization header\n */\nTools.CustomRequestHeaders = WebRequest.CustomRequestHeaders;\n/**\n * Extracts text content from a DOM element hierarchy\n * Back Compat only, please use GetDOMTextContent instead.\n */\nTools.GetDOMTextContent = GetDOMTextContent;\n/**\n * @internal\n */\nTools._DefaultCdnUrl = \"https://cdn.babylonjs.com\";\n// eslint-disable-next-line jsdoc/require-returns-check, jsdoc/require-param\n/**\n * @returns the absolute URL of a given (relative) url\n */\nTools.GetAbsoluteUrl = typeof document === \"object\"\n    ? (url) => {\n        const a = document.createElement(\"a\");\n        a.href = url;\n        return a.href;\n    }\n    : typeof URL === \"function\" && typeof location === \"object\"\n        ? (url) => new URL(url, location.origin).href\n        : () => {\n            throw new Error(\"Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.\");\n        };\n// Logs\n/**\n * No log\n */\nTools.NoneLogLevel = Logger.NoneLogLevel;\n/**\n * Only message logs\n */\nTools.MessageLogLevel = Logger.MessageLogLevel;\n/**\n * Only warning logs\n */\nTools.WarningLogLevel = Logger.WarningLogLevel;\n/**\n * Only error logs\n */\nTools.ErrorLogLevel = Logger.ErrorLogLevel;\n/**\n * All logs\n */\nTools.AllLogLevel = Logger.AllLogLevel;\n/**\n * Checks if the window object exists\n * Back Compat only, please use IsWindowObjectExist instead.\n */\nTools.IsWindowObjectExist = IsWindowObjectExist;\n// Performances\n/**\n * No performance log\n */\nTools.PerformanceNoneLogLevel = 0;\n/**\n * Use user marks to log performance\n */\nTools.PerformanceUserMarkLogLevel = 1;\n/**\n * Log performance to the console\n */\nTools.PerformanceConsoleLogLevel = 2;\n/**\n * Starts a performance counter\n */\nTools.StartPerformanceCounter = Tools._StartPerformanceCounterDisabled;\n/**\n * Ends a specific performance counter\n */\nTools.EndPerformanceCounter = Tools._EndPerformanceCounterDisabled;\n/**\n * Use this className as a decorator on a given class definition to add it a name and optionally its module.\n * You can then use the Tools.getClassName(obj) on an instance to retrieve its class name.\n * This method is the only way to get it done in all cases, even if the .js file declaring the class is minified\n * @param name The name of the class, case should be preserved\n * @param module The name of the Module hosting the class, optional, but strongly recommended to specify if possible. Case should be preserved.\n * @returns a decorator function to apply on the class definition.\n */\nexport function className(name, module) {\n    return (target) => {\n        target[\"__bjsclassName__\"] = name;\n        target[\"__bjsmoduleName__\"] = module != null ? module : null;\n    };\n}\n/**\n * An implementation of a loop for asynchronous functions.\n */\nexport class AsyncLoop {\n    /**\n     * Constructor.\n     * @param iterations the number of iterations.\n     * @param func the function to run each iteration\n     * @param successCallback the callback that will be called upon successful execution\n     * @param offset starting offset.\n     */\n    constructor(\n    /**\n     * Defines the number of iterations for the loop\n     */\n    iterations, func, successCallback, offset = 0) {\n        this.iterations = iterations;\n        this.index = offset - 1;\n        this._done = false;\n        this._fn = func;\n        this._successCallback = successCallback;\n    }\n    /**\n     * Execute the next iteration. Must be called after the last iteration was finished.\n     */\n    executeNext() {\n        if (!this._done) {\n            if (this.index + 1 < this.iterations) {\n                ++this.index;\n                this._fn(this);\n            }\n            else {\n                this.breakLoop();\n            }\n        }\n    }\n    /**\n     * Break the loop and run the success callback.\n     */\n    breakLoop() {\n        this._done = true;\n        this._successCallback();\n    }\n    /**\n     * Create and run an async loop.\n     * @param iterations the number of iterations.\n     * @param fn the function to run each iteration\n     * @param successCallback the callback that will be called upon successful execution\n     * @param offset starting offset.\n     * @returns the created async loop object\n     */\n    static Run(iterations, fn, successCallback, offset = 0) {\n        const loop = new AsyncLoop(iterations, fn, successCallback, offset);\n        loop.executeNext();\n        return loop;\n    }\n    /**\n     * A for-loop that will run a given number of iterations synchronous and the rest async.\n     * @param iterations total number of iterations\n     * @param syncedIterations number of synchronous iterations in each async iteration.\n     * @param fn the function to call each iteration.\n     * @param callback a success call back that will be called when iterating stops.\n     * @param breakFunction a break condition (optional)\n     * @param timeout timeout settings for the setTimeout function. default - 0.\n     * @returns the created async loop object\n     */\n    static SyncAsyncForLoop(iterations, syncedIterations, fn, callback, breakFunction, timeout = 0) {\n        return AsyncLoop.Run(Math.ceil(iterations / syncedIterations), (loop) => {\n            if (breakFunction && breakFunction()) {\n                loop.breakLoop();\n            }\n            else {\n                setTimeout(() => {\n                    for (let i = 0; i < syncedIterations; ++i) {\n                        const iteration = loop.index * syncedIterations + i;\n                        if (iteration >= iterations) {\n                            break;\n                        }\n                        fn(iteration);\n                        if (breakFunction && breakFunction()) {\n                            loop.breakLoop();\n                            break;\n                        }\n                    }\n                    loop.executeNext();\n                }, timeout);\n            }\n        }, callback);\n    }\n}\nTools.Mix = Mix;\nTools.IsExponentOfTwo = IsExponentOfTwo;\n// Will only be define if Tools is imported freeing up some space when only engine is required\nEngineStore.FallbackTexture =\n    \"data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z\";\n","import { ThinEngine } from \"../../Engines/thinEngine.js\";\nimport { WebGLDataBuffer } from \"../../Meshes/WebGL/webGLDataBuffer.js\";\nThinEngine.prototype.createUniformBuffer = function (elements, _label) {\n    const ubo = this._gl.createBuffer();\n    if (!ubo) {\n        throw new Error(\"Unable to create uniform buffer\");\n    }\n    const result = new WebGLDataBuffer(ubo);\n    this.bindUniformBuffer(result);\n    if (elements instanceof Float32Array) {\n        this._gl.bufferData(this._gl.UNIFORM_BUFFER, elements, this._gl.STATIC_DRAW);\n    }\n    else {\n        this._gl.bufferData(this._gl.UNIFORM_BUFFER, new Float32Array(elements), this._gl.STATIC_DRAW);\n    }\n    this.bindUniformBuffer(null);\n    result.references = 1;\n    return result;\n};\nThinEngine.prototype.createDynamicUniformBuffer = function (elements, _label) {\n    const ubo = this._gl.createBuffer();\n    if (!ubo) {\n        throw new Error(\"Unable to create dynamic uniform buffer\");\n    }\n    const result = new WebGLDataBuffer(ubo);\n    this.bindUniformBuffer(result);\n    if (elements instanceof Float32Array) {\n        this._gl.bufferData(this._gl.UNIFORM_BUFFER, elements, this._gl.DYNAMIC_DRAW);\n    }\n    else {\n        this._gl.bufferData(this._gl.UNIFORM_BUFFER, new Float32Array(elements), this._gl.DYNAMIC_DRAW);\n    }\n    this.bindUniformBuffer(null);\n    result.references = 1;\n    return result;\n};\nThinEngine.prototype.updateUniformBuffer = function (uniformBuffer, elements, offset, count) {\n    this.bindUniformBuffer(uniformBuffer);\n    if (offset === undefined) {\n        offset = 0;\n    }\n    if (count === undefined) {\n        if (elements instanceof Float32Array) {\n            this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, offset, elements);\n        }\n        else {\n            this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, offset, new Float32Array(elements));\n        }\n    }\n    else {\n        if (elements instanceof Float32Array) {\n            this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, 0, elements.subarray(offset, offset + count));\n        }\n        else {\n            this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, 0, new Float32Array(elements).subarray(offset, offset + count));\n        }\n    }\n    this.bindUniformBuffer(null);\n};\nThinEngine.prototype.bindUniformBuffer = function (buffer) {\n    this._gl.bindBuffer(this._gl.UNIFORM_BUFFER, buffer ? buffer.underlyingResource : null);\n};\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nThinEngine.prototype.bindUniformBufferBase = function (buffer, location, name) {\n    this._gl.bindBufferBase(this._gl.UNIFORM_BUFFER, location, buffer ? buffer.underlyingResource : null);\n};\nThinEngine.prototype.bindUniformBlock = function (pipelineContext, blockName, index) {\n    const program = pipelineContext.program;\n    const uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n    if (uniformLocation !== 0xffffffff) {\n        this._gl.uniformBlockBinding(program, uniformLocation, index);\n    }\n};\n","import { Logger } from \"../Misc/logger.js\";\nimport { Tools } from \"../Misc/tools.js\";\nimport \"../Engines/Extensions/engine.uniformBuffer.js\";\n/**\n * Uniform buffer objects.\n *\n * Handles blocks of uniform on the GPU.\n *\n * If WebGL 2 is not available, this class falls back on traditional setUniformXXX calls.\n *\n * For more information, please refer to :\n * https://www.khronos.org/opengl/wiki/Uniform_Buffer_Object\n */\nexport class UniformBuffer {\n    /**\n     * Instantiates a new Uniform buffer objects.\n     *\n     * Handles blocks of uniform on the GPU.\n     *\n     * If WebGL 2 is not available, this class falls back on traditional setUniformXXX calls.\n     *\n     * For more information, please refer to :\n     * @see https://www.khronos.org/opengl/wiki/Uniform_Buffer_Object\n     * @param engine Define the engine the buffer is associated with\n     * @param data Define the data contained in the buffer\n     * @param dynamic Define if the buffer is updatable\n     * @param name to assign to the buffer (debugging purpose)\n     * @param forceNoUniformBuffer define that this object must not rely on UBO objects\n     */\n    constructor(engine, data, dynamic, name, forceNoUniformBuffer = false) {\n        // Matrix cache\n        this._valueCache = {};\n        this._engine = engine;\n        this._noUBO = !engine.supportsUniformBuffers || forceNoUniformBuffer;\n        this._dynamic = dynamic;\n        this._name = name ?? \"no-name\";\n        this._data = data || [];\n        this._uniformLocations = {};\n        this._uniformSizes = {};\n        this._uniformArraySizes = {};\n        this._uniformLocationPointer = 0;\n        this._needSync = false;\n        if (this._engine._features.trackUbosInFrame) {\n            this._buffers = [];\n            this._bufferIndex = -1;\n            this._createBufferOnWrite = false;\n            this._currentFrameId = 0;\n        }\n        if (this._noUBO) {\n            this.updateMatrix3x3 = this._updateMatrix3x3ForEffect;\n            this.updateMatrix2x2 = this._updateMatrix2x2ForEffect;\n            this.updateFloat = this._updateFloatForEffect;\n            this.updateFloat2 = this._updateFloat2ForEffect;\n            this.updateFloat3 = this._updateFloat3ForEffect;\n            this.updateFloat4 = this._updateFloat4ForEffect;\n            this.updateFloatArray = this._updateFloatArrayForEffect;\n            this.updateArray = this._updateArrayForEffect;\n            this.updateIntArray = this._updateIntArrayForEffect;\n            this.updateUIntArray = this._updateUIntArrayForEffect;\n            this.updateMatrix = this._updateMatrixForEffect;\n            this.updateMatrices = this._updateMatricesForEffect;\n            this.updateVector3 = this._updateVector3ForEffect;\n            this.updateVector4 = this._updateVector4ForEffect;\n            this.updateColor3 = this._updateColor3ForEffect;\n            this.updateColor4 = this._updateColor4ForEffect;\n            this.updateDirectColor4 = this._updateDirectColor4ForEffect;\n            this.updateInt = this._updateIntForEffect;\n            this.updateInt2 = this._updateInt2ForEffect;\n            this.updateInt3 = this._updateInt3ForEffect;\n            this.updateInt4 = this._updateInt4ForEffect;\n            this.updateUInt = this._updateUIntForEffect;\n            this.updateUInt2 = this._updateUInt2ForEffect;\n            this.updateUInt3 = this._updateUInt3ForEffect;\n            this.updateUInt4 = this._updateUInt4ForEffect;\n        }\n        else {\n            this._engine._uniformBuffers.push(this);\n            this.updateMatrix3x3 = this._updateMatrix3x3ForUniform;\n            this.updateMatrix2x2 = this._updateMatrix2x2ForUniform;\n            this.updateFloat = this._updateFloatForUniform;\n            this.updateFloat2 = this._updateFloat2ForUniform;\n            this.updateFloat3 = this._updateFloat3ForUniform;\n            this.updateFloat4 = this._updateFloat4ForUniform;\n            this.updateFloatArray = this._updateFloatArrayForUniform;\n            this.updateArray = this._updateArrayForUniform;\n            this.updateIntArray = this._updateIntArrayForUniform;\n            this.updateUIntArray = this._updateUIntArrayForUniform;\n            this.updateMatrix = this._updateMatrixForUniform;\n            this.updateMatrices = this._updateMatricesForUniform;\n            this.updateVector3 = this._updateVector3ForUniform;\n            this.updateVector4 = this._updateVector4ForUniform;\n            this.updateColor3 = this._updateColor3ForUniform;\n            this.updateColor4 = this._updateColor4ForUniform;\n            this.updateDirectColor4 = this._updateDirectColor4ForUniform;\n            this.updateInt = this._updateIntForUniform;\n            this.updateInt2 = this._updateInt2ForUniform;\n            this.updateInt3 = this._updateInt3ForUniform;\n            this.updateInt4 = this._updateInt4ForUniform;\n            this.updateUInt = this._updateUIntForUniform;\n            this.updateUInt2 = this._updateUInt2ForUniform;\n            this.updateUInt3 = this._updateUInt3ForUniform;\n            this.updateUInt4 = this._updateUInt4ForUniform;\n        }\n    }\n    /**\n     * Indicates if the buffer is using the WebGL2 UBO implementation,\n     * or just falling back on setUniformXXX calls.\n     */\n    get useUbo() {\n        return !this._noUBO;\n    }\n    /**\n     * Indicates if the WebGL underlying uniform buffer is in sync\n     * with the javascript cache data.\n     */\n    get isSync() {\n        return !this._needSync;\n    }\n    /**\n     * Indicates if the WebGL underlying uniform buffer is dynamic.\n     * Also, a dynamic UniformBuffer will disable cache verification and always\n     * update the underlying WebGL uniform buffer to the GPU.\n     * @returns if Dynamic, otherwise false\n     */\n    isDynamic() {\n        return this._dynamic !== undefined;\n    }\n    /**\n     * The data cache on JS side.\n     * @returns the underlying data as a float array\n     */\n    getData() {\n        return this._bufferData;\n    }\n    /**\n     * The underlying WebGL Uniform buffer.\n     * @returns the webgl buffer\n     */\n    getBuffer() {\n        return this._buffer;\n    }\n    /**\n     * std140 layout specifies how to align data within an UBO structure.\n     * See https://khronos.org/registry/OpenGL/specs/gl/glspec45.core.pdf#page=159\n     * for specs.\n     * @param size\n     */\n    _fillAlignment(size) {\n        // This code has been simplified because we only use floats, vectors of 1, 2, 3, 4 components\n        // and 4x4 matrices\n        // TODO : change if other types are used\n        let alignment;\n        if (size <= 2) {\n            alignment = size;\n        }\n        else {\n            alignment = 4;\n        }\n        if (this._uniformLocationPointer % alignment !== 0) {\n            const oldPointer = this._uniformLocationPointer;\n            this._uniformLocationPointer += alignment - (this._uniformLocationPointer % alignment);\n            const diff = this._uniformLocationPointer - oldPointer;\n            for (let i = 0; i < diff; i++) {\n                this._data.push(0);\n            }\n        }\n    }\n    /**\n     * Adds an uniform in the buffer.\n     * Warning : the subsequents calls of this function must be in the same order as declared in the shader\n     * for the layout to be correct ! The addUniform function only handles types like float, vec2, vec3, vec4, mat4,\n     * meaning size=1,2,3,4 or 16. It does not handle struct types.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param size Data size, or data directly.\n     * @param arraySize The number of elements in the array, 0 if not an array.\n     */\n    addUniform(name, size, arraySize = 0) {\n        if (this._noUBO) {\n            return;\n        }\n        if (this._uniformLocations[name] !== undefined) {\n            // Already existing uniform\n            return;\n        }\n        // This function must be called in the order of the shader layout !\n        // size can be the size of the uniform, or data directly\n        let data;\n        // std140 FTW...\n        if (arraySize > 0) {\n            if (size instanceof Array) {\n                // eslint-disable-next-line no-throw-literal\n                throw \"addUniform should not be use with Array in UBO: \" + name;\n            }\n            this._fillAlignment(4);\n            this._uniformArraySizes[name] = { strideSize: size, arraySize };\n            if (size == 16) {\n                size = size * arraySize;\n            }\n            else {\n                const perElementPadding = 4 - size;\n                const totalPadding = perElementPadding * arraySize;\n                size = size * arraySize + totalPadding;\n            }\n            data = [];\n            // Fill with zeros\n            for (let i = 0; i < size; i++) {\n                data.push(0);\n            }\n        }\n        else {\n            if (size instanceof Array) {\n                data = size;\n                size = data.length;\n            }\n            else {\n                size = size;\n                data = [];\n                // Fill with zeros\n                for (let i = 0; i < size; i++) {\n                    data.push(0);\n                }\n            }\n            this._fillAlignment(size);\n        }\n        this._uniformSizes[name] = size;\n        this._uniformLocations[name] = this._uniformLocationPointer;\n        this._uniformLocationPointer += size;\n        for (let i = 0; i < size; i++) {\n            this._data.push(data[i]);\n        }\n        this._needSync = true;\n    }\n    /**\n     * Adds a Matrix 4x4 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param mat A 4x4 matrix.\n     */\n    addMatrix(name, mat) {\n        this.addUniform(name, Array.prototype.slice.call(mat.asArray()));\n    }\n    /**\n     * Adds a vec2 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param x Define the x component value of the vec2\n     * @param y Define the y component value of the vec2\n     */\n    addFloat2(name, x, y) {\n        const temp = [x, y];\n        this.addUniform(name, temp);\n    }\n    /**\n     * Adds a vec3 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param x Define the x component value of the vec3\n     * @param y Define the y component value of the vec3\n     * @param z Define the z component value of the vec3\n     */\n    addFloat3(name, x, y, z) {\n        const temp = [x, y, z];\n        this.addUniform(name, temp);\n    }\n    /**\n     * Adds a vec3 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param color Define the vec3 from a Color\n     */\n    addColor3(name, color) {\n        const temp = [color.r, color.g, color.b];\n        this.addUniform(name, temp);\n    }\n    /**\n     * Adds a vec4 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param color Define the rgb components from a Color\n     * @param alpha Define the a component of the vec4\n     */\n    addColor4(name, color, alpha) {\n        const temp = [color.r, color.g, color.b, alpha];\n        this.addUniform(name, temp);\n    }\n    /**\n     * Adds a vec3 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     * @param vector Define the vec3 components from a Vector\n     */\n    addVector3(name, vector) {\n        const temp = [vector.x, vector.y, vector.z];\n        this.addUniform(name, temp);\n    }\n    /**\n     * Adds a Matrix 3x3 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     */\n    addMatrix3x3(name) {\n        this.addUniform(name, 12);\n    }\n    /**\n     * Adds a Matrix 2x2 to the uniform buffer.\n     * @param name Name of the uniform, as used in the uniform block in the shader.\n     */\n    addMatrix2x2(name) {\n        this.addUniform(name, 8);\n    }\n    /**\n     * Effectively creates the WebGL Uniform Buffer, once layout is completed with `addUniform`.\n     */\n    create() {\n        if (this._noUBO) {\n            return;\n        }\n        if (this._buffer) {\n            return; // nothing to do\n        }\n        // See spec, alignment must be filled as a vec4\n        this._fillAlignment(4);\n        this._bufferData = new Float32Array(this._data);\n        this._rebuild();\n        this._needSync = true;\n    }\n    // The result of this method is used for debugging purpose, as part of the buffer name\n    // It is meant to more easily know what this buffer is about when debugging\n    // Some buffers can have a lot of uniforms (several dozens), so the method only returns the first 10 of them\n    // (should be enough to understand what the buffer is for)\n    _getNames() {\n        const names = [];\n        let i = 0;\n        for (const name in this._uniformLocations) {\n            names.push(name);\n            if (++i === 10) {\n                break;\n            }\n        }\n        return names.join(\",\");\n    }\n    /** @internal */\n    _rebuild() {\n        if (this._noUBO || !this._bufferData) {\n            return;\n        }\n        if (this._dynamic) {\n            this._buffer = this._engine.createDynamicUniformBuffer(this._bufferData, this._name + \"_UniformList:\" + this._getNames());\n        }\n        else {\n            this._buffer = this._engine.createUniformBuffer(this._bufferData, this._name + \"_UniformList:\" + this._getNames());\n        }\n        if (this._engine._features.trackUbosInFrame) {\n            this._buffers.push([this._buffer, this._engine._features.checkUbosContentBeforeUpload ? this._bufferData.slice() : undefined]);\n            this._bufferIndex = this._buffers.length - 1;\n            this._createBufferOnWrite = false;\n        }\n    }\n    /** @internal */\n    _rebuildAfterContextLost() {\n        if (this._engine._features.trackUbosInFrame) {\n            this._buffers = [];\n            this._currentFrameId = 0;\n        }\n        this._rebuild();\n    }\n    /** @internal */\n    get _numBuffers() {\n        return this._buffers.length;\n    }\n    /** @internal */\n    get _indexBuffer() {\n        return this._bufferIndex;\n    }\n    /** Gets the name of this buffer */\n    get name() {\n        return this._name;\n    }\n    /** Gets the current effect */\n    get currentEffect() {\n        return this._currentEffect;\n    }\n    _buffersEqual(buf1, buf2) {\n        for (let i = 0; i < buf1.length; ++i) {\n            if (buf1[i] !== buf2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    _copyBuffer(src, dst) {\n        for (let i = 0; i < src.length; ++i) {\n            dst[i] = src[i];\n        }\n    }\n    /**\n     * Updates the WebGL Uniform Buffer on the GPU.\n     * If the `dynamic` flag is set to true, no cache comparison is done.\n     * Otherwise, the buffer will be updated only if the cache differs.\n     */\n    update() {\n        if (this._noUBO) {\n            return;\n        }\n        this.bindUniformBuffer();\n        if (!this._buffer) {\n            this.create();\n            return;\n        }\n        if (!this._dynamic && !this._needSync) {\n            this._createBufferOnWrite = this._engine._features.trackUbosInFrame;\n            return;\n        }\n        if (this._buffers && this._buffers.length > 1 && this._buffers[this._bufferIndex][1]) {\n            if (this._buffersEqual(this._bufferData, this._buffers[this._bufferIndex][1])) {\n                this._needSync = false;\n                this._createBufferOnWrite = this._engine._features.trackUbosInFrame;\n                return;\n            }\n            else {\n                this._copyBuffer(this._bufferData, this._buffers[this._bufferIndex][1]);\n            }\n        }\n        this._engine.updateUniformBuffer(this._buffer, this._bufferData);\n        if (this._engine._features._collectUbosUpdatedInFrame) {\n            if (!UniformBuffer._UpdatedUbosInFrame[this._name]) {\n                UniformBuffer._UpdatedUbosInFrame[this._name] = 0;\n            }\n            UniformBuffer._UpdatedUbosInFrame[this._name]++;\n        }\n        this._needSync = false;\n        this._createBufferOnWrite = this._engine._features.trackUbosInFrame;\n    }\n    _createNewBuffer() {\n        if (this._bufferIndex + 1 < this._buffers.length) {\n            this._bufferIndex++;\n            this._buffer = this._buffers[this._bufferIndex][0];\n            this._createBufferOnWrite = false;\n            this._needSync = true;\n        }\n        else {\n            this._rebuild();\n        }\n    }\n    _checkNewFrame() {\n        if (this._engine._features.trackUbosInFrame && this._currentFrameId !== this._engine.frameId) {\n            this._currentFrameId = this._engine.frameId;\n            this._createBufferOnWrite = false;\n            if (this._buffers && this._buffers.length > 0) {\n                this._needSync = this._bufferIndex !== 0;\n                this._bufferIndex = 0;\n                this._buffer = this._buffers[this._bufferIndex][0];\n            }\n            else {\n                this._bufferIndex = -1;\n            }\n        }\n    }\n    /**\n     * Updates the value of an uniform. The `update` method must be called afterwards to make it effective in the GPU.\n     * @param uniformName Define the name of the uniform, as used in the uniform block in the shader.\n     * @param data Define the flattened data\n     * @param size Define the size of the data.\n     */\n    updateUniform(uniformName, data, size) {\n        this._checkNewFrame();\n        let location = this._uniformLocations[uniformName];\n        if (location === undefined) {\n            if (this._buffer) {\n                // Cannot add an uniform if the buffer is already created\n                Logger.Error(\"Cannot add an uniform after UBO has been created. uniformName=\" + uniformName);\n                return;\n            }\n            this.addUniform(uniformName, size);\n            location = this._uniformLocations[uniformName];\n        }\n        if (!this._buffer) {\n            this.create();\n        }\n        if (!this._dynamic) {\n            // Cache for static uniform buffers\n            let changed = false;\n            for (let i = 0; i < size; i++) {\n                // We are checking the matrix cache before calling updateUniform so we do not need to check it here\n                // Hence the test for size === 16 to simply commit the matrix values\n                if ((size === 16 && !this._engine._features.uniformBufferHardCheckMatrix) || this._bufferData[location + i] !== Math.fround(data[i])) {\n                    changed = true;\n                    if (this._createBufferOnWrite) {\n                        this._createNewBuffer();\n                    }\n                    this._bufferData[location + i] = data[i];\n                }\n            }\n            this._needSync = this._needSync || changed;\n        }\n        else {\n            // No cache for dynamic\n            for (let i = 0; i < size; i++) {\n                this._bufferData[location + i] = data[i];\n            }\n        }\n    }\n    /**\n     * Updates the value of an uniform. The `update` method must be called afterwards to make it effective in the GPU.\n     * @param uniformName Define the name of the uniform, as used in the uniform block in the shader.\n     * @param data Define the flattened data\n     * @param size Define the size of the data.\n     */\n    updateUniformArray(uniformName, data, size) {\n        this._checkNewFrame();\n        const location = this._uniformLocations[uniformName];\n        if (location === undefined) {\n            Logger.Error(\"Cannot add an uniform Array dynamically. Please, add it using addUniform and make sure that uniform buffers are supported by the current engine.\");\n            return;\n        }\n        if (!this._buffer) {\n            this.create();\n        }\n        const arraySizes = this._uniformArraySizes[uniformName];\n        if (!this._dynamic) {\n            // Cache for static uniform buffers\n            let changed = false;\n            let countToFour = 0;\n            let baseStride = 0;\n            for (let i = 0; i < size; i++) {\n                if (this._bufferData[location + baseStride * 4 + countToFour] !== Tools.FloatRound(data[i])) {\n                    changed = true;\n                    if (this._createBufferOnWrite) {\n                        this._createNewBuffer();\n                    }\n                    this._bufferData[location + baseStride * 4 + countToFour] = data[i];\n                }\n                countToFour++;\n                if (countToFour === arraySizes.strideSize) {\n                    for (; countToFour < 4; countToFour++) {\n                        this._bufferData[location + baseStride * 4 + countToFour] = 0;\n                    }\n                    countToFour = 0;\n                    baseStride++;\n                }\n            }\n            this._needSync = this._needSync || changed;\n        }\n        else {\n            // No cache for dynamic\n            for (let i = 0; i < size; i++) {\n                this._bufferData[location + i] = data[i];\n            }\n        }\n    }\n    _cacheMatrix(name, matrix) {\n        this._checkNewFrame();\n        const cache = this._valueCache[name];\n        const flag = matrix.updateFlag;\n        if (cache !== undefined && cache === flag) {\n            return false;\n        }\n        this._valueCache[name] = flag;\n        return true;\n    }\n    // Update methods\n    _updateMatrix3x3ForUniform(name, matrix) {\n        // To match std140, matrix must be realigned\n        for (let i = 0; i < 3; i++) {\n            UniformBuffer._TempBuffer[i * 4] = matrix[i * 3];\n            UniformBuffer._TempBuffer[i * 4 + 1] = matrix[i * 3 + 1];\n            UniformBuffer._TempBuffer[i * 4 + 2] = matrix[i * 3 + 2];\n            UniformBuffer._TempBuffer[i * 4 + 3] = 0.0;\n        }\n        this.updateUniform(name, UniformBuffer._TempBuffer, 12);\n    }\n    _updateMatrix3x3ForEffect(name, matrix) {\n        this._currentEffect.setMatrix3x3(name, matrix);\n    }\n    _updateMatrix2x2ForEffect(name, matrix) {\n        this._currentEffect.setMatrix2x2(name, matrix);\n    }\n    _updateMatrix2x2ForUniform(name, matrix) {\n        // To match std140, matrix must be realigned\n        for (let i = 0; i < 2; i++) {\n            UniformBuffer._TempBuffer[i * 4] = matrix[i * 2];\n            UniformBuffer._TempBuffer[i * 4 + 1] = matrix[i * 2 + 1];\n            UniformBuffer._TempBuffer[i * 4 + 2] = 0.0;\n            UniformBuffer._TempBuffer[i * 4 + 3] = 0.0;\n        }\n        this.updateUniform(name, UniformBuffer._TempBuffer, 8);\n    }\n    _updateFloatForEffect(name, x) {\n        this._currentEffect.setFloat(name, x);\n    }\n    _updateFloatForUniform(name, x) {\n        UniformBuffer._TempBuffer[0] = x;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 1);\n    }\n    _updateFloat2ForEffect(name, x, y, suffix = \"\") {\n        this._currentEffect.setFloat2(name + suffix, x, y);\n    }\n    _updateFloat2ForUniform(name, x, y) {\n        UniformBuffer._TempBuffer[0] = x;\n        UniformBuffer._TempBuffer[1] = y;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 2);\n    }\n    _updateFloat3ForEffect(name, x, y, z, suffix = \"\") {\n        this._currentEffect.setFloat3(name + suffix, x, y, z);\n    }\n    _updateFloat3ForUniform(name, x, y, z) {\n        UniformBuffer._TempBuffer[0] = x;\n        UniformBuffer._TempBuffer[1] = y;\n        UniformBuffer._TempBuffer[2] = z;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n    }\n    _updateFloat4ForEffect(name, x, y, z, w, suffix = \"\") {\n        this._currentEffect.setFloat4(name + suffix, x, y, z, w);\n    }\n    _updateFloat4ForUniform(name, x, y, z, w) {\n        UniformBuffer._TempBuffer[0] = x;\n        UniformBuffer._TempBuffer[1] = y;\n        UniformBuffer._TempBuffer[2] = z;\n        UniformBuffer._TempBuffer[3] = w;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n    }\n    _updateFloatArrayForEffect(name, array) {\n        this._currentEffect.setFloatArray(name, array);\n    }\n    _updateFloatArrayForUniform(name, array) {\n        this.updateUniformArray(name, array, array.length);\n    }\n    _updateArrayForEffect(name, array) {\n        this._currentEffect.setArray(name, array);\n    }\n    _updateArrayForUniform(name, array) {\n        this.updateUniformArray(name, array, array.length);\n    }\n    _updateIntArrayForEffect(name, array) {\n        this._currentEffect.setIntArray(name, array);\n    }\n    _updateIntArrayForUniform(name, array) {\n        UniformBuffer._TempBufferInt32View.set(array);\n        this.updateUniformArray(name, UniformBuffer._TempBuffer, array.length);\n    }\n    _updateUIntArrayForEffect(name, array) {\n        this._currentEffect.setUIntArray(name, array);\n    }\n    _updateUIntArrayForUniform(name, array) {\n        UniformBuffer._TempBufferUInt32View.set(array);\n        this.updateUniformArray(name, UniformBuffer._TempBuffer, array.length);\n    }\n    _updateMatrixForEffect(name, mat) {\n        this._currentEffect.setMatrix(name, mat);\n    }\n    _updateMatrixForUniform(name, mat) {\n        if (this._cacheMatrix(name, mat)) {\n            this.updateUniform(name, mat.asArray(), 16);\n        }\n    }\n    _updateMatricesForEffect(name, mat) {\n        this._currentEffect.setMatrices(name, mat);\n    }\n    _updateMatricesForUniform(name, mat) {\n        this.updateUniform(name, mat, mat.length);\n    }\n    _updateVector3ForEffect(name, vector) {\n        this._currentEffect.setVector3(name, vector);\n    }\n    _updateVector3ForUniform(name, vector) {\n        UniformBuffer._TempBuffer[0] = vector.x;\n        UniformBuffer._TempBuffer[1] = vector.y;\n        UniformBuffer._TempBuffer[2] = vector.z;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n    }\n    _updateVector4ForEffect(name, vector) {\n        this._currentEffect.setVector4(name, vector);\n    }\n    _updateVector4ForUniform(name, vector) {\n        UniformBuffer._TempBuffer[0] = vector.x;\n        UniformBuffer._TempBuffer[1] = vector.y;\n        UniformBuffer._TempBuffer[2] = vector.z;\n        UniformBuffer._TempBuffer[3] = vector.w;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n    }\n    _updateColor3ForEffect(name, color, suffix = \"\") {\n        this._currentEffect.setColor3(name + suffix, color);\n    }\n    _updateColor3ForUniform(name, color) {\n        UniformBuffer._TempBuffer[0] = color.r;\n        UniformBuffer._TempBuffer[1] = color.g;\n        UniformBuffer._TempBuffer[2] = color.b;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n    }\n    _updateColor4ForEffect(name, color, alpha, suffix = \"\") {\n        this._currentEffect.setColor4(name + suffix, color, alpha);\n    }\n    _updateDirectColor4ForEffect(name, color, suffix = \"\") {\n        this._currentEffect.setDirectColor4(name + suffix, color);\n    }\n    _updateColor4ForUniform(name, color, alpha) {\n        UniformBuffer._TempBuffer[0] = color.r;\n        UniformBuffer._TempBuffer[1] = color.g;\n        UniformBuffer._TempBuffer[2] = color.b;\n        UniformBuffer._TempBuffer[3] = alpha;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n    }\n    _updateDirectColor4ForUniform(name, color) {\n        UniformBuffer._TempBuffer[0] = color.r;\n        UniformBuffer._TempBuffer[1] = color.g;\n        UniformBuffer._TempBuffer[2] = color.b;\n        UniformBuffer._TempBuffer[3] = color.a;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n    }\n    _updateIntForEffect(name, x, suffix = \"\") {\n        this._currentEffect.setInt(name + suffix, x);\n    }\n    _updateIntForUniform(name, x) {\n        UniformBuffer._TempBufferInt32View[0] = x;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 1);\n    }\n    _updateInt2ForEffect(name, x, y, suffix = \"\") {\n        this._currentEffect.setInt2(name + suffix, x, y);\n    }\n    _updateInt2ForUniform(name, x, y) {\n        UniformBuffer._TempBufferInt32View[0] = x;\n        UniformBuffer._TempBufferInt32View[1] = y;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 2);\n    }\n    _updateInt3ForEffect(name, x, y, z, suffix = \"\") {\n        this._currentEffect.setInt3(name + suffix, x, y, z);\n    }\n    _updateInt3ForUniform(name, x, y, z) {\n        UniformBuffer._TempBufferInt32View[0] = x;\n        UniformBuffer._TempBufferInt32View[1] = y;\n        UniformBuffer._TempBufferInt32View[2] = z;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n    }\n    _updateInt4ForEffect(name, x, y, z, w, suffix = \"\") {\n        this._currentEffect.setInt4(name + suffix, x, y, z, w);\n    }\n    _updateInt4ForUniform(name, x, y, z, w) {\n        UniformBuffer._TempBufferInt32View[0] = x;\n        UniformBuffer._TempBufferInt32View[1] = y;\n        UniformBuffer._TempBufferInt32View[2] = z;\n        UniformBuffer._TempBufferInt32View[3] = w;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n    }\n    _updateUIntForEffect(name, x, suffix = \"\") {\n        this._currentEffect.setUInt(name + suffix, x);\n    }\n    _updateUIntForUniform(name, x) {\n        UniformBuffer._TempBufferUInt32View[0] = x;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 1);\n    }\n    _updateUInt2ForEffect(name, x, y, suffix = \"\") {\n        this._currentEffect.setUInt2(name + suffix, x, y);\n    }\n    _updateUInt2ForUniform(name, x, y) {\n        UniformBuffer._TempBufferUInt32View[0] = x;\n        UniformBuffer._TempBufferUInt32View[1] = y;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 2);\n    }\n    _updateUInt3ForEffect(name, x, y, z, suffix = \"\") {\n        this._currentEffect.setUInt3(name + suffix, x, y, z);\n    }\n    _updateUInt3ForUniform(name, x, y, z) {\n        UniformBuffer._TempBufferUInt32View[0] = x;\n        UniformBuffer._TempBufferUInt32View[1] = y;\n        UniformBuffer._TempBufferUInt32View[2] = z;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n    }\n    _updateUInt4ForEffect(name, x, y, z, w, suffix = \"\") {\n        this._currentEffect.setUInt4(name + suffix, x, y, z, w);\n    }\n    _updateUInt4ForUniform(name, x, y, z, w) {\n        UniformBuffer._TempBufferUInt32View[0] = x;\n        UniformBuffer._TempBufferUInt32View[1] = y;\n        UniformBuffer._TempBufferUInt32View[2] = z;\n        UniformBuffer._TempBufferUInt32View[3] = w;\n        this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n    }\n    /**\n     * Sets a sampler uniform on the effect.\n     * @param name Define the name of the sampler.\n     * @param texture Define the texture to set in the sampler\n     */\n    setTexture(name, texture) {\n        this._currentEffect.setTexture(name, texture);\n    }\n    /**\n     * Sets a sampler uniform on the effect.\n     * @param name Define the name of the sampler.\n     * @param texture Define the (internal) texture to set in the sampler\n     */\n    bindTexture(name, texture) {\n        this._currentEffect._bindTexture(name, texture);\n    }\n    /**\n     * Directly updates the value of the uniform in the cache AND on the GPU.\n     * @param uniformName Define the name of the uniform, as used in the uniform block in the shader.\n     * @param data Define the flattened data\n     */\n    updateUniformDirectly(uniformName, data) {\n        this.updateUniform(uniformName, data, data.length);\n        this.update();\n    }\n    /**\n     * Associates an effect to this uniform buffer\n     * @param effect Define the effect to associate the buffer to\n     * @param name Name of the uniform block in the shader.\n     */\n    bindToEffect(effect, name) {\n        this._currentEffect = effect;\n        this._currentEffectName = name;\n    }\n    /**\n     * Binds the current (GPU) buffer to the effect\n     */\n    bindUniformBuffer() {\n        if (!this._noUBO && this._buffer && this._currentEffect) {\n            this._currentEffect.bindUniformBuffer(this._buffer, this._currentEffectName);\n        }\n    }\n    /**\n     * Dissociates the current effect from this uniform buffer\n     */\n    unbindEffect() {\n        this._currentEffect = undefined;\n        this._currentEffectName = undefined;\n    }\n    /**\n     * Sets the current state of the class (_bufferIndex, _buffer) to point to the data buffer passed in parameter if this buffer is one of the buffers handled by the class (meaning if it can be found in the _buffers array)\n     * This method is meant to be able to update a buffer at any time: just call setDataBuffer to set the class in the right state, call some updateXXX methods and then call udpate() => that will update the GPU buffer on the graphic card\n     * @param dataBuffer buffer to look for\n     * @returns true if the buffer has been found and the class internal state points to it, else false\n     */\n    setDataBuffer(dataBuffer) {\n        if (!this._buffers) {\n            return this._buffer === dataBuffer;\n        }\n        for (let b = 0; b < this._buffers.length; ++b) {\n            const buffer = this._buffers[b];\n            if (buffer[0] === dataBuffer) {\n                this._bufferIndex = b;\n                this._buffer = dataBuffer;\n                this._createBufferOnWrite = false;\n                this._currentEffect = undefined;\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Disposes the uniform buffer.\n     */\n    dispose() {\n        if (this._noUBO) {\n            return;\n        }\n        const uniformBuffers = this._engine._uniformBuffers;\n        const index = uniformBuffers.indexOf(this);\n        if (index !== -1) {\n            uniformBuffers[index] = uniformBuffers[uniformBuffers.length - 1];\n            uniformBuffers.pop();\n        }\n        if (this._engine._features.trackUbosInFrame && this._buffers) {\n            for (let i = 0; i < this._buffers.length; ++i) {\n                const buffer = this._buffers[i][0];\n                this._engine._releaseBuffer(buffer);\n            }\n        }\n        else if (this._buffer && this._engine._releaseBuffer(this._buffer)) {\n            this._buffer = null;\n        }\n    }\n}\n/** @internal */\nUniformBuffer._UpdatedUbosInFrame = {};\n// Pool for avoiding memory leaks\nUniformBuffer._MAX_UNIFORM_SIZE = 256;\nUniformBuffer._TempBuffer = new Float32Array(UniformBuffer._MAX_UNIFORM_SIZE);\nUniformBuffer._TempBufferInt32View = new Int32Array(UniformBuffer._TempBuffer.buffer);\nUniformBuffer._TempBufferUInt32View = new Uint32Array(UniformBuffer._TempBuffer.buffer);\n","// Do not edit.\nimport { ShaderStore } from \"../Engines/shaderStore.js\";\nconst name = \"boundingInfoComputeShader\";\nconst shader = `struct Results {minX : atomic<i32>,\nminY : atomic<i32>,\nminZ : atomic<i32>,\nmaxX : atomic<i32>,\nmaxY : atomic<i32>,\nmaxZ : atomic<i32>,\ndummy1 : i32,\ndummy2 : i32,};fn floatToBits(value: f32)->i32 {return bitcast<i32>(value);}\nfn bitsToFloat(value: i32)->f32 {return bitcast<f32>(value);}\nfn atomicMinFloat(atomicVar: ptr<storage,atomic<i32>,read_write>,value: f32) {let intValue=floatToBits(value);loop {let oldIntValue=atomicLoad(atomicVar);let oldValue=bitsToFloat(oldIntValue);if (value>=oldValue) {break;}\nif (atomicCompareExchangeWeak(atomicVar,oldIntValue,intValue).old_value==oldIntValue) {break;}}}\nfn atomicMaxFloat(atomicVar: ptr<storage,atomic<i32>,read_write>,value: f32) {let intValue=floatToBits(value);loop {let oldIntValue=atomicLoad(atomicVar);let oldValue=bitsToFloat(oldIntValue);if (value<=oldValue) {break;}\nif (atomicCompareExchangeWeak(atomicVar,oldIntValue,intValue).old_value==oldIntValue) {break;}}}\nfn readMatrixFromRawSampler(smp : texture_2d<f32>,index : f32)->mat4x4<f32>\n{let offset=i32(index) *4; \nlet m0=textureLoad(smp,vec2<i32>(offset+0,0),0);let m1=textureLoad(smp,vec2<i32>(offset+1,0),0);let m2=textureLoad(smp,vec2<i32>(offset+2,0),0);let m3=textureLoad(smp,vec2<i32>(offset+3,0),0);return mat4x4<f32>(m0,m1,m2,m3);}\nconst identity=mat4x4f(\nvec4f(1.0,0.0,0.0,0.0),\nvec4f(0.0,1.0,0.0,0.0),\nvec4f(0.0,0.0,1.0,0.0),\nvec4f(0.0,0.0,0.0,1.0)\n);struct Settings {morphTargetTextureInfo: vec3f,\nmorphTargetCount: i32,\nindexResult : u32,};@group(0) @binding(0) var<storage,read> positionBuffer : array<f32>;@group(0) @binding(1) var<storage,read_write> resultBuffer : array<Results>;@group(0) @binding(7) var<uniform> settings : Settings;\n#if NUM_BONE_INFLUENCERS>0\n@group(0) @binding(2) var boneSampler : texture_2d<f32>;@group(0) @binding(3) var<storage,read> indexBuffer : array<vec4f>;@group(0) @binding(4) var<storage,read> weightBuffer : array<vec4f>;\n#if NUM_BONE_INFLUENCERS>4\n@group(0) @binding(5) var<storage,read> indexExtraBuffer : array<vec4f>;@group(0) @binding(6) var<storage,read> weightExtraBuffer : array<vec4f>;\n#endif\n#endif\n#ifdef MORPHTARGETS\n@group(0) @binding(8) var morphTargets : texture_2d_array<f32>;@group(0) @binding(9) var<storage,read> morphTargetInfluences : array<f32>;@group(0) @binding(10) var<storage,read> morphTargetTextureIndices : array<f32>;\n#endif\n#ifdef MORPHTARGETS\nfn readVector3FromRawSampler(targetIndex : i32,vertexIndex : u32)->vec3f\n{ \nlet vertexID=f32(vertexIndex)*settings.morphTargetTextureInfo.x;let y=floor(vertexID/settings.morphTargetTextureInfo.y);let x=vertexID-y*settings.morphTargetTextureInfo.y;let textureUV=vec2<i32>(i32(x),i32(y));return textureLoad(morphTargets,textureUV,i32(morphTargetTextureIndices[targetIndex]),0).xyz;}\n#endif\n@compute @workgroup_size(256,1,1)\nfn main(@builtin(global_invocation_id) global_id : vec3<u32>) {let index=global_id.x;if (index>=arrayLength(&positionBuffer)/3) {return;}\nlet position=vec3f(positionBuffer[index*3],positionBuffer[index*3+1],positionBuffer[index*3+2]);var finalWorld=identity;var positionUpdated=position;\n#if NUM_BONE_INFLUENCERS>0\nvar influence : mat4x4<f32>;let matricesIndices=indexBuffer[index];let matricesWeights=weightBuffer[index];influence=readMatrixFromRawSampler(boneSampler,matricesIndices[0])*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence=influence+readMatrixFromRawSampler(boneSampler,matricesIndices[1])*matricesWeights[1];\n#endif \n#if NUM_BONE_INFLUENCERS>2\ninfluence=influence+readMatrixFromRawSampler(boneSampler,matricesIndices[2])*matricesWeights[2];\n#endif \n#if NUM_BONE_INFLUENCERS>3\ninfluence=influence+readMatrixFromRawSampler(boneSampler,matricesIndices[3])*matricesWeights[3];\n#endif \n#if NUM_BONE_INFLUENCERS>4\nlet matricesIndicesExtra=indexExtraBuffer[index];let matricesWeightsExtra=weightExtraBuffer[index];influence=influence+readMatrixFromRawSampler(boneSampler,matricesIndicesExtra.x)*matricesWeightsExtra.x;\n#if NUM_BONE_INFLUENCERS>5\ninfluence=influence+readMatrixFromRawSampler(boneSampler,matricesIndicesExtra.y)*matricesWeightsExtra.y;\n#endif \n#if NUM_BONE_INFLUENCERS>6\ninfluence=influence+readMatrixFromRawSampler(boneSampler,matricesIndicesExtra.z)*matricesWeightsExtra.z;\n#endif \n#if NUM_BONE_INFLUENCERS>7\ninfluence=influence+readMatrixFromRawSampler(boneSampler,matricesIndicesExtra.w)*matricesWeightsExtra.w;\n#endif \n#endif \nfinalWorld=finalWorld*influence;\n#endif\n#ifdef MORPHTARGETS\nfor (var i=0; i<NUM_MORPH_INFLUENCERS; i=i+1) {if (i>=settings.morphTargetCount) {break;}\npositionUpdated=positionUpdated+(readVector3FromRawSampler(i,index)-position)*morphTargetInfluences[i];}\n#endif\nvar worldPos=finalWorld*vec4f(positionUpdated.x,positionUpdated.y,positionUpdated.z,1.0);atomicMinFloat(&resultBuffer[settings.indexResult].minX,worldPos.x);atomicMinFloat(&resultBuffer[settings.indexResult].minY,worldPos.y);atomicMinFloat(&resultBuffer[settings.indexResult].minZ,worldPos.z);atomicMaxFloat(&resultBuffer[settings.indexResult].maxX,worldPos.x);atomicMaxFloat(&resultBuffer[settings.indexResult].maxY,worldPos.y);atomicMaxFloat(&resultBuffer[settings.indexResult].maxZ,worldPos.z);}\n`;\n// Sideeffect\nShaderStore.ShadersStoreWGSL[name] = shader;\n/** @internal */\nexport const boundingInfoComputeShader = { name, shader };\n","import { ComputeShader } from \"../../Compute/computeShader.js\";\nimport { StorageBuffer } from \"../../Buffers/storageBuffer.js\";\nimport { VertexBuffer } from \"../../Buffers/buffer.js\";\nimport { Vector3 } from \"../../Maths/math.vector.js\";\nimport { UniformBuffer } from \"../../Materials/uniformBuffer.js\";\nimport \"../../ShadersWGSL/boundingInfo.compute.js\";\n/** @internal */\nexport class ComputeShaderBoundingHelper {\n    /**\n     * Creates a new ComputeShaderBoundingHelper\n     * @param engine defines the engine to use\n     */\n    constructor(engine) {\n        this._computeShadersCache = {};\n        this._positionBuffers = {};\n        this._indexBuffers = {};\n        this._weightBuffers = {};\n        this._indexExtraBuffers = {};\n        this._weightExtraBuffers = {};\n        this._morphTargetInfluenceBuffers = {};\n        this._morphTargetTextureIndexBuffers = {};\n        this._ubos = [];\n        this._uboIndex = 0;\n        this._processedMeshes = [];\n        this._computeShaders = [];\n        this._uniqueComputeShaders = new Set();\n        this._resultBuffers = [];\n        this._engine = engine;\n    }\n    _getComputeShader(defines, hasBones, hasMorphs) {\n        let computeShader;\n        const join = defines.join(\"\\n\");\n        if (!this._computeShadersCache[join]) {\n            const bindingsMapping = {\n                positionBuffer: { group: 0, binding: 0 },\n                resultBuffer: { group: 0, binding: 1 },\n                settings: { group: 0, binding: 7 },\n            };\n            if (hasBones) {\n                bindingsMapping.boneSampler = { group: 0, binding: 2 };\n                bindingsMapping.indexBuffer = { group: 0, binding: 3 };\n                bindingsMapping.weightBuffer = { group: 0, binding: 4 };\n                bindingsMapping.indexExtraBuffer = { group: 0, binding: 5 };\n                bindingsMapping.weightExtraBuffer = { group: 0, binding: 6 };\n            }\n            if (hasMorphs) {\n                bindingsMapping.morphTargets = { group: 0, binding: 8 };\n                bindingsMapping.morphTargetInfluences = { group: 0, binding: 9 };\n                bindingsMapping.morphTargetTextureIndices = { group: 0, binding: 10 };\n            }\n            computeShader = new ComputeShader(`boundingInfoCompute${hasBones ? \"_bones\" : \"\"}${hasMorphs ? \"_morphs\" : \"\"}`, this._engine, \"boundingInfo\", {\n                bindingsMapping,\n                defines: defines,\n            });\n            this._computeShadersCache[join] = computeShader;\n        }\n        else {\n            computeShader = this._computeShadersCache[join];\n        }\n        return computeShader;\n    }\n    _getUBO() {\n        if (this._uboIndex >= this._ubos.length) {\n            const ubo = new UniformBuffer(this._engine);\n            ubo.addFloat3(\"morphTargetTextureInfo\", 0, 0, 0);\n            ubo.addUniform(\"morphTargetCount\", 1);\n            ubo.addUniform(\"indexResult\", 1);\n            this._ubos.push(ubo);\n        }\n        return this._ubos[this._uboIndex++];\n    }\n    _extractDataAndLink(computeShader, mesh, kind, stride, name, storageUnit) {\n        let buffer;\n        const vertexCount = mesh.getTotalVertices();\n        if (!storageUnit[mesh.uniqueId]) {\n            const dataArray = mesh.getVertexBuffer(kind)?.getFloatData(vertexCount);\n            buffer = new StorageBuffer(this._engine, Float32Array.BYTES_PER_ELEMENT * vertexCount * stride);\n            buffer.update(dataArray);\n            storageUnit[mesh.uniqueId] = buffer;\n        }\n        else {\n            buffer = storageUnit[mesh.uniqueId];\n        }\n        computeShader.setStorageBuffer(name, buffer);\n    }\n    _prepareStorage(computeShader, name, id, storageUnit, numInfluencers, data) {\n        let buffer;\n        if (!storageUnit[id]) {\n            buffer = new StorageBuffer(this._engine, Float32Array.BYTES_PER_ELEMENT * numInfluencers);\n            storageUnit[id] = buffer;\n        }\n        else {\n            buffer = storageUnit[id];\n        }\n        buffer.update(data);\n        computeShader.setStorageBuffer(name, buffer);\n    }\n    /** @internal */\n    async processAsync(meshes) {\n        await this.registerMeshListAsync(meshes);\n        this.processMeshList();\n        await this.fetchResultsForMeshListAsync();\n    }\n    /** @internal */\n    registerMeshListAsync(meshes) {\n        this._disposeForMeshList();\n        if (!Array.isArray(meshes)) {\n            meshes = [meshes];\n        }\n        let maxNumInfluencers = 0;\n        for (let i = 0; i < meshes.length; i++) {\n            const mesh = meshes[i];\n            const vertexCount = mesh.getTotalVertices();\n            if (vertexCount === 0 || !mesh.getVertexBuffer || !mesh.getVertexBuffer(VertexBuffer.PositionKind)) {\n                continue;\n            }\n            this._processedMeshes.push(mesh);\n            const manager = mesh.morphTargetManager;\n            if (manager) {\n                maxNumInfluencers = Math.max(maxNumInfluencers, manager.numTargets);\n            }\n        }\n        for (let i = 0; i < this._processedMeshes.length; i++) {\n            const mesh = this._processedMeshes[i];\n            let defines = [\"\"];\n            let hasBones = false;\n            if (mesh && mesh.useBones && mesh.computeBonesUsingShaders && mesh.skeleton) {\n                defines.push(\"#define NUM_BONE_INFLUENCERS \" + mesh.numBoneInfluencers);\n                hasBones = true;\n            }\n            const computeShaderWithoutMorph = this._getComputeShader(defines, hasBones, false);\n            this._uniqueComputeShaders.add(computeShaderWithoutMorph);\n            const manager = mesh.morphTargetManager;\n            if (manager) {\n                defines = defines.slice();\n                defines.push(\"#define MORPHTARGETS\");\n                defines.push(\"#define NUM_MORPH_INFLUENCERS \" + maxNumInfluencers);\n                const computeShaderWithMorph = this._getComputeShader(defines, hasBones, true);\n                this._uniqueComputeShaders.add(computeShaderWithMorph);\n                this._computeShaders.push([computeShaderWithoutMorph, computeShaderWithMorph]);\n            }\n            else {\n                this._computeShaders.push([computeShaderWithoutMorph, computeShaderWithoutMorph]);\n            }\n            // Pre-build the ubos, as they won't change if there's no morph targets\n            const ubo = this._getUBO();\n            ubo.updateUInt(\"indexResult\", i);\n            ubo.update();\n        }\n        return new Promise((resolve) => {\n            const check = () => {\n                const iterator = this._uniqueComputeShaders.keys();\n                for (let key = iterator.next(); key.done !== true; key = iterator.next()) {\n                    const computeShader = key.value;\n                    if (!computeShader.isReady()) {\n                        setTimeout(check, 10);\n                        return;\n                    }\n                }\n                resolve();\n            };\n            check();\n        });\n    }\n    /** @internal */\n    processMeshList() {\n        if (this._processedMeshes.length === 0) {\n            return;\n        }\n        this._uboIndex = 0;\n        const resultDataSize = 8 * this._processedMeshes.length;\n        const resultData = new Float32Array(resultDataSize);\n        const resultBuffer = new StorageBuffer(this._engine, Float32Array.BYTES_PER_ELEMENT * resultDataSize);\n        this._resultBuffers.push(resultBuffer);\n        for (let i = 0; i < this._processedMeshes.length; i++) {\n            resultData[i * 8 + 0] = Number.POSITIVE_INFINITY;\n            resultData[i * 8 + 1] = Number.POSITIVE_INFINITY;\n            resultData[i * 8 + 2] = Number.POSITIVE_INFINITY;\n            resultData[i * 8 + 3] = Number.NEGATIVE_INFINITY;\n            resultData[i * 8 + 4] = Number.NEGATIVE_INFINITY;\n            resultData[i * 8 + 5] = Number.NEGATIVE_INFINITY;\n        }\n        resultBuffer.update(resultData);\n        for (let i = 0; i < this._processedMeshes.length; i++) {\n            const mesh = this._processedMeshes[i];\n            const vertexCount = mesh.getTotalVertices();\n            const [computeShaderWithoutMorph, computeShaderWithMorph] = this._computeShaders[i];\n            const manager = mesh.morphTargetManager;\n            const hasMorphs = manager && manager.numInfluencers > 0;\n            const computeShader = hasMorphs ? computeShaderWithMorph : computeShaderWithoutMorph;\n            this._extractDataAndLink(computeShader, mesh, VertexBuffer.PositionKind, 3, \"positionBuffer\", this._positionBuffers);\n            // Bones\n            if (mesh && mesh.useBones && mesh.computeBonesUsingShaders && mesh.skeleton && mesh.skeleton.useTextureToStoreBoneMatrices) {\n                this._extractDataAndLink(computeShader, mesh, VertexBuffer.MatricesIndicesKind, 4, \"indexBuffer\", this._indexBuffers);\n                this._extractDataAndLink(computeShader, mesh, VertexBuffer.MatricesWeightsKind, 4, \"weightBuffer\", this._weightBuffers);\n                const boneSampler = mesh.skeleton.getTransformMatrixTexture(mesh);\n                computeShader.setTexture(\"boneSampler\", boneSampler, false);\n                if (mesh.numBoneInfluencers > 4) {\n                    this._extractDataAndLink(computeShader, mesh, VertexBuffer.MatricesIndicesExtraKind, 4, \"indexExtraBuffer\", this._indexExtraBuffers);\n                    this._extractDataAndLink(computeShader, mesh, VertexBuffer.MatricesWeightsExtraKind, 4, \"weightExtraBuffer\", this._weightExtraBuffers);\n                }\n            }\n            const ubo = this._getUBO();\n            // Morphs\n            if (hasMorphs) {\n                const morphTargets = manager._targetStoreTexture;\n                computeShader.setTexture(\"morphTargets\", morphTargets, false);\n                this._prepareStorage(computeShader, \"morphTargetInfluences\", mesh.uniqueId, this._morphTargetInfluenceBuffers, manager.numInfluencers, manager.influences);\n                this._prepareStorage(computeShader, \"morphTargetTextureIndices\", mesh.uniqueId, this._morphTargetTextureIndexBuffers, manager.numInfluencers, manager._morphTargetTextureIndices);\n                ubo.updateFloat3(\"morphTargetTextureInfo\", manager._textureVertexStride, manager._textureWidth, manager._textureHeight);\n                ubo.updateInt(\"morphTargetCount\", manager.numInfluencers);\n                ubo.update();\n            }\n            computeShader.setStorageBuffer(\"resultBuffer\", resultBuffer);\n            computeShader.setUniformBuffer(\"settings\", ubo);\n            // Dispatch\n            computeShader.dispatch(Math.ceil(vertexCount / 256));\n            this._engine.flushFramebuffer();\n        }\n    }\n    /** @internal */\n    fetchResultsForMeshListAsync() {\n        return new Promise((resolve) => {\n            const buffers = [];\n            let size = 0;\n            for (let i = 0; i < this._resultBuffers.length; i++) {\n                const buffer = this._resultBuffers[i].getBuffer();\n                buffers.push(buffer);\n                size += buffer.capacity;\n            }\n            const resultData = new Float32Array(size / Float32Array.BYTES_PER_ELEMENT);\n            const minimum = Vector3.Zero();\n            const maximum = Vector3.Zero();\n            const minmax = { minimum, maximum };\n            this._engine.readFromMultipleStorageBuffers(buffers, 0, undefined, resultData, true).then(() => {\n                let resultDataOffset = 0;\n                for (let j = 0; j < this._resultBuffers.length; j++) {\n                    for (let i = 0; i < this._processedMeshes.length; i++) {\n                        const mesh = this._processedMeshes[i];\n                        Vector3.FromArrayToRef(resultData, resultDataOffset + i * 8, minimum);\n                        Vector3.FromArrayToRef(resultData, resultDataOffset + i * 8 + 3, maximum);\n                        if (j > 0) {\n                            minimum.minimizeInPlace(mesh.getBoundingInfo().minimum);\n                            maximum.maximizeInPlace(mesh.getBoundingInfo().maximum);\n                        }\n                        mesh._refreshBoundingInfoDirect(minmax);\n                        if (i === 0) {\n                            //console.log(\"Q\", j, minimum + \"\", maximum + \"\");\n                        }\n                    }\n                    resultDataOffset += 8 * this._processedMeshes.length;\n                }\n                for (const resultBuffer of this._resultBuffers) {\n                    resultBuffer.dispose();\n                }\n                this._resultBuffers = [];\n                this._uboIndex = 0;\n                resolve();\n            });\n        });\n    }\n    _disposeCache(storageUnit) {\n        for (const key in storageUnit) {\n            storageUnit[key].dispose();\n        }\n    }\n    _disposeForMeshList() {\n        for (const resultBuffer of this._resultBuffers) {\n            resultBuffer.dispose();\n        }\n        this._resultBuffers = [];\n        this._processedMeshes = [];\n        this._computeShaders = [];\n        this._uniqueComputeShaders = new Set();\n    }\n    /** @internal */\n    dispose() {\n        this._disposeCache(this._positionBuffers);\n        this._positionBuffers = {};\n        this._disposeCache(this._indexBuffers);\n        this._indexBuffers = {};\n        this._disposeCache(this._weightBuffers);\n        this._weightBuffers = {};\n        this._disposeCache(this._morphTargetInfluenceBuffers);\n        this._morphTargetInfluenceBuffers = {};\n        this._disposeCache(this._morphTargetTextureIndexBuffers);\n        this._morphTargetTextureIndexBuffers = {};\n        for (const ubo of this._ubos) {\n            ubo.dispose();\n        }\n        this._ubos = [];\n        this._computeShadersCache = {};\n        this._engine = undefined;\n        this._disposeForMeshList();\n    }\n}\n"],"mappings":"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","names":["name","name","match","name","index","shader","name","shader","createPipelineContext","_preparePipelineContext","_executeWhenRenderingStateIsCompiled","name","InternalTextureSource","proxy","requestAnimationFrame","cancelAnimationFrame","url","DecodeBase64UrlToBinary","DecodeBase64UrlToString","FileToolsOptions","IsBase64DataUrl","IsFileURL","LoadFile","LoadImage","ReadFile","RequestFile","SetCorsBehavior","name","shader","buffer","index","name","texture","name","quality","name","location","name","name","location","name"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]}