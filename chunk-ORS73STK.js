import{I as Hn,z as Pn}from"./chunk-RUVVEFL4.js";import{Ia as Rn,Xa as zn,Ya as Xt,_a as Yn}from"./chunk-3HC7CDKU.js";import{a as Ur,b as On,ua as Fn}from"./chunk-TH5CS6OC.js";import{Ha as $n,O as St,a as Pe,aa as he,b as Nr,k as Un,l as Er,ma as Bt}from"./chunk-6NI24FLG.js";var Ln=class{constructor(){this.http=Bt(On),this.membershipService=Bt(Rn),this.dialogVM=Bt(Pn),this.scheduleVM=Bt(Hn),this.calendarVM=Bt(Yn),this.dateRange=[],this.baseUrl=Fn.baseSyncUrl+"/diary",this.groupedSchedules$=new Er({}),this.schedules$=new Er(null),this.destroy$=new Un,this.barUpdateEmitter=new $n,this.dateRange=this.generateDateRange(3),this.updateScheduleCallback(),this.updateCalenadarCallback(),this.deleteSceduleCallback(),this.deleteCalendarCallback()}initData(){}getSchedulesFromServer(){let e=this.membershipService.user$.getValue().id,r=new Ur().set("userId",e).set("startDate",Xt.now().startOf("day").toISO()).set("endDate",Xt.now().plus({days:3}).startOf("day").toISO());this.http.get(this.baseUrl+"/range",{params:r}).pipe(St(1)).subscribe(n=>{console.log("\uB2E4\uC774\uC5B4\uB9AC \uACB0\uACFC,",n);let o=this.groupByStartDate(this.preprocess(n));this.groupedSchedules$.next(o)})}getAllSchedulesFromServer(){let e=this.membershipService.user$.getValue().id,r=new Ur().set("userId",e);this.http.get(this.baseUrl,{params:r}).pipe(St(1)).subscribe(n=>{console.log("\uB2E4\uC774\uC5B4\uB9AC \uACB0\uACFC,",n);let o=this.preprocess(n);this.schedules$.next([...o]),this.barUpdateEmitter.emit()})}updateStatus(e){console.log("\uC5C5\uB370\uC774\uD2B8 \uD30C\uB78C, ",e);let r=e.type,n=r==="schedule"?this.baseUrl+"/schedules/status":this.baseUrl+"/calendars/status",o={id:e.id,status:e.status};this.http.patch(n,o).pipe(St(1)).subscribe(i=>{if(console.log("\uACB0\uACFC, ",i),i.affected<1)return;let a=this.schedules$.getValue();if(!a)return;let u=a.findIndex(f=>e.id===f.id);u<0||(a[u]=Pe({},e),this.schedules$.next([...a]),r==="calendar"?this.calendarVM.updateTaskStatus(e.id,e.status):this.scheduleVM.updateTaskStatus(e.id,e.status),this.barUpdateEmitter.emit())})}completeSchedule(e){console.log("\uC624\uB298 \uC77C\uC815 \uC644\uB8CC, ",e);let r=this.baseUrl,n={parentId:e,userId:this.membershipService.user$.getValue().id};this.http.post(r,n).pipe(St(1)).subscribe(o=>{console.log("\uC77C\uC815 \uACB0\uACFC, ",o);let i=this.schedules$.getValue();if(!i)return;let a=i.findIndex(l=>l.id===e);if(a<0)return;let u=i[a],f=Nr(Pe({},u),{dailyStatus:o}),s=[...i.slice(0,a),f,...i.slice(a+1)];this.schedules$.next(s),this.barUpdateEmitter.emit()})}cancelComplete(e){console.log("\uC624\uB298 \uC77C\uC815 \uCDE8\uC18C",e);let r=this.baseUrl;this.http.delete(r,{body:{parentId:e}}).pipe(St(1)).subscribe(n=>{if(console.log("\uC77C\uC815 \uCDE8\uC18C \uACB0\uACFC, ",n),n.affected<1)return;let o=this.schedules$.getValue();if(!o)return;let i=o.findIndex(s=>s.id===e);if(i<0)return;let a=o[i],u=Nr(Pe({},a),{dailyStatus:null}),f=[...o.slice(0,i),u,...o.slice(i+1)];this.schedules$.next(f),this.barUpdateEmitter.emit()})}preprocess(e){this.scheduleVM.tasks.next(e.schedules);let r=e.schedules?.map(i=>({id:i.id,name:i.name,description:i.description,startDate:new Date(i.startDate),endDate:new Date(i.endDate),status:i.status,type:"schedule",dailyStatus:i.dailyStatus})),n=e.calendars?.map(i=>({id:i.scheduleId,name:i.scheduleName,description:i.scheduleDetail,startDate:new Date(i.startDate),endDate:new Date(i.endDate),status:i.status,type:"calendar",dailyStatus:i.dailyStatus})),o=this.sortSchedule([...r,...n]);return console.log("\uC815\uC81C \uACB0\uACFC, ",o),o}refineSchedule(e){return{id:e.id,name:e.name,description:e.description,startDate:new Date(e.startDate),endDate:new Date(e.endDate),status:e.status,type:"schedule",dailyStatus:e.dailyStatus}}refineCalendar(e){return{id:e.scheduleId,name:e.scheduleName,description:e.scheduleDetail,startDate:new Date(e.startDate),endDate:new Date(e.endDate),status:e.status,type:"calendar",dailyStatus:e.dailyStatus}}sortSchedule(e){return e.sort((r,n)=>new Date(r.startDate).getTime()-new Date(n.startDate).getTime())}groupByStartDate(e){return e=this.sortSchedule(e),e.reduce((r,n)=>{let o=n.startDate.split("T")[0];return r[o]||(r[o]=[]),r[o].push(n),r},{})}generateDateRange(e,r=Xt.now().startOf("day")){return Array.from({length:e},(n,o)=>r.plus({days:o}))}groupScheduleByDateRange(e){let r={};return this.dateRange.forEach(n=>{let o=n.toISODate();r[o]=[]}),e.forEach(n=>{let o=Xt.fromJSDate(new Date(n.startDate)).startOf("day"),i=Xt.fromJSDate(new Date(n.endDate)).startOf("day").plus({days:1});this.dateRange.forEach(a=>{let u=a.toISODate();zn.fromDateTimes(o,i).contains(a)&&r[u].push(n)})}),r}openUpdateDialog(e){e.type==="calendar"?this.openUpdateCalendar(e):this.openUpdateSchedule(e)}openUpdateCalendar(e){let r=e.id;console.log("\uB370\uC774\uD130 \uC544\uC774\uB514, ",r),console.log("\uCC3E\uAE30 \uC804, ",this.calendarVM.schedules$.getValue());let n=this.calendarVM.schedules$.getValue().find(o=>o.scheduleId===r);if(console.log("\uCC3E\uC740 \uCE98\uB9B0\uB354, ",n),!n){console.log("\uB9E4\uD551\uB418\uB294 \uCE98\uB9B0\uB354 \uBABB\uCC3E\uC74C\uC74C");return}this.dialogVM.openCalendarDialog(n)}openUpdateSchedule(e){let r=e.id,n=this.scheduleVM.tasks.getValue().find(i=>i.id===r);console.log("\uCC3E\uC740 \uC2A4\uCF00\uC904, ",n);let o=this.scheduleVM.getDialogData(n);this.dialogVM.openDialog(o)}updateScheduleCallback(){this.scheduleVM.scheduleUpdateEmitter.pipe(he(this.destroy$)).subscribe(e=>{let r=this.schedules$.getValue();if(!r)return;let n=r.findIndex(a=>a.id===e.id);if(n<0)return;let o=this.refineSchedule(e);o.dailyStatus=r[n].dailyStatus;let i=[...r.slice(0,n),o,...r.slice(n+1)];this.schedules$.next(i),this.barUpdateEmitter.emit()})}updateCalenadarCallback(){this.calendarVM.calendarUpdateEmitter.pipe(he(this.destroy$)).subscribe(e=>{let r=this.schedules$.getValue();if(!r)return;let n=r.findIndex(a=>a.id===e.scheduleId);if(n<0)return;let o=this.refineCalendar(e);o.dailyStatus=r[n].dailyStatus;let i=[...r.slice(0,n),o,...r.slice(n+1)];this.schedules$.next(i),this.barUpdateEmitter.emit()})}deleteSchedule(e){this.confirm(e)}getConfirmDialogData(){return{toolbar:{data:"\uC77C\uC815 \uC81C\uAC70",style:{}},text:"\uC815\uB9D0\uB85C \uC77C\uC815\uC744 \uC81C\uAC70\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",buttons:[{data:{text:"\uD655\uC778",icon:"check_circle"},style:{},event:()=>{this.confirmDialog?.close("confirm")}},{data:{text:"\uCDE8\uC18C",icon:"cancel"},style:{},event:()=>{this.confirmDialog?.close("cancel")}}]}}confirm(e){this.confirmDialog=this.dialogVM.openConfirmDialog(this.getConfirmDialogData()),this.confirmDialog.afterClosed().pipe(St(1)).subscribe(r=>{if(!r)return;e.type==="calendar"?this.calendarVM.deleteSchedule(e.id):this.scheduleVM.deleteTask(e.id)})}deleteSceduleCallback(){this.scheduleVM.scheduleDeleteEmitter.pipe(he(this.destroy$)).subscribe(e=>{let r=this.schedules$.getValue();if(!r)return;let n=r.findIndex(i=>i.id===e);if(n<0)return;let o=[...r.slice(0,n),...r.slice(n+1)];this.schedules$.next(o),this.barUpdateEmitter.emit()})}deleteCalendarCallback(){this.calendarVM.calendarDeleteEmitter.pipe(he(this.destroy$)).subscribe(e=>{let r=this.schedules$.getValue();if(!r)return;let n=r.findIndex(i=>i.id===e);if(n<0)return;let o=[...r.slice(0,n),...r.slice(n+1)];this.schedules$.next(o),this.barUpdateEmitter.emit()})}};function Vn(t,e){let r,n;if(e===void 0)for(let o of t)o!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)));else{let o=-1;for(let i of t)(i=e(i,++o,t))!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)))}return[r,n]}function qn(t,e){let r;if(e===void 0)for(let n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of t)(o=e(o,++n,t))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function kt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $r(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dt(t){let e,r,n;t.length!==2?(e=kt,r=(u,f)=>kt(t(u),f),n=(u,f)=>t(u)-f):(e=t===kt||t===$r?t:Va,r=t,n=t);function o(u,f,s=0,l=u.length){if(s<l){if(e(f,f)!==0)return l;do{let m=s+l>>>1;r(u[m],f)<0?s=m+1:l=m}while(s<l)}return s}function i(u,f,s=0,l=u.length){if(s<l){if(e(f,f)!==0)return l;do{let m=s+l>>>1;r(u[m],f)<=0?s=m+1:l=m}while(s<l)}return s}function a(u,f,s=0,l=u.length){let m=o(u,f,s,l-1);return m>s&&n(u[m-1],f)>-n(u[m],f)?m-1:m}return{left:o,center:a,right:i}}function Va(){return 0}function Or(t){return t===null?NaN:+t}var Wn=Dt(kt),Bn=Wn.right,qa=Wn.left,Wa=Dt(Or).center,Fr=Bn;var Ba=Math.sqrt(50),Xa=Math.sqrt(10),Za=Math.sqrt(2);function He(t,e,r){let n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),i=n/Math.pow(10,o),a=i>=Ba?10:i>=Xa?5:i>=Za?2:1,u,f,s;return o<0?(s=Math.pow(10,-o)/a,u=Math.round(t*s),f=Math.round(e*s),u/s<t&&++u,f/s>e&&--f,s=-s):(s=Math.pow(10,o)*a,u=Math.round(t/s),f=Math.round(e/s),u*s<t&&++u,f*s>e&&--f),f<u&&.5<=r&&r<2?He(t,e,r*2):[u,f,s]}function Le(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[o,i,a]=n?He(e,t,r):He(t,e,r);if(!(i>=o))return[];let u=i-o+1,f=new Array(u);if(n)if(a<0)for(let s=0;s<u;++s)f[s]=(i-s)/-a;else for(let s=0;s<u;++s)f[s]=(i-s)*a;else if(a<0)for(let s=0;s<u;++s)f[s]=(o+s)/-a;else for(let s=0;s<u;++s)f[s]=(o+s)*a;return f}function pe(t,e,r){return e=+e,t=+t,r=+r,He(t,e,r)[2]}function Zt(t,e,r){e=+e,t=+t,r=+r;let n=e<t,o=n?pe(e,t,r):pe(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function Xn(t){return t}var Rr=1,zr=2,Yr=3,de=4,Zn=1e-6;function Qa(t){return"translate("+t+",0)"}function Ga(t){return"translate(0,"+t+")"}function Ka(t){return e=>+t(e)}function Ja(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function ja(){return!this.__axis}function Qn(t,e){var r=[],n=null,o=null,i=6,a=6,u=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Rr||t===de?-1:1,l=t===de||t===zr?"x":"y",m=t===Rr||t===Yr?Qa:Ga;function c(h){var d=n??(e.ticks?e.ticks.apply(e,r):e.domain()),w=o??(e.tickFormat?e.tickFormat.apply(e,r):Xn),D=Math.max(i,0)+u,b=e.range(),C=+b[0]+f,_=+b[b.length-1]+f,M=(e.bandwidth?Ja:Ka)(e.copy(),f),T=h.selection?h.selection():h,g=T.selectAll(".domain").data([null]),A=T.selectAll(".tick").data(d,e).order(),z=A.exit(),H=A.enter().append("g").attr("class","tick"),R=A.select("line"),v=A.select("text");g=g.merge(g.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(H),R=R.merge(H.append("line").attr("stroke","currentColor").attr(l+"2",s*i)),v=v.merge(H.append("text").attr("fill","currentColor").attr(l,s*D).attr("dy",t===Rr?"0em":t===Yr?"0.71em":"0.32em")),h!==T&&(g=g.transition(h),A=A.transition(h),R=R.transition(h),v=v.transition(h),z=z.transition(h).attr("opacity",Zn).attr("transform",function(E){return isFinite(E=M(E))?m(E+f):this.getAttribute("transform")}),H.attr("opacity",Zn).attr("transform",function(E){var y=this.parentNode.__axis;return m((y&&isFinite(y=y(E))?y:M(E))+f)})),z.remove(),g.attr("d",t===de||t===zr?a?"M"+s*a+","+C+"H"+f+"V"+_+"H"+s*a:"M"+f+","+C+"V"+_:a?"M"+C+","+s*a+"V"+f+"H"+_+"V"+s*a:"M"+C+","+f+"H"+_),A.attr("opacity",1).attr("transform",function(E){return m(M(E)+f)}),R.attr(l+"2",s*i),v.attr(l,s*D).text(w),T.filter(ja).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===zr?"start":t===de?"end":"middle"),T.each(function(){this.__axis=M})}return c.scale=function(h){return arguments.length?(e=h,c):e},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(h){return arguments.length?(r=h==null?[]:Array.from(h),c):r.slice()},c.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),c):n&&n.slice()},c.tickFormat=function(h){return arguments.length?(o=h,c):o},c.tickSize=function(h){return arguments.length?(i=a=+h,c):i},c.tickSizeInner=function(h){return arguments.length?(i=+h,c):i},c.tickSizeOuter=function(h){return arguments.length?(a=+h,c):a},c.tickPadding=function(h){return arguments.length?(u=+h,c):u},c.offset=function(h){return arguments.length?(f=+h,c):f},c}function tu(t){return Qn(Yr,t)}function eu(t){return Qn(de,t)}function ru(){}function Ct(t){return t==null?ru:function(){return this.querySelector(t)}}function Gn(t){typeof t!="function"&&(t=Ct(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],a=i.length,u=n[o]=new Array(a),f,s,l=0;l<a;++l)(f=i[l])&&(s=t.call(f,f.__data__,l,i))&&("__data__"in f&&(s.__data__=f.__data__),u[l]=s);return new F(n,this._parents)}function Pr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function nu(){return[]}function xe(t){return t==null?nu:function(){return this.querySelectorAll(t)}}function ou(t){return function(){return Pr(t.apply(this,arguments))}}function Kn(t){typeof t=="function"?t=ou(t):t=xe(t);for(var e=this._groups,r=e.length,n=[],o=[],i=0;i<r;++i)for(var a=e[i],u=a.length,f,s=0;s<u;++s)(f=a[s])&&(n.push(t.call(f,f.__data__,s,a)),o.push(f));return new F(n,o)}function ge(t){return function(){return this.matches(t)}}function Ve(t){return function(e){return e.matches(t)}}var iu=Array.prototype.find;function au(t){return function(){return iu.call(this.children,t)}}function uu(){return this.firstElementChild}function Jn(t){return this.select(t==null?uu:au(typeof t=="function"?t:Ve(t)))}var su=Array.prototype.filter;function fu(){return Array.from(this.children)}function lu(t){return function(){return su.call(this.children,t)}}function jn(t){return this.selectAll(t==null?fu:lu(typeof t=="function"?t:Ve(t)))}function to(t){typeof t!="function"&&(t=ge(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],a=i.length,u=n[o]=[],f,s=0;s<a;++s)(f=i[s])&&t.call(f,f.__data__,s,i)&&u.push(f);return new F(n,this._parents)}function qe(t){return new Array(t.length)}function eo(){return new F(this._enter||this._groups.map(qe),this._parents)}function ye(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ye.prototype={constructor:ye,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ro(t){return function(){return t}}function cu(t,e,r,n,o,i){for(var a=0,u,f=e.length,s=i.length;a<s;++a)(u=e[a])?(u.__data__=i[a],n[a]=u):r[a]=new ye(t,i[a]);for(;a<f;++a)(u=e[a])&&(o[a]=u)}function mu(t,e,r,n,o,i,a){var u,f,s=new Map,l=e.length,m=i.length,c=new Array(l),h;for(u=0;u<l;++u)(f=e[u])&&(c[u]=h=a.call(f,f.__data__,u,e)+"",s.has(h)?o[u]=f:s.set(h,f));for(u=0;u<m;++u)h=a.call(t,i[u],u,i)+"",(f=s.get(h))?(n[u]=f,f.__data__=i[u],s.delete(h)):r[u]=new ye(t,i[u]);for(u=0;u<l;++u)(f=e[u])&&s.get(c[u])===f&&(o[u]=f)}function hu(t){return t.__data__}function no(t,e){if(!arguments.length)return Array.from(this,hu);var r=e?mu:cu,n=this._parents,o=this._groups;typeof t!="function"&&(t=ro(t));for(var i=o.length,a=new Array(i),u=new Array(i),f=new Array(i),s=0;s<i;++s){var l=n[s],m=o[s],c=m.length,h=pu(t.call(l,l&&l.__data__,s,n)),d=h.length,w=u[s]=new Array(d),D=a[s]=new Array(d),b=f[s]=new Array(c);r(l,m,w,D,b,h,e);for(var C=0,_=0,M,T;C<d;++C)if(M=w[C]){for(C>=_&&(_=C+1);!(T=D[_])&&++_<d;);M._next=T||null}}return a=new F(a,n),a._enter=u,a._exit=f,a}function pu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oo(){return new F(this._exit||this._groups.map(qe),this._parents)}function io(t,e,r){var n=this.enter(),o=this,i=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function ao(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,o=r.length,i=n.length,a=Math.min(o,i),u=new Array(o),f=0;f<a;++f)for(var s=r[f],l=n[f],m=s.length,c=u[f]=new Array(m),h,d=0;d<m;++d)(h=s[d]||l[d])&&(c[d]=h);for(;f<o;++f)u[f]=r[f];return new F(u,this._parents)}function uo(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function so(t){t||(t=du);function e(m,c){return m&&c?t(m.__data__,c.__data__):!m-!c}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],u=a.length,f=o[i]=new Array(u),s,l=0;l<u;++l)(s=a[l])&&(f[l]=s);f.sort(e)}return new F(o,this._parents).order()}function du(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function lo(){return Array.from(this)}function co(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}function mo(){let t=0;for(let e of this)++t;return t}function ho(){return!this.node()}function po(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var o=e[r],i=0,a=o.length,u;i<a;++i)(u=o[i])&&t.call(u,u.__data__,i,o);return this}var We="http://www.w3.org/1999/xhtml",Hr={svg:"http://www.w3.org/2000/svg",xhtml:We,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Hr.hasOwnProperty(e)?{space:Hr[e],local:t}:t}function xu(t){return function(){this.removeAttribute(t)}}function gu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yu(t,e){return function(){this.setAttribute(t,e)}}function vu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wu(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function _u(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function xo(t,e){var r=mt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?gu:xu:typeof e=="function"?r.local?_u:wu:r.local?vu:yu)(r,e))}function Be(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bu(t){return function(){this.style.removeProperty(t)}}function Mu(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Tu(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function go(t,e,r){return arguments.length>1?this.each((e==null?bu:typeof e=="function"?Tu:Mu)(t,e,r??"")):gt(this.node(),t)}function gt(t,e){return t.style.getPropertyValue(e)||Be(t).getComputedStyle(t,null).getPropertyValue(e)}function Su(t){return function(){delete this[t]}}function ku(t,e){return function(){this[t]=e}}function Du(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function yo(t,e){return arguments.length>1?this.each((e==null?Su:typeof e=="function"?Du:ku)(t,e)):this.node()[t]}function vo(t){return t.trim().split(/^|\s+/)}function Lr(t){return t.classList||new wo(t)}function wo(t){this._node=t,this._names=vo(t.getAttribute("class")||"")}wo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _o(t,e){for(var r=Lr(t),n=-1,o=e.length;++n<o;)r.add(e[n])}function bo(t,e){for(var r=Lr(t),n=-1,o=e.length;++n<o;)r.remove(e[n])}function Cu(t){return function(){_o(this,t)}}function Au(t){return function(){bo(this,t)}}function Iu(t,e){return function(){(e.apply(this,arguments)?_o:bo)(this,t)}}function Mo(t,e){var r=vo(t+"");if(arguments.length<2){for(var n=Lr(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?Iu:e?Cu:Au)(r,e))}function Nu(){this.textContent=""}function Eu(t){return function(){this.textContent=t}}function Uu(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function To(t){return arguments.length?this.each(t==null?Nu:(typeof t=="function"?Uu:Eu)(t)):this.node().textContent}function $u(){this.innerHTML=""}function Ou(t){return function(){this.innerHTML=t}}function Fu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function So(t){return arguments.length?this.each(t==null?$u:(typeof t=="function"?Fu:Ou)(t)):this.node().innerHTML}function Ru(){this.nextSibling&&this.parentNode.appendChild(this)}function ko(){return this.each(Ru)}function zu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Do(){return this.each(zu)}function Yu(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===We&&e.documentElement.namespaceURI===We?e.createElement(t):e.createElementNS(r,t)}}function Pu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=mt(t);return(e.local?Pu:Yu)(e)}function Co(t){var e=typeof t=="function"?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Hu(){return null}function Ao(t,e){var r=typeof t=="function"?t:Xe(t),n=e==null?Hu:typeof e=="function"?e:Ct(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Lu(){var t=this.parentNode;t&&t.removeChild(this)}function Io(){return this.each(Lu)}function Vu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qu(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function No(t){return this.select(t?qu:Vu)}function Eo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wu(t){return function(e){t.call(this,e,this.__data__)}}function Bu(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Xu(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,o=e.length,i;r<o;++r)i=e[r],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++n]=i;++n?e.length=n:delete this.__on}}}function Zu(t,e,r){return function(){var n=this.__on,o,i=Wu(e);if(n){for(var a=0,u=n.length;a<u;++a)if((o=n[a]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=e;return}}this.addEventListener(t.type,i,r),o={type:t.type,name:t.name,value:e,listener:i,options:r},n?n.push(o):this.__on=[o]}}function Uo(t,e,r){var n=Bu(t+""),o,i=n.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var f=0,s=u.length,l;f<s;++f)for(o=0,l=u[f];o<i;++o)if((a=n[o]).type===l.type&&a.name===l.name)return l.value}return}for(u=e?Zu:Xu,o=0;o<i;++o)this.each(u(n[o],e,r));return this}function $o(t,e,r){var n=Be(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,r):(o=n.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Qu(t,e){return function(){return $o(this,t,e)}}function Gu(t,e){return function(){return $o(this,t,e.apply(this,arguments))}}function Oo(t,e){return this.each((typeof e=="function"?Gu:Qu)(t,e))}function*Fo(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var Vr=[null];function F(t,e){this._groups=t,this._parents=e}function Ro(){return new F([[document.documentElement]],Vr)}function Ku(){return this}F.prototype=Ro.prototype={constructor:F,select:Gn,selectAll:Kn,selectChild:Jn,selectChildren:jn,filter:to,data:no,enter:eo,exit:oo,join:io,merge:ao,selection:Ku,order:uo,sort:so,call:fo,nodes:lo,node:co,size:mo,empty:ho,each:po,attr:xo,style:go,property:yo,classed:Mo,text:To,html:So,raise:ko,lower:Do,append:Co,insert:Ao,remove:Io,clone:No,datum:Eo,on:Uo,dispatch:Oo,[Symbol.iterator]:Fo};var ht=Ro;function Ju(t){return typeof t=="string"?new F([[document.querySelector(t)]],[document.documentElement]):new F([[t]],Vr)}function Ze(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function qr(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function _e(){}var ve=.7,Ke=1/ve,Qt="\\s*([+-]?\\d+)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ju=/^#([0-9a-f]{3,8})$/,ts=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),es=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),rs=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${we}\\)$`),ns=new RegExp(`^rgba\\(${st},${st},${st},${we}\\)$`),os=new RegExp(`^hsl\\(${we},${st},${st}\\)$`),is=new RegExp(`^hsla\\(${we},${st},${st},${we}\\)$`),zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ze(_e,it,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Yo,formatHex:Yo,formatHex8:as,formatHsl:us,formatRgb:Po,toString:Po});function Yo(){return this.rgb().formatHex()}function as(){return this.rgb().formatHex8()}function us(){return Bo(this).formatHsl()}function Po(){return this.rgb().formatRgb()}function it(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ju.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Ho(e):r===3?new Q(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Qe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Qe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ts.exec(t))?new Q(e[1],e[2],e[3],1):(e=es.exec(t))?new Q(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rs.exec(t))?Qe(e[1],e[2],e[3],e[4]):(e=ns.exec(t))?Qe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=os.exec(t))?qo(e[1],e[2]/100,e[3]/100,1):(e=is.exec(t))?qo(e[1],e[2]/100,e[3]/100,e[4]):zo.hasOwnProperty(t)?Ho(zo[t]):t==="transparent"?new Q(NaN,NaN,NaN,0):null}function Ho(t){return new Q(t>>16&255,t>>8&255,t&255,1)}function Qe(t,e,r,n){return n<=0&&(t=e=r=NaN),new Q(t,e,r,n)}function ss(t){return t instanceof _e||(t=it(t)),t?(t=t.rgb(),new Q(t.r,t.g,t.b,t.opacity)):new Q}function Gt(t,e,r,n){return arguments.length===1?ss(t):new Q(t,e,r,n??1)}function Q(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Ze(Q,Gt,qr(_e,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ve:Math.pow(ve,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Q(It(this.r),It(this.g),It(this.b),Je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lo,formatHex:Lo,formatHex8:fs,formatRgb:Vo,toString:Vo}));function Lo(){return`#${At(this.r)}${At(this.g)}${At(this.b)}`}function fs(){return`#${At(this.r)}${At(this.g)}${At(this.b)}${At((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vo(){let t=Je(this.opacity);return`${t===1?"rgb(":"rgba("}${It(this.r)}, ${It(this.g)}, ${It(this.b)}${t===1?")":`, ${t})`}`}function Je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function It(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function At(t){return t=It(t),(t<16?"0":"")+t.toString(16)}function qo(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ot(t,e,r,n)}function Bo(t){if(t instanceof ot)return new ot(t.h,t.s,t.l,t.opacity);if(t instanceof _e||(t=it(t)),!t)return new ot;if(t instanceof ot)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),i=Math.max(e,r,n),a=NaN,u=i-o,f=(i+o)/2;return u?(e===i?a=(r-n)/u+(r<n)*6:r===i?a=(n-e)/u+2:a=(e-r)/u+4,u/=f<.5?i+o:2-i-o,a*=60):u=f>0&&f<1?0:a,new ot(a,u,f,t.opacity)}function Xo(t,e,r,n){return arguments.length===1?Bo(t):new ot(t,e,r,n??1)}function ot(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Ze(ot,Xo,qr(_e,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new ot(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ve:Math.pow(ve,t),new ot(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new Q(Wr(t>=240?t-240:t+120,o,n),Wr(t,o,n),Wr(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new ot(Wo(this.h),Ge(this.s),Ge(this.l),Je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Je(this.opacity);return`${t===1?"hsl(":"hsla("}${Wo(this.h)}, ${Ge(this.s)*100}%, ${Ge(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Wo(t){return t=(t||0)%360,t<0?t+360:t}function Ge(t){return Math.max(0,Math.min(1,t||0))}function Wr(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function Br(t,e,r,n,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*e+(4-6*i+3*a)*r+(1+3*t+3*i-3*a)*n+a*o)/6}function Zo(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[n],i=t[n+1],a=n>0?t[n-1]:2*o-i,u=n<e-1?t[n+2]:2*i-o;return Br((r-n/e)*e,a,o,i,u)}}function Qo(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),o=t[(n+e-1)%e],i=t[n%e],a=t[(n+1)%e],u=t[(n+2)%e];return Br((r-n/e)*e,o,i,a,u)}}var be=t=>()=>t;function ls(t,e){return function(r){return t+r*e}}function cs(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Go(t){return(t=+t)==1?je:function(e,r){return r-e?cs(e,r,t):be(isNaN(e)?r:e)}}function je(t,e){var r=e-t;return r?ls(t,r):be(isNaN(t)?e:t)}var Nt=function t(e){var r=Go(e);function n(o,i){var a=r((o=Gt(o)).r,(i=Gt(i)).r),u=r(o.g,i.g),f=r(o.b,i.b),s=je(o.opacity,i.opacity);return function(l){return o.r=a(l),o.g=u(l),o.b=f(l),o.opacity=s(l),o+""}}return n.gamma=t,n}(1);function Ko(t){return function(e){var r=e.length,n=new Array(r),o=new Array(r),i=new Array(r),a,u;for(a=0;a<r;++a)u=Gt(e[a]),n[a]=u.r||0,o[a]=u.g||0,i[a]=u.b||0;return n=t(n),o=t(o),i=t(i),u.opacity=1,function(f){return u.r=n(f),u.g=o(f),u.b=i(f),u+""}}}var ms=Ko(Zo),hs=Ko(Qo);function Jo(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(i){for(o=0;o<r;++o)n[o]=t[o]*(1-i)+e[o]*i;return n}}function jo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ti(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),i=new Array(r),a;for(a=0;a<n;++a)o[a]=Et(t[a],e[a]);for(;a<r;++a)i[a]=e[a];return function(u){for(a=0;a<n;++a)i[a]=o[a](u);return i}}function ei(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function L(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function ri(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=Et(t[o],e[o]):n[o]=e[o];return function(i){for(o in r)n[o]=r[o](i);return n}}var Zr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xr=new RegExp(Zr.source,"g");function ps(t){return function(){return t}}function ds(t){return function(e){return t(e)+""}}function Me(t,e){var r=Zr.lastIndex=Xr.lastIndex=0,n,o,i,a=-1,u=[],f=[];for(t=t+"",e=e+"";(n=Zr.exec(t))&&(o=Xr.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(o=o[0])?u[a]?u[a]+=o:u[++a]=o:(u[++a]=null,f.push({i:a,x:L(n,o)})),r=Xr.lastIndex;return r<e.length&&(i=e.slice(r),u[a]?u[a]+=i:u[++a]=i),u.length<2?f[0]?ds(f[0].x):ps(e):(e=f.length,function(s){for(var l=0,m;l<e;++l)u[(m=f[l]).i]=m.x(s);return u.join("")})}function Et(t,e){var r=typeof e,n;return e==null||r==="boolean"?be(e):(r==="number"?L:r==="string"?(n=it(e))?(e=n,Nt):Me:e instanceof it?Nt:e instanceof Date?ei:jo(e)?Jo:Array.isArray(e)?ti:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ri:L)(t,e)}function Qr(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var ni=180/Math.PI,tr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gr(t,e,r,n,o,i){var a,u,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*r+e*n)&&(r-=t*f,n-=e*f),(u=Math.sqrt(r*r+n*n))&&(r/=u,n/=u,f/=u),t*n<e*r&&(t=-t,e=-e,f=-f,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*ni,skewX:Math.atan(f)*ni,scaleX:a,scaleY:u}}var er;function oi(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tr:Gr(e.a,e.b,e.c,e.d,e.e,e.f)}function ii(t){return t==null?tr:(er||(er=document.createElementNS("http://www.w3.org/2000/svg","g")),er.setAttribute("transform",t),(t=er.transform.baseVal.consolidate())?(t=t.matrix,Gr(t.a,t.b,t.c,t.d,t.e,t.f)):tr)}function ai(t,e,r,n){function o(s){return s.length?s.pop()+" ":""}function i(s,l,m,c,h,d){if(s!==m||l!==c){var w=h.push("translate(",null,e,null,r);d.push({i:w-4,x:L(s,m)},{i:w-2,x:L(l,c)})}else(m||c)&&h.push("translate("+m+e+c+r)}function a(s,l,m,c){s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),c.push({i:m.push(o(m)+"rotate(",null,n)-2,x:L(s,l)})):l&&m.push(o(m)+"rotate("+l+n)}function u(s,l,m,c){s!==l?c.push({i:m.push(o(m)+"skewX(",null,n)-2,x:L(s,l)}):l&&m.push(o(m)+"skewX("+l+n)}function f(s,l,m,c,h,d){if(s!==m||l!==c){var w=h.push(o(h)+"scale(",null,",",null,")");d.push({i:w-4,x:L(s,m)},{i:w-2,x:L(l,c)})}else(m!==1||c!==1)&&h.push(o(h)+"scale("+m+","+c+")")}return function(s,l){var m=[],c=[];return s=t(s),l=t(l),i(s.translateX,s.translateY,l.translateX,l.translateY,m,c),a(s.rotate,l.rotate,m,c),u(s.skewX,l.skewX,m,c),f(s.scaleX,s.scaleY,l.scaleX,l.scaleY,m,c),s=l=null,function(h){for(var d=-1,w=c.length,D;++d<w;)m[(D=c[d]).i]=D.x(h);return m.join("")}}}var Kr=ai(oi,"px, ","px)","deg)"),Jr=ai(ii,", ",")",")");function jr(t){return function(){return t}}function tn(t){return+t}var ui=[0,1];function Kt(t){return t}function en(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:jr(isNaN(e)?NaN:.5)}function xs(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function gs(t,e,r){var n=t[0],o=t[1],i=e[0],a=e[1];return o<n?(n=en(o,n),i=r(a,i)):(n=en(n,o),i=r(i,a)),function(u){return i(n(u))}}function ys(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),i=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)o[a]=en(t[a],t[a+1]),i[a]=r(e[a],e[a+1]);return function(u){var f=Fr(t,u,1,n)-1;return i[f](o[f](u))}}function rr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vs(){var t=ui,e=ui,r=Et,n,o,i,a=Kt,u,f,s;function l(){var c=Math.min(t.length,e.length);return a!==Kt&&(a=xs(t[0],t[c-1])),u=c>2?ys:gs,f=s=null,m}function m(c){return c==null||isNaN(c=+c)?i:(f||(f=u(t.map(n),e,r)))(n(a(c)))}return m.invert=function(c){return a(o((s||(s=u(e,t.map(n),L)))(c)))},m.domain=function(c){return arguments.length?(t=Array.from(c,tn),l()):t.slice()},m.range=function(c){return arguments.length?(e=Array.from(c),l()):e.slice()},m.rangeRound=function(c){return e=Array.from(c),r=Qr,l()},m.clamp=function(c){return arguments.length?(a=c?!0:Kt,l()):a!==Kt},m.interpolate=function(c){return arguments.length?(r=c,l()):r},m.unknown=function(c){return arguments.length?(i=c,m):i},function(c,h){return n=c,o=h,l()}}function Te(){return vs()(Kt,Kt)}function nr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function si(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ut(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function ft(t){return t=Ut(Math.abs(t)),t?t[1]:NaN}function fi(t,e){return function(r,n){for(var o=r.length,i=[],a=0,u=t[0],f=0;o>0&&u>0&&(f+u+1>n&&(u=Math.max(1,n-f)),i.push(r.substring(o-=u,o+u)),!((f+=u+1)>n));)u=t[a=(a+1)%t.length];return i.reverse().join(e)}}function li(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ws=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yt(t){if(!(e=ws.exec(t)))throw new Error("invalid format: "+t);var e;return new or({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}yt.prototype=or.prototype;function or(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}or.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ci(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var rn;function mi(t,e){var r=Ut(t,e);if(!r)return t+"";var n=r[0],o=r[1],i=o-(rn=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=n.length;return i===a?n:i>a?n+new Array(i-a+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ut(t,Math.max(0,e+i-1))[0]}function nn(t,e){var r=Ut(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var on={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:si,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nn(t*100,e),r:nn,s:mi,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function an(t){return t}var hi=Array.prototype.map,pi=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function di(t){var e=t.grouping===void 0||t.thousands===void 0?an:fi(hi.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?an:li(hi.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"\u2212":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(m){m=yt(m);var c=m.fill,h=m.align,d=m.sign,w=m.symbol,D=m.zero,b=m.width,C=m.comma,_=m.precision,M=m.trim,T=m.type;T==="n"?(C=!0,T="g"):on[T]||(_===void 0&&(_=12),M=!0,T="g"),(D||c==="0"&&h==="=")&&(D=!0,c="0",h="=");var g=w==="$"?r:w==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",A=w==="$"?n:/[%p]/.test(T)?a:"",z=on[T],H=/[defgprs%]/.test(T);_=_===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(v){var E=g,y=A,k,et,rt;if(T==="c")y=z(v)+y,v="";else{v=+v;var G=v<0||1/v<0;if(v=isNaN(v)?f:z(Math.abs(v),_),M&&(v=ci(v)),G&&+v==0&&d!=="+"&&(G=!1),E=(G?d==="("?d:u:d==="-"||d==="("?"":d)+E,y=(T==="s"?pi[8+rn/3]:"")+y+(G&&d==="("?")":""),H){for(k=-1,et=v.length;++k<et;)if(rt=v.charCodeAt(k),48>rt||rt>57){y=(rt===46?o+v.slice(k+1):v.slice(k))+y,v=v.slice(0,k);break}}}C&&!D&&(v=e(v,1/0));var K=E.length+v.length+y.length,W=K<b?new Array(b-K+1).join(c):"";switch(C&&D&&(v=e(W+v,W.length?b-y.length:1/0),W=""),h){case"<":v=E+v+y+W;break;case"=":v=E+W+v+y;break;case"^":v=W.slice(0,K=W.length>>1)+E+v+y+W.slice(K);break;default:v=W+E+v+y;break}return i(v)}return R.toString=function(){return m+""},R}function l(m,c){var h=s((m=yt(m),m.type="f",m)),d=Math.max(-8,Math.min(8,Math.floor(ft(c)/3)))*3,w=Math.pow(10,-d),D=pi[8+d/3];return function(b){return h(w*b)+D}}return{format:s,formatPrefix:l}}var ir,ar,ur;un({thousands:",",grouping:[3],currency:["$",""]});function un(t){return ir=di(t),ar=ir.format,ur=ir.formatPrefix,ir}function sn(t){return Math.max(0,-ft(Math.abs(t)))}function fn(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ft(e)/3)))*3-ft(Math.abs(t)))}function ln(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ft(e)-ft(t))+1}function cn(t,e,r,n){var o=Zt(t,e,r),i;switch(n=yt(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=fn(o,a))&&(n.precision=i),ur(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=ln(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=sn(o))&&(n.precision=i-(n.type==="%")*2);break}}return ar(n)}function _s(t){var e=t.domain;return t.ticks=function(r){var n=e();return Le(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return cn(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,i=n.length-1,a=n[o],u=n[i],f,s,l=10;for(u<a&&(s=a,a=u,u=s,s=o,o=i,i=s);l-- >0;){if(s=pe(a,u,r),s===f)return n[o]=a,n[i]=u,e(n);if(s>0)a=Math.floor(a/s)*s,u=Math.ceil(u/s)*s;else if(s<0)a=Math.ceil(a*s)/s,u=Math.floor(u*s)/s;else break;f=s}return t},t}function mn(){var t=Te();return t.copy=function(){return rr(t,mn())},nr.apply(t,arguments),_s(t)}var hn=new Date,pn=new Date;function U(t,e,r,n){function o(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(t(i=new Date(+i)),i),o.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),o.round=i=>{let a=o(i),u=o.ceil(i);return i-a<u-i?a:u},o.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),o.range=(i,a,u)=>{let f=[];if(i=o.ceil(i),u=u==null?1:Math.floor(u),!(i<a)||!(u>0))return f;let s;do f.push(s=new Date(+i)),e(i,u),t(i);while(s<i&&i<a);return f},o.filter=i=>U(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;e(a,-1),!i(a););else for(;--u>=0;)for(;e(a,1),!i(a););}),r&&(o.count=(i,a)=>(hn.setTime(+i),pn.setTime(+a),t(hn),t(pn),Math.floor(r(hn,pn))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(n?a=>n(a)%i===0:a=>o.count(0,a)%i===0):o)),o}var Se=U(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Se.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?U(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Se);var Vd=Se.range;var lt=U(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),xi=lt.range;var Jt=U(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),bs=Jt.range,sr=U(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),Ms=sr.range;var jt=U(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),Ts=jt.range,fr=U(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),Ss=fr.range;var pt=U(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),ks=pt.range,De=U(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),Ds=De.range,lr=U(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),Cs=lr.range;function Ft(t){return U(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var dt=Ft(0),te=Ft(1),yi=Ft(2),vi=Ft(3),vt=Ft(4),wi=Ft(5),_i=Ft(6),bi=dt.range,As=te.range,Is=yi.range,Ns=vi.range,Es=vt.range,Us=wi.range,$s=_i.range;function Rt(t){return U(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var zt=Rt(0),ee=Rt(1),Mi=Rt(2),Ti=Rt(3),wt=Rt(4),Si=Rt(5),ki=Rt(6),Di=zt.range,Os=ee.range,Fs=Mi.range,Rs=Ti.range,zs=wt.range,Ys=Si.range,Ps=ki.range;var re=U(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),Hs=re.range,cr=U(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),Ls=cr.range;var tt=U(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());tt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:U(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var Vs=tt.range,at=U(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());at.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:U(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var qs=at.range;function Ai(t,e,r,n,o,i){let a=[[lt,1,1e3],[lt,5,5*1e3],[lt,15,15*1e3],[lt,30,30*1e3],[i,1,6e4],[i,5,5*6e4],[i,15,15*6e4],[i,30,30*6e4],[o,1,36e5],[o,3,3*36e5],[o,6,6*36e5],[o,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function u(s,l,m){let c=l<s;c&&([s,l]=[l,s]);let h=m&&typeof m.range=="function"?m:f(s,l,m),d=h?h.range(s,+l+1):[];return c?d.reverse():d}function f(s,l,m){let c=Math.abs(l-s)/m,h=Dt(([,,D])=>D).right(a,c);if(h===a.length)return t.every(Zt(s/31536e6,l/31536e6,m));if(h===0)return Se.every(Math.max(Zt(s,l,m),1));let[d,w]=a[c/a[h-1][2]<a[h][2]/c?h-1:h];return d.every(w)}return[u,f]}var[Bs,Xs]=Ai(at,cr,zt,lr,fr,sr),[dn,xn]=Ai(tt,re,dt,pt,jt,Jt);function gn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function yn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ce(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function vn(t){var e=t.dateTime,r=t.date,n=t.time,o=t.periods,i=t.days,a=t.shortDays,u=t.months,f=t.shortMonths,s=Ae(o),l=Ie(o),m=Ae(i),c=Ie(i),h=Ae(a),d=Ie(a),w=Ae(u),D=Ie(u),b=Ae(f),C=Ie(f),_={a:G,A:K,b:W,B:Vt,c:null,d:Oi,e:Oi,f:gf,g:Df,G:Af,H:pf,I:df,j:xf,L:Pi,m:yf,M:vf,p:qt,q:Wt,Q:zi,s:Yi,S:wf,u:_f,U:bf,V:Mf,w:Tf,W:Sf,x:null,X:null,y:kf,Y:Cf,Z:If,"%":Ri},M={a:se,A:fe,b:nt,B:le,c:null,d:Fi,e:Fi,f:$f,g:qf,G:Bf,H:Nf,I:Ef,j:Uf,L:Li,m:Of,M:Ff,p:ce,q:me,Q:zi,s:Yi,S:Rf,u:zf,U:Yf,V:Pf,w:Hf,W:Lf,x:null,X:null,y:Vf,Y:Wf,Z:Xf,"%":Ri},T={a:R,A:v,b:E,B:y,c:k,d:Ui,e:Ui,f:lf,g:Ei,G:Ni,H:$i,I:$i,j:af,L:ff,m:of,M:uf,p:H,q:nf,Q:mf,s:hf,S:sf,u:Js,U:js,V:tf,w:Ks,W:ef,x:et,X:rt,y:Ei,Y:Ni,Z:rf,"%":cf};_.x=g(r,_),_.X=g(n,_),_.c=g(e,_),M.x=g(r,M),M.X=g(n,M),M.c=g(e,M);function g(x,S){return function(I){var p=[],Z=-1,$=0,J=x.length,j,Tt,En;for(I instanceof Date||(I=new Date(+I));++Z<J;)x.charCodeAt(Z)===37&&(p.push(x.slice($,Z)),(Tt=Ii[j=x.charAt(++Z)])!=null?j=x.charAt(++Z):Tt=j==="e"?" ":"0",(En=S[j])&&(j=En(I,Tt)),p.push(j),$=Z+1);return p.push(x.slice($,Z)),p.join("")}}function A(x,S){return function(I){var p=Ce(1900,void 0,1),Z=z(p,x,I+="",0),$,J;if(Z!=I.length)return null;if("Q"in p)return new Date(p.Q);if("s"in p)return new Date(p.s*1e3+("L"in p?p.L:0));if(S&&!("Z"in p)&&(p.Z=0),"p"in p&&(p.H=p.H%12+p.p*12),p.m===void 0&&(p.m="q"in p?p.q:0),"V"in p){if(p.V<1||p.V>53)return null;"w"in p||(p.w=1),"Z"in p?($=yn(Ce(p.y,0,1)),J=$.getUTCDay(),$=J>4||J===0?ee.ceil($):ee($),$=De.offset($,(p.V-1)*7),p.y=$.getUTCFullYear(),p.m=$.getUTCMonth(),p.d=$.getUTCDate()+(p.w+6)%7):($=gn(Ce(p.y,0,1)),J=$.getDay(),$=J>4||J===0?te.ceil($):te($),$=pt.offset($,(p.V-1)*7),p.y=$.getFullYear(),p.m=$.getMonth(),p.d=$.getDate()+(p.w+6)%7)}else("W"in p||"U"in p)&&("w"in p||(p.w="u"in p?p.u%7:"W"in p?1:0),J="Z"in p?yn(Ce(p.y,0,1)).getUTCDay():gn(Ce(p.y,0,1)).getDay(),p.m=0,p.d="W"in p?(p.w+6)%7+p.W*7-(J+5)%7:p.w+p.U*7-(J+6)%7);return"Z"in p?(p.H+=p.Z/100|0,p.M+=p.Z%100,yn(p)):gn(p)}}function z(x,S,I,p){for(var Z=0,$=S.length,J=I.length,j,Tt;Z<$;){if(p>=J)return-1;if(j=S.charCodeAt(Z++),j===37){if(j=S.charAt(Z++),Tt=T[j in Ii?S.charAt(Z++):j],!Tt||(p=Tt(x,I,p))<0)return-1}else if(j!=I.charCodeAt(p++))return-1}return p}function H(x,S,I){var p=s.exec(S.slice(I));return p?(x.p=l.get(p[0].toLowerCase()),I+p[0].length):-1}function R(x,S,I){var p=h.exec(S.slice(I));return p?(x.w=d.get(p[0].toLowerCase()),I+p[0].length):-1}function v(x,S,I){var p=m.exec(S.slice(I));return p?(x.w=c.get(p[0].toLowerCase()),I+p[0].length):-1}function E(x,S,I){var p=b.exec(S.slice(I));return p?(x.m=C.get(p[0].toLowerCase()),I+p[0].length):-1}function y(x,S,I){var p=w.exec(S.slice(I));return p?(x.m=D.get(p[0].toLowerCase()),I+p[0].length):-1}function k(x,S,I){return z(x,e,S,I)}function et(x,S,I){return z(x,r,S,I)}function rt(x,S,I){return z(x,n,S,I)}function G(x){return a[x.getDay()]}function K(x){return i[x.getDay()]}function W(x){return f[x.getMonth()]}function Vt(x){return u[x.getMonth()]}function qt(x){return o[+(x.getHours()>=12)]}function Wt(x){return 1+~~(x.getMonth()/3)}function se(x){return a[x.getUTCDay()]}function fe(x){return i[x.getUTCDay()]}function nt(x){return f[x.getUTCMonth()]}function le(x){return u[x.getUTCMonth()]}function ce(x){return o[+(x.getUTCHours()>=12)]}function me(x){return 1+~~(x.getUTCMonth()/3)}return{format:function(x){var S=g(x+="",_);return S.toString=function(){return x},S},parse:function(x){var S=A(x+="",!1);return S.toString=function(){return x},S},utcFormat:function(x){var S=g(x+="",M);return S.toString=function(){return x},S},utcParse:function(x){var S=A(x+="",!0);return S.toString=function(){return x},S}}}var Ii={"-":"",_:" ",0:"0"},P=/^\s*\d+/,Zs=/^%/,Qs=/[\\^$*+?|[\]().{}]/g;function N(t,e,r){var n=t<0?"-":"",o=(n?-t:t)+"",i=o.length;return n+(i<r?new Array(r-i+1).join(e)+o:o)}function Gs(t){return t.replace(Qs,"\\$&")}function Ae(t){return new RegExp("^(?:"+t.map(Gs).join("|")+")","i")}function Ie(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Ks(t,e,r){var n=P.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Js(t,e,r){var n=P.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function js(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function tf(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function ef(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Ni(t,e,r){var n=P.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Ei(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function rf(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function nf(t,e,r){var n=P.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function of(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Ui(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function af(t,e,r){var n=P.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function $i(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function uf(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function sf(t,e,r){var n=P.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function ff(t,e,r){var n=P.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function lf(t,e,r){var n=P.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function cf(t,e,r){var n=Zs.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function mf(t,e,r){var n=P.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function hf(t,e,r){var n=P.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Oi(t,e){return N(t.getDate(),e,2)}function pf(t,e){return N(t.getHours(),e,2)}function df(t,e){return N(t.getHours()%12||12,e,2)}function xf(t,e){return N(1+pt.count(tt(t),t),e,3)}function Pi(t,e){return N(t.getMilliseconds(),e,3)}function gf(t,e){return Pi(t,e)+"000"}function yf(t,e){return N(t.getMonth()+1,e,2)}function vf(t,e){return N(t.getMinutes(),e,2)}function wf(t,e){return N(t.getSeconds(),e,2)}function _f(t){var e=t.getDay();return e===0?7:e}function bf(t,e){return N(dt.count(tt(t)-1,t),e,2)}function Hi(t){var e=t.getDay();return e>=4||e===0?vt(t):vt.ceil(t)}function Mf(t,e){return t=Hi(t),N(vt.count(tt(t),t)+(tt(t).getDay()===4),e,2)}function Tf(t){return t.getDay()}function Sf(t,e){return N(te.count(tt(t)-1,t),e,2)}function kf(t,e){return N(t.getFullYear()%100,e,2)}function Df(t,e){return t=Hi(t),N(t.getFullYear()%100,e,2)}function Cf(t,e){return N(t.getFullYear()%1e4,e,4)}function Af(t,e){var r=t.getDay();return t=r>=4||r===0?vt(t):vt.ceil(t),N(t.getFullYear()%1e4,e,4)}function If(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+N(e/60|0,"0",2)+N(e%60,"0",2)}function Fi(t,e){return N(t.getUTCDate(),e,2)}function Nf(t,e){return N(t.getUTCHours(),e,2)}function Ef(t,e){return N(t.getUTCHours()%12||12,e,2)}function Uf(t,e){return N(1+De.count(at(t),t),e,3)}function Li(t,e){return N(t.getUTCMilliseconds(),e,3)}function $f(t,e){return Li(t,e)+"000"}function Of(t,e){return N(t.getUTCMonth()+1,e,2)}function Ff(t,e){return N(t.getUTCMinutes(),e,2)}function Rf(t,e){return N(t.getUTCSeconds(),e,2)}function zf(t){var e=t.getUTCDay();return e===0?7:e}function Yf(t,e){return N(zt.count(at(t)-1,t),e,2)}function Vi(t){var e=t.getUTCDay();return e>=4||e===0?wt(t):wt.ceil(t)}function Pf(t,e){return t=Vi(t),N(wt.count(at(t),t)+(at(t).getUTCDay()===4),e,2)}function Hf(t){return t.getUTCDay()}function Lf(t,e){return N(ee.count(at(t)-1,t),e,2)}function Vf(t,e){return N(t.getUTCFullYear()%100,e,2)}function qf(t,e){return t=Vi(t),N(t.getUTCFullYear()%100,e,2)}function Wf(t,e){return N(t.getUTCFullYear()%1e4,e,4)}function Bf(t,e){var r=t.getUTCDay();return t=r>=4||r===0?wt(t):wt.ceil(t),N(t.getUTCFullYear()%1e4,e,4)}function Xf(){return"+0000"}function Ri(){return"%"}function zi(t){return+t}function Yi(t){return Math.floor(+t/1e3)}var ne,mr,qi,Wi,Bi;wn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wn(t){return ne=vn(t),mr=ne.format,qi=ne.parse,Wi=ne.utcFormat,Bi=ne.utcParse,ne}function _n(t,e){t=t.slice();var r=0,n=t.length-1,o=t[r],i=t[n],a;return i<o&&(a=r,r=n,n=a,a=o,o=i,i=a),t[r]=e.floor(o),t[n]=e.ceil(i),t}function Zf(t){return new Date(t)}function Qf(t){return t instanceof Date?+t:+new Date(+t)}function Xi(t,e,r,n,o,i,a,u,f,s){var l=Te(),m=l.invert,c=l.domain,h=s(".%L"),d=s(":%S"),w=s("%I:%M"),D=s("%I %p"),b=s("%a %d"),C=s("%b %d"),_=s("%B"),M=s("%Y");function T(g){return(f(g)<g?h:u(g)<g?d:a(g)<g?w:i(g)<g?D:n(g)<g?o(g)<g?b:C:r(g)<g?_:M)(g)}return l.invert=function(g){return new Date(m(g))},l.domain=function(g){return arguments.length?c(Array.from(g,Qf)):c().map(Zf)},l.ticks=function(g){var A=c();return t(A[0],A[A.length-1],g??10)},l.tickFormat=function(g,A){return A==null?T:s(A)},l.nice=function(g){var A=c();return(!g||typeof g.range!="function")&&(g=e(A[0],A[A.length-1],g??10)),g?c(_n(A,g)):l},l.copy=function(){return rr(l,Xi(t,e,r,n,o,i,a,u,f,s))},l}function Zi(){return nr.apply(Xi(dn,xn,tt,re,dt,pt,jt,Jt,lt,mr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function O(t){return function(){return t}}var bn=Math.abs,V=Math.atan2,_t=Math.cos,Qi=Math.max,hr=Math.min,ut=Math.sin,Yt=Math.sqrt,B=1e-12,oe=Math.PI,Ne=oe/2,ie=2*oe;function Gi(t){return t>1?0:t<-1?oe:Math.acos(t)}function Mn(t){return t>=1?Ne:t<=-1?-Ne:Math.asin(t)}var Tn=Math.PI,Sn=2*Tn,Pt=1e-6,Gf=Sn-Pt;function Ki(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Kf(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ki;let r=10**e;return function(n){this._+=n[0];for(let o=1,i=n.length;o<i;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var Ht=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ki:Kf(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,o){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(e,r,n,o,i,a){this._append`C${+e},${+r},${+n},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(e,r,n,o,i){if(e=+e,r=+r,n=+n,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,u=this._y1,f=n-e,s=o-r,l=a-e,m=u-r,c=l*l+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>Pt)if(!(Math.abs(m*f-s*l)>Pt)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-a,d=o-u,w=f*f+s*s,D=h*h+d*d,b=Math.sqrt(w),C=Math.sqrt(c),_=i*Math.tan((Tn-Math.acos((w+c-D)/(2*b*C)))/2),M=_/C,T=_/b;Math.abs(M-1)>Pt&&this._append`L${e+M*l},${r+M*m}`,this._append`A${i},${i},0,0,${+(m*h>l*d)},${this._x1=e+T*f},${this._y1=r+T*s}`}}arc(e,r,n,o,i,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(o),f=n*Math.sin(o),s=e+u,l=r+f,m=1^a,c=a?o-i:i-o;this._x1===null?this._append`M${s},${l}`:(Math.abs(this._x1-s)>Pt||Math.abs(this._y1-l)>Pt)&&this._append`L${s},${l}`,n&&(c<0&&(c=c%Sn+Sn),c>Gf?this._append`A${n},${n},0,1,${m},${e-u},${r-f}A${n},${n},0,1,${m},${this._x1=s},${this._y1=l}`:c>Pt&&this._append`A${n},${n},0,${+(c>=Tn)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function Ji(){return new Ht}Ji.prototype=Ht.prototype;function pr(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Ht(e)}function Jf(t){return t.innerRadius}function jf(t){return t.outerRadius}function tl(t){return t.startAngle}function el(t){return t.endAngle}function rl(t){return t&&t.padAngle}function nl(t,e,r,n,o,i,a,u){var f=r-t,s=n-e,l=a-o,m=u-i,c=m*f-l*s;if(!(c*c<B))return c=(l*(e-i)-m*(t-o))/c,[t+c*f,e+c*s]}function dr(t,e,r,n,o,i,a){var u=t-r,f=e-n,s=(a?i:-i)/Yt(u*u+f*f),l=s*f,m=-s*u,c=t+l,h=e+m,d=r+l,w=n+m,D=(c+d)/2,b=(h+w)/2,C=d-c,_=w-h,M=C*C+_*_,T=o-i,g=c*w-d*h,A=(_<0?-1:1)*Yt(Qi(0,T*T*M-g*g)),z=(g*_-C*A)/M,H=(-g*C-_*A)/M,R=(g*_+C*A)/M,v=(-g*C+_*A)/M,E=z-D,y=H-b,k=R-D,et=v-b;return E*E+y*y>k*k+et*et&&(z=R,H=v),{cx:z,cy:H,x01:-l,y01:-m,x11:z*(o/T-1),y11:H*(o/T-1)}}function ol(){var t=Jf,e=jf,r=O(0),n=null,o=tl,i=el,a=rl,u=null,f=pr(s);function s(){var l,m,c=+t.apply(this,arguments),h=+e.apply(this,arguments),d=o.apply(this,arguments)-Ne,w=i.apply(this,arguments)-Ne,D=bn(w-d),b=w>d;if(u||(u=l=f()),h<c&&(m=h,h=c,c=m),!(h>B))u.moveTo(0,0);else if(D>ie-B)u.moveTo(h*_t(d),h*ut(d)),u.arc(0,0,h,d,w,!b),c>B&&(u.moveTo(c*_t(w),c*ut(w)),u.arc(0,0,c,w,d,b));else{var C=d,_=w,M=d,T=w,g=D,A=D,z=a.apply(this,arguments)/2,H=z>B&&(n?+n.apply(this,arguments):Yt(c*c+h*h)),R=hr(bn(h-c)/2,+r.apply(this,arguments)),v=R,E=R,y,k;if(H>B){var et=Mn(H/c*ut(z)),rt=Mn(H/h*ut(z));(g-=et*2)>B?(et*=b?1:-1,M+=et,T-=et):(g=0,M=T=(d+w)/2),(A-=rt*2)>B?(rt*=b?1:-1,C+=rt,_-=rt):(A=0,C=_=(d+w)/2)}var G=h*_t(C),K=h*ut(C),W=c*_t(T),Vt=c*ut(T);if(R>B){var qt=h*_t(_),Wt=h*ut(_),se=c*_t(M),fe=c*ut(M),nt;if(D<oe)if(nt=nl(G,K,se,fe,qt,Wt,W,Vt)){var le=G-nt[0],ce=K-nt[1],me=qt-nt[0],x=Wt-nt[1],S=1/ut(Gi((le*me+ce*x)/(Yt(le*le+ce*ce)*Yt(me*me+x*x)))/2),I=Yt(nt[0]*nt[0]+nt[1]*nt[1]);v=hr(R,(c-I)/(S-1)),E=hr(R,(h-I)/(S+1))}else v=E=0}A>B?E>B?(y=dr(se,fe,G,K,h,E,b),k=dr(qt,Wt,W,Vt,h,E,b),u.moveTo(y.cx+y.x01,y.cy+y.y01),E<R?u.arc(y.cx,y.cy,E,V(y.y01,y.x01),V(k.y01,k.x01),!b):(u.arc(y.cx,y.cy,E,V(y.y01,y.x01),V(y.y11,y.x11),!b),u.arc(0,0,h,V(y.cy+y.y11,y.cx+y.x11),V(k.cy+k.y11,k.cx+k.x11),!b),u.arc(k.cx,k.cy,E,V(k.y11,k.x11),V(k.y01,k.x01),!b))):(u.moveTo(G,K),u.arc(0,0,h,C,_,!b)):u.moveTo(G,K),!(c>B)||!(g>B)?u.lineTo(W,Vt):v>B?(y=dr(W,Vt,qt,Wt,c,-v,b),k=dr(G,K,se,fe,c,-v,b),u.lineTo(y.cx+y.x01,y.cy+y.y01),v<R?u.arc(y.cx,y.cy,v,V(y.y01,y.x01),V(k.y01,k.x01),!b):(u.arc(y.cx,y.cy,v,V(y.y01,y.x01),V(y.y11,y.x11),!b),u.arc(0,0,c,V(y.cy+y.y11,y.cx+y.x11),V(k.cy+k.y11,k.cx+k.x11),b),u.arc(k.cx,k.cy,v,V(k.y11,k.x11),V(k.y01,k.x01),!b))):u.arc(0,0,c,T,M,b)}if(u.closePath(),l)return u=null,l+""||null}return s.centroid=function(){var l=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,m=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-oe/2;return[_t(m)*l,ut(m)*l]},s.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:O(+l),s):t},s.outerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:O(+l),s):e},s.cornerRadius=function(l){return arguments.length?(r=typeof l=="function"?l:O(+l),s):r},s.padRadius=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:O(+l),s):n},s.startAngle=function(l){return arguments.length?(o=typeof l=="function"?l:O(+l),s):o},s.endAngle=function(l){return arguments.length?(i=typeof l=="function"?l:O(+l),s):i},s.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:O(+l),s):a},s.context=function(l){return arguments.length?(u=l??null,s):u},s}var J0=Array.prototype.slice;function xr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ji(t){this._context=t}ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ta(t){return new ji(t)}function ea(t){return t[0]}function ra(t){return t[1]}function il(t,e){var r=O(!0),n=null,o=ta,i=null,a=pr(u);t=typeof t=="function"?t:t===void 0?ea:O(t),e=typeof e=="function"?e:e===void 0?ra:O(e);function u(f){var s,l=(f=xr(f)).length,m,c=!1,h;for(n==null&&(i=o(h=a())),s=0;s<=l;++s)!(s<l&&r(m=f[s],s,f))===c&&((c=!c)?i.lineStart():i.lineEnd()),c&&i.point(+t(m,s,f),+e(m,s,f));if(h)return i=null,h+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:O(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:O(+f),u):e},u.defined=function(f){return arguments.length?(r=typeof f=="function"?f:O(!!f),u):r},u.curve=function(f){return arguments.length?(o=f,n!=null&&(i=o(n)),u):o},u.context=function(f){return arguments.length?(f==null?n=i=null:i=o(n=f),u):n},u}function na(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function oa(t){return t}function al(){var t=oa,e=na,r=null,n=O(0),o=O(ie),i=O(0);function a(u){var f,s=(u=xr(u)).length,l,m,c=0,h=new Array(s),d=new Array(s),w=+n.apply(this,arguments),D=Math.min(ie,Math.max(-ie,o.apply(this,arguments)-w)),b,C=Math.min(Math.abs(D)/s,i.apply(this,arguments)),_=C*(D<0?-1:1),M;for(f=0;f<s;++f)(M=d[h[f]=f]=+t(u[f],f,u))>0&&(c+=M);for(e!=null?h.sort(function(T,g){return e(d[T],d[g])}):r!=null&&h.sort(function(T,g){return r(u[T],u[g])}),f=0,m=c?(D-s*_)/c:0;f<s;++f,w=b)l=h[f],M=d[l],b=w+(M>0?M*m:0)+_,d[l]={data:u[l],index:f,value:M,startAngle:w,endAngle:b,padAngle:C};return d}return a.value=function(u){return arguments.length?(t=typeof u=="function"?u:O(+u),a):t},a.sortValues=function(u){return arguments.length?(e=u,r=null,a):e},a.sort=function(u){return arguments.length?(r=u,e=null,a):r},a.startAngle=function(u){return arguments.length?(n=typeof u=="function"?u:O(+u),a):n},a.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:O(+u),a):o},a.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:O(+u),a):i},a}function ia(t){return t<0?-1:1}function aa(t,e,r){var n=t._x1-t._x0,o=e-t._x1,i=(t._y1-t._y0)/(n||o<0&&-0),a=(r-t._y1)/(o||n<0&&-0),u=(i*o+a*n)/(n+o);return(ia(i)+ia(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(u))||0}function ua(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function kn(t,e,r){var n=t._x0,o=t._y0,i=t._x1,a=t._y1,u=(i-n)/3;t._context.bezierCurveTo(n+u,o+u*e,i-u,a-u*r,i,a)}function gr(t){this._context=t}gr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kn(this,this._t0,ua(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kn(this,ua(this,r=aa(this,t,e)),r);break;default:kn(this,this._t0,r=aa(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function ul(t){this._context=new sa(t)}(ul.prototype=Object.create(gr.prototype)).point=function(t,e){gr.prototype.point.call(this,e,t)};function sa(t){this._context=t}sa.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,o,i){this._context.bezierCurveTo(e,t,n,r,i,o)}};function sl(t){return new gr(t)}var fl={value:()=>{}};function la(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new yr(r)}function yr(t){this._=t}function ll(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}yr.prototype=la.prototype={constructor:yr,on:function(t,e){var r=this._,n=ll(t+"",r),o,i=-1,a=n.length;if(arguments.length<2){for(;++i<a;)if((o=(t=n[i]).type)&&(o=cl(r[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<a;)if(o=(t=n[i]).type)r[o]=fa(r[o],t.name,e);else if(e==null)for(o in r)r[o]=fa(r[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new yr(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],n=0,o=i.length;n<o;++n)i[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};function cl(t,e){for(var r=0,n=t.length,o;r<n;++r)if((o=t[r]).name===e)return o.value}function fa(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=fl,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var Dn=la;var ae=0,Ue=0,Ee=0,ma=1e3,vr,$e,wr=0,Lt=0,_r=0,Oe=typeof performance=="object"&&performance.now?performance:Date,ha=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Re(){return Lt||(ha(ml),Lt=Oe.now()+_r)}function ml(){Lt=0}function Fe(){this._call=this._time=this._next=null}Fe.prototype=br.prototype={constructor:Fe,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?Re():+r)+(e==null?0:+e),!this._next&&$e!==this&&($e?$e._next=this:vr=this,$e=this),this._call=t,this._time=r,Cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cn())}};function br(t,e,r){var n=new Fe;return n.restart(t,e,r),n}function pa(){Re(),++ae;for(var t=vr,e;t;)(e=Lt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ae}function ca(){Lt=(wr=Oe.now())+_r,ae=Ue=0;try{pa()}finally{ae=0,pl(),Lt=0}}function hl(){var t=Oe.now(),e=t-wr;e>ma&&(_r-=e,wr=t)}function pl(){for(var t,e=vr,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:vr=r);$e=t,Cn(n)}function Cn(t){if(!ae){Ue&&(Ue=clearTimeout(Ue));var e=t-Lt;e>24?(t<1/0&&(Ue=setTimeout(ca,t-Oe.now()-_r)),Ee&&(Ee=clearInterval(Ee))):(Ee||(wr=Oe.now(),Ee=setInterval(hl,ma)),ae=1,ha(ca))}}function Mr(t,e,r){var n=new Fe;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,r),n}var dl=Dn("start","end","cancel","interrupt"),xl=[],ga=0,da=1,Sr=2,Tr=3,xa=4,kr=5,ze=6;function bt(t,e,r,n,o,i){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;gl(t,r,{name:e,index:n,group:o,on:dl,tween:xl,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ga})}function Ye(t,e){var r=Y(t,e);if(r.state>ga)throw new Error("too late; already scheduled");return r}function q(t,e){var r=Y(t,e);if(r.state>Tr)throw new Error("too late; already running");return r}function Y(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function gl(t,e,r){var n=t.__transition,o;n[e]=r,r.timer=br(i,0,r.time);function i(s){r.state=da,r.timer.restart(a,r.delay,r.time),r.delay<=s&&a(s-r.delay)}function a(s){var l,m,c,h;if(r.state!==da)return f();for(l in n)if(h=n[l],h.name===r.name){if(h.state===Tr)return Mr(a);h.state===xa?(h.state=ze,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[l]):+l<e&&(h.state=ze,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[l])}if(Mr(function(){r.state===Tr&&(r.state=xa,r.timer.restart(u,r.delay,r.time),u(s))}),r.state=Sr,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Sr){for(r.state=Tr,o=new Array(c=r.tween.length),l=0,m=-1;l<c;++l)(h=r.tween[l].value.call(t,t.__data__,r.index,r.group))&&(o[++m]=h);o.length=m+1}}function u(s){for(var l=s<r.duration?r.ease.call(null,s/r.duration):(r.timer.restart(f),r.state=kr,1),m=-1,c=o.length;++m<c;)o[m].call(t,l);r.state===kr&&(r.on.call("end",t,t.__data__,r.index,r.group),f())}function f(){r.state=ze,r.timer.stop(),delete n[e];for(var s in n)return;delete t.__transition}}function Dr(t,e){var r=t.__transition,n,o,i=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){i=!1;continue}o=n.state>Sr&&n.state<kr,n.state=ze,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}i&&delete t.__transition}}function ya(t){return this.each(function(){Dr(this,t)})}function yl(t,e){var r,n;return function(){var o=q(this,t),i=o.tween;if(i!==r){n=r=i;for(var a=0,u=n.length;a<u;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}o.tween=n}}function vl(t,e,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=q(this,t),a=i.tween;if(a!==n){o=(n=a).slice();for(var u={name:e,value:r},f=0,s=o.length;f<s;++f)if(o[f].name===e){o[f]=u;break}f===s&&o.push(u)}i.tween=o}}function va(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Y(this.node(),r).tween,o=0,i=n.length,a;o<i;++o)if((a=n[o]).name===t)return a.value;return null}return this.each((e==null?yl:vl)(r,t,e))}function ue(t,e,r){var n=t._id;return t.each(function(){var o=q(this,n);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return Y(o,n).value[e]}}function Cr(t,e){var r;return(typeof e=="number"?L:e instanceof it?Nt:(r=it(e))?(e=r,Nt):Me)(t,e)}function wl(t){return function(){this.removeAttribute(t)}}function _l(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bl(t,e,r){var n,o=r+"",i;return function(){var a=this.getAttribute(t);return a===o?null:a===n?i:i=e(n=a,r)}}function Ml(t,e,r){var n,o=r+"",i;return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===n?i:i=e(n=a,r)}}function Tl(t,e,r){var n,o,i;return function(){var a,u=r(this),f;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=u+"",a===f?null:a===n&&f===o?i:(o=f,i=e(n=a,u)))}}function Sl(t,e,r){var n,o,i;return function(){var a,u=r(this),f;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=u+"",a===f?null:a===n&&f===o?i:(o=f,i=e(n=a,u)))}}function wa(t,e){var r=mt(t),n=r==="transform"?Jr:Cr;return this.attrTween(t,typeof e=="function"?(r.local?Sl:Tl)(r,n,ue(this,"attr."+t,e)):e==null?(r.local?_l:wl)(r):(r.local?Ml:bl)(r,n,e))}function kl(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Dl(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Cl(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&Dl(t,i)),r}return o._value=e,o}function Al(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&kl(t,i)),r}return o._value=e,o}function _a(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=mt(t);return this.tween(r,(n.local?Cl:Al)(n,e))}function Il(t,e){return function(){Ye(this,t).delay=+e.apply(this,arguments)}}function Nl(t,e){return e=+e,function(){Ye(this,t).delay=e}}function ba(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Il:Nl)(e,t)):Y(this.node(),e).delay}function El(t,e){return function(){q(this,t).duration=+e.apply(this,arguments)}}function Ul(t,e){return e=+e,function(){q(this,t).duration=e}}function Ma(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?El:Ul)(e,t)):Y(this.node(),e).duration}function $l(t,e){if(typeof e!="function")throw new Error;return function(){q(this,t).ease=e}}function Ta(t){var e=this._id;return arguments.length?this.each($l(e,t)):Y(this.node(),e).ease}function Ol(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;q(this,t).ease=r}}function Sa(t){if(typeof t!="function")throw new Error;return this.each(Ol(this._id,t))}function ka(t){typeof t!="function"&&(t=ge(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],a=i.length,u=n[o]=[],f,s=0;s<a;++s)(f=i[s])&&t.call(f,f.__data__,s,i)&&u.push(f);return new X(n,this._parents,this._name,this._id)}function Da(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,o=r.length,i=Math.min(n,o),a=new Array(n),u=0;u<i;++u)for(var f=e[u],s=r[u],l=f.length,m=a[u]=new Array(l),c,h=0;h<l;++h)(c=f[h]||s[h])&&(m[h]=c);for(;u<n;++u)a[u]=e[u];return new X(a,this._parents,this._name,this._id)}function Fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Rl(t,e,r){var n,o,i=Fl(e)?Ye:q;return function(){var a=i(this,t),u=a.on;u!==n&&(o=(n=u).copy()).on(e,r),a.on=o}}function Ca(t,e){var r=this._id;return arguments.length<2?Y(this.node(),r).on.on(t):this.each(Rl(r,t,e))}function zl(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Aa(){return this.on("end.remove",zl(this._id))}function Ia(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ct(t));for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a)for(var u=n[a],f=u.length,s=i[a]=new Array(f),l,m,c=0;c<f;++c)(l=u[c])&&(m=t.call(l,l.__data__,c,u))&&("__data__"in l&&(m.__data__=l.__data__),s[c]=m,bt(s[c],e,r,c,s,Y(l,r)));return new X(i,this._parents,e,r)}function Na(t){var e=this._name,r=this._id;typeof t!="function"&&(t=xe(t));for(var n=this._groups,o=n.length,i=[],a=[],u=0;u<o;++u)for(var f=n[u],s=f.length,l,m=0;m<s;++m)if(l=f[m]){for(var c=t.call(l,l.__data__,m,f),h,d=Y(l,r),w=0,D=c.length;w<D;++w)(h=c[w])&&bt(h,e,r,w,c,d);i.push(c),a.push(l)}return new X(i,a,e,r)}var Yl=ht.prototype.constructor;function Ea(){return new Yl(this._groups,this._parents)}function Pl(t,e){var r,n,o;return function(){var i=gt(this,t),a=(this.style.removeProperty(t),gt(this,t));return i===a?null:i===r&&a===n?o:o=e(r=i,n=a)}}function Ua(t){return function(){this.style.removeProperty(t)}}function Hl(t,e,r){var n,o=r+"",i;return function(){var a=gt(this,t);return a===o?null:a===n?i:i=e(n=a,r)}}function Ll(t,e,r){var n,o,i;return function(){var a=gt(this,t),u=r(this),f=u+"";return u==null&&(f=u=(this.style.removeProperty(t),gt(this,t))),a===f?null:a===n&&f===o?i:(o=f,i=e(n=a,u))}}function Vl(t,e){var r,n,o,i="style."+e,a="end."+i,u;return function(){var f=q(this,t),s=f.on,l=f.value[i]==null?u||(u=Ua(e)):void 0;(s!==r||o!==l)&&(n=(r=s).copy()).on(a,o=l),f.on=n}}function $a(t,e,r){var n=(t+="")=="transform"?Kr:Cr;return e==null?this.styleTween(t,Pl(t,n)).on("end.style."+t,Ua(t)):typeof e=="function"?this.styleTween(t,Ll(t,n,ue(this,"style."+t,e))).each(Vl(this._id,t)):this.styleTween(t,Hl(t,n,e),r).on("end.style."+t,null)}function ql(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function Wl(t,e,r){var n,o;function i(){var a=e.apply(this,arguments);return a!==o&&(n=(o=a)&&ql(t,a,r)),n}return i._value=e,i}function Oa(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Wl(t,e,r??""))}function Bl(t){return function(){this.textContent=t}}function Xl(t){return function(){var e=t(this);this.textContent=e??""}}function Fa(t){return this.tween("text",typeof t=="function"?Xl(ue(this,"text",t)):Bl(t==null?"":t+""))}function Zl(t){return function(e){this.textContent=t.call(this,e)}}function Ql(t){var e,r;function n(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&Zl(o)),e}return n._value=t,n}function Ra(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ql(t))}function za(){for(var t=this._name,e=this._id,r=Ar(),n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],u=a.length,f,s=0;s<u;++s)if(f=a[s]){var l=Y(f,e);bt(f,t,r,s,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new X(n,this._parents,t,r)}function Ya(){var t,e,r=this,n=r._id,o=r.size();return new Promise(function(i,a){var u={value:a},f={value:function(){--o===0&&i()}};r.each(function(){var s=q(this,n),l=s.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(f)),s.on=e}),o===0&&i()})}var Gl=0;function X(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Pa(t){return ht().transition(t)}function Ar(){return++Gl}var xt=ht.prototype;X.prototype=Pa.prototype={constructor:X,select:Ia,selectAll:Na,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:ka,merge:Da,selection:Ea,transition:za,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:Ca,attr:wa,attrTween:_a,style:$a,styleTween:Oa,text:Fa,textTween:Ra,remove:Aa,tween:va,delay:ba,duration:Ma,ease:Ta,easeVarying:Sa,end:Ya,[Symbol.iterator]:xt[Symbol.iterator]};function Ir(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Kl={time:null,delay:0,duration:250,ease:Ir};function Jl(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Ha(t){var e,r;t instanceof X?(e=t._id,t=t._name):(e=Ar(),(r=Kl).time=Re(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],u=a.length,f,s=0;s<u;++s)(f=a[s])&&bt(f,t,e,s,a,r||Jl(f,e));return new X(n,this._parents,t,e)}ht.prototype.interrupt=ya;ht.prototype.transition=Ha;var{abs:Ey,max:Uy,min:$y}=Math;function La(t){return[+t[0],+t[1]]}function jl(t){return[La(t[0]),La(t[1])]}var Oy={name:"x",handles:["w","e"].map(An),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Fy={name:"y",handles:["n","s"].map(An),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ry={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(An),input:function(t){return t==null?null:jl(t)},output:function(t){return t}};function An(t){return{type:t}}function Mt(t,e,r){this.k=t,this.x=e,this.y=r}Mt.prototype={constructor:Mt,scale:function(t){return t===1?this:new Mt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Mt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var In=new Mt(1,0,0);Nn.prototype=Mt.prototype;function Nn(t){for(;!t.__zoom;)if(!(t=t.parentNode))return In;return t.__zoom}export{Vn as a,qn as b,tu as c,eu as d,Ju as e,Et as f,mn as g,mr as h,qi as i,Zi as j,ol as k,il as l,al as m,sl as n,Ln as o};
